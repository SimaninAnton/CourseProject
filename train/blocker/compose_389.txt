slinstaedt commented on 22 Nov 2018
When using "docker-compose events" container destroyed events are not shown, even though they are generated by docker itself.
Output of docker-compose version
docker-compose version 1.23.1, build b02f1306
docker-py version: 3.5.0
CPython version: 3.6.6
OpenSSL version: OpenSSL 1.1.0h  27 Mar 2018
Output of docker version
Client: Docker Engine - Community
 Version:           18.09.0
 API version:       1.39
 Go version:        go1.10.4
 Git commit:        4d60db4
 Built:             Wed Nov  7 00:47:43 2018
 OS/Arch:           darwin/amd64
 Experimental:      false

Server: Docker Engine - Community
 Engine:
  Version:          18.09.0
  API version:      1.39 (minimum version 1.12)
  Go version:       go1.10.4
  Git commit:       4d60db4
  Built:            Wed Nov  7 00:55:00 2018
  OS/Arch:          linux/amd64
  Experimental:     false
Output of docker-compose config
(Make sure to add the relevant -f and other flags)
services:
  hello:
    image: hello-world
version: '3.0'
Steps to reproduce the issue
Compare:
docker-compose events &
docker-compose up
docker-compose down
with
docker events --filter=type=container &
docker-compose up
docker-compose down
Observed result
2018-11-22 15:14:42.067545 container create 9767377cf6a576b73632c8ab7defb58c0dac51ec9212f09d862b5c288c59a8f7 (image=hello-world, name=docker-composer_hello_1_e3895d8ea937)
2018-11-22 15:14:42.084831 container attach 9767377cf6a576b73632c8ab7defb58c0dac51ec9212f09d862b5c288c59a8f7 (image=hello-world, name=docker-composer_hello_1_e3895d8ea937)
2018-11-22 15:14:42.654275 container start 9767377cf6a576b73632c8ab7defb58c0dac51ec9212f09d862b5c288c59a8f7 (image=hello-world, name=docker-composer_hello_1_e3895d8ea937)
2018-11-22 15:14:42.774647 container die 9767377cf6a576b73632c8ab7defb58c0dac51ec9212f09d862b5c288c59a8f7 (image=hello-world, name=docker-composer_hello_1_e3895d8ea937)
Expected result
2018-11-22T15:15:18.112918200+01:00 container create 8da39f0308b3f584606548df256e2bc161aacb683419917d203678688b310794 (com.docker.compose.config-hash=22e81a07349b37675f247bfe03a045dc80de04b082b3a396eb5e5f6ba313956b, com.docker.compose.container-number=1, com.docker.compose.oneoff=False, com.docker.compose.project=docker-composer, com.docker.compose.service=hello, com.docker.compose.slug=bc6436f59b6de14f3fb5f1bffa0633633fb9c1979ec4628fc4354d83f719726, com.docker.compose.version=1.23.1, image=hello-world, name=docker-composer_hello_1_bc6436f59b6d)
2018-11-22T15:15:18.127280300+01:00 container attach 8da39f0308b3f584606548df256e2bc161aacb683419917d203678688b310794 (com.docker.compose.config-hash=22e81a07349b37675f247bfe03a045dc80de04b082b3a396eb5e5f6ba313956b, com.docker.compose.container-number=1, com.docker.compose.oneoff=False, com.docker.compose.project=docker-composer, com.docker.compose.service=hello, com.docker.compose.slug=bc6436f59b6de14f3fb5f1bffa0633633fb9c1979ec4628fc4354d83f719726, com.docker.compose.version=1.23.1, image=hello-world, name=docker-composer_hello_1_bc6436f59b6d)
2018-11-22T15:15:18.683667800+01:00 container start 8da39f0308b3f584606548df256e2bc161aacb683419917d203678688b310794 (com.docker.compose.config-hash=22e81a07349b37675f247bfe03a045dc80de04b082b3a396eb5e5f6ba313956b, com.docker.compose.container-number=1, com.docker.compose.oneoff=False, com.docker.compose.project=docker-composer, com.docker.compose.service=hello, com.docker.compose.slug=bc6436f59b6de14f3fb5f1bffa0633633fb9c1979ec4628fc4354d83f719726, com.docker.compose.version=1.23.1, image=hello-world, name=docker-composer_hello_1_bc6436f59b6d)
2018-11-22T15:15:18.821344800+01:00 container die 8da39f0308b3f584606548df256e2bc161aacb683419917d203678688b310794 (com.docker.compose.config-hash=22e81a07349b37675f247bfe03a045dc80de04b082b3a396eb5e5f6ba313956b, com.docker.compose.container-number=1, com.docker.compose.oneoff=False, com.docker.compose.project=docker-composer, com.docker.compose.service=hello, com.docker.compose.slug=bc6436f59b6de14f3fb5f1bffa0633633fb9c1979ec4628fc4354d83f719726, com.docker.compose.version=1.23.1, exitCode=0, image=hello-world, name=docker-composer_hello_1_bc6436f59b6d)
2018-11-22T15:15:22.065739100+01:00 container destroy 8da39f0308b3f584606548df256e2bc161aacb683419917d203678688b310794 (com.docker.compose.config-hash=22e81a07349b37675f247bfe03a045dc80de04b082b3a396eb5e5f6ba313956b, com.docker.compose.container-number=1, com.docker.compose.oneoff=False, com.docker.compose.project=docker-composer, com.docker.compose.service=hello, com.docker.compose.slug=bc6436f59b6de14f3fb5f1bffa0633633fb9c1979ec4628fc4354d83f719726, com.docker.compose.version=1.23.1, image=hello-world, name=docker-composer_hello_1_bc6436f59b6d)
Contributor
starrify commented on Nov 8, 2018 ‚Ä¢
edited
Recently I observed people writing something like this (when using Python 3.3+):
# coding: utf8

import scrapy


class TestSpider(scrapy.Spider):
    name = 'test'
    start_urls = ['http://httpbin.org/get']

    def parse(self, response):
        yield scrapy.Request('http://httpbin.org/get?foo=bar')
        return {'url': response.url}
That won't work as expected as the return <some value> statement here, as defined in PEP-380, is just equivalent to raise StopIteration(<some value>).
Sample job logs: link
Currently (as of dc65e75) Scrapy simply ignores the "returned" value, which might be causing confusions to users. Sample job log of the code above: link
A proposal is to generate an error (or at least warning) when such cases happen (StopIteration observed to have an value).
üëç 5
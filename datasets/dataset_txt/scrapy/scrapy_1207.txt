Member
kmike commented on Jun 4, 2015
When CrawlerProcess is started with stop_after_crawl=True (default) and user presses Ctrl-C the following happens:
Ctrl-C signal handler is changed to "unclean shutown" so that second Ctrl-C will definitely stop the reactor;
self.stop method is called which asks all crawlers to stop;
when all crawlers are stopped a Deferred returned from self.join() executes its callback. This callback is set to "stop reactor", so the reactor stops.
But with crawler_process.start(stop_after_crawl=False) there is no step (3) because self.join is not used. It means that to stop CrawlerProcess user have to send signal (press Ctrl-C) twice. The first Ctrl-C only asks all current crawlers to stop.
I think it is better to change it - a signal should mean "graceful shutdown" regardless of stop_after_crawl option.
pawneetdev commented on Jul 4, 2016 ‚Ä¢
edited
Scrapy logs [partial] when using proxy to scrape and does not return any data. I am using proxymesh.
middleware.py
import base64

class ProxyMiddleware(object):
    process_request(self, request, spider):
    request.meta['proxy'] = "http://......"

    proxy_user_pass = "username:password"

    encoded_user_pass = base64.encodestring(proxy_user_pass)
    request.headers['Proxy-Authorization'] = 'Basic ' + encoded_user_pass
settings.py
DOWNLOADER_MIDDLEWARES = {
    'scrapy.contrib.downloadermiddleware.httpproxy.HttpProxyMiddleware': 1,
    'mcaScrapy.middlewares.ProxyMiddleware': 100,
}
Output
2016-05-02 11:30:06 [scrapy] DEBUG: Crawled (200) <GET http://example.com/....> (referer: http://example.com/....) ['partial']
2016-05-02 11:30:06 [scrapy] DEBUG: Crawled (200) <POST http://example.com/....> (referer: http://example.com/....) ['partial']
2016-05-02 11:30:06 [scrapy] DEBUG: Crawled (200) <POST http://example.com/....> (referer: http://example.com/....) ['partial']
üëç 2
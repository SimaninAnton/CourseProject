sshoop commented on Nov 14, 2018
class MongoPipeline(object):
    def __init__(self, mongo_url, mongo_db):
        self.mongo_url = mongo_url
        self.mongo_db = mongo_db

    @classmethod
    def from_crawler(cls, crawler):
        return cls(
            mongo_url=crawler.settings.get('MONGO_URL'),
            mongo_db=crawler.settings.get('MONGO_DB')
        )

    def open_spider(self, spider):
        self.client = pymongo.MongoClient(),
        self.db = self.client[self.mongo_db]

    def close_spider(self, spider):
        self.client.close()
i want to store item in mongodb, but when i use a pipeline, scrapy occurs errors.
this is error message:
yield self.engine.open_spider(self.spider, start_requests)
TypeError: tuple indices must be integers or slices, not str
and i print slef.client, it shows that the self.client is a tuple, not <class 'pymongo.mongo_client.MongoClient'>
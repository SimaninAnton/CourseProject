caizixian commented on Sep 8, 2016
For example, if I have a spider like this
import time

class Spider1(scrapy.Spider):
    name = "spider"
    allowed_domains = ["example.com"]
    start_urls = ["https://www.example.com/index.html"]
    def parse(self, response):
        for page in range(1,5000000):
            request = scrapy.Request("https://www.example.com/{}.html".format(page),
                                     method='POST',
                                     body=json.dumps({"time":time.time()}))
            yield request
All the time in POST requests will be the time when the request is scheduled.
What should I do to make the time be the actual time when the request is sent.
Tried to write middlewares to fill in the parameters, but it seems that the middleware methods are also called when the request is scheduled.
mercutio79 commented on Nov 15, 2014
retrieving a gzipped sitemap xml (tested on amazon.de) fails.
Reproduce with :
modify /utils/gz.py gunzip method to write the incoming data to a file.
gunzip the file on the command line.
the unzipped file contains garbled content
gunzip that file with garbled content a second time and get the correct content
-> I suspect that the content coming from the target server is already gzip compressed and scrapy has a bug that causes the gzip decompression to not work properly, resulting in a double compressed file arriving at the /utils/gz.py gunzip method
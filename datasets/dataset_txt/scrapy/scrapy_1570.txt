Contributor
vkrest commented on Nov 13, 2012
Take a look at 'httpcompression' middleware and 'sitemap' middleware.
If you will try to download some gzipped file then 'httpcompression' middleware will decompress it first.
See it here:
https://github.com/scrapy/scrapy/blob/master/scrapy/contrib/downloadermiddleware/httpcompression.py#L36
Then 'sitemap' will try to decompress it again and will rise the IOError here:
https://github.com/scrapy/scrapy/blob/master/scrapy/contrib/spiders/sitemap.py#L57
In my point of view we have to leave only one place for decompression and it will be reasonable if it will be 'httpcompression'.
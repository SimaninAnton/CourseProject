Mactarvish commented on Mar 1, 2019 â€¢
edited
Hi, I'm trying to write my own RetryMiddleware to handle exceptions, but I noticed that the process_exception in my RetryMiddleware only works when RETRY_TIMES is up. Is there any way to handle exceptions within the RETRY_TIMES? Thanks in advance.
That's my RetryMiddleware ...
`class XiciRetryMiddleware(RetryMiddleware):
def process_exception(self, request, exception, spider):
if isinstance(exception, self.EXCEPTIONS_TO_RETRY)
and not request.meta.get('dont_retry', False):
self.delete_proxy(spider)
# time.sleep(random.randint(3, 5))
request.meta['retry_times'] = 0
return self._retry(request, exception, spider)
def process_response(self, request, response, spider):
    return response`
vidarlee commented on Aug 22, 2018
The example in the document Item Exporters
called the file attribute of XmlItemExporter instance as follow:
    def close_spider(self, spider):
        for exporter in self.year_to_exporter.values():
            exporter.finish_exporting()
            exporter.file.close()
I checked the source of scrapy/scrapy/exporters.py,
actually, there is no attribute named 'file' in XmlItemExporter.
So, when i run the script the error occurred:
"AttributeError: 'XmlItemExporter' object has no attribute 'file'".
Also, there is no 'file' attribute in CsvItemExporter while exists in JsonItemExporter,
PickleItemExporter, MarshalItemExporter , PprintItemExporter.
I think it is necessary to and a file descriptor attribute into XmlItemExporter and CsvItemExporter for consistency. Also the file descriptor should be closed when exporting has been finished.
If the file descriptor attribute will add to XmlItemExporter and CsvItemExporter, then i have another question:
Is it a good idea to add the self.file.close() into the function finish_exporting()?
It seems it is simple for user just call function finish_exporting() and won't care about the file descriptor whether closed.
üëç 1
AndrewMishchenko commented on Nov 28, 2017 â€¢
edited
I'm trying to scrape one https site. Also i build spider for it and the problem is next:
It is work perfect without proxy. It scrape 100% pages and very fast.
When i'm trying to scrape through proxy(crawlera and etc) through time it raise timeout(at all works not stable) and i don't know what to do with this.
Heders i'm using:
'Host': '.....,
'Connection': 'keep-alive',
'Pragma': 'no-cache',
'Cache-Control': 'no-cache',
'User-Agent': 'Mozilla/4.0 (compatible; MSIE 10.0; Windows NT 6.1; Trident/5.0)',
'DNT': '1',
'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,/;q=0.8',
'Accept-Encoding': 'gzip, deflate, br',
'Accept-Language': 'en-US,en;q=0.8',
'Upgrade-Insecure-Requests': '1',
'X-Requested-With': 'XMLHttpRequest',
'Referer': '....',
Also i was trying to add 'DOWNLOADER_CLIENT_TLS_METHOD': 'TLSv1.2' - it doesn't help!
and write something like:
class SClientContextFactory(ScrapyClientContextFactory):
def init(self, method=SSL.TLSv1_2_METHOD):
self.method = method
I'm 100 percent sure that the problem is not in the proxy
Can someone help me?
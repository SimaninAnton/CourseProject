jwfang commented on Apr 9, 2012
For example, when scraping Google's search result,
in the spider code, return scrapped result as well as make_request_from_url with the "Next Page" link.
The Slot in Downloader will get "created .. deleted .. created .. deleted ..." in a loop, with lastseen always been 0.
When lastseen is 0, delay = delay - now + 0 will be negative so the DELAY logic in _process_queue will be skipped.
I think make Slot.lastseen initialized to time() in init could fix this case, but not quite sure if this change has other effects.
ChristopherLucas commented on Jun 13, 2016 â€¢
edited
Hi,
Thanks for the great software.
I'm trying to import the 'newspaper' module. However, I'm running into an error, which I can't sort. I'm using scrapy-1.1.0rc1.
Scrapy was only initilializing with Python2 libraries, so I had to append the directory where 'newspaper' is installed to path. However, I'm getting a downstream import error. Any help would be much appreciated. I looked in the documentation but couldn't find anything.
Thanks! Code and error below.
import scrapy
from scrapy.spiders import CrawlSpider, Rule
from scrapy.linkextractors import LinkExtractor
from newspapers.items import NewspapersItem

import sys
print(sys.path)
sys.path.extend(['/home/christopher/.local/lib/python3.5/site-packages'])
print(sys.path)
import newspaper

class NewspaperSpider(CrawlSpider):
  # Spider here
And output.
$ scrapy crawl newspapers -o newspapers.json -t json
['/usr/bin', '/usr/lib/python27.zip', '/usr/lib/python2.7', '/usr/lib/python2.7/plat-linux2', '/usr/lib/python2.7/lib-tk', '/usr/lib/python2.7/lib-old', '/usr/lib/python2.7/lib-dynload', '/usr/lib/python2.7/site-packages', '/usr/lib/python2.7/site-packages/gtk-2.0', '/home/christopher/Misc/scrapy_sandbox/newspapers']
['/usr/bin', '/usr/lib/python27.zip', '/usr/lib/python2.7', '/usr/lib/python2.7/plat-linux2', '/usr/lib/python2.7/lib-tk', '/usr/lib/python2.7/lib-old', '/usr/lib/python2.7/lib-dynload', '/usr/lib/python2.7/site-packages', '/usr/lib/python2.7/site-packages/gtk-2.0', '/home/christopher/Misc/scrapy_sandbox/newspapers', '/home/christopher/.local/lib/python3.5/site-packages']
Traceback (most recent call last):
  File "/usr/bin/scrapy", line 9, in <module>
    load_entry_point('Scrapy==1.0.5', 'console_scripts', 'scrapy')()
  File "/usr/lib/python2.7/site-packages/scrapy/cmdline.py", line 142, in execute
    cmd.crawler_process = CrawlerProcess(settings)
  File "/usr/lib/python2.7/site-packages/scrapy/crawler.py", line 209, in __init__
    super(CrawlerProcess, self).__init__(settings)
  File "/usr/lib/python2.7/site-packages/scrapy/crawler.py", line 115, in __init__
    self.spider_loader = _get_spider_loader(settings)
  File "/usr/lib/python2.7/site-packages/scrapy/crawler.py", line 296, in _get_spider_loader
    return loader_cls.from_settings(settings.frozencopy())
  File "/usr/lib/python2.7/site-packages/scrapy/spiderloader.py", line 30, in from_settings
    return cls(settings)
  File "/usr/lib/python2.7/site-packages/scrapy/spiderloader.py", line 21, in __init__
    for module in walk_modules(name):
  File "/usr/lib/python2.7/site-packages/scrapy/utils/misc.py", line 71, in walk_modules
    submod = import_module(fullpath)
  File "/usr/lib/python2.7/importlib/__init__.py", line 37, in import_module
    __import__(name)
  File "/home/christopher/Misc/scrapy_sandbox/newspapers/newspapers/spiders/newspaper_spider.py", line 10, in <module>
    import newspaper
  File "/home/christopher/.local/lib/python3.5/site-packages/newspaper/__init__.py", line 10, in <module>
    from .article import Article, ArticleException
  File "/home/christopher/.local/lib/python3.5/site-packages/newspaper/article.py", line 12, in <module>
    from . import images
  File "/home/christopher/.local/lib/python3.5/site-packages/newspaper/images.py", line 15, in <module>
    import urllib.request
ImportError: No module named request
aslijiasheng commented on Apr 27, 2016 â€¢
edited by redapple
I am trying to crawl latest reviews from http://www.ci123.com/category.php/8029/848/ store but return 404 http codes.
with the the postman post request works and I get desired response

but use scrapy post request return 404
import scrapy
from scrapy.http import FormRequest

class DmozSpider(scrapy.Spider):
    name = "ci123"
    allowed_domains = ["ci123.com"]

    def start_requests(self):
        return [ FormRequest("http://www.ci123.com/category.php/8029/848/",
            formdata={'someparam': 'foo', 'otherparam': 'bar'},
            callback=self.parse, method = "POST") ]

    def parse(self, response):
        return scrapy.FormRequest.from_response(
                response,
                formdata={'username': 'john', 'password': 'secret'},
                callback=self.after_login
                )
    def after_login(self, response):
            # check login succeed before going on
        if "authentication failed" in response.body:
            self.logger.error("Login failed")
            return

        # continue scraping with authenticated session...
codes problem??
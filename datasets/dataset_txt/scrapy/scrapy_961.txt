hsh075623201 commented on Apr 14, 2016
Hello,
url == "http://113.108.216.86/api/roll/get?pageid=155&lid=1686&num=10&page=1
headers = {
                    "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8",
                    "Accept-Language": "zh-CN,zh;q=0.8",
                    "Connection": "keep-alive",
                    "Host": "feed.mix.sina.com.cn",
                    "Upgrade-Insecure-Requests": "1",
                    "User-Agent": "Mozilla/5.0 (Windows NT 6.3; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/49.0.2623.112 Safari/537.36"
                }
                Request(url, dont_filter=True,headers=headers)
The code get errors as bellow:
2016-04-14 17:51:39 [scrapy] DEBUG: Crawled (404) <GET http://113.108.216.86/api/roll/get?pageid=155&lid=1686&num=10&page=1> (referer: None)
2016-04-14 17:51:40 [scrapy] DEBUG: Ignoring response <404 http://113.108.216.86/api/roll/get?pageid=155&lid=1686&num=10&page=1>: HTTP status code is not handled or not allowed
but , similar code when i use requests module ,it works. pls see bellow:
headers = {
        "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8",
        "Accept-Language": "zh-CN,zh;q=0.8",
        "Connection": "keep-alive",
        "Host": "feed.mix.sina.com.cn",
        "Upgrade-Insecure-Requests": "1",
        "User-Agent": "Mozilla/5.0 (Windows NT 6.3; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/49.0.2623.112 Safari/537.36"
    }
    res = requests.get("http://113.108.216.86/api/roll/get?pageid=155&lid=1686&num=10&page=1", headers=headers)
So, how can I use parameter headers in scrapy?
Thanks very much in advance!!
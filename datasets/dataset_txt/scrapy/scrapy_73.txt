jvani commented on Aug 29, 2019 â€¢
edited
Description
Contracts can't be written for callbacks that receive cb_kwargs
Steps to Reproduce
Run scrapy check with the following spider:
class CbKwargsContract(scrapy.Spider):
    name = 'cb_kwargs_contract'

    def start_requests(self):
        yield scrapy.Request("https://httpbin.org/get", cb_kwargs={"arg1": "foo"})

    def parse(self, response, arg1):
        """
        @url https://httpbin.org/get
        """
        self.logger.info(arg1)
Expected behavior:
Ideally would be possible to add args to the contract (e.g., @url https://httpbin.org/get foo)
Actual behavior: Fails with a TypeError
Reproduces how often: 100%
Versions
Scrapy 1.7.3
fabouille commented on Nov 17, 2018 â€¢
edited
I'm trying to use scrapy with the proxy / captcha / rendering service "scraperapi" but for some reason all my requests fail with the error below:
[scrapy.core.scraper] ERROR: Error downloading <GET https://api.scraperapi.com?key=private_key&url=https://www.leboncoin.fr>
Traceback (most recent call last):
  File "scrapy\core\downloader\middleware.py", line 43, in process_request
    defer.returnValue((yield download_func(request=request,spider=spider)))
twisted.web._newclient.ResponseNeverReceived: [<twisted.python.failure.Failure twisted.internet.error.ConnectionDone: Connection was closed cleanly.>]
The same request works fine in chrome, postman or a regular python request though. Would anyone have experience with using scrapy in combination with scraperapi or know what could cause the issue?
I'm using the following setup
Scrapy       : 1.5.1
lxml         : 4.2.5.0
libxml2      : 2.9.8
cssselect    : 1.0.3
parsel       : 1.4.0
w3lib        : 1.19.0
Twisted      : 18.7.0
Python       : 3.7.0 (default, Jun 28 2018, 08:04:48) [MSC v.1912 64 bit (AMD64)]
pyOpenSSL    : 18.0.0 (OpenSSL 1.0.2p  14 Aug 2018)
cryptography : 2.3.1
Platform     : Windows-10-10.0.17134-SP0
Thanks
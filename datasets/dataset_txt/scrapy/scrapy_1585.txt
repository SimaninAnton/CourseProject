kcwu commented on Aug 4, 2012
I am using FreeBSD, not Linux.
Just follow tutorial, I got exception from scrapy.
2012-08-05 00:05:03+0800 [scrapy] ERROR: Error caught on signal handler: <bound method ?.engine_started of <scrapy.contrib.memusage.MemoryUsage object at 0x80935bf10>>
Traceback (most recent call last):
File "/home/data/virtualenv/scrapy/lib/python2.7/site-packages/twisted/internet/defer.py", line 1187, in unwindGenerator
return _inlineCallbacks(None, gen, Deferred())
File "/home/data/virtualenv/scrapy/lib/python2.7/site-packages/twisted/internet/defer.py", line 1045, in _inlineCallbacks
result = g.send(result)
File "/home/data/virtualenv/scrapy/lib/python2.7/site-packages/scrapy/core/engine.py", line 74, in start
yield send_catch_log_deferred(signal=signals.engine_started)
File "/home/data/virtualenv/scrapy/lib/python2.7/site-packages/scrapy/utils/signal.py", line 53, in send_catch_log_deferred
_arguments, *_named)
--- ---
File "/home/data/virtualenv/scrapy/lib/python2.7/site-packages/twisted/internet/defer.py", line 134, in maybeDeferred
result = f(_args, *_kw)
File "/home/data/virtualenv/scrapy/lib/python2.7/site-packages/scrapy/xlib/pydispatch/robustapply.py", line 47, in robustApply
return receiver(_arguments, *_named)
File "/home/data/virtualenv/scrapy/lib/python2.7/site-packages/scrapy/contrib/memusage.py", line 47, in engine_started
stats.set_value('memusage/startup', self.get_virtual_size())
File "/home/data/virtualenv/scrapy/lib/python2.7/site-packages/scrapy/contrib/memusage.py", line 44, in get_virtual_size
return get_vmvalue_from_procfs('VmSize')
File "/home/data/virtualenv/scrapy/lib/python2.7/site-packages/scrapy/utils/memory.py", line 26, in get_vmvalue_from_procfs
i = v.index(vmkey + ':')
exceptions.ValueError: substring not found
On FreeBSD, the format of /proc/[pid]/status is different to Linux.
And no memory usage inside.
ref: http://www.unix.com/man-page/FreeBSD/5/procfs/
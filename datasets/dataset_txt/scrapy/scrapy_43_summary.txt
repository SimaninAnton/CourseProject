OffsiteMiddleware doesn't seem to work properly
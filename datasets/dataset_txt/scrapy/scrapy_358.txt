ntindicator commented on Jun 20, 2018
In the settings file I specified the AWS_REGION_NAME = 'ap-southeast-1', but it's not used and it generates errors. It still manages to upload to the correct region after it errors. Scrapy 1.5 is being used - INFO: Scrapy 1.5.0 started
2018-06-20 11:06:05 [botocore.parsers] DEBUG: Response body: b'<?xml version="1.0" encoding="UTF-8"?>\n<Error><Code>AuthorizationHeaderMalformed</Code><Message>The authorization header is malformed; the region \'us-east-1\' is wrong; expecting \'ap-southeast-1\'</Message><Region>ap-southeast-1</Region></Error>' 2018-06-20 11:06:05 [botocore.hooks] DEBUG: Event needs-retry.s3.PutObject: calling handler 2018-06-20 11:06:05 [botocore.retryhandler] DEBUG: No retry needed. 2018-06-20 11:06:05 [botocore.hooks] DEBUG: Event needs-retry.s3.PutObject: calling handler 2018-06-20 11:06:05 [botocore.utils] DEBUG: S3 client configured for region us-east-1 but the bucket bucket is in region ap-southeast-1; Please configure the proper region to avoid multiple unnecessary redirects and signing attempts. 2018-06-20 11:06:05 [botocore.utils] DEBUG: Updating URI from https://s3.amazonaws.com/filepath to https://s3.ap-southeast-1.amazonaws.com/filepath 2018-06-20 11:06:05 [botocore.endpoint] DEBUG: Response received to retry, sleeping for 0 seconds 2018-06-20 11:06:05 [botocore.awsrequest] DEBUG: Rewinding stream: 2018-06-20 11:06:05 [botocore.hooks] DEBUG: Event request-created.s3.PutObject: calling handler 2018-06-20 11:06:05 [botocore.hooks] DEBUG: Event choose-signer.s3.PutObject: calling handler 2018-06-20 11:06:05 [botocore.hooks] DEBUG: Event choose-signer.s3.PutObject: calling handler 2018-06-20 11:06:05 [botocore.hooks] DEBUG: Event before-sign.s3.PutObject: calling handler 2018-06-20 11:06:05 [botocore.utils] DEBUG: Checking for DNS compatible bucket for: https://s3.ap-southeast-1.amazonaws.com/filepath 2018-06-20 11:06:05 [botocore.utils] DEBUG: URI updated to: https://bucket.s3.ap-southeast-1.amazonaws.com/filepath 2018-06-20 11:06:05 [botocore.auth] DEBUG: Calculating signature using v4 auth.
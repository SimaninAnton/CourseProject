mikesxf commented on Sep 30, 2018 â€¢
edited
Hi
I'm getting a handshake failure when running:
scrapy shell https://androidappsapk.co
and the results:
Traceback (most recent call last):
File "/usr/local/bin/scrapy", line 11, in
sys.exit(execute())
File "/usr/local/lib/python2.7/dist-packages/scrapy/cmdline.py", line 149, in execute
_run_print_help(parser, _run_command, cmd, args, opts)
File "/usr/local/lib/python2.7/dist-packages/scrapy/cmdline.py", line 89, in _run_print_help
func(*a, **kw)
File "/usr/local/lib/python2.7/dist-packages/scrapy/cmdline.py", line 156, in _run_command
cmd.run(args, opts)
File "/usr/local/lib/python2.7/dist-packages/scrapy/commands/shell.py", line 73, in run
shell.start(url=url, redirect=not opts.no_redirect)
File "/usr/local/lib/python2.7/dist-packages/scrapy/shell.py", line 48, in start
self.fetch(url, spider, redirect=redirect)
File "/usr/local/lib/python2.7/dist-packages/scrapy/shell.py", line 115, in fetch
reactor, self._schedule, request, spider)
File "/usr/lib/python2.7/dist-packages/twisted/internet/threads.py", line 122, in blockingCallFromThread
result.raiseException()
File "string", line 2, in raiseException
twisted.web._newclient.ResponseNeverReceived: [<twisted.python.failure.Failure <class 'OpenSSL.SSL.Error'>>]
I have read many issues about this problem, but I am sorry that I can't get the point on how to solve it. And I wonder whether it can be solved by updating scrapy or openssl as I am using old version of scrapy and openssl. My environment:
Scrapy : 1.4.0
lxml : 3.3.3.0
libxml2 : 2.9.1
cssselect : 1.0.1
parsel : 1.2.0
w3lib : 1.17.0
Twisted : 13.2.0
Python : 2.7.6 (default, Oct 26 2016, 20:30:19) - [GCC 4.8.4]
pyOpenSSL : 0.13 (OpenSSL 1.0.1f 6 Jan 2014)
Platform : Linux-3.13.0-144-generic-x86_64-with-Ubuntu-14.04-trusty
When I use wireshark to capture the traffic, it shows that after client hello, server return
TLSv1 Record Layer: Alert (Level: Fatal, Description: Handshake Failure)
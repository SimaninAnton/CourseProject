mohdhashimpa commented on Jan 31, 2018 ‚Ä¢
edited
There was an issue in parsing "title" from the HTML file attached.
test.txt
Sample HTML :
<html>
   <head>
      <div></div>
      <title>Gas safety - 10 tips that could save your life</title>
   </head>
   <body>
   </body>
</html>
response.xpath('/html/head/title/text()').extract()
The above was returing empty array.
But title was successfully parsed from the following expression
response.xpath('//title/text()').extract()
I have reproduced this issue in lxml using the following code.
from lxml import etree
with open('./test.txt', 'r') as test_html:
  file_contents = test_html.read()
  tree = etree.HTML(file_contents)
  print('via head specified xpath expression : ',tree.xpath('/html/head/title/text()'))
  print('via take every title xpath expression : ',tree.xpath('//title/text()'))
Seems the issue is caused by the div tag.
If that tag is removed, it works properly.
üëç 3
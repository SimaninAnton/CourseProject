Member
lopuhin commented on Sep 1, 2016 â€¢
edited
It would be nice to enable pypy tests on travis, mention pypy support in the docs and benchmark a couple of spiders.
What is currently broken in tests:
#2030 - there are failing signals tests under PyPy (old signals also didn't work under PyPy) - probably it's better to fix them after the merge, since the PR is already big.
There are some failures with encoding (different number of <?> inserted), filed https://bitbucket.org/pypy/pypy/issues/2389/different-behavior-of-bytesdecode-utf8
Failure in ImagesPipelineTestCase.test_convert_image looks like a Pillow bug under PyPy?
There are some failures in tests that rely on implementations differences or bugs that are absent on PyPy - here just the tests must be updated.
Other tasks:
Test and document installation under PyPy (there can be more issues than for CPython due to missing or outdated binary wheels, e.g. pyca/cryptography#2138)
Status: 1 failure in https://github.com/rootAvish/scrapy/compare/signal-rewrite...lopuhin:pypy?expand=1
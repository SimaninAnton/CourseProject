pc2000sg commented on Dec 21, 2018
Certain website URL will not be correct during redirect in spider request resulting in 400 error. This is regardless of the user agent (chrome, firefox, etc) selected in setting file.
For example: when start url = https://www.watsons.com.sg/
Scrapy path becomes: https://queue.watsons.com.sg?c=aswatson&e=watsonprdsg&ver=v3-java-3.5.2&cver=55&cid=zh-CN&l=PoC+Layout+SG&t=https%3A%2F%2Fwww.watsons.com.sg%2F
Webbrowser path should be: https://queue.watsons.com.sg/?c=aswatson&e=watsonprdsg&ver=v3-java-3.5.2&cver=55&cid=zh-CN&l=PoC+Layout+SG&t=https%3A%2F%2Fwww.watsons.com.sg%2F
Tried workaround using download middleware but not working. Any way to solve this in scrapy level? Such that the request path will be the same as web browser behavior? Thanks.
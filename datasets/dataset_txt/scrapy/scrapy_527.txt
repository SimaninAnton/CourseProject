exotfboy commented on Oct 11, 2017
I have to connect to the spider singnal in my middleware, and I use this at the moment:
class XXXMiddleware(object):
    def __init__(self):
        dispatcher.connect(self.spider_closed, signals.spider_closed)
While I got the warning the Importing from scrapy.xlib.pydispatch is deprecated, ... and use from_crawler` instead.
Also I found this closed issue, and this is the suggested alternative:
@classmethod
def from_crawler(cls, crawler, *args, **kwargs):
    spider = super(MySpider, cls).from_crawler(crawler, *args, **kwargs)
    crawler.signals.connect(spider.spider_opened, signals.spider_opened)
    return spider
However in my case, I can not access the spider in the middleware, and I do not think middleware should be coupled with spider .
So how to connect to the spider singnal in middleware?
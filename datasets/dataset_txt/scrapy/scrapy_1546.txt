Contributor
coagulant commented on Mar 16, 2013
Whenever any of my contracts fail I get 2 errors insted of one: one real and one stated in issue title. (Scrapy 0.16.4)
scrapy check alpha
I suppose only relevant exceptions should be printed to stdout.
Traceback (most recent call last):
  File "/Users/prophet/.envs/project/lib/python2.7/site-packages/twisted/internet/base.py", line 1182, in mainLoop
    self.runUntilCurrent()
  File "/Users/prophet/.envsproject/lib/python2.7/site-packages/twisted/internet/base.py", line 805, in runUntilCurrent
    call.func(*call.args, **call.kw)
  File "/Users/prophet/.envs/project/lib/python2.7/site-packages/twisted/internet/defer.py", line 381, in callback
    self._startRunCallbacks(result)
  File "/Users/prophet/.envs/project/lib/python2.7/site-packages/twisted/internet/defer.py", line 489, in _startRunCallbacks
    self._runCallbacks()
--- <exception caught here> ---
  File "/Users/prophet/.envs/project/lib/python2.7/site-packages/twisted/internet/defer.py", line 576, in _runCallbacks
    current.result = callback(current.result, *args, **kw)
  File "/Users/prophet/.envs/project/lib/python2.7/site-packages/scrapy/commands/check.py", line 18, in wrapper
    output = cb(response)
  File "/Users/prophet/.envs/project/lib/python2.7/site-packages/scrapy/contracts/__init__.py", line 114, in wrapper
    return output
exceptions.UnboundLocalError: local variable 'output' referenced before assignment
F
======================================================================
ERROR: [alpha] parse_list (@returns post-hook)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/prophet/.envs/project/lib/python2.7/site-packages/scrapy/contracts/__init__.py", line 103, in wrapper
    output = list(iterate_spider_output(cb(response)))
TypeError: parse_list() takes exactly 3 arguments (2 given)
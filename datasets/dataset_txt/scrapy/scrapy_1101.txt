mbudge commented on Oct 28, 2015
Hi,
I'm trying to run a custom scrapy spider from a python script, however I can't figure out how to do this from the scrapy docs.
This page appears to be out of date otherwise it's in need of a few examples http://doc.scrapy.org/en/latest/topics/api.html?highlight=api
from spiders.scrapehomepagelinksspider import scrapehomepagelinksspider
from scrapy.utils.project import get_project_settings
from scrapy.crawler import Crawler
from scrapy.xlib.pydispatch import dispatcher
from scrapy import signals
from twisted.internet import reactor
def stop_reactor():
reactor.stop()
dispatcher.connect(stop_reactor, signal=signals.spider_closed)
settings = get_project_settings()
spider = scrapehomepagelinksspider('www.yahoo.com')
crawler = Crawler(settings)
crawler.crawl(spider)
links = reactor.run()
print links
Error
python scrapy1.py
Traceback (most recent call last):
File "scrapy1.py", line 26, in
crawler = Crawler(settings)
File "/home/matt/.local/lib/python2.7/site-packages/scrapy/crawler.py", line 32, in init
self.spidercls.update_settings(self.settings)
AttributeError: 'Settings' object has no attribute 'update_settings'
Thanks
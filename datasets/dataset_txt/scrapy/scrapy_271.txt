jiahaozhou commented on Oct 25, 2018
I just start with scrapy, I followed the tutorial, after enter scrapy crawl quotes I got an error.
(snowflakes) C:\Users\Jiaha\tutorial>scrapy crawl quotes
Traceback (most recent call last):
File "C:\Users\Jiaha\AppData\Local\conda\conda\envs\snowflakes\Scripts\scrapy-script.py", line 10, in
sys.exit(execute())
File "C:\Users\Jiaha\AppData\Local\conda\conda\envs\snowflakes\lib\site-packages\scrapy\cmdline.py", line 149, in execute
cmd.crawler_process = CrawlerProcess(settings)
File "C:\Users\Jiaha\AppData\Local\conda\conda\envs\snowflakes\lib\site-packages\scrapy\crawler.py", line 249, in init
super(CrawlerProcess, self).init(settings)
File "C:\Users\Jiaha\AppData\Local\conda\conda\envs\snowflakes\lib\site-packages\scrapy\crawler.py", line 137, in init
self.spider_loader = _get_spider_loader(settings)
File "C:\Users\Jiaha\AppData\Local\conda\conda\envs\snowflakes\lib\site-packages\scrapy\crawler.py", line 336, in _get_spider_loader
return loader_cls.from_settings(settings.frozencopy())
File "C:\Users\Jiaha\AppData\Local\conda\conda\envs\snowflakes\lib\site-packages\scrapy\spiderloader.py", line 61, in from_settings
return cls(settings)
File "C:\Users\Jiaha\AppData\Local\conda\conda\envs\snowflakes\lib\site-packages\scrapy\spiderloader.py", line 25, in init
self._load_all_spiders()
File "C:\Users\Jiaha\AppData\Local\conda\conda\envs\snowflakes\lib\site-packages\scrapy\spiderloader.py", line 47, in load_all_spiders
for module in walk_modules(name):
File "C:\Users\Jiaha\AppData\Local\conda\conda\envs\snowflakes\lib\site-packages\scrapy\utils\misc.py", line 71, in walk_modules
submod = import_module(fullpath)
File "C:\Users\Jiaha\AppData\Local\conda\conda\envs\snowflakes\lib\importlib_init.py", line 127, in import_module
return _bootstrap._gcd_import(name[level:], package, level)
File "", line 1006, in _gcd_import
File "", line 983, in _find_and_load
File "", line 967, in _find_and_load_unlocked
File "", line 677, in _load_unlocked
File "", line 728, in exec_module
File "", line 219, in _call_with_frames_removed
File "C:\Users\Jiaha\tutorial\tutorial\spiders\quotes_spider.py", line 33, in
"execution_count": null,
NameError: name 'null' is not defined
(snowflakes) C:\Users\Jiaha\tutorial>scrapy crawl quotes
Traceback (most recent call last):
File "C:\Users\Jiaha\AppData\Local\conda\conda\envs\snowflakes\Scripts\scrapy-script.py", line 10, in
sys.exit(execute())
File "C:\Users\Jiaha\AppData\Local\conda\conda\envs\snowflakes\lib\site-packages\scrapy\cmdline.py", line 149, in execute
cmd.crawler_process = CrawlerProcess(settings)
File "C:\Users\Jiaha\AppData\Local\conda\conda\envs\snowflakes\lib\site-packages\scrapy\crawler.py", line 249, in init
super(CrawlerProcess, self).init(settings)
File "C:\Users\Jiaha\AppData\Local\conda\conda\envs\snowflakes\lib\site-packages\scrapy\crawler.py", line 137, in init
self.spider_loader = _get_spider_loader(settings)
File "C:\Users\Jiaha\AppData\Local\conda\conda\envs\snowflakes\lib\site-packages\scrapy\crawler.py", line 336, in _get_spider_loader
return loader_cls.from_settings(settings.frozencopy())
File "C:\Users\Jiaha\AppData\Local\conda\conda\envs\snowflakes\lib\site-packages\scrapy\spiderloader.py", line 61, in from_settings
return cls(settings)
File "C:\Users\Jiaha\AppData\Local\conda\conda\envs\snowflakes\lib\site-packages\scrapy\spiderloader.py", line 25, in init
self._load_all_spiders()
File "C:\Users\Jiaha\AppData\Local\conda\conda\envs\snowflakes\lib\site-packages\scrapy\spiderloader.py", line 47, in load_all_spiders
for module in walk_modules(name):
File "C:\Users\Jiaha\AppData\Local\conda\conda\envs\snowflakes\lib\site-packages\scrapy\utils\misc.py", line 71, in walk_modules
submod = import_module(fullpath)
File "C:\Users\Jiaha\AppData\Local\conda\conda\envs\snowflakes\lib\importlib_init.py", line 127, in import_module
return _bootstrap._gcd_import(name[level:], package, level)
File "", line 1006, in _gcd_import
File "", line 983, in _find_and_load
File "", line 967, in _find_and_load_unlocked
File "", line 677, in _load_unlocked
File "", line 728, in exec_module
File "", line 219, in _call_with_frames_removed
File "C:\Users\Jiaha\tutorial\tutorial\spiders\quotes_spider.py", line 33, in
"execution_count": null,
NameError: name 'null' is not defined
Code: # I exactly followed the tutorial.
import scrapy
class QuotesSpider(scrapy.Spider):
name = "quotes"
def start_requests(self):
    urls = [
        'http://quotes.toscrape.com/page/1/',
        'http://quotes.toscrape.com/page/2/',
    ]
    for url in urls:
        yield scrapy.Request(url=url,callback=self.parse)
        
def parse(self,response):
    page = response.url.split("/")[-2]
    filename = 'quotes-%s.html' % page
    with open(filename, 'wb') as f:
        f.write(response.body)
    self.log('Saved file %s' % filename)
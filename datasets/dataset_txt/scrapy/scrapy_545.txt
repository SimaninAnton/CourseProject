IaroslavR commented on Sep 6, 2017
Got error with code:
def strip_text(data) -> list:
    if isinstance(data, str):
        return [data.strip()]
    else:
        return [s.strip() for s in data if s.strip()]
Traceback (most recent call last):
File "/home/elruso/.virtualenvs/3.6.1/lib/python3.6/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
yield next(it)
File "/home/elruso/.virtualenvs/3.6.1/lib/python3.6/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
for x in result:
File "/home/elruso/.virtualenvs/3.6.1/lib/python3.6/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in
return (_set_referer(r) for r in result or ())
File "/home/elruso/.virtualenvs/3.6.1/lib/python3.6/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in
return (r for r in result or () if _filter(r))
File "/home/elruso/.virtualenvs/3.6.1/lib/python3.6/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in
return (r for r in result or () if _filter(r))
File "/home/elruso/projects/shopify/shopify/spiders/countdown.py", line 40, in level_2
il.add_value('url', response.url)
File "/home/elruso/.virtualenvs/3.6.1/lib/python3.6/site-packages/scrapy/loader/init.py", line 77, in add_value
self._add_value(field_name, value)
File "/home/elruso/.virtualenvs/3.6.1/lib/python3.6/site-packages/scrapy/loader/init.py", line 91, in _add_value
processed_value = self._process_input_value(field_name, value)
File "/home/elruso/.virtualenvs/3.6.1/lib/python3.6/site-packages/scrapy/loader/init.py", line 150, in _process_input_value
return proc(value)
File "/home/elruso/.virtualenvs/3.6.1/lib/python3.6/site-packages/scrapy/loader/processors.py", line 45, in call
wrapped_funcs = [wrap_loader_context(f, context) for f in self.functions]
File "/home/elruso/.virtualenvs/3.6.1/lib/python3.6/site-packages/scrapy/loader/processors.py", line 45, in
wrapped_funcs = [wrap_loader_context(f, context) for f in self.functions]
File "/home/elruso/.virtualenvs/3.6.1/lib/python3.6/site-packages/scrapy/loader/common.py", line 10, in wrap_loader_context
if 'loader_context' in get_func_args(function):
File "/home/elruso/.virtualenvs/3.6.1/lib/python3.6/site-packages/scrapy/utils/python.py", line 201, in get_func_args
func_args, _, _, _ = inspect.getargspec(func)
File "/usr/lib/python3.6/inspect.py", line 1072, in getargspec
raise ValueError("Function has keyword-only parameters or annotations"
ValueError: Function has keyword-only parameters or annotations, use getfullargspec() API which can support them
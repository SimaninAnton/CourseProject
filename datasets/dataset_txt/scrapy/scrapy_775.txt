ultragis commented on Oct 23, 2016 â€¢
edited by redapple
My Extension code is:
class SpiderStatsExtension(object):
    @classmethod
    def from_crawler(cls, crawler):
        if not hasattr(cls, '__instance'):
            setattr(cls, '__instance', cls())
        ext = getattr(cls, '__instance')
        crawler.signals.connect(ext.engine_started, signal=signals.engine_started)
        crawler.signals.connect(ext.engine_stopped, signal=signals.engine_stopped)
        crawler.signals.connect(ext.item_scraped, signal=signals.item_scraped)
        crawler.signals.connect(ext.spider_error, signal=signals.spider_error)
        return ext
My process start code is:
process = CrawlerProcess(get_project_settings())
spiders = process.spider_loader.list()
for spider in spiders:
    process.crawl(process.spider_loader.load(spider))
process.start()
I found the from_crawler called multi times if my project have multi spiders.
Is it expectant design?
I need once call for on process to record stats info, how can i do for it?
thanks.
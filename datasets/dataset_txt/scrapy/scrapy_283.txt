Kelaxon commented on Oct 6, 2018
I wanted to initialize a variable uploader in my custom image pipeline, so I used the from_crawler method and overrode the constructor in the pipeline.
class ProductAllImagesPipeline(ImagesPipeline):

    @classmethod
    def from_crawler(cls, crawler):
        return cls(
            settings=crawler.settings
        )

    def __init__(self, settings=None):
        self.store_uri = settings['IMAGES_STORE']
        self.qiniu_uploader = QiniuUploader(settings)
        super(ImagesPipeline, self).__init__(store_uri=settings['IMAGES_STORE'], settings=settings)
But when the program ran to item_complete() in the pipeline, after try several times, results variable always got the error
<class 'tuple'>: (False, <twisted.python.failure.Failure builtins.AttributeError: 'ProductAllImagesPipeline' object has no attribute 'crawler'>)
Then I commented all the code above, it got the correct results:
Weirdly, I uncommented the code again, it still got the correct results:
Does anybody have any ideas? Thanks.
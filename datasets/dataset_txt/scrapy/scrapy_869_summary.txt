How to handle exception like this?
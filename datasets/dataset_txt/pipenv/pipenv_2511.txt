dz0ny commented on 25 Jan 2017 â€¢
edited
Maybe add argument to pipenv lock --gen-pip-lockfiles(or something similar) which would generate both files automatically after vendoring. This is a must for external tools(or Heroku for example), for building packages etc ...
Quick invoke task for those who stumble upon this
@task
def vendor(ctx):
    with io.open('Pipfile.lock') as f:
        data = json.load(f)
        prod = []
        dev = []
        for name, meta in data['develop'].items():
            dev.append('{}{}'.format(name, meta['version']))
        for name, meta in data['default'].items():
            prod.append('{}{}'.format(name, meta['version']))

    with io.open('requirements.txt', 'wt') as r:
        r.truncate(0)
        r.seek(0)
        r.write(u'\n'.join(sorted(prod)))
    with io.open('dev-requirements.txt', 'wt') as r:
        r.truncate(0)
        r.seek(0)
        r.write(u'\n'.join(sorted(dev)))
2
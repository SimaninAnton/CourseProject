Contributor
hynek commented on 11 Mar 2018
Pipenvs behavior used to be to leave out hashes on private PyPIs. Then it introduced them (11.1.7 works fine), now it broke them: running pipenv update removes most of the hashes from the lock file.
My suspicion is that it computes the hashes for the packages it uses itself or something (I think I saw some code in my last debugging session :))? In any case that doesn’t seem useful for people who deploy to different platforms than they develop on (= majority if I’m not mistaken).
So I would argue to either fix it again or have no hashes at all. The current status is probably breaking deployments somewhere. ;)
Please run $ python -m pipenv.help, and paste the results here.
Expected result
pipsi 11.1.7
Actual result
pipsi 11.3.3
Steps to replicate
[[source]]

url = "https://pypi.fcio.net/simple/"


verify_ssl = true
name = "pypi"


[packages]

aiohttp = "*"


[dev-packages]



[requires]

python_version = "3.6"
pipenv install with lastest pipenv: aiohttp has 4 hashes.
Downgrade to pipenv 11.1.7, then pipenv update --clear: aiohttp has 11 hashes.
Upgrade to latest pipenv, replace the url to url = "url = "https://pypi.python.org/simple" " and run pipenv update --clear: aiohttp has 11 still hashes.
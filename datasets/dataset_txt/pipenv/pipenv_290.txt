txomon commented on 11 Feb 2019
Issue description
Pipenv fails to run when only having Pipfile.lock. I am doing the process I described in #2489 (comment) and, and if I remove the touch Pipfile step, it will not work.
Expected result
pipenv sync should not depend on having Pipfile
Actual result
pipenv sync fails if Pipfile doesn't exist
Steps to replicate
Go to any pipenv project you may have and run the following
$ echo 'FROM python:alpine

RUN pip install pipenv
COPY Pipfile.lock .
RUN pipenv sync --verbose
' > test.dockerfile
$ docker build --file test.dockerfile .
Sending build context to Docker daemon  148.5kB
Step 1/4 : FROM python:alpine
 ---> 408808fb1a9e
Step 2/4 : RUN pip install pipenv
 ---> Using cache
 ---> 8d746c715b6a
Step 3/4 : COPY Pipfile.lock .
 ---> Using cache
 ---> 276d433c16bf
Step 4/4 : RUN pipenv sync --verbose
 ---> Running in 458c40362331
Traceback (most recent call last):
  File "/usr/local/bin/pipenv", line 11, in <module>
    sys.exit(cli())
  File "/usr/local/lib/python3.7/site-packages/pipenv/vendor/click/core.py", line 764, in __call__
    return self.main(*args, **kwargs)
  File "/usr/local/lib/python3.7/site-packages/pipenv/vendor/click/core.py", line 717, in main
    rv = self.invoke(ctx)
  File "/usr/local/lib/python3.7/site-packages/pipenv/vendor/click/core.py", line 1137, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
  File "/usr/local/lib/python3.7/site-packages/pipenv/vendor/click/core.py", line 956, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File "/usr/local/lib/python3.7/site-packages/pipenv/vendor/click/core.py", line 555, in invoke
    return callback(*args, **kwargs)
  File "/usr/local/lib/python3.7/site-packages/pipenv/vendor/click/decorators.py", line 64, in new_func
    return ctx.invoke(f, obj, *args, **kwargs)
  File "/usr/local/lib/python3.7/site-packages/pipenv/vendor/click/core.py", line 555, in invoke
    return callback(*args, **kwargs)
  File "/usr/local/lib/python3.7/site-packages/pipenv/vendor/click/decorators.py", line 17, in new_func
    return f(get_current_context(), *args, **kwargs)
  File "/usr/local/lib/python3.7/site-packages/pipenv/cli/command.py", line 615, in sync
    pypi_mirror=state.pypi_mirror,
  File "/usr/local/lib/python3.7/site-packages/pipenv/core.py", line 2589, in do_sync
    raise exceptions.LockfileNotFound("Pipfile.lock")
pipenv.exceptions.LockfileNotFound: ERROR: Pipfile.lock not found! You need to run $ pipenv lock before you can continue.
The command '/bin/sh -c pipenv sync --verbose' returned a non-zero code: 1
$ pipenv --support
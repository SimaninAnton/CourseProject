Member
uranusjr commented on 16 Jul 2018
Issue description
pipenv run with .env set does not respect the set environment, but uses the outside environment instead. This does not happen with regular executables.
Steps to replicate
$ ls -a
.            ..           Pipfile      Pipfile.lock
$ export HELLO=WORLD
$ pipenv run echo $HELLO     # Works as intended.
WORLD
$ unset HELLO
$ echo 'HELLO=WORLD' > .env
$ pipenv run echo $HELLO    # This does not work.
Loading .env environment variables…


$ pipenv run python -c 'import os; print(os.environ["HELLO"])'   # But this does!
Loading .env environment variables…
WORLD
$ pipenv run /usr/local/bin/python3 -c 'import os; print(os.environ["HELLO"])'   # This works too.
Loading .env environment variables…
WORLD
Expected result
Both builtin and real executables should reflect .env.
Actual result
Only real executables do. Builtins don’t.
$ pipenv --support
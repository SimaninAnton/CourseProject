orf commented on 11 Mar 2019
Issue description
When running pipenv install --skip-lock pipenv fails with a plette.models.base.ValidationError. It appears environment variables are not expanded. pipenv install works fine.
Expected result
Both pipenv install invocations should work.
Actual result
You have a traceback like so:
    self.validate(data)
  File "/usr/local/Cellar/pipenv/2018.11.26_2/libexec/lib/python3.7/site-packages/pipenv/vendor/plette/lockfiles.py", line 80, in validate
    klass.validate(data[key])
  File "/usr/local/Cellar/pipenv/2018.11.26_2/libexec/lib/python3.7/site-packages/pipenv/vendor/plette/models/sections.py", line 70, in validate
    klass.validate(data[key])
  File "/usr/local/Cellar/pipenv/2018.11.26_2/libexec/lib/python3.7/site-packages/pipenv/vendor/plette/models/base.py", line 132, in validate
    cls.item_class.validate(d)
  File "/usr/local/Cellar/pipenv/2018.11.26_2/libexec/lib/python3.7/site-packages/pipenv/vendor/plette/models/base.py", line 67, in validate
    return validate(cls, data)
  File "/usr/local/Cellar/pipenv/2018.11.26_2/libexec/lib/python3.7/site-packages/pipenv/vendor/requirementslib/models/pipfile.py", line 59, in validate
    raise plette.models.base.ValidationError(data, v)
plette.models.base.ValidationError: {'url': 'https://${CREDENTIALS}@server.com/repository/pypi/simple', 'name': 'name'}
Steps to replicate
url = "https://${CREDENTIALS}@myserver/repository/pypi/simple"
name = "name"

[packages]

[dev-packages]
pytest = "*"

[requires]
python_version = "3.7"
Run pipenv install --skip-lock
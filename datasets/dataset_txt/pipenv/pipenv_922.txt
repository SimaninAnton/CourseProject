tkossak commented on 26 Jun 2018 •
edited
pipenv install doesn't install dependencies of discord.py module, which is specified in Pipenv file. I need to manually install them with pipenv install discord.py.
I have pipenv installed via pipsi, so I entered its virtualenv before running the command:
$ python -m pipenv.help output
Expected result
I expect discord.py dependencies to be installed after I run pipenv install, without manually installing every module from Pipenv file.
Actual result
 kossak  …  files_common  PythonProjects  my_first_goat  pipenv install --python 3.6.5
Creating a virtualenv for this project...
Pipfile: /home/kossak/Kossak/files_common/PythonProjects/my_first_goat/Pipfile
Using /home/kossak/.pyenv/versions/3.6.5/bin/python3.6m (3.6.5) to create virtualenv...
⠋Running virtualenv with interpreter /home/kossak/.pyenv/versions/3.6.5/bin/python3.6m
Using base prefix '/home/kossak/.pyenv/versions/3.6.5'
New python executable in /home/kossak/.local/share/virtualenvs/my_first_goat-U1UBNzER/bin/python3.6m
Also creating executable in /home/kossak/.local/share/virtualenvs/my_first_goat-U1UBNzER/bin/python
Installing setuptools, pip, wheel...done.
Setting project for my_first_goat-U1UBNzER to /home/kossak/Kossak/files_common/PythonProjects/my_first_goat

Virtualenv location: /home/kossak/.local/share/virtualenvs/my_first_goat-U1UBNzER
Installing dependencies from Pipfile.lock (0e14ce)...
Ignoring colorama: markers 'sys_platform == "win32"' don't match your environment
Looking in indexes: https://pypi.python.org/simple
  🐍   ▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉ 9/9 — 00:00:03
To activate this project's virtualenv, run pipenv shell.
Alternativaly, run a command inside the virtualenv with pipenv run.

 kossak  …  files_common  PythonProjects  my_first_goat  pipenv graph
click==6.7
discord.py==0.16.12
  - aiohttp [required: >=1.0.0,<1.1.0, installed: ?]
  - websockets [required: >=3.1,<4.0, installed: ?]
fs==2.0.23
  - appdirs [required: ~=1.4.3, installed: 1.4.3]
  - pytz [required: Any, installed: 2018.4]
  - setuptools [required: Any, installed: 39.2.0]
  - six [required: ~=1.10, installed: 1.11.0]
logzero==1.5.0
toml==0.9.4

 kossak  …  files_common  PythonProjects  my_first_goat  pipenv install discord.py
Installing discord.py...
Looking in indexes: https://pypi.python.org/simple
Requirement already satisfied: discord.py in /home/kossak/.local/share/virtualenvs/my_first_goat-U1UBNzER/lib/python3.6/site-packages (0.16.12)
Collecting aiohttp<1.1.0,>=1.0.0 (from discord.py)
Collecting websockets<4.0,>=3.1 (from discord.py)
  Using cached https://files.pythonhosted.org/packages/4f/3a/2c3a5b2c65179851e80d4acae30cffb2610a8740a8edb2afbeaa564283f8/websockets-3.4-cp36-cp36m-manylinux1_x86_64.whl
Collecting chardet (from aiohttp<1.1.0,>=1.0.0->discord.py)
  Using cached https://files.pythonhosted.org/packages/bc/a9/01ffebfb562e4274b6487b4bb1ddec7ca55ec7510b22e4c51f14098443b8/chardet-3.0.4-py2.py3-none-any.whl
Collecting async-timeout (from aiohttp<1.1.0,>=1.0.0->discord.py)
  Using cached https://files.pythonhosted.org/packages/96/0f/e6357458c87fb4ed8f3df215773f3caad40968f10e05552cbd8bd28415e4/async_timeout-3.0.0-py3-none-any.whl
Collecting multidict>=2.0 (from aiohttp<1.1.0,>=1.0.0->discord.py)
  Using cached https://files.pythonhosted.org/packages/cc/30/508a22a28dfb50cf9079cd9d0cf9b0d7dbae5afdf9823977351cbd548897/multidict-4.3.1-cp36-cp36m-manylinux1_x86_64.whl
Installing collected packages: chardet, async-timeout, multidict, aiohttp, websockets
Successfully installed aiohttp-1.0.5 async-timeout-3.0.0 chardet-3.0.4 multidict-4.3.1 websockets-3.4

Adding discord.py to Pipfile's [packages]...
Installing dependencies from Pipfile.lock (0e14ce)...
Ignoring colorama: markers 'sys_platform == "win32"' don't match your environment
Looking in indexes: https://pypi.python.org/simple
  🐍   ▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉ 9/9 — 00:00:01
To activate this project's virtualenv, run pipenv shell.
Alternativaly, run a command inside the virtualenv with pipenv run.

 kossak  …  files_common  PythonProjects  my_first_goat  pipenv graph
click==6.7
discord.py==0.16.12
  - aiohttp [required: >=1.0.0,<1.1.0, installed: 1.0.5]
    - async-timeout [required: Any, installed: 3.0.0]
    - chardet [required: Any, installed: 3.0.4]
    - multidict [required: >=2.0, installed: 4.3.1]
  - websockets [required: >=3.1,<4.0, installed: 3.4]
fs==2.0.23
  - appdirs [required: ~=1.4.3, installed: 1.4.3]
  - pytz [required: Any, installed: 2018.4]
  - setuptools [required: Any, installed: 39.2.0]
  - six [required: ~=1.10, installed: 1.11.0]
logzero==1.5.0
toml==0.9.4
Steps to replicate
Pipfile:
[[source]]
url = "https://pypi.python.org/simple"
verify_ssl = true
name = "pypi"

[packages]
"discord.py" = "*"
logzero = "*"
fs = "*"
toml = "*"
click = "*"

[dev-packages]

[requires]
python_version = "3.6"
Steps to replicate:
$ pipenv install
$ pipenv graph
  # this shows that discord.py is installed, but dependencies are not (question marks instead of their versions).
$ pipenv install discord.py
$ pipenv graph
  # this shows that discord.py and all its dependencies are displayed
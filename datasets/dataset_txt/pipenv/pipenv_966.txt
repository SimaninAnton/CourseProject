memco commented on 12 Jun 2018
I tried to run pipenv install --three --pypi-mirror https://pypi.python.org/simple (the pipfile specifies a separate mirror) and after setting up the virtualenv it says
Installing ---pypi-mirror…
WARNING: Invalid requirement, parse error at "'--pypi-m'"
This seems to be similar behavior to #2326.
Additionally, what is the correct usage of PIPENV_PYPI_MIRROR? I have this setup in my .env, but it seems to be using the [[source]] url anyway. Does the [[source]] name impact the mirror flag in any way?
The pipfile looks like this:
[[source]]

url = "http://ourmirror/devpi/root/pypi/+simple"
verify_ssl = false
name = "ourmirror"

[packages]
…
The end goal is that I would like to be able to override the custom mirrors when they are not available, but have them be the default.
I am running this on Mac 10.13.4 with python 3.6.5 installed via homebrew.
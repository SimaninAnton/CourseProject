vlad0337187 commented on 29 Apr 2019 •
edited
Issue description
If to create env with '--site-packages' option, no system packages are available in environment.
Expected result
System packages available in virtual environment.
Actual result
No system packages are available in virtualenv.
In system I have installed xdg package (from apt python3-xdg), it's placed in /usr/lib/python3/dist-packages/xdg.
I can import it from system python.
Can't import it from python inside pipenv environment.
python3.6 -m site in system:
sys.path = [
    '/home/vlad/Programs/organizing/gtg',
    '/usr/lib/python36.zip',
    '/usr/lib/python3.6',
    '/usr/lib/python3.6/lib-dynload',
    '/home/vlad/.local/lib/python3.6/site-packages',
    '/usr/local/lib/python3.6/dist-packages',
    '/usr/lib/python3/dist-packages',
    '/usr/lib/python3.6/dist-packages',
]
USER_BASE: '/home/vlad/.local' (exists)
USER_SITE: '/home/vlad/.local/lib/python3.6/site-packages' (exists)
ENABLE_USER_SITE: True
python -m site in pipenv virtualenv:
sys.path = [
    '/home/vlad/Programs/organizing/gtg',
    '/home/vlad/.local/share/virtualenvs/gtg-cnQmc6C0/lib/python36.zip',
    '/home/vlad/.local/share/virtualenvs/gtg-cnQmc6C0/lib/python3.6',
    '/home/vlad/.local/share/virtualenvs/gtg-cnQmc6C0/lib/python3.6/lib-dynload',
    '/usr/lib/python3.6',
    '/home/vlad/.local/share/virtualenvs/gtg-cnQmc6C0/lib/python3.6/site-packages',
]
USER_BASE: '/home/vlad/.local' (exists)
USER_SITE: '/home/vlad/.local/lib/python3.6/site-packages' (exists)
ENABLE_USER_SITE: False
System: Mint 19.1 (Ubuntu 16.04).
Used Python: 3.6 (system default)
Steps to replicate
pipenv --site-packages install
pipenv shell
python
import xdg # will throw import error. Same in sytem won't
Please run $ pipenv --support, and paste the results here. Don't put backticks (`) around it! The output already contains Markdown formatting.
Can't run the following (xclip not installed), so runned it without xclip:
$ pipenv --support | xclip
$ pipenv --support
P.S. also add pipenv --site-packages install output.
Now It's python3.6.7 instead of python3.6.6 in my system, but bug is still present.
pipenv --site-packages install
pipenv --site-packages install Creating a virtualenv for this project… Pipfile: /home/vlad/Desktop/temp/testing/test_venv/Pipfile Using /usr/bin/python3.6 (3.6.7) to create virtualenv… ⠋ Creating virtual environment...Using base prefix '/usr' New python executable in /home/vlad/.local/share/virtualenvs/test_venv-Omu8UKuC/bin/python3.6 Also creating executable in /home/vlad/.local/share/virtualenvs/test_venv-Omu8UKuC/bin/python Installing setuptools, pip, wheel...done. Running virtualenv with interpreter /usr/bin/python3.6
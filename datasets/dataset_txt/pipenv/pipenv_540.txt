dherault commented on 16 Oct 2018
Issue description
When using an environment variable in a Pipfile, pipenv install is broken.
It seems that the environment variable does not get expanded during the Pipfile.lock creation.
Expected result
A created Pipfile.lock file
Actual result
An error, typically 401 Unauthorized from Gitlab when clonning repo during the Pipfile.lock creation
Steps to replicate
Create a Pipfile that uses an environment variable. Typically with a private package from a custom git provider using a oauth secret as the environment variable.
Run pipenv install with the environment variable sourced. The environment variable won't be expanded during Pipfile.lock creation.
Notice that pipenv install --skip-lock works fine. The environment variable is expanded.
2
Contributor
0az commented on 12 Jun 2018 •
edited
Pipenv fails with pip9.exceptions.InstallationError: Could not detect requirement name when installing from a package in a local git repo, despite specifying the name with #egg=
Pipenv installed via pip. Also tested on Pipenv master.
$ python -m pipenv.help output
Expected result
Package installs from local git branch successfully.
Actual result
pipenv install fails with pip9.exceptions.InstallationError.
Tested with six. --verbose log at https://gist.github.com/0az/8215fb5a578f47446ff5b1e813a2762b due to length.
Installing -e git+file:///Users/azhou/Documents/workspace/test/six/.git#egg=six…
Obtaining six from git+file:///Users/azhou/Documents/workspace/test/six/.git#egg=six
  Updating /Users/azhou/.local/share/virtualenvs/test-project-kYOvgE9a/src/six clone
Installing collected packages: six
  Found existing installation: six 1.11.0
    Uninstalling six-1.11.0:
      Successfully uninstalled six-1.11.0
  Running setup.py develop for six
Successfully installed six

Adding -e git+file:///Users/azhou/Documents/workspace/test/six/.git#egg=six to Pipfile's [packages]…
Pipfile.lock (ca72e7) out of date, updating to (1ab3f3)…
Locking [dev-packages] dependencies…
Locking [packages] dependencies…
penv/utils.py", line 332, in actually_resolve_reps
    dep[len('-e '):]
  File "/usr/local/lib/python3.6/site-packages/pipenv/vendor/pip9/req/req_install.py", line 144, in from_editable
    editable_req, default_vcs)
  File "/usr/local/lib/python3.6/site-packages/pipenv/vendor/pip9/req/req_install.py", line 1197, in parse_editable
    "Could not detect requirement name, please specify one with #egg="
pip9.exceptions.InstallationError: Could not detect requirement name, please specify one with #egg=
…
Steps to replicate
Clone a python package with a setup.py (six) into a local repo ($sixdir)
Create empty Pipenv with pipenv install
Install six using pipenv install -e git+file://$sixdir/.git#egg=six
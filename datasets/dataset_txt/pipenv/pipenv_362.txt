Kristinita commented on 17 Dec 2018 •
edited
1. Summary
I can't create virtual environment with my real dependencies on Windows.
Possibly related issues: #3290, #905.
2. Data
Pipfile of my real project:
# [BUG] Not use quotation marks in Pipfile!
# https://github.com/appveyor/ci/issues/2129
# [NOTE] Don't modify values of "url", "verify_ssl" and "name" parameters.
# These parameters for repository, from where the download is made.
# https://pipenv.readthedocs.io/en/latest/advanced/#specifying-package-indexes

[[source]]
url = "https://pypi.python.org/simple"
verify_ssl = true
name = "pypi"

[packages]

[dev-packages]
pelican = "*"
markdown = "*"
"beautifulsoup4" = "*"
pymdown-extensions = "*"
pyembed-markdown = "*"
markdown-newtab = {git = "https://github.com/andreykko/markdown-newtab.git", editable = true}
md-environ = "*"
markdown-blockdiag = "*"
pip-review = "*"
mdx-cite = {git = "https://github.com/aleray/mdx_cite.git", editable = true}
mdx-custom-span-class = {git = "https://github.com/exaroth/mdx_custom_span_class.git", editable = true}
markdown-downheader = "*"
pip-licenses = "*"
gitpython = "*"
pyyaml = "*"
bashate = "*"
csvlexer = {git = "https://github.com/Kristinita/PygmentsCSVLexer.git", editable = true}

[requires]
python_version = "3.7"
3. Steps to reproduce
If [dev-packages] in Pipfile:
[dev-packages]
mdx-cite = {git = "https://github.com/aleray/mdx_cite.git", editable = true}
or:
[dev-packages]
mdx-custom-span-class = {git = "https://github.com/exaroth/mdx_custom_span_class.git", editable = true}
I successfully create virtual enviroment:
D:\SashaDebugging\PipenvDebugging>pipenv install --dev
Creating a virtualenv for this project…
Pipfile: D:\SashaDebugging\PipenvDebugging\Pipfile
Using C:/Python37/python.exe (3.7.1) to create virtualenv…
[==  ] Creating virtual environment…Using base prefix 'C:\\Python37'
New python executable in D:\SashaDebugging\PipenvDebugging\.venv\Scripts\python.exe
Installing setuptools, pip, wheel…
done.
Running virtualenv with interpreter C:/Python37/python.exe

Successfully created virtual environment!
Virtualenv location: D:\SashaDebugging\PipenvDebugging\.venv
Pipfile.lock not found, creating…
Locking [dev-packages] dependencies…
Success!
Locking [packages] dependencies…
Updated Pipfile.lock (8502ed)!
Installing dependencies from Pipfile.lock (8502ed)…
  ================================ 2/2 - 00:00:07
To activate this project's virtualenv, run pipenv shell.
Alternatively, run a command inside the virtualenv with pipenv run.
else real dev-packages:
[dev-packages]
pelican = "*"
markdown = "*"
"beautifulsoup4" = "*"
pymdown-extensions = "*"
pyembed-markdown = "*"
markdown-newtab = {git = "https://github.com/andreykko/markdown-newtab.git", editable = true}
md-environ = "*"
markdown-blockdiag = "*"
pip-review = "*"
mdx-cite = {git = "https://github.com/aleray/mdx_cite.git", editable = true}
mdx-custom-span-class = {git = "https://github.com/exaroth/mdx_custom_span_class.git", editable = true}
markdown-downheader = "*"
pip-licenses = "*"
gitpython = "*"
pyyaml = "*"
bashate = "*"
csvlexer = {git = "https://github.com/Kristinita/PygmentsCSVLexer.git", editable = true}
I can't create virtual environment:
Click here to see full output.


4. Additional data
Previously, I successfully used Pipenv for my project. Six months ago, Pipenv worked fine for me.
I have long deactivated UAC on my PC.
I try delete C:\Users\SashaChernykh\AppData\Local\Temp folder → I have the same behavior.
5. Environment
pipenv --support
$ pipenv --support

Thanks.
10
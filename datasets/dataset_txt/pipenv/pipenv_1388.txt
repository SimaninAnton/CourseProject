JHowell45 commented on 12 Mar 2018 •
edited
Hi I'm currently having issues getting python3 to recognise my Pipenv virtualenv.
I have created a simple scripts for executing tests within pipenv along the lines of pipenv run pytest .... The scripts is packaged into a click application using a setup.py file and installed by running pip3 install -e . in the click applications directory. However when I try to run this application script test it fails saying:
Creating a virtualenv for this project…
Using /usr/local/Cellar/python/3.6.4_4/bin/python3.6 (3.6.4) to create virtualenv…
⠋/usr/local/opt/python/bin/python3.6: Error while finding module specification for 'pipenv.pew' (ModuleNotFoundError: No module named 'pipenv')
which it shouldn't as a pipenv environment already exists. I have noticed that when running the following:
python -c "from subprocess import call; call(['pipenv', '--venv'])"
python3 -c "from subprocess import call; call(['pipenv', '--venv'])"
python shows the virtualenv, but python3 fails saying No virtualenv has been created for this project yet!
Any help would be greatfully appreciated!
The click application is along the lines of:
import click
from subprocess import call

@click.group()
def cli:
  pass

@click.command()
def test():
  call(['pipenv', 'run', 'pytest', ...])
The script is called using: script test
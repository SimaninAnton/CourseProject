apollo13 commented on 19 Feb 2017 •
edited
See the following output:
➜  test-pipenv pipenv --three
Creating a Pipfile for this project...
Creating a virtualenv for this project...
⠋Running virtualenv with interpreter /usr/bin/python3
Using base prefix '/usr'
New python executable in /home/florian/.virtualenvs/test-pipenv/bin/python3
Also creating executable in /home/florian/.virtualenvs/test-pipenv/bin/python
Installing setuptools, pip, wheel...done.

Virtualenv location: /home/florian/.virtualenvs/test-pipenv
➜  test-pipenv pipenv install Django
Installing Django...
Collecting Django
  Using cached Django-1.10.5-py2.py3-none-any.whl
Installing collected packages: Django
Successfully installed Django-1.10.5

Adding Django to Pipfile's [packages]...
➜  test-pipenv pipenv shell
Launching subshell in virtual environment. Type 'exit' or 'Ctrl+D' to return.
/home/florian/.virtualenvs/test-pipenv/bin/python: Error while finding module specification for 'virtualenvwrapper.hook_loader' (ImportError: No module named 'virtualenvwrapper')
virtualenvwrapper.sh: There was a problem running the initialization hooks. 

If Python could not import the module virtualenvwrapper.hook_loader,
check that virtualenvwrapper has been installed for
VIRTUALENVWRAPPER_PYTHON=/home/florian/.virtualenvs/test-pipenv/bin/python and that PATH is
set properly.
➜  test-pipenv env|grep VIRTUAL
VIRTUALENVWRAPPER_SCRIPT=/home/florian/.local/bin/virtualenvwrapper.sh
VIRTUALENVWRAPPER_PROJECT_FILENAME=.project
VIRTUALENVWRAPPER_WORKON_CD=1
VIRTUALENVWRAPPER_HOOK_DIR=/home/florian/.virtualenvs
VIRTUAL_ENV=/home/florian/.virtualenvs/test-pipenv
➜  test-pipenv which python
/home/florian/.virtualenvs/test-pipenv/bin/python
As you can see VIRTUAL_ENV is set properly and which python returns the one from the venv, but it looks like as if the executed shell is sourcing my profile again.
I am using virtualenv-wrapper manually without problems. My .zshrc has
source ~/.local/bin/virtualenvwrapper.sh
Is the anything I can do to get around this error? Please tell me if (and which) information you need.
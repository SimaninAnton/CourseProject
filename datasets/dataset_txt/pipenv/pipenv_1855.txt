macbeth322 commented on 2 Nov 2017
Describe your environment
Linux
Python version: 3.4
Pipenv version: 8.2.7
Expected result
Installing a local package with pipenv install '-e .' should install the local package then install its dependencies, then save all of that in the Pipfile and Pipfile.lock.
Actual result
The first install command pipfile install '-e .' correctly installs all expected packages and saves the expected results into Pipfile, but the Pipfile.lock only contains the local package and non of its dependencies.
Steps to replicate
$ pipenv --three
Creating a virtualenv for this project‚Ä¶
Using /path/to/python/bin/python3 to create virtualenv‚Ä¶
‚†ãAlready using interpreter /path/to/python/bin/python3
Using base prefix '/path/to/python'
New python executable in /home/chris/.local/share/virtualenvs/pipenv-local-lock-bug-l-tO7M9D/bin/python3
Also creating executable in /home/chris/.local/share/virtualenvs/pipenv-local-lock-bug-l-tO7M9D/bin/python
Installing setuptools, pip, wheel...done.

Virtualenv location: /home/chris/.local/share/virtualenvs/pipenv-local-lock-bug-l-tO7M9D
Creating a Pipfile for this project‚Ä¶
chris $ pipenv install '-e .'
Installing -e .‚Ä¶
‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñíObtaining file:///home/chris/demos/pipenv-local-lock-bug
Collecting Flask (from foobar==1.0.0)
  Using cached Flask-0.12.2-py2.py3-none-any.whl
Collecting click>=2.0 (from Flask->foobar==1.0.0)
  Using cached click-6.7-py2.py3-none-any.whl
Collecting itsdangerous>=0.21 (from Flask->foobar==1.0.0)
Collecting Jinja2>=2.4 (from Flask->foobar==1.0.0)
  Using cached Jinja2-2.9.6-py2.py3-none-any.whl
Collecting Werkzeug>=0.7 (from Flask->foobar==1.0.0)
  Using cached Werkzeug-0.12.2-py2.py3-none-any.whl
Collecting MarkupSafe>=0.23 (from Jinja2>=2.4->Flask->foobar==1.0.0)
Installing collected packages: click, itsdangerous, MarkupSafe, Jinja2, Werkzeug, Flask, foobar
  Running setup.py develop for foobar
Successfully installed Flask-0.12.2 Jinja2-2.9.6 MarkupSafe-1.0 Werkzeug-0.12.2 click-6.7 foobar itsdangerous-0.24

Adding -e . to Pipfile's [packages]‚Ä¶
Locking [dev-packages] dependencies‚Ä¶
Locking [packages] dependencies‚Ä¶
Updated Pipfile.lock (e45bed)!
chris $ pipenv run pip freeze
click==6.7
Flask==0.12.2
foobar==1.0.0
itsdangerous==0.24
Jinja2==2.9.6
MarkupSafe==1.0
Werkzeug==0.12.2
chris $ pipenv --three
Virtualenv already exists!
Removing existing virtualenv‚Ä¶
Creating a virtualenv for this project‚Ä¶
Using /path/to/python/bin/python3 to create virtualenv‚Ä¶
‚†ã  Already using interpreter /path/to/python/bin/python3
Using base prefix '/path/to/python'
New python executable in /home/chris/.local/share/virtualenvs/pipenv-local-lock-bug-l-tO7M9D/bin/python3
Also creating executable in /home/chris/.local/share/virtualenvs/pipenv-local-lock-bug-l-tO7M9D/bin/python
Installing setuptools, pip, wheel...done.

Virtualenv location: /home/chris/.local/share/virtualenvs/pipenv-local-lock-bug-l-tO7M9D
chris $ pipenv install
Installing dependencies from Pipfile.lock (e45bed)‚Ä¶
  üêç   ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ 1/1 ‚Äî 00:00:01
To activate this project's virtualenv, run the following:
 $ pipenv shell
chris $ pipenv run pip freeze
foobar==1.0.0
chris $ pipenv lock --verbose --clear
Locking [dev-packages] dependencies‚Ä¶
Using pip: -i https://pypi.python.org/simple

                          ROUND 1
Current constraints:

Finding the best candidates:

Finding secondary dependencies:
------------------------------------------------------------
Result of round 1: stable, done
Locking [packages] dependencies‚Ä¶
Using pip: -i https://pypi.python.org/simple

                          ROUND 1
Current constraints:

Finding the best candidates:

Finding secondary dependencies:
------------------------------------------------------------
Result of round 1: stable, done
Updated Pipfile.lock (e45bed)!
2
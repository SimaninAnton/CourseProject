cristynkells commented on 3 May 2018 ‚Ä¢
edited by uranusjr
Be sure to check the existing issues (both open and closed!).
Describe the issue briefly here.
pipenv 11.10.1 fails when the Pipfile contains 3 or more source entries.
Please run $ python -m pipenv.help, and paste the results here.
If you're on MacOS, just run the following:
$ python -m pipenv.help | pbcopy
$ python -m pipenv.help output
Expected result
pipenv (version 11.10.1) install should exit successfully when the Pipfile contains 3 or more sources.
Describe what you expected.
Actual result
pipenv install fails and produces the below traceback:
Traceback (most recent call last):‚ñâ‚ñâ‚ñâ‚ñâ 0/38 ‚Äî 00:00:00
  File "/Users/user/.pyenv/versions/3.6.5/bin/pipenv", line 11, in <module>
    sys.exit(cli())
  File "/Users/user/.pyenv/versions/3.6.5/Python.framework/Versions/3.6/lib/python3.6/site-packages/pipenv/vendor/click/core.py", line 722, in __call__
    return self.main(*args, **kwargs)
  File "/Users/user/.pyenv/versions/3.6.5/Python.framework/Versions/3.6/lib/python3.6/site-packages/pipenv/vendor/click/core.py", line 697, in main
    rv = self.invoke(ctx)
  File "/Users/user/.pyenv/versions/3.6.5/Python.framework/Versions/3.6/lib/python3.6/site-packages/pipenv/vendor/click/core.py", line 1066, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
  File "/Users/user/.pyenv/versions/3.6.5/Python.framework/Versions/3.6/lib/python3.6/site-packages/pipenv/vendor/click/core.py", line 895, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File "/Users/user/.pyenv/versions/3.6.5/Python.framework/Versions/3.6/lib/python3.6/site-packages/pipenv/vendor/click/core.py", line 535, in invoke
    return callback(*args, **kwargs)
  File "/Users/user/.pyenv/versions/3.6.5/Python.framework/Versions/3.6/lib/python3.6/site-packages/pipenv/cli.py", line 402, in install
    selective_upgrade=selective_upgrade,
  File "/Users/user/.pyenv/versions/3.6.5/Python.framework/Versions/3.6/lib/python3.6/site-packages/pipenv/core.py", line 1938, in do_install
    requirements_dir=requirements_directory,
  File "/Users/user/.pyenv/versions/3.6.5/Python.framework/Versions/3.6/lib/python3.6/site-packages/pipenv/core.py", line 1385, in do_init
    requirements_dir=requirements_dir.name,
  File "/Users/user/.pyenv/versions/3.6.5/Python.framework/Versions/3.6/lib/python3.6/site-packages/pipenv/core.py", line 803, in do_install_dependencies
    dep, extra_index = split_argument(dep, long_='extra-index-url')
  File "/Users/user/.pyenv/versions/3.6.5/Python.framework/Versions/3.6/lib/python3.6/site-packages/pipenv/utils.py", line 1320, in split_argument
    req, index = req.split(index_entry)
ValueError: too many values to unpack (expected 2)
  üêç   ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ 0/38 ‚Äî 00:00:00
When possible, provide the verbose output (--verbose), especially for locking and dependencies resolving issues.
Steps to replicate
Create a Pipfile with three [[source]] entries and run pipenv install.
Provide the steps to replicate (which usually at least includes the commands and the Pipfile).
# Pipfile
[[source]]
url = "https://pypi.python.org/simple"
verify_ssl = true
name = "pypi"

[[source]]
url = "http://mycompany.org/root/pypi/"
verify_ssl = false
name = "mirror-pypi"

[[source]]
url = "http://mycompany.org/sweng/pypi/"
verify_ssl = false
name = "mycompany-pypi"

[dev-packages]
pylint = "*"
pypandoc = "==1.4"
fabric3 = "==1.14.post1"
devpi-client = "*"
unittest-xml-reporting = "*"

[packages]
cryptography = "==2.2.2"
$ pipenv --python 3.6 install --dev
Virtualenv already exists!
Removing existing virtualenv‚Ä¶
Creating a virtualenv for this project‚Ä¶
Using /Users/user/.pyenv/versions/3.6.5/bin/python3.6m (3.6.5) to create virtualenv‚Ä¶
‚†ãRunning virtualenv with interpreter /Users/user/.pyenv/versions/3.6.5/bin/python3.6m
Using base prefix '/Users/user/.pyenv/versions/3.6.5/Python.framework/Versions/3.6'
New python executable in /Users/user/.local/share/virtualenvs/secret-mgr-util-2blaESOT/bin/python3.6m
Also creating executable in /Users/user/.local/share/virtualenvs/secret-mgr-util-2blaESOT/bin/python
Installing setuptools, pip, wheel...done.

Virtualenv location: /Users/user/.local/share/virtualenvs/secret-mgr-util-2blaESOT
Installing dependencies from Pipfile.lock (fc3fa2)‚Ä¶
Traceback (most recent call last):‚ñâ‚ñâ‚ñâ‚ñâ 0/38 ‚Äî 00:00:00
  File "/Users/user/.pyenv/versions/3.6.5/bin/pipenv", line 11, in <module>
    sys.exit(cli())
  File "/Users/user/.pyenv/versions/3.6.5/Python.framework/Versions/3.6/lib/python3.6/site-packages/pipenv/vendor/click/core.py", line 722, in __call__
    return self.main(*args, **kwargs)
  File "/Users/user/.pyenv/versions/3.6.5/Python.framework/Versions/3.6/lib/python3.6/site-packages/pipenv/vendor/click/core.py", line 697, in main
    rv = self.invoke(ctx)
  File "/Users/user/.pyenv/versions/3.6.5/Python.framework/Versions/3.6/lib/python3.6/site-packages/pipenv/vendor/click/core.py", line 1066, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
  File "/Users/user/.pyenv/versions/3.6.5/Python.framework/Versions/3.6/lib/python3.6/site-packages/pipenv/vendor/click/core.py", line 895, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File "/Users/user/.pyenv/versions/3.6.5/Python.framework/Versions/3.6/lib/python3.6/site-packages/pipenv/vendor/click/core.py", line 535, in invoke
    return callback(*args, **kwargs)
  File "/Users/user/.pyenv/versions/3.6.5/Python.framework/Versions/3.6/lib/python3.6/site-packages/pipenv/cli.py", line 402, in install
    selective_upgrade=selective_upgrade,
  File "/Users/user/.pyenv/versions/3.6.5/Python.framework/Versions/3.6/lib/python3.6/site-packages/pipenv/core.py", line 1938, in do_install
    requirements_dir=requirements_directory,
  File "/Users/user/.pyenv/versions/3.6.5/Python.framework/Versions/3.6/lib/python3.6/site-packages/pipenv/core.py", line 1385, in do_init
    requirements_dir=requirements_dir.name,
  File "/Users/user/.pyenv/versions/3.6.5/Python.framework/Versions/3.6/lib/python3.6/site-packages/pipenv/core.py", line 803, in do_install_dependencies
    dep, extra_index = split_argument(dep, long_='extra-index-url')
  File "/Users/user/.pyenv/versions/3.6.5/Python.framework/Versions/3.6/lib/python3.6/site-packages/pipenv/utils.py", line 1320, in split_argument
    req, index = req.split(index_entry)
ValueError: too many values to unpack (expected 2)
  üêç   ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ 0/38 ‚Äî 00:00:00
ryankennedy commented on 11 Oct 2018
Issue description
pipenv --site-packages run … appears to have been broken between v2018.7.1 and v2018.10.9. Passing the flag in v2018.10.9 no longer appears to include site packages in any subsequent commands.
Expected result
I expected pipenv --site-packages run … to continue include packages installed directly via pip in subsequent commands.
Actual result
Packages installed directly via pip can not be referenced via (for instance) import foo.
Steps to replicate
Start up a Python 3.7.0 Docker image: docker run -it --rm python:3.7.0-slim-stretch bash
Change to root's home directory: cd
Install the Requests package (our test case): pip install requests
Install pipenv v2018.7.1: pip install pipenv==v2018.7.1
Attempt to import requests from site packages: echo "import requests; print('Success\!')" | pipenv --site-packages run python -
Upgrade to pipenv v2018.10.9: pip install pipenv==v2018.10.9
Remove the previously created virtualenv: pipenv --rm
Attempt to import requests from site packages: echo "import requests; print('Success\!')" | pipenv --site-packages run python -
Under pipenv v2018.7.1 the end result is Python printing Success!. Under pipenv v2018.10.9 the end result is Python failing with ModuleNotFoundError: No module named 'requests'.
$ pipenv --support
Chiron1991 commented on 28 Apr 2018
Pipenv 11.10.4 doesn't resolve/install package's dependencies reliably.
Expected result
Correct parsing, locking and installation of a package's install_requires as stated in their setup.py.
Actual result
Some dependencies are not locked in Pipfile.lock and therefore not installed, but pipenv graph shows them as installed.
Steps to replicate
chiron@chiron-pc:~/Documents/casita$ pipenv --version
pipenv, version 11.10.1
chiron@chiron-pc:~/Documents/casita$ cat Pipfile 
[[source]]
url = "https://pypi.python.org/simple"
verify_ssl = true
name = "pypi"

[packages]
django = "*"
django-jinja = "*"
django-money = "*"
django-stronghold = "*"
django-crispy-forms = "*"
django-extensions = "*"
feedparser = "*"
django-lifecycle = "*"

[dev-packages]
django-debug-toolbar = "*"
jupyter = "*"

[requires]
python_version = "3.6"
chiron@chiron-pc:~/Documents/casita$ pipenv --three
Creating a virtualenv for this project…
Using /usr/bin/python3 (3.6.3) to create virtualenv…
⠋Running virtualenv with interpreter /usr/bin/python3
Using base prefix '/usr'
New python executable in /home/chiron/.local/share/virtualenvs/casita-CQsjLFQc/bin/python3
Also creating executable in /home/chiron/.local/share/virtualenvs/casita-CQsjLFQc/bin/python
Installing setuptools, pip, wheel...done.

Virtualenv location: /home/chiron/.local/share/virtualenvs/casita-CQsjLFQc
chiron@chiron-pc:~/Documents/casita$ pipenv sync --dev
Locking [dev-packages] dependencies…
Locking [packages] dependencies…
Updated Pipfile.lock (6a553e)!
Installing dependencies from Pipfile.lock (6a553e)…
  🐍   ▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉ 13/13 — 00:00:09
To activate this project's virtualenv, run the following:
 $ pipenv shell
All dependencies are now up-to-date!
chiron@chiron-pc:~/Documents/casita$ pipenv shell
Spawning environment shell (/bin/bash). Use 'exit' to leave.
chiron@chiron-pc:~/Documents/casita$ . /home/chiron/.local/share/virtualenvs/casita-CQsjLFQc/bin/activate
(casita-CQsjLFQc) chiron@chiron-pc:~/Documents/casita$ pipenv graph
django-crispy-forms==1.7.2
django-debug-toolbar==1.9.1
  - Django [required: >=1.8, installed: 2.0.4]
    - pytz [required: Any, installed: 2018.4]                            # will be installed
  - sqlparse [required: >=0.2.0, installed: ?]                          # will NOT be installed
django-extensions==2.0.7
  - six [required: >=1.2, installed: 1.11.0]
django-jinja==2.4.1
  - django [required: >=1.8, installed: 2.0.4]
    - pytz [required: Any, installed: 2018.4]                             # will be installed
  - jinja2 [required: >=2.5, installed: 2.9.5]                             # will NOT be installed
django-lifecycle==0.3.0
django-money==0.13.2
  - Django [required: >=1.8, installed: 2.0.4]
    - pytz [required: Any, installed: 2018.4]                             # will be installed
  - py-moneyed [required: >=0.7, installed: 0.7.0]                 # will be installed
  - setuptools [required: Any, installed: 39.1.0]                      # bootstrapped with venv
django-stronghold==0.3.0
feedparser==5.2.1
jupyter==1.0.0
  - ipykernel [required: Any, installed: ?]                               # will NOT be installed
  - ipywidgets [required: Any, installed: ?]                             # will NOT be installed
  - jupyter-console [required: Any, installed: ?]                     # will NOT be installed
  - nbconvert [required: Any, installed: ?]                              # will NOT be installed
  - notebook [required: Any, installed: ?]                              # will NOT be installed
  - qtconsole [required: Any, installed: ?]                              # will NOT be installed
(casita-CQsjLFQc) chiron@chiron-pc:~/Documents/casita$ pipenv run pip freeze
Django==2.0.4
django-crispy-forms==1.7.2
django-debug-toolbar==1.9.1
django-extensions==2.0.7
django-jinja==2.4.1
django-lifecycle==0.3.0
django-money==0.13.2
django-stronghold==0.3.0
feedparser==5.2.1
jupyter==1.0.0
py-moneyed==0.7.0
pytz==2018.4
six==1.11.0
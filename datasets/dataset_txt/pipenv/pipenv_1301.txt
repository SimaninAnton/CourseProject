MarenstainBear commented on 21 Mar 2018
Similar to these issues:
#356
#278
Summary
When using pipenv install XYZ, the process hangs indefinitely at "Locking [packages] dependencies".
This doesn't happen every time, and may be related to which package is being installed. This morning it is happening every time I try to install tensorflow. Last night it was happening for numpy as well, but today numpy is fine.
The hanged response seems to last indefinitely (though I did manually terminate the process after an hour). The Pipfile.lock is not written, but the Pipfile is written and the expected packages are installed and listed when I run pipenv run pip freeze.
I was able to reproduce this using various permutations of:
(L)ubuntu 16.04 and (X)ubuntu 17.10
pipenv --three and pipenv --two
pipenv installed through python 2.7 and pipenv installed through python 3.5
...and I downloaded the pipenv source and installed that in an isolated environment to see if the issue was specific to pipenv version 11.8.3. I experienced the same behavior in 11.9.0.
I am also able to reproduce it by simply running pipenv lock or pipenv update if I have tensorflow (or whatever package is currently causing me trouble) listed in my Pipfile.
$ python -m pipenv.help output
Expected result
I expect the step in which the Pipfile.lock is generated to take at most a minute.
I have good hardware with lots of free memory and processing power, so I don't think this is a resource constraint. My internet speed is 60 Mbps, so I doubt it is a networking issue when requesting packages.
Actual result
verbose_output.txt
While this screenshot doesn't show verbose output like the file above, it does visually demonstrate what I am experiencing.
Steps to replicate
Spin up new virtualenv using pipenv --three or pipenv --two.
Confirm things are working as expected with a package you know is installing fine such as pipenv install pylint.
Now cause it to hang by installing a package that is not working for whatever reason such as pipenv install tensorflow.
Pipfile
30
msopko81 commented on 24 Sep 2018
Issue description
pipenv uninstall fails to remove package from Pipfile if a comment with the package name exists before the package.
Expected result
The package to be remove from the Pipfile
Actual result
The comment is moved up a line, but the package remains in both Pipfile and Pipfile.lock
Steps to replicate
pipenv install django-phonenumber-field phonenumberslite
Edit and have Pipfile like this:
[[source]]
url = "https://pypi.org/simple"
verify_ssl = true
name = "pypi"

[packages]
django-phonenumber-field = "*"
# django-phonenumber-field requires phonenumberslite, but does not properly record it
phonenumberslite = "*"

[dev-packages]

[requires]
python_version = "3.6"
pipenv uninstall phonenumberslite
Output:
Un-installing phonenumberslite...
Uninstalling phonenumberslite-8.9.14:
  Successfully uninstalled phonenumberslite-8.9.14

Removing phonenumberslite from Pipfile...
Locking [dev-packages] dependencies...
Locking [packages] dependencies...
Updated Pipfile.lock (ebdcbb)!
New Pipfile:
[[source]]
url = "https://pypi.org/simple"
verify_ssl = true
name = "pypi"

[packages]
django-phonenumber-field = "*"# django-phonenumber-field requires phonenumberslite, but does not properly record it
phonenumberslite = "*"

[dev-packages]

[requires]
python_version = "3.6"
The package is removed if checked within pip:
pipenv run python -mpip list
Package                  Version
------------------------ -------
Babel                    2.6.0
Django                   2.1.1
django-phonenumber-field 2.0.1
phonenumbers             8.9.14
pip                      18.0
pytz                     2018.5
setuptools               40.4.3
wheel                    0.31.1
Since the package is still listed within the Pipfile, it will get installed for the next pipenv operation.
$ pipenv --support
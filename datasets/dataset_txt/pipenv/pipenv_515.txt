PierreLeGuen commented on 24 Oct 2018
Hello ! Just upgraded pipenv from the AUR and then from pip, and I always get the same issue :
(PS : the previous version worked)
$ pipenv install numpy
Traceback (most recent call last):
  File "/home/pierrelg/.local/lib/python3.7/site-packages/pipenv/project.py", line 509, in _parse_pipfile
    return contoml.loads(contents)
  File "/home/pierrelg/.local/lib/python3.7/site-packages/pipenv/patched/contoml/__init__.py", line 15, in loads
    elements = parse_tokens(tokens)
  File "/home/pierrelg/.local/lib/python3.7/site-packages/pipenv/patched/prettytoml/parser/__init__.py", line 17, in parse_tokens
    return _parse_token_stream(TokenStream(tokens))
  File "/home/pierrelg/.local/lib/python3.7/site-packages/pipenv/patched/prettytoml/parser/__init__.py", line 32, in _parse_token_stream
    raise ParsingError('Failed to parse line {}'.format(pending.head.row))
prettytoml.parser.errors.ParsingError: Failed to parse line 1

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/pierrelg/.local/bin/pipenv", line 11, in <module>
    sys.exit(cli())
  File "/home/pierrelg/.local/lib/python3.7/site-packages/pipenv/vendor/click/core.py", line 764, in __call__
    return self.main(*args, **kwargs)
  File "/home/pierrelg/.local/lib/python3.7/site-packages/pipenv/vendor/click/core.py", line 717, in main
    rv = self.invoke(ctx)
  File "/home/pierrelg/.local/lib/python3.7/site-packages/pipenv/vendor/click/core.py", line 1137, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
  File "/home/pierrelg/.local/lib/python3.7/site-packages/pipenv/vendor/click/core.py", line 956, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File "/home/pierrelg/.local/lib/python3.7/site-packages/pipenv/vendor/click/core.py", line 555, in invoke
    return callback(*args, **kwargs)
  File "/home/pierrelg/.local/lib/python3.7/site-packages/pipenv/vendor/click/decorators.py", line 64, in new_func
    return ctx.invoke(f, obj, *args, **kwargs)
  File "/home/pierrelg/.local/lib/python3.7/site-packages/pipenv/vendor/click/core.py", line 555, in invoke
    return callback(*args, **kwargs)
  File "/home/pierrelg/.local/lib/python3.7/site-packages/pipenv/vendor/click/decorators.py", line 17, in new_func
    return f(get_current_context(), *args, **kwargs)
  File "/home/pierrelg/.local/lib/python3.7/site-packages/pipenv/cli/command.py", line 249, in install
    editable_packages=state.installstate.editables,
  File "/home/pierrelg/.local/lib/python3.7/site-packages/pipenv/core.py", line 1724, in do_install
    pypi_mirror=pypi_mirror,
  File "/home/pierrelg/.local/lib/python3.7/site-packages/pipenv/core.py", line 565, in ensure_project
    pypi_mirror=pypi_mirror,
  File "/home/pierrelg/.local/lib/python3.7/site-packages/pipenv/core.py", line 488, in ensure_virtualenv
    python = ensure_python(three=three, python=python)
  File "/home/pierrelg/.local/lib/python3.7/site-packages/pipenv/core.py", line 398, in ensure_python
    python = project.required_python_version
  File "/home/pierrelg/.local/lib/python3.7/site-packages/pipenv/project.py", line 230, in required_python_version
    required = self.parsed_pipfile.get("requires", {}).get(
  File "/home/pierrelg/.local/lib/python3.7/site-packages/pipenv/project.py", line 470, in parsed_pipfile
    parsed = self._parse_pipfile(contents)
  File "/home/pierrelg/.local/lib/python3.7/site-packages/pipenv/project.py", line 512, in _parse_pipfile
    return toml.loads(contents)
  File "/home/pierrelg/.local/lib/python3.7/site-packages/pipenv/vendor/toml/decoder.py", line 187, in loads
    " Reached end of line.", original, i)
toml.decoder.TomlDecodeError: Key name found without value. Reached end of line. (line 1 column 6 char 5)
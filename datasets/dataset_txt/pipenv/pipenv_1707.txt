Contributor
OddBloke commented on 21 Dec 2017
When there is a file in the local directory that matches the name of a PyPI package, pipenv install of that package name does install the packages in to the virtualenv, but then writes confusing content in to Pipfile (presumably what it would do with a local repo).
Describe your environment
OS Type:
Ubuntu 17.10
Python version: $ python -V
Python 3.6.3
Pipenv version: $ pipenv --version
pipenv, version 9.0.1
Expected result
The package from PyPI installed and appropriately added to Pipfile.
Actual result
The Pipfile ends up with content pointing to the local directory.
Steps to replicate
In an empty directory:
touch influxdb
pipenv install influxdb
cat Pipfile
When I run this, I get:
% touch influxdb
% pipenv install influxdb
Creating a virtualenv for this project…
⠋Using base prefix '/usr'
New python executable in /home/daniel/.local/share/virtualenvs/reproduce-FQ7MTL5K/bin/python3
Also creating executable in /home/daniel/.local/share/virtualenvs/reproduce-FQ7MTL5K/bin/python
Installing setuptools, pip, wheel...done.

Virtualenv location: /home/daniel/.local/share/virtualenvs/reproduce-FQ7MTL5K
Creating a Pipfile for this project…
Installing influxdb…
Collecting influxdb
  Using cached influxdb-5.0.0-py2.py3-none-any.whl
Collecting requests>=2.17.0 (from influxdb)
  Using cached requests-2.18.4-py2.py3-none-any.whl
Collecting python-dateutil>=2.6.0 (from influxdb)
  Using cached python_dateutil-2.6.1-py2.py3-none-any.whl
Collecting six>=1.10.0 (from influxdb)
  Using cached six-1.11.0-py2.py3-none-any.whl
Collecting pytz (from influxdb)
  Using cached pytz-2017.3-py2.py3-none-any.whl
Collecting certifi>=2017.4.17 (from requests>=2.17.0->influxdb)
  Using cached certifi-2017.11.5-py2.py3-none-any.whl
Collecting idna<2.7,>=2.5 (from requests>=2.17.0->influxdb)
  Using cached idna-2.6-py2.py3-none-any.whl
Collecting urllib3<1.23,>=1.21.1 (from requests>=2.17.0->influxdb)
  Using cached urllib3-1.22-py2.py3-none-any.whl
Collecting chardet<3.1.0,>=3.0.2 (from requests>=2.17.0->influxdb)
  Using cached chardet-3.0.4-py2.py3-none-any.whl
Installing collected packages: certifi, idna, urllib3, chardet, requests, six, python-dateutil, pytz, influxdb
Successfully installed certifi-2017.11.5 chardet-3.0.4 idna-2.6 influxdb-5.0.0 python-dateutil-2.6.1 pytz-2017.3 requests-2.18.4 six-1.11.0 urllib3-1.22

Adding influxdb to Pipfile's [packages]…
Locking [dev-packages] dependencies…
Locking [packages] dependencies…
Updated Pipfile.lock (baaf70)!
% cat Pipfile
[[source]]

url = "https://pypi.python.org/simple"
verify_ssl = true
name = "pypi"


[packages]

"6a95e85" = {path = "./influxdb"}


[dev-packages]
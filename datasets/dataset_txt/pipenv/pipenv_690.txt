gwillem commented on 4 Sep 2018
Issue description
Cannot run pipenv install or pipenv shell
Actual result
$ pipenv shell
Traceback (most recent call last):
  File "/usr/local/bin/pipenv", line 11, in <module>
    sys.exit(cli())
  File "/usr/local/lib/python3.5/dist-packages/pipenv/vendor/click/core.py", line 722, in __call__
    return self.main(*args, **kwargs)
  File "/usr/local/lib/python3.5/dist-packages/pipenv/vendor/click/core.py", line 697, in main
    rv = self.invoke(ctx)
  File "/usr/local/lib/python3.5/dist-packages/pipenv/vendor/click/core.py", line 1066, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
  File "/usr/local/lib/python3.5/dist-packages/pipenv/vendor/click/core.py", line 895, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File "/usr/local/lib/python3.5/dist-packages/pipenv/vendor/click/core.py", line 535, in invoke
    return callback(*args, **kwargs)
  File "/usr/local/lib/python3.5/dist-packages/pipenv/cli.py", line 664, in shell
    three=three, python=python, fancy=fancy, shell_args=shell_args, pypi_mirror=pypi_mirror
  File "/usr/local/lib/python3.5/dist-packages/pipenv/core.py", line 2149, in do_shell
    shell = choose_shell()
  File "/usr/local/lib/python3.5/dist-packages/pipenv/shells.py", line 217, in choose_shell
    type_, command = detect_info()
  File "/usr/local/lib/python3.5/dist-packages/pipenv/shells.py", line 25, in detect_info
    return shellingham.detect_shell()
  File "/usr/local/lib/python3.5/dist-packages/pipenv/vendor/shellingham/__init__.py", line 24, in detect_shell
    shell = get_shell(pid, max_depth=max_depth)
  File "/usr/local/lib/python3.5/dist-packages/pipenv/vendor/shellingham/posix/__init__.py", line 20, in get_shell
    mapping = _get_process_mapping()
  File "/usr/local/lib/python3.5/dist-packages/pipenv/vendor/shellingham/posix/__init__.py", line 13, in _get_process_mapping
    return impl.get_process_mapping()
  File "/usr/local/lib/python3.5/dist-packages/pipenv/vendor/shellingham/posix/linux.py", line 25, in get_process_mapping
    cmd = fcmdline.read().split('\x00')[:-1]
  File "/usr/lib/python3.5/codecs.py", line 321, in decode
    (result, consumed) = self._buffer_decode(data, self.errors, final)
UnicodeDecodeError: 'utf-8' codec can't decode byte 0xc8 in position 68: invalid continuation byte
Have removed ~/.cache/pipenv and ~/.local/share/virtualenvs, but to no avail.
Added some debugging, it seems fcmdline.read() equals "cat" in some case. Have no idea why it would struggle with utf-8 chars?
Steps to replicate
$ pipenv --support
1
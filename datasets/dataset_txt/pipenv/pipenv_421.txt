Contributor
ob-stripe commented on 22 Nov 2018
Issue description
I'm using pipenv with Travis CI to test a library using various Python versions. The Pipfile targets Python 3.7 since that's the default version used by developers, but the library is tested against older versions (including 2.7). We use pipenv install --dev --skip-lock to install dependencies, like requests does (https://github.com/requests/requests/blob/943a5c8e89db1758ae24adbbedacb3b05c32df4a/Makefile#L4).
This used to work, but no longer does with pipenv 2018.11.14: installing dependencies fails with Python 2.7, 3.4 and 3.5. It still works with Python 3.6 and 3.7.
Expected result
Expected pip install --dev --skip-lock to succeed, like it used to with pipenv 2018.10.13. E.g. this build on Travis: https://travis-ci.org/stripe/stripe-python/jobs/452680616#L474-L483.
Actual result
Output of pipenv install --dev --skip-lock --verbose: https://gist.githubusercontent.com/ob-stripe/d6dc977dc12d362777e9fc68a969ad33/raw/d3b08ffb9ede1497c6de411811f3fd4c1d7d04ef/gistfile1.txt
You can also view the results on Travis: https://travis-ci.org/stripe/stripe-python/jobs/458434756#L475-L512.
Steps to replicate
I was unable to replicate this locally, but my local environment (macOS + brew + pyenv) is quite different from Travis'.
$ pipenv --support
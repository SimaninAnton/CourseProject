Jacob-Tate commented on 19 Apr 2019
Issue description
When you run the command pipenv install -e . even if it is successful the return code will be 1 on windows whereas if any other command is successful it returns 0.
Script to show this:
:: Run The command
pipenv install -e .

IF %ERRORLEVEL% NEQ 0 (
    :: ERROR WHILE RUNNING SETUP
    powershell write-host -fore Red == ERROR ==
    echo Failed to run install command
    echo %ERRORLEVEL%
    goto dirty_exit
) else (
    powershell write-host -fore Green Successfully ran command
)

:: Exit the script cleanly
exit /b 0

:dirty_exit

:: Exit the script dirty
exit /b -1
Result:
== ERROR ==
Failed to run install command
1
Expected result
From the script given above we expect
Successfully ran command
As pipenv install -e . should return 0
Actual result
C:\Users\Administrator\Desktop\redacted>pipenv install -e . --verbose
Installing -e .…
[==  ] Installing...Installing 'redacted'
$ ['C:\\Users\\Administrator\\.virtualenvs\\redacted-6agBnudX\\Scripts\\pip.exe', 'install', '--verbose', '--upgrade', '-e', '.', '-i', 'https://pypi.org/simple']
Adding redacted to Pipfile's [packages]…

C:\Users\Administrator\Desktop\redacted>IF %ERRORLEVEL% NEQ 0 (
More?     :: ERROR WHILE RUNNING SETUP
More?     powershell write-host -fore Red == ERROR ==
More?     echo Failed to run setup.cfg
More?     goto dirty_exit
More? ) else (
More?     powershell write-host -fore Green Successfully ran setup.cfg
More? )
== ERROR ==
Failed to run setup.cfg

C:\Users\Administrator\Desktop\redacted>
Steps to replicate
Steps provided above
$ pipenv --support
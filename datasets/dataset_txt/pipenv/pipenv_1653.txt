Contributor
sersorrel commented on 15 Jan 2018
If you try to pipenv install packages with names that are technically equivalent but look different, Pipenv doesn't always realise that the two names are equivalent, and creates a duplicate entry in the Pipfile.
Describe your environment
OS Type: Ubuntu 16.04
Python version: 3.6.3
Pipenv version: 9.0.1
Expected result
Normalisation should behave the same as other Python packaging software (Pip, PyPI, setuptools...) and be consistent with the Python documentation. For example, from the Python Packaging User Guide:
Comparison of project names is case insensitive and treats arbitrarily-long runs of underscores, hyphens, and/or periods as equal.
Actual result
Pipenv doesn't consider full stops . equivalent to underscores or hyphens, and adjacent hyphens/underscores/full stops aren't reduced to a single hyphen.
Steps to replicate
$ pipenv install flask-marshmallow
$ pipenv install Flask_-.MARSHMALLOW
$ cat Pipfile
...
[packages]

flask-marshmallow = "*"
"flask--.marshmallow" = "*"
...
It looks like there's a safe_name function in pkg_resources that might do the required normalisation? I don't know if that's the correct thing to use.
1
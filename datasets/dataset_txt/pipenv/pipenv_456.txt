Contributor
greysteil commented on 13 Nov 2018 â€¢
edited
Issue description
Running pyenv exec pipenv lock -r > req.txt should create a req.txt file with all the requirements that are in the lockfile. Instead it raises a key error.
(No biggie - just creating this issue because it's bust on master and I wouldn't want it to make it into a release! v2018.10.13 works just fine.)
Expected result
A req.txt file is generated correctly.
Actual result
Traceback (most recent call last):
  File "/Users/greysteil/.pyenv/versions/3.6.6/bin/pipenv", line 11, in <module>
    load_entry_point('pipenv', 'console_scripts', 'pipenv')()
  File "/Users/greysteil/code/dependabot-core/helpers/python/src/pipenv/pipenv/vendor/click/core.py", line 764, in __call__
    return self.main(*args, **kwargs)
  File "/Users/greysteil/code/dependabot-core/helpers/python/src/pipenv/pipenv/vendor/click/core.py", line 717, in main
    rv = self.invoke(ctx)
  File "/Users/greysteil/code/dependabot-core/helpers/python/src/pipenv/pipenv/vendor/click/core.py", line 1137, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
  File "/Users/greysteil/code/dependabot-core/helpers/python/src/pipenv/pipenv/vendor/click/core.py", line 956, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File "/Users/greysteil/code/dependabot-core/helpers/python/src/pipenv/pipenv/vendor/click/core.py", line 555, in invoke
    return callback(*args, **kwargs)
  File "/Users/greysteil/code/dependabot-core/helpers/python/src/pipenv/pipenv/vendor/click/decorators.py", line 64, in new_func
    return ctx.invoke(f, obj, *args, **kwargs)
  File "/Users/greysteil/code/dependabot-core/helpers/python/src/pipenv/pipenv/vendor/click/core.py", line 555, in invoke
    return callback(*args, **kwargs)
  File "/Users/greysteil/code/dependabot-core/helpers/python/src/pipenv/pipenv/vendor/click/decorators.py", line 17, in new_func
    return f(get_current_context(), *args, **kwargs)
  File "/Users/greysteil/code/dependabot-core/helpers/python/src/pipenv/pipenv/cli/command.py", line 319, in lock
    pre=state.installstate.pre,
  File "/Users/greysteil/code/dependabot-core/helpers/python/src/pipenv/pipenv/core.py", line 1217, in do_init
    pypi_mirror=pypi_mirror,
  File "/Users/greysteil/code/dependabot-core/helpers/python/src/pipenv/pipenv/core.py", line 711, in do_install_dependencies
    lockfile = project.get_or_create_lockfile()
  File "/Users/greysteil/code/dependabot-core/helpers/python/src/pipenv/pipenv/project.py", line 863, in get_or_create_lockfile
    } for s in sources
  File "/Users/greysteil/code/dependabot-core/helpers/python/src/pipenv/pipenv/project.py", line 863, in <listcomp>
    } for s in sources
KeyError: 'name'
Steps to replicate
pyenv exec pipenv lock --verbose -r > req.txt with Pipenv at 1c9b929
$ pipenv --support
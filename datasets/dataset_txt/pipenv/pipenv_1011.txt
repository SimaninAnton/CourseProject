arrrggghhh commented on 28 May 2018
Be sure to check the existing issues (both open and closed!).
Describe the issue briefly here.
sys_platform marker in Pipfile seems not to be working as expected.
Please run $ python -m pipenv.help, and paste the results here.
$ python -m pipenv.help output
If you're on MacOS, just run the following:
$ python -m pipenv.help | pbcopy
Expected result
uWSGI not being installed since it had run on windows.
Actual result
PS C:\Users\z\Desktop\pipenvtest> pipenv install --verbose
Pipfile.lock (ca72e7) out of date, updating to (3dd806)…
Locking [dev-packages] dependencies…
Locking [packages] dependencies…
repository.get_dependencies(ireq):
  File "c:\users\z\appdata\local\programs\python\python36\lib\site-packages\pipenv\patched\piptools\repositories\pypi.py", line 202, in get_dependencies
    legacy_results = self.get_legacy_dependencies(ireq)
  File "c:\users\z\appdata\local\programs\python\python36\lib\site-packages\pipenv\patched\piptools\repositories\pypi.py", line 256, in get_legacy_dependencies
    result = reqset._prepare_file(self.finder, ireq, ignore_requires_python=True)
  File "c:\users\z\appdata\local\programs\python\python36\lib\site-packages\pipenv\patched\notpip\req\req_set.py", line 644, in _prepare_file
    abstract_dist.prep_for_dist()
  File "c:\users\z\appdata\local\programs\python\python36\lib\site-packages\pipenv\patched\notpip\req\req_set.py", line 134, in prep_for_dist
    self.req_to_install.run_egg_info()
  File "c:\users\z\appdata\local\programs\python\python36\lib\site-packages\pipenv\vendor\pip9\req\req_install.py", line 439, in run_egg_info
    command_desc='python setup.py egg_info')
  File "c:\users\z\appdata\local\programs\python\python36\lib\site-packages\pipenv\vendor\pip9\utils\__init__.py", line 707, in call_subprocess
    % (command_desc, proc.returncode, cwd))
pip9.exceptions.InstallationError: Command "python setup.py egg_info" failed with error code 1 in C:\Users\z\AppData\Local\Temp\tmp91q1edfxbuild\uWSGI\
Steps to replicate
Provide the steps to replicate (which usually at least includes the commands and the Pipfile).
powersehll on Windows 10
pipenv install
edit Pipfile to add uWSGI = {version = "==2.0.15", sys_platform = "== 'linux'"}
pipenv install
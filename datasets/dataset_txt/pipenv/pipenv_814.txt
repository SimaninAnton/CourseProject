andyneff commented on 23 Jul 2018
Issue description
Running pipenv shell on windows when running bash in Git for Windows does not activate the virtual env successfully. It appears the actual activate script with the correct values is not being used.
Expected result
I would successfully be in the virtualenv
Actual result
The VIRTUAL_ENV and PATH variables are in the C: notation instead of /c/ notation which would have worked.
declare -x VIRTUAL_ENV="C:\\Users\\user\\.virtualenvs\\project-OJ2s3Ey8"
declare -x PATH="C:/Users/user/.virtualenvs/project-OJ2s3Ey8/Scripts:/c/Users/user/bin:/mingw64/bin:/usr/local/bin:/usr/bin:/usr/bin:/mingw64/bin:/usr/bin:/c/Users/andy/bin:/c/Python37/Scripts:/c/Python37" etc...
Sourcing the virtualenv activate variable does work, even though Git for Windows uses msys and not cygwin. Did not test cygwin
Steps to replicate
pipenv install sphinx
echo $$
pipenv shell
echo $$
pip freeze
echo $PATH
Shows that the pip environment is the original python environment, not the virtualenv. The different pid verifies that a new shell is indeed being run, but the virtualenv is not activating
Also tried
PIPENV_EMULATOR=bash pipenv shell
Identical results
$ pipenv --support
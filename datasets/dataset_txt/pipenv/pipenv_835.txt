MarkLodato commented on 15 Jul 2018
Issue description
Pipenv does not honor environment markers in requirements.txt, or at least not python_version.
Example that is parsed incorrectly:
wsgiref==0.1.2;python_version<'3.0'
Expected result
wsgiref would be excluded from Pipfile because the Python version is 3 and requirements.txt said python_version<'3.0'.
Actual result
wsgiref is included in Pipfile.
Steps to replicate
Note: the same result is obtained whether or not --three is used and regardless of the whitespace in requirements.txt.
$ echo "wsgiref==0.1.2;python_version<'3.0'" > requirements.txt
$ pipenv install -r requirements.txt
Creating a virtualenv for this project...
Pipfile: /home/mark/tmp/pipenv-test/Pipfile
Using /usr/bin/python3 (3.6.5) to create virtualenv...
[... snip - see "Console output" below ...]
$ cat Pipfile
[[source]]
url = "https://pypi.org/simple"
verify_ssl = true
name = "pypi"

[packages]
wsgiref = "==0.1.2"

[dev-packages]

[requires]
python_version = "3.6"
Console output of `pipenv install`
$ pipenv --support
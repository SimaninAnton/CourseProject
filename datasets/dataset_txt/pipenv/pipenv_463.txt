Collaborator
frostming commented on 10 Nov 2018 â€¢
edited
Issue description
On master branch, pipenv install -e ${package} in empty directory gives error.
2018.10.13 is fine.
Incomplete implementation of #2846
Expected result
Pipfile and virtualenv are created automatically and editable package is installed successfully.
Actual result
$ pipenv install -e click
Traceback (most recent call last):
  File "/Users/fming/.local/share/virtualenvs/pipenv-46tK8lkP/bin/pipenv", line 11, in <module>
    load_entry_point('pipenv', 'console_scripts', 'pipenv')()
  File "/Users/fming/wkspace/github/pipenv/pipenv/vendor/click/core.py", line 764, in __call__
    return self.main(*args, **kwargs)
  File "/Users/fming/wkspace/github/pipenv/pipenv/vendor/click/core.py", line 717, in main
    rv = self.invoke(ctx)
  File "/Users/fming/wkspace/github/pipenv/pipenv/vendor/click/core.py", line 1137, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
  File "/Users/fming/wkspace/github/pipenv/pipenv/vendor/click/core.py", line 956, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File "/Users/fming/wkspace/github/pipenv/pipenv/vendor/click/core.py", line 555, in invoke
    return callback(*args, **kwargs)
  File "/Users/fming/wkspace/github/pipenv/pipenv/vendor/click/decorators.py", line 64, in new_func
    return ctx.invoke(f, obj, *args, **kwargs)
  File "/Users/fming/wkspace/github/pipenv/pipenv/vendor/click/core.py", line 555, in invoke
    return callback(*args, **kwargs)
  File "/Users/fming/wkspace/github/pipenv/pipenv/vendor/click/decorators.py", line 17, in new_func
    return f(get_current_context(), *args, **kwargs)
  File "/Users/fming/wkspace/github/pipenv/pipenv/cli/command.py", line 249, in install
    editable_packages=state.installstate.editables,
  File "/Users/fming/wkspace/github/pipenv/pipenv/core.py", line 1698, in do_install
    raise exceptions.PipfileNotFound(project.pipfile_location)
  File "/Users/fming/wkspace/github/pipenv/pipenv/exceptions.py", line 149, in __init__
    super(PipfileNotFound, self).__init__(filename, message=fix_utf8(message), extra=extra, **kwargs)
  File "/Users/fming/wkspace/github/pipenv/pipenv/exceptions.py", line 126, in __init__
    FileError.__init__(self, filename=filename, hint=fix_utf8(message), **kwargs)
  File "/Users/fming/wkspace/github/pipenv/pipenv/vendor/click/exceptions.py", line 213, in __init__
    ui_filename = filename_to_ui(filename)
  File "/Users/fming/wkspace/github/pipenv/pipenv/vendor/click/_compat.py", line 453, in filename_to_ui
    value = value.encode('utf-8', 'surrogateescape') \
AttributeError: 'NoneType' object has no attribute 'encode'
Steps to replicate
Provide the steps to replicate (which usually at least includes the commands and the Pipfile).
$ mkdir empty_dir && cd empty_dir
$ pipenv install -e click
Please run $ pipenv --support, and paste the results here. Don't put backticks (`) around it! The output already contains Markdown formatting.
If you're on macOS, run the following:
$ pipenv --support | pbcopy
If you're on Windows, run the following:
> pipenv --support | clip
If you're on Linux, run the following:
$ pipenv --support | xclip
$ pipenv --support
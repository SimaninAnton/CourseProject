babaMar commented on 9 Nov 2018 â€¢
edited
Issue description
pipenv raises InvalidSpecifier when trying to install pytz==2012h in requirements file
Expected result
package to be installed
Actual result
Traceback (most recent call last):
  File "/home/stefano/.local/lib/python3.6/site-packages/pipenv/resolver.py", line 101, in <module>
    main()
  File "/home/stefano/.local/lib/python3.6/site-packages/pipenv/resolver.py", line 90, in main
    system=system,
  File "/home/stefano/.local/lib/python3.6/site-packages/pipenv/resolver.py", line 73, in resolve
    allow_global=system,
  File "/home/stefano/.local/lib/python3.6/site-packages/pipenv/utils.py", line 453, in resolve_deps
    version = str(req.get_version())
  File "/home/stefano/.local/lib/python3.6/site-packages/pipenv/vendor/requirementslib/models/requirements.py", line 1008, in
get_version
    return parse_version(self.get_specifier().version)
  File "/home/stefano/.local/lib/python3.6/site-packages/pipenv/vendor/requirementslib/models/requirements.py", line 1005, in
get_specifier
    return Specifier(self.specifiers)
  File "/home/stefano/.local/lib/python3.6/site-packages/pipenv/vendor/packaging/specifiers.py", line 85, in __init__
    raise InvalidSpecifier("Invalid specifier: '{0}'".format(spec))
packaging.specifiers.InvalidSpecifier: Invalid specifier: '==2012h'
/home/stefano/.local/lib/python3.6/site-packages/pipenv/_compat.py:113: ResourceWarning: Implicitly cleaning up <TemporaryDirectory '/tmp/pipenv-q9klYm-requirements'>
  warnings.warn(warn_message, ResourceWarning)
Steps to replicate
Installed virtualenv with pipenv shell --python 2.7 and dependencies with pipenv install -r requirements.txt
$ pipenv --support
Moritz90 commented on 4 Apr 2018 â€¢
edited
After upgrading from pipenv 11.1.0 to 11.9.0, running the command defined in the [scripts] section of my Pipfile no longer works.
$ python -m pipenv.help output
Steps to replicate
Add the following to your Pipfile:
[scripts]
tests = "python -m pytest"
Then try to run pipenv run tests.
Expected result
pytest is executed
Actual result
Traceback (most recent call last):
  File "/home/moritz/.local/bin/pipenv", line 11, in <module>
    sys.exit(cli())
  File "/home/moritz/.local/lib/python3.6/site-packages/pipenv/vendor/click/core.py", line 722, in __call__
    return self.main(*args, **kwargs)
  File "/home/moritz/.local/lib/python3.6/site-packages/pipenv/vendor/click/core.py", line 697, in main
    rv = self.invoke(ctx)
  File "/home/moritz/.local/lib/python3.6/site-packages/pipenv/vendor/click/core.py", line 1066, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
  File "/home/moritz/.local/lib/python3.6/site-packages/pipenv/vendor/click/core.py", line 895, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File "/home/moritz/.local/lib/python3.6/site-packages/pipenv/vendor/click/core.py", line 535, in invoke
    return callback(*args, **kwargs)
  File "/home/moritz/.local/lib/python3.6/site-packages/pipenv/cli.py", line 602, in run
    core.do_run(command=command, args=args, three=three, python=python)
  File "/home/moritz/.local/lib/python3.6/site-packages/pipenv/core.py", line 2200, in do_run
    command = ' '.join(project.scripts[command])
  File "/home/moritz/.local/lib/python3.6/site-packages/pipenv/project.py", line 374, in scripts
    scripts[k] = shlex.split(v, posix=True)
  File "/usr/lib/python3.6/shlex.py", line 305, in split
    return list(lex)
  File "/usr/lib/python3.6/shlex.py", line 295, in __next__
    token = self.get_token()
  File "/usr/lib/python3.6/shlex.py", line 105, in get_token
    raw = self.read_token()
  File "/usr/lib/python3.6/shlex.py", line 136, in read_token
    nextchar = self.instream.read(1)
AttributeError: 'ArrayElement' object has no attribute 'read'
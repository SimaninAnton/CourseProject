lbenezriravin commented on 22 May 2018
Possibly related to #2235
I have a private dependency (A) that depends on a private subdependency (B >=1.6.3,<2.0). Another private subdependency (C) also depends on (B >=1.6.4,<2.0). Note the more recent version. When I install A, everything works fine, and it finds B==1.6.7. However, pipenv falls over when generating Pipfile.lock.
$ python -m pipenv.help output
Expected result
Lockfile should have been generated easily -- a correct version was already found and installed.
Actual result
INFO:notpip.req.req_set:Obtaining A from git+ssh://git@github.com/private/A.git@master#egg=A
INFO:pip9.vcs.git:Cloning ssh://git@github.com/private/A.git (to master) to /tmp/tmpEO7lslsource/A
/home/user/.local/lib/python2.7/site-packages/pipenv/patched/notpip/index.py:205: RemovedInPip10Warning: Dependency Links processing has been deprecated and will be removed in a future release.
  RemovedInPip10Warning,
Warning: Your dependencies could not be resolved. You likely have a mismatch in your sub-dependencies.
  You can use $ pipenv install --skip-lock to bypass this mechanism, then run $ pipenv graph to inspect the situation.Hint: try $ pipenv lock --pre if it is a pre-release dependency
Could not find a version that matches B<2.0,>=1.6.3,>=1.6.4
Tried: 1.6.3
There are incompatible versions in the resolved dependencies.
INFO:notpip.req.req_set:Obtaining A from git+ssh://git@github.com/private/A.git@master#egg=A
INFO:pip9.vcs.git:Cloning ssh://git@github.com/private/A.git (to master) to /tmp/tmpqQIHoRsource/A
Warning: Your dependencies could not be resolved. You likely have a mismatch in your sub-dependencies.
  You can use $ pipenv install --skip-lock to bypass this mechanism, then run $ pipenv graph to inspect the situation.Hint: try $ pipenv lock --pre if it is a pre-release dependency
Could not find a version that matches B<2.0,>=1.6.3,>=1.6.4
Tried: 1.6.3
There are incompatible versions in the resolved dependencies.
Steps to replicate
pipenv install -e 'git+ssh://git@github.com/private/A.git@master#egg=A'
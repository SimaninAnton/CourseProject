halicki commented on 16 Nov 2018 •
edited
Issue description
On ubuntu 18.04 pipenv install run from fish is unable to find specific python version installed with asdf.
In my oppinion it's reason is that module pipenv.vendor.pythonfinder.environment depends on presence of environment variable called ASDF_DATA_DIR while file asdf.fish (which importing is suggested by the asdf README.md) that does not exports it.
Expected result
Pipenv finds successfully specific python version from asdf.
Actual result
Pipenv don't find python installation although asdf is present in system.
$ pipenv install
Warning: Python 3.7 was not found on your system…
You can specify specific versions of Python with:
  $ pipenv --python path/to/python
Steps to replicate
Install & run fish.
sudo apt-get install fish
fish
Install asdf.
Follow instructions from asdf README.md
git clone https://github.com/asdf-vm/asdf.git ~/.asdf --branch v0.6.1
echo 'source ~/.asdf/asdf.fish' >> ~/.config/fish/config.fish
mkdir -p ~/.config/fish/completions; and cp ~/.asdf/completions/asdf.fish ~/.config/fish/completions
exec asdf
Create a basic Pipfile:
[[source]]
url = "https://pypi.org/simple"
name = "pypi"
verify_ssl = true

[packages]
requests = "*"

[dev-packages]

[requires]
python_version = "3.7"
Run pipenv:
pipenv install
$ pipenv --support
1
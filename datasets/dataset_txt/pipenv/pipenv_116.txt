cocoa-maemae commented on 4 Jul 2019
Issue description
python version 3.7.3
pipenv version 2018.11.26
When I try to use site.py#getsitepackages() in pipenv environment, the below error occurrs.
AttributeError: module 'site' has no attribute 'getsitepackages'
When I use the same module in pip environment, the error does not occur.
The cause is probably that pipenv doesn't refer site.py installed in python environment.
I checked the installed directory.
pipenv --venv
$HOME/.local/share/virtualenvs/$hash
ls -l $HOME/.local/share/virtualenvs/$hash/lib/python3.7 | grep site.py
-rw-rw-r--   1 $user $user 28389 Jun  6 07:13 site.py
The aforementioned site.py does not have getsitepackages() method.
The other modules refer to the modules installed in python environment.
E.g.
os.py
ls -l $HOME/.local/share/virtualenvs/$hash/lib/python3.7 | grep os.py
lrwxrwxrwx   1 $user $user    51 Jun  6 07:13 os.py -> /usr/local/pyenv/versions/3.7.3/lib/python3.7/os.py
Expected result
Even in pipenv environment, site.py#getsitepackages() method is available.
Steps to replicate
Install python3.7.3
Install pipenv by pip
Run the below
pipenv run python -c "import site; site.getsitepackages()"
AndreasPresthammer commented on 13 Apr 2018 •
edited
Given that you have a Pipfile with other dependencies and a '"e1839a8" = {path = ".", editable = true}' section created using pipenv install -e .. pip install --skip-lock will ONLY install the self and not any of the other dependencies specified in the [packages] section.
This only fails in latest 11.10.0 version. Version 11.9.0 is working fine. This MAY only be a problem when you run with --skip-lock, but I haven't verified that, since #1906 is blocking me from using lock file.
If I install with debug flag it works fine: pipenv install -d --skip-lock
Executing command: pipenv --rm ; pipenv install --skip-lock -v

Removing virtualenv (/home/andreas/.virtualenvs/my-project-UpnTMLUq)…
Creating a virtualenv for this project…
Using /usr/bin/python3.6m (3.6.3) to create virtualenv…
⠋Running virtualenv with interpreter /usr/bin/python3.6m
Using base prefix '/usr'
New python executable in /home/andreas/.virtualenvs/my-project-UpnTMLUq/bin/python3.6m
Also creating executable in /home/andreas/.virtualenvs/my-project-UpnTMLUq/bin/python
Installing setuptools, pip, wheel...done.

Virtualenv location: /home/andreas/.virtualenvs/my-project-UpnTMLUq
Installing -e .…
⠙Installing '-e .'
$ "/home/andreas/.virtualenvs/my-project-UpnTMLUq/bin/pip" install   --verbose    -e "." -i https://pypi.python.org/simple --exists-action w
Obtaining file:///home/andreas/code/my-project
  Running setup.py (path:/home/andreas/code/my-project/setup.py) egg_info for package from file:///home/andreas/code/my-project
    Running command python setup.py egg_info
    running egg_info
    writing company.my_project.egg-info/PKG-INFO
    writing dependency_links to company.my_project.egg-info/dependency_links.txt
    writing top-level names to company.my_project.egg-info/top_level.txt
    reading manifest file 'company.my_project.egg-info/SOURCES.txt'
    writing manifest file 'company.my_project.egg-info/SOURCES.txt'
  Source in /home/andreas/code/my-project has version 0.1, which satisfies requirement company.my-project==0.1 from file:///home/andreas/code/my-project
Installing collected packages: company.my-project
  Running setup.py develop for company.my-project
    Running command /home/andreas/.virtualenvs/my-project-UpnTMLUq/bin/python3.6m -c "import setuptools, tokenize;__file__='/home/andreas/code/my-project/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\r\n', '\n');f.close();exec(compile(code, __file__, 'exec'))" develop --no-deps
    running develop
    running egg_info
    writing company.my_project.egg-info/PKG-INFO
    writing dependency_links to company.my_project.egg-info/dependency_links.txt
    writing top-level names to company.my_project.egg-info/top_level.txt
    reading manifest file 'company.my_project.egg-info/SOURCES.txt'
    writing manifest file 'company.my_project.egg-info/SOURCES.txt'
    running build_ext
    Creating /home/andreas/.virtualenvs/my-project-UpnTMLUq/lib/python3.6/site-packages/company.my-project.egg-link (link to .)
    Adding company.my-project 0.1 to easy-install.pth file

    Installed /home/andreas/code/my-project
Successfully installed company.my-project
Cleaning up...

Adding -e . to Pipfile's [packages]…
/usr/local/lib/python2.7/dist-packages/pipenv/utils.py:1258: ResourceWarning: Implicitly cleaning up <TemporaryDirectory '/tmp/pipenv-VYzejO-requirements'>
  warnings.warn(warn_message, ResourceWarning)
$ python -m pipenv.help output
Contributor
jacebrowning commented on 6 Mar 2018 •
edited
A minimal Pipfile now fails to lock with pipenv==11.0.2 installed via Homebrew.
Describe your environment
macOS
Python version: Python 3.6.4
Pipenv version: pipenv, version 11.0.2
Expected result
Pipfile.lock is generated after running pipenv install.
Actual result
pip.exceptions.InstallationError: Command "python setup.py egg_info" failed with error code 1
Steps to replicate
Using this Pipifile in an otherwise empty directory:
[[source]]

url = "https://pypi.python.org/simple"
verify_ssl = true
name = "pypi"

[requires]

python_version = "3"

[dev-packages]

sniffer = "*"
MacFSEvents = {version = "*", sys_platform = "== 'darwin'"}
$ pipenv install
Pipfile.lock not found, creating…
Locking [dev-packages] dependencies…
nv/patched/piptools/resolver.py", line 279, in _iter_dependencies
    for dependency in self.repository.get_dependencies(ireq):
  File "/usr/local/Cellar/pipenv/11.0.2/libexec/lib/python3.6/site-packages/pipenv/patched/piptools/repositories/pypi.py", line 162, in get_dependencies
    legacy_results = self.get_legacy_dependencies(ireq)
  File "/usr/local/Cellar/pipenv/11.0.2/libexec/lib/python3.6/site-packages/pipenv/patched/piptools/repositories/pypi.py", line 199, in get_legacy_dependencies
    result = reqset._prepare_file(self.finder, ireq)
  File "/usr/local/Cellar/pipenv/11.0.2/libexec/lib/python3.6/site-packages/pipenv/patched/pip/req/req_set.py", line 639, in _prepare_file
    abstract_dist.prep_for_dist()
  File "/usr/local/Cellar/pipenv/11.0.2/libexec/lib/python3.6/site-packages/pipenv/patched/pip/req/req_set.py", line 134, in prep_for_dist
    self.req_to_install.run_egg_info()
  File "/usr/local/Cellar/pipenv/11.0.2/libexec/lib/python3.6/site-packages/pipenv/patched/pip/req/req_install.py", line 438, in run_egg_info
    command_desc='python setup.py egg_info')
  File "/usr/local/Cellar/pipenv/11.0.2/libexec/lib/python3.6/site-packages/pipenv/patched/pip/utils/__init__.py", line 707, in call_subprocess
    % (command_desc, proc.returncode, cwd))
pip.exceptions.InstallationError: Command "python setup.py egg_info" failed with error code 1 in /var/folders/h1/2b6gts3x37zcnj5khyv8y5180000gn/T/tmp0jkxg5jebuild/pync/
At a minimum, I would expect more debugging information to be displayed.
Kristinita commented on 2 Mar 2018 •
edited
1. Summary
pipenv clean delete my Python Markdown extensions, that I install from GitHub.
2. Environment
Windows 10 Enterprise LTSB 64-bit EN,
Python 3.6.4,
Pipenv 10.1.2,
Pelican 3.7.1,
Python Markdown 2.6.11,
my repository on GitHub.
3. Files
I add my Python Markdown extensions to pelicanconf.py (see MARKDOWN subsection on official Pelican site), example:
MARKDOWN = {
    'extension_configs': {
        'downheader': {},
    },
    'output_format': 'html5',
}
4. Stepse to reproduce
I try build my site:
D:\Kristinita>pipenv run pelican -s publishconf.py
ERROR: Could not process Gingerinas\Korvers.md
  | ModuleNotFoundError: No module named 'mdx_downheader'
ERROR: Could not process Gingerinas\Testus.md
  | ModuleNotFoundError: No module named 'mdx_downheader'
# Another articles …
ERROR: Could not process Sublime-Text\Sublime-Text-Power-User-notes.md
  | ModuleNotFoundError: No module named 'mdx_downheader'
ERROR: Could not process Sublime-Text\ValeriyaSpeller.md
  | ModuleNotFoundError: No module named 'mdx_downheader'
Done: Processed 0 articles, 0 drafts, 0 pages and 0 hidden pages in 2.03 seconds.
I get errors. I need to install mdx_downheader extension.
D:\Kristinita>pipenv install git+https://github.com/cprieto/mdx_downheader.git#egg=mdx_downheader --dev
Installing git+https://github.com/cprieto/mdx_downheader.git#egg=mdx_downheader…
Warning: You installed a VCS dependency in non–editable mode. This will work fine, but sub-dependencies will not be resolved by $ pipenv lock.
  To enable this sub–dependency functionality, specify that this dependency is editable.
Collecting mdx_downheader from git+https://github.com/cprieto/mdx_downheader.git#egg=mdx_downheader
  Cloning https://github.com/cprieto/mdx_downheader.git to c:\users\sashac~1\appdata\local\temp\pip-build-tgmzt091\mdx-downheader
Requirement already satisfied: Markdown in d:\kristinita\.venv\lib\site-packages (from markdown-downheader)
Installing collected packages: markdown-downheader
  Running setup.py install for markdown-downheader: started
    Running setup.py install for markdown-downheader: finished with status 'done'
Successfully installed markdown-downheader-1.0.1

Adding git+https://github.com/cprieto/mdx_downheader.git#egg=mdx_downheader to Pipfile's [dev-packages]…
Pipfile.lock (46f8f0) out of date, updating to (2e4879)…
Locking [dev-packages] dependencies…
Locking [packages] dependencies…
Updated Pipfile.lock (2e4879)!
Installing dependencies from Pipfile.lock (2e4879)…
  ================================ 37/37 - 00:00:23
To activate this project's virtualenv, run the following:
 $ pipenv shell
Now I can successful build my Pelican site:
D:\Kristinita>pipenv run pelican -s publishconf.py
Done: Processed 26 articles, 0 drafts, 0 pages and 0 hidden pages in 6.94 seconds.
But pipenv clean delete mdx_downheader:
D:\Kristinita>pipenv clean --verbose
Ignoring 'six'.
Ignoring 'packaging'.
Unintalling 'markdown-downheader'…
Unintalling 'mdx-customspanclass'…
I can't build my site again.
D:\Kristinita>pipenv run pelican -s publishconf.py
ERROR: Could not process Gingerinas\Korvers.md
  | ModuleNotFoundError: No module named 'mdx_downheader'
ERROR: Could not process Gingerinas\Testus.md
  | ModuleNotFoundError: No module named 'mdx_downheader'
# Another articles …
ERROR: Could not process Sublime-Text\Sublime-Text-Power-User-notes.md
  | ModuleNotFoundError: No module named 'mdx_downheader'
ERROR: Could not process Sublime-Text\ValeriyaSpeller.md
  | ModuleNotFoundError: No module named 'mdx_downheader'
Done: Processed 0 articles, 0 drafts, 0 pages and 0 hidden pages in 2.92 seconds.
Thanks.
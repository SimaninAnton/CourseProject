fgervais commented on 19 Jul 2018 â€¢
edited
As seen on https://stackoverflow.com/questions/51411699/dist-info-directory-not-found-with-pipenv-install-r-requirements-txt
Issue description
Requirements installation fails on these two entries:
https://launchpad.net/ubuntu/+archive/primary/+files/python-apt_1.1.0~beta1build1.tar.xz
https://launchpad.net/python-distutils-extra/trunk/2.39/+download/python-distutils-extra-2.39.tar.gz
Expected result
Expecting requirements to be installed.
Actual result
Requirements file provided! Importing into Pipfile...
Installing dependencies from Pipfile.lock (2ae59c)...
An error occurred while installing https://launchpad.net/python-distutils-extra/trunk/2.39/+download/python-distutils-extra-2.39.tar.gz#egg=bab6ea0! Will try again.
An error occurred while installing https://launchpad.net/ubuntu/+archive/primary/+files/python-apt_1.1.0~beta1build1.tar.xz#egg=f3a5fdd! Will try again.
  ðŸŸŸ   â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰ 38/38 â€” 00:00:03
Installing initially failed dependencies...
Collecting bab6ea0 from https://launchpad.net/python-distutils-extra/trunk/2.39/+download/python-distutils-extra-2.39.tar.gz#egg=bab6ea0 
Installing collected packages: bab6ea0

Exception:
Traceback (most recent call last):
  File "/media/fgervais/c0b0db62-ee5f-4b1b-84fb-c303406e5b57/eclypse20/core/.venv/lib/python3.5/site-packages/pip/_internal/basecommand.py", line 228, in main
    status = self.run(options, args)
  File "/media/fgervais/c0b0db62-ee5f-4b1b-84fb-c303406e5b57/eclypse20/core/.venv/lib/python3.5/site-packages/pip/_internal/commands/install.py", line 335, in run
    use_user_site=options.use_user_site,
  File "/media/fgervais/c0b0db62-ee5f-4b1b-84fb-c303406e5b57/eclypse20/core/.venv/lib/python3.5/site-packages/pip/_internal/req/__init__.py", line 49, in install_given_reqs
    **kwargs
  File "/media/fgervais/c0b0db62-ee5f-4b1b-84fb-c303406e5b57/eclypse20/core/.venv/lib/python3.5/site-packages/pip/_internal/req/req_install.py", line 748, in install
    use_user_site=use_user_site, pycompile=pycompile,
  File "/media/fgervais/c0b0db62-ee5f-4b1b-84fb-c303406e5b57/eclypse20/core/.venv/lib/python3.5/site-packages/pip/_internal/req/req_install.py", line 961, in move_wheel_files
    warn_script_location=warn_script_location,
  File "/media/fgervais/c0b0db62-ee5f-4b1b-84fb-c303406e5b57/eclypse20/core/.venv/lib/python3.5/site-packages/pip/_internal/wheel.py", line 316, in move_wheel_files
    assert info_dir, "%s .dist-info directory not found" % req
AssertionError: bab6ea0 .dist-info directory not found

  â˜¤  â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰ 0/2 â€” 00:00:00
Steps to replicate
pipenv install -r snapcraft/requirements.txt
Notes
It looks like the appended #egg= that causes the issue.
Anybody knows why it's appended?
if I pipenv shell and try it manually,
this works:
pip3 install pip3 install https://launchpad.net/ubuntu/+archive/primary/+files/python-apt_1.1.0~beta1build1.tar.xz
but this fails with the same error as pipenv:
pip3 install https://launchpad.net/ubuntu/+archive/primary/+files/python-apt_1.1.0~beta1build1.tar.xz#egg=f3a5fdd
$ pipenv --support
Contributor
greysteil commented on 21 Nov 2018 â€¢
edited
Issue description
Running pyenv exec pipenv --two lock causes an error
Expected result
It should pick a version of Python 2 and use that, rather than erroring
Actual result
  File "/Users/greysteil/.pyenv/versions/3.6.6/bin/pipenv", line 11, in <module>
    load_entry_point('pipenv', 'console_scripts', 'pipenv')()
  File "/Users/greysteil/code/dependabot-core/helpers/python/src/pipenv/pipenv/vendor/click/core.py", line 764, in __call__
    return self.main(*args, **kwargs)
  File "/Users/greysteil/code/dependabot-core/helpers/python/src/pipenv/pipenv/vendor/click/core.py", line 717, in main
    rv = self.invoke(ctx)
  File "/Users/greysteil/code/dependabot-core/helpers/python/src/pipenv/pipenv/vendor/click/core.py", line 1134, in invoke
    Command.invoke(self, ctx)
  File "/Users/greysteil/code/dependabot-core/helpers/python/src/pipenv/pipenv/vendor/click/core.py", line 956, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File "/Users/greysteil/code/dependabot-core/helpers/python/src/pipenv/pipenv/vendor/click/core.py", line 555, in invoke
    return callback(*args, **kwargs)
  File "/Users/greysteil/code/dependabot-core/helpers/python/src/pipenv/pipenv/vendor/click/decorators.py", line 64, in new_func
    return ctx.invoke(f, obj, *args, **kwargs)
  File "/Users/greysteil/code/dependabot-core/helpers/python/src/pipenv/pipenv/vendor/click/core.py", line 555, in invoke
    return callback(*args, **kwargs)
  File "/Users/greysteil/code/dependabot-core/helpers/python/src/pipenv/pipenv/vendor/click/decorators.py", line 17, in new_func
    return f(get_current_context(), *args, **kwargs)
  File "/Users/greysteil/code/dependabot-core/helpers/python/src/pipenv/pipenv/cli/command.py", line 204, in cli
    clear=state.clear,
  File "/Users/greysteil/code/dependabot-core/helpers/python/src/pipenv/pipenv/core.py", line 569, in ensure_project
    pypi_mirror=pypi_mirror,
  File "/Users/greysteil/code/dependabot-core/helpers/python/src/pipenv/pipenv/core.py", line 511, in ensure_virtualenv
    ensure_python(three=three, python=python)
  File "/Users/greysteil/code/dependabot-core/helpers/python/src/pipenv/pipenv/core.py", line 397, in ensure_python
    path_to_python = find_a_system_python(python)
  File "/Users/greysteil/code/dependabot-core/helpers/python/src/pipenv/pipenv/core.py", line 360, in find_a_system_python
    python_entry = finder.find_python_version(line)
  File "/Users/greysteil/code/dependabot-core/helpers/python/src/pipenv/pipenv/vendor/pythonfinder/pythonfinder.py", line 95, in find_python_version
    version_dict = PythonVersion.parse(major)
  File "/Users/greysteil/code/dependabot-core/helpers/python/src/pipenv/pipenv/vendor/pythonfinder/models/python.py", line 358, in parse
    version_dict = parse_python_version(str(version))
  File "/Users/greysteil/code/dependabot-core/helpers/python/src/pipenv/pipenv/vendor/pythonfinder/utils.py", line 86, in parse_python_version
    raise InvalidPythonVersion("%s is not a python version" % version_str)
pipenv.vendor.pythonfinder.exceptions.InvalidPythonVersion: 2 is not a python version
Steps to replicate
Run pyenv exec pipenv --two lock on any Pipenv file (with Pipenv at current master).
$ pipenv --support
ItachiSan commented on 21 Jun 2019
Issue description
I have a setuptools-based module with a direct URL requirement to a Git repository; installation does work, but not locking.
Expected result
Locking the package works as intended.
Actual result
When possible, provide the verbose output (--verbose), especially for locking and dependencies resolving issues.
Steps to replicate
Sources
Pipfile
[[source]]
name = "pypi"
url = "https://pypi.org/simple"
verify_ssl = true

[packages]
broken-stuff = {editable = true,path = "."}

[dev-packages]

[requires]
python_version = "3.6"
setup.py
from setuptools import setup, find_packages

setup(
    name='broken_stuff',
    version='0.0.1',
    description='A package that can\'t be installed.',
    long_description='A package that can\'t be installed.',
    long_description_content_type='text/markdown',
    author='Giovanni Santini',
    author_email='giovannisantini93@yahoo.it',
    classifiers=[
        'Development Status :: 3 - Alpha',
        'Intended Audience :: Developers',
        'Programming Language :: Python :: 3.6',
    ],
    keywords='broken package',
    packages=find_packages(),
    python_requires='>=3, <3.7',
    install_requires=[
        'keras',
        'keras_contrib @ git+https://github.com/keras-team/keras-contrib.git@master',
  'tensorflow',
    ],
)
broken_stuff/init.py
"""
I am just a broken package.

Let me be.
"""

if __name__ == '__main__':
    print('Leave me alone!!!')
Commands
> pipenv install
Creating a virtualenv for this project…
Pipfile: E:\Progetti\Pull Requests\broken_pipenv\Pipfile
Using C:/Program Files/Python36/python.exe (3.6.8) to create virtualenv…
[    ] Creating virtual environment...Using base prefix 'C:\\Program Files\\Python36'
New python executable in C:\Users\Giovanni\.virtualenvs\broken_pipenv-OZETfJy1\Scripts\python.exe
Installing setuptools, pip, wheel...
done.
Running virtualenv with interpreter C:/Program Files/Python36/python.exe

Successfully created virtual environment!
Virtualenv location: C:\Users\Giovanni\.virtualenvs\broken_pipenv-OZETfJy1
Pipfile.lock not found, creating…
Locking [dev-packages] dependencies…
Locking [packages] dependencies…
Locking Failed!
[pipenv.exceptions.ResolutionFailure]:   File "c:/program files/python37/lib/site-packages/pipenv/resolver.py", line 69, in resolve
[pipenv.exceptions.ResolutionFailure]:       req_dir=requirements_dir
[pipenv.exceptions.ResolutionFailure]:   File "c:\program files\python37\lib\site-packages\pipenv\utils.py", line 726, in resolve_deps
[pipenv.exceptions.ResolutionFailure]:       req_dir=req_dir,
[pipenv.exceptions.ResolutionFailure]:   File "c:\program files\python37\lib\site-packages\pipenv\utils.py", line 480, in actually_resolve_deps
[pipenv.exceptions.ResolutionFailure]:       resolved_tree = resolver.resolve()
[pipenv.exceptions.ResolutionFailure]:   File "c:\program files\python37\lib\site-packages\pipenv\utils.py", line 395, in resolve
[pipenv.exceptions.ResolutionFailure]:       raise ResolutionFailure(message=str(e))
[pipenv.exceptions.ResolutionFailure]:       pipenv.exceptions.ResolutionFailure: ERROR: ERROR: Could not find a version that matches keras_contrib@ git+https://github.com/keras-team/keras-contrib.git@master from git+https://github.com/keras-team/keras-contrib.git@master
[pipenv.exceptions.ResolutionFailure]:       No versions found
[pipenv.exceptions.ResolutionFailure]: Warning: Your dependencies could not be resolved. You likely have a mismatch in your sub-dependencies.
  First try clearing your dependency cache with $ pipenv lock --clear, then try the original command again.
 Alternatively, you can use $ pipenv install --skip-lock to bypass this mechanism, then run $ pipenv graph to inspect the situation.
  Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: ERROR: Could not find a version that matches keras_contrib@ git+https://github.com/keras-team/keras-contrib.git@master from git+https://github.com/keras-team/keras-contrib.git@master
No versions found
Was https://pypi.org/simple reachable?
[pipenv.exceptions.ResolutionFailure]:       req_dir=requirements_dir
[pipenv.exceptions.ResolutionFailure]:   File "c:\program files\python37\lib\site-packages\pipenv\utils.py", line 726, in resolve_deps
[pipenv.exceptions.ResolutionFailure]:       req_dir=req_dir,
[pipenv.exceptions.ResolutionFailure]:   File "c:\program files\python37\lib\site-packages\pipenv\utils.py", line 480, in actually_resolve_deps
[pipenv.exceptions.ResolutionFailure]:       resolved_tree = resolver.resolve()
[pipenv.exceptions.ResolutionFailure]:   File "c:\program files\python37\lib\site-packages\pipenv\utils.py", line 395, in resolve
[pipenv.exceptions.ResolutionFailure]:       raise ResolutionFailure(message=str(e))
[pipenv.exceptions.ResolutionFailure]:       pipenv.exceptions.ResolutionFailure: ERROR: ERROR: Could not find a version that matches keras_contrib@ git+https://github.com/keras-team/keras-contrib.git@master from git+https://github.com/keras-team/keras-contrib.git@master
[pipenv.exceptions.ResolutionFailure]:       No versions found
[pipenv.exceptions.ResolutionFailure]: Warning: Your dependencies could not be resolved. You likely have a mismatch in your sub-dependencies.
  First try clearing your dependency cache with $ pipenv lock --clear, then try the original command again.
 Alternatively, you can use $ pipenv install --skip-lock to bypass this mechanism, then run $ pipenv graph to inspect the situation.
  Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: ERROR: Could not find a version that matches keras_contrib@ git+https://github.com/keras-team/keras-contrib.git@master from git+https://github.com/keras-team/keras-contrib.git@master
No versions found
Was https://pypi.org/simple reachable?

> pipenv lock --clear
Locking [dev-packages] dependencies…
Locking [packages] dependencies…
Locking Failed!
[pipenv.exceptions.ResolutionFailure]:   File "c:/program files/python37/lib/site-packages/pipenv/resolver.py", line 69, in resolve
[pipenv.exceptions.ResolutionFailure]:       req_dir=requirements_dir
[pipenv.exceptions.ResolutionFailure]:   File "c:\program files\python37\lib\site-packages\pipenv\utils.py", line 726, in resolve_deps
[pipenv.exceptions.ResolutionFailure]:       req_dir=req_dir,
[pipenv.exceptions.ResolutionFailure]:   File "c:\program files\python37\lib\site-packages\pipenv\utils.py", line 480, in actually_resolve_deps
[pipenv.exceptions.ResolutionFailure]:       resolved_tree = resolver.resolve()
[pipenv.exceptions.ResolutionFailure]:   File "c:\program files\python37\lib\site-packages\pipenv\utils.py", line 395, in resolve
[pipenv.exceptions.ResolutionFailure]:       raise ResolutionFailure(message=str(e))
[pipenv.exceptions.ResolutionFailure]:       pipenv.exceptions.ResolutionFailure: ERROR: ERROR: Could not find a version that matches keras_contrib@ git+https://github.com/keras-team/keras-contrib.git@master from git+https://github.com/keras-team/keras-contrib.git@master
[pipenv.exceptions.ResolutionFailure]:       No versions found
[pipenv.exceptions.ResolutionFailure]: Warning: Your dependencies could not be resolved. You likely have a mismatch in your sub-dependencies.
  First try clearing your dependency cache with $ pipenv lock --clear, then try the original command again.
 Alternatively, you can use $ pipenv install --skip-lock to bypass this mechanism, then run $ pipenv graph to inspect the situation.
  Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: ERROR: Could not find a version that matches keras_contrib@ git+https://github.com/keras-team/keras-contrib.git@master from git+https://github.com/keras-team/keras-contrib.git@master
No versions found
Was https://pypi.org/simple reachable?
[pipenv.exceptions.ResolutionFailure]:       req_dir=requirements_dir
[pipenv.exceptions.ResolutionFailure]:   File "c:\program files\python37\lib\site-packages\pipenv\utils.py", line 726, in resolve_deps
[pipenv.exceptions.ResolutionFailure]:       req_dir=req_dir,
[pipenv.exceptions.ResolutionFailure]:   File "c:\program files\python37\lib\site-packages\pipenv\utils.py", line 480, in actually_resolve_deps
[pipenv.exceptions.ResolutionFailure]:       resolved_tree = resolver.resolve()
[pipenv.exceptions.ResolutionFailure]:   File "c:\program files\python37\lib\site-packages\pipenv\utils.py", line 395, in resolve
[pipenv.exceptions.ResolutionFailure]:       raise ResolutionFailure(message=str(e))
[pipenv.exceptions.ResolutionFailure]:       pipenv.exceptions.ResolutionFailure: ERROR: ERROR: Could not find a version that matches keras_contrib@ git+https://github.com/keras-team/keras-contrib.git@master from git+https://github.com/keras-team/keras-contrib.git@master
[pipenv.exceptions.ResolutionFailure]:       No versions found
[pipenv.exceptions.ResolutionFailure]: Warning: Your dependencies could not be resolved. You likely have a mismatch in your sub-dependencies.
  First try clearing your dependency cache with $ pipenv lock --clear, then try the original command again.
 Alternatively, you can use $ pipenv install --skip-lock to bypass this mechanism, then run $ pipenv graph to inspect the situation.
  Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: ERROR: Could not find a version that matches keras_contrib@ git+https://github.com/keras-team/keras-contrib.git@master from git+https://github.com/keras-team/keras-contrib.git@master
No versions found
Was https://pypi.org/simple reachable?
Workarounds
Skipping the lock file creation seems to do the trick.
$ pipenv --support
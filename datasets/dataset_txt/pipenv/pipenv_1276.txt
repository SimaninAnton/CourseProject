jproffitt commented on 28 Mar 2018
I have an odd issue, and I'm not sure if I'm doing something wrong since I just starting using pipenv, but something seems off with the sub-dependency checking.
With a brand new project, if I do pipenv install channels==1.1.8, I get the following output:
Successfully installed Django-2.0.3 asgiref-1.1.2 channels-1.1.8 daphne-1.4.2
That is what I would expect. But the lock file has version asgiref==2.2.0, and daphne==2.1.0. Which are obviously different versions than pip actually installed.
If I then then try to run pipenv install asgiref==1.1.2, I get the dependency resolution error:
Warning: Your dependencies could not be resolved. You likely have a mismatch in your sub-dependencies.
  You can use $ pipenv install --skip-lock to bypass this mechanism, then run $ pipenv graph to inspect the situation.
Could not find a version that matches asgiref==1.1.2,~=2.1
If I run with verbose (pipenv install asgiref==1.1.2 -v), it tells me channels 1.1.8 requires asgiref~=2.1:
channels==1.1.8           requires asgiref~=2.1, daphne~=2.0, Django>=1.11
Which is incorrect according to: https://github.com/django/channels/blob/1.1.8/setup.py#L16
$ python -m pipenv.help output
Expected result
I would expect installing channels 1.1.8 would install the correct version of it's dependencies.
Actual result
It installs the wrong versions for channels' dependencies, and --verbose shows channels needs a dependency version that seems to be incorrect.
Steps to replicate
pipenv install channels==1.1.8
pipenv install asgiref==1.1.2
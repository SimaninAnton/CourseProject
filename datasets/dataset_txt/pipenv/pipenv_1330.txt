rwanyoike commented on 17 Mar 2018 â€¢
edited
isorts's setup.py defines:
install_requires=['futures; python_version < "3.2"'],
But the resulting Pipfile.lock is missing the markers rule for futures.
Expected result
"futures": {
    "hashes": [
        "sha256:9ec02aa7d674acb8618afb127e27fde7fc68994c0437ad759fa094a574adb265",
        "sha256:ec0a6cb848cc212002b9828c3e34c675e0c9ff6741dc445cab6fdd4e1085d1f1"
    ],
    "markers": "python_version < '3.2'",
    "version": "==3.2.0"
}
Actual result
"futures": {
    "hashes": [
        "sha256:9ec02aa7d674acb8618afb127e27fde7fc68994c0437ad759fa094a574adb265",
        "sha256:ec0a6cb848cc212002b9828c3e34c675e0c9ff6741dc445cab6fdd4e1085d1f1"
    ],
    "version": "==3.2.0"
}
Steps to replicate
# executed on python 2.7
$ pipenv --version
pipenv, version 11.8.0
$ pipenv install isort
$ pipenv graph
isort==4.3.4
  - futures [required: Any, installed: 3.2.0]
  - futures [required: Any, installed: 3.2.0]
$ < Pipfile.lock
{
    "_meta": {
        "hash": {
            "sha256": "9bb49616a242008972ba6eaade0bed8a7f185fb230cb77158df9de01f7edacba"
        },
        "pipfile-spec": 6,
        "requires": {
            "python_version": "2.7"
        },
        "sources": [
            {
                "name": "pypi",
                "url": "https://pypi.python.org/simple",
                "verify_ssl": true
            }
        ]
    },
    "default": {
        "futures": {
            "hashes": [
                "sha256:9ec02aa7d674acb8618afb127e27fde7fc68994c0437ad759fa094a574adb265",
                "sha256:ec0a6cb848cc212002b9828c3e34c675e0c9ff6741dc445cab6fdd4e1085d1f1"
            ],
            "version": "==3.2.0"
        },
        "isort": {
            "hashes": [
                "sha256:1153601da39a25b14ddc54955dbbacbb6b2d19135386699e2ad58517953b34af",
                "sha256:b9c40e9750f3d77e6e4d441d8b0266cf555e7cdabdcff33c4fd06366ca761ef8",
                "sha256:ec9ef8f4a9bc6f71eec99e1806bfa2de401650d996c59330782b89a5555c1497"
            ],
            "index": "pypi",
            "version": "==4.3.4"
        }
    },
    "develop": {}
}
tomdottom commented on 1 Oct 2018
Issue description
Pipenv incorrectly parses the domain from the source url when using user/pass authentication.
Expected result
Given the following Pipfile
[[source]]
url = "https://username:pass@pypi.org/simple"
verify_ssl = false
name = "example"

[packages]
requests = "*"

[dev-packages]

[requires]
python_version = "3.6"
We expect that the following option would be passed to pip
--trusted-hosts pypi.org
Actual result
Given the above Pipfile we actually see username passed to pip as the trusted host
--trusted-hosts username
As can be seen running a lock operation in verbose mode:
~ # pipenv lock --verbose
Locking [dev-packages] dependencies...
Locking [packages] dependencies...
using sources: [{'url': 'https://username:pass@pypi.org/simple', 'verify_ssl': False, 'name': 'example'}]
Using pip: -i https://username:pass@pypi.org/simple --trusted-host username
Steps to replicate
Using example Pipfile included above simply run pipenv lock --verbose.
$ pipenv --support
Rouzip commented on 28 Dec 2017 •
edited
Describe your environment
OS:Ubuntu 16.04LTS
Python version: 3.6.3
Pipenv version: pipenv, version 9.0.1
Expected result
Create a virtualenv for the project.
Actual result
    Complete output from command python setup.py egg_info:
    /usr/local/lib/python3.6/distutils/dist.py:261: UserWarning: Unknown distribution option: 'entry_points'
      warnings.warn(msg)
    /usr/local/lib/python3.6/distutils/dist.py:261: UserWarning: Unknown distribution option: 'tests_require'
      warnings.warn(msg)
    /usr/local/lib/python3.6/distutils/dist.py:261: UserWarning: Unknown distribution option: 'zip_safe'
      warnings.warn(msg)
    /usr/local/lib/python3.6/distutils/dist.py:261: UserWarning: Unknown distribution option: 'python_requires'
      warnings.warn(msg)
    /usr/local/lib/python3.6/distutils/dist.py:261: UserWarning: Unknown distribution option: 'extras_require'
      warnings.warn(msg)
    usage: -c [global_opts] cmd1 [cmd1_opts] [cmd2 [cmd2_opts] ...]
       or: -c --help [cmd1 cmd2 ...]
       or: -c --help-commands
       or: -c cmd --help

    error: invalid command 'egg_info'

    ----------------------------------------
Command "python setup.py egg_info" failed with error code 1 in /tmp/pip-build-7kvu61pe/pip/
----------------------------------------
...Installing setuptools, pip, wheel...done.
Traceback (most recent call last):
  File "/home/rouzip/.local/lib/python3.6/site-packages/virtualenv.py", line 2328, in <module>
    main()
  File "/home/rouzip/.local/lib/python3.6/site-packages/virtualenv.py", line 713, in main
    symlink=options.symlink)
  File "/home/rouzip/.local/lib/python3.6/site-packages/virtualenv.py", line 945, in create_environment
    download=download,
  File "/home/rouzip/.local/lib/python3.6/site-packages/virtualenv.py", line 901, in install_wheel
    call_subprocess(cmd, show_stdout=False, extra_env=env, stdin=SCRIPT)
  File "/home/rouzip/.local/lib/python3.6/site-packages/virtualenv.py", line 797, in call_subprocess
    % (cmd_desc, proc.returncode))
OSError: Command /home/rouzip/.local/...mbNjlp15/bin/python3 - setuptools pip wheel failed with error code 1

Virtualenv location: 
Creating a Pipfile for this project…
Traceback (most recent call last):
  File "/home/rouzip/.local/bin/pipenv", line 11, in <module>
    load_entry_point('pipenv==9.0.1', 'console_scripts', 'pipenv')()
  File "/home/rouzip/.local/lib/python3.6/site-packages/pipenv/vendor/click/core.py", line 722, in __call__
    return self.main(*args, **kwargs)
  File "/home/rouzip/.local/lib/python3.6/site-packages/pipenv/vendor/click/core.py", line 697, in main
    rv = self.invoke(ctx)
  File "/home/rouzip/.local/lib/python3.6/site-packages/pipenv/vendor/click/core.py", line 1043, in invoke
    return Command.invoke(self, ctx)
  File "/home/rouzip/.local/lib/python3.6/site-packages/pipenv/vendor/click/core.py", line 895, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File "/home/rouzip/.local/lib/python3.6/site-packages/pipenv/vendor/click/core.py", line 535, in invoke
    return callback(*args, **kwargs)
  File "/home/rouzip/.local/lib/python3.6/site-packages/pipenv/vendor/click/decorators.py", line 17, in new_func
    return f(get_current_context(), *args, **kwargs)
  File "/home/rouzip/.local/lib/python3.6/site-packages/pipenv/cli.py", line 1724, in cli
    ensure_project(three=three, python=python, warn=True, site_packages=site_packages)
  File "/home/rouzip/.local/lib/python3.6/site-packages/pipenv/cli.py", line 642, in ensure_project
    ensure_pipfile(validate=validate)
  File "/home/rouzip/.local/lib/python3.6/site-packages/pipenv/cli.py", line 337, in ensure_pipfile
    project.create_pipfile(python=python)
  File "/home/rouzip/.local/lib/python3.6/site-packages/pipenv/project.py", line 406, in create_pipfile
    data[u'requires'] = {'python_version': python_version(python)[:len('2.7')]}
TypeError: 'NoneType' object is not subscriptable
Steps to replicate
pipenv --three
I have the latest setuptools,pip and pipenv.
I try to add export LANG=en_US.UTF-8 export LC_ALL=en_US.UTF-8 like #538 ,but it doesn't work.
devster31 commented on 23 Mar 2018 •
edited
I installed python@2 and pipenv using homebrew and I'm using fish as a shell.
$ python -m pipenv.help
/usr/local/opt/python@2/bin/python2.7: No module named pipenv
Finally made it with /usr/local/Cellar/pipenv/11.9.0/libexec/bin/python -m pipenv.help
$ python -m pipenv.help output
Expected result
I tried installing and locking the packages for a project.
Actual result
After installing the packages for a local git repo this happened:
$ pipenv lock --verbose
Locking [dev-packages] dependencies…
Using pip: -i https://pypi.python.org/simple

                          ROUND 1
Current constraints:

Finding the best candidates:

Finding secondary dependencies:
------------------------------------------------------------
Result of round 1: stable, done

Locking [packages] dependencies…
Using pip: -i https://pypi.python.org/simple

                          ROUND 1
Current constraints:
  cfscrape
  flask
  poster
  pyexecjs
  pyopenssl
  pyrobase
  pyrocore
  requests
  simplejson
  sqlalchemy
  transmissionrpc
  watchdog

Finding the best candidates:
  found candidate cfscrape==1.9.4 (constraint was <any>)
  found candidate flask==0.12.2 (constraint was <any>)
  found candidate poster==0.8.1 (constraint was <any>)
  found candidate pyexecjs==1.5.1 (constraint was <any>)
  found candidate pyopenssl==17.5.0 (constraint was <any>)
  found candidate pyrobase==0.5.2 (constraint was <any>)
  found candidate pyrocore==0.5.3 (constraint was <any>)
  found candidate requests==2.18.4 (constraint was <any>)
  found candidate simplejson==3.13.2 (constraint was <any>)
  found candidate sqlalchemy==1.2.5 (constraint was <any>)
  found candidate transmissionrpc==0.11 (constraint was <any>)
  found candidate watchdog==0.8.3 (constraint was <any>)

Finding secondary dependencies:
  pyopenssl==17.5.0         requires cryptography>=2.1.4, six>=1.5.2
  requests==2.18.4 not in cache, need to check index
  requests==2.18.4          requires certifi>=2017.4.17, chardet<3.1.0,>=3.0.2, idna<2.7,>=2.5, urllib3<1.23,>=1.21.1
  pyrocore==0.5.3 not in cache, need to check index
  pyrocore==0.5.3           requires ProxyTypes>=0.9, pyrobase>=0.2
  cfscrape==1.9.4 not in cache, need to check index
  cfscrape==1.9.4           requires PyExecJS>=1.4.0, requests>=2.0.0
  poster==0.8.1 not in cache, need to check index

INFO:notpip.req.req_set:Collecting requests==2.18.4
INFO:pip9.download:Using cached requests-2.18.4-py2.py3-none-any.whl
INFO:pip9.download:Saved /Users/devster/Library/Caches/pipenv/wheels/requests-2.18.4-py2.py3-none-any.whl
INFO:notpip.req.req_set:Collecting pyrocore==0.5.3
INFO:pip9.download:Using cached pyrocore-0.5.3-py2-none-any.whl
INFO:pip9.download:Saved /Users/devster/Library/Caches/pipenv/wheels/pyrocore-0.5.3-py2-none-any.whl
INFO:notpip.req.req_set:Collecting cfscrape==1.9.4
INFO:pip9.download:Using cached cfscrape-1.9.4.tar.gz
INFO:pip9.download:Saved /Users/devster/Library/Caches/pipenv/pkgs/cfscrape-1.9.4.tar.gz
INFO:notpip.req.req_set:Collecting poster==0.8.1
INFO:pip9.download:File was already downloaded /Users/devster/Library/Caches/pipenv/pkgs/poster-0.8.1-py2.7.egg
INFO:pip9.utils:Complete output from command python setup.py egg_info:
INFO:pip9.utils:Traceback (most recent call last):
  File "<string>", line 1, in <module>
IOError: [Errno 2] No such file or directory: '/var/folders/_4/1x_zc88x6v32bkbk1mgbkvbc0000gn/T/tmp_cRE2Ybuild/poster/setup.py'

----------------------------------------
Traceback (most recent call last):
  File "/usr/local/Cellar/pipenv/11.9.0/libexec/lib/python3.6/site-packages/pipenv/resolver.py", line 82, in <module>
    main()
  File "/usr/local/Cellar/pipenv/11.9.0/libexec/lib/python3.6/site-packages/pipenv/resolver.py", line 71, in main
    clear=do_clear,
  File "/usr/local/Cellar/pipenv/11.9.0/libexec/lib/python3.6/site-packages/pipenv/resolver.py", line 63, in resolve
    verbose=verbose,
  File "/usr/local/Cellar/pipenv/11.9.0/libexec/lib/python3.6/site-packages/pipenv/utils.py", line 425, in resolve_deps
    pre,
  File "/usr/local/Cellar/pipenv/11.9.0/libexec/lib/python3.6/site-packages/pipenv/utils.py", line 336, in actually_resolve_reps
    resolved_tree.update(resolver.resolve(max_rounds=PIPENV_MAX_ROUNDS))
  File "/usr/local/Cellar/pipenv/11.9.0/libexec/lib/python3.6/site-packages/pipenv/patched/piptools/resolver.py", line 102, in resolve
    has_changed, best_matches = self._resolve_one_round()
  File "/usr/local/Cellar/pipenv/11.9.0/libexec/lib/python3.6/site-packages/pipenv/patched/piptools/resolver.py", line 200, in _resolve_one_round
    for dep in self._iter_dependencies(best_match):
  File "/usr/local/Cellar/pipenv/11.9.0/libexec/lib/python3.6/site-packages/pipenv/patched/piptools/resolver.py", line 297, in _iter_dependencies
    dependencies = self.repository.get_dependencies(ireq)
  File "/usr/local/Cellar/pipenv/11.9.0/libexec/lib/python3.6/site-packages/pipenv/patched/piptools/repositories/pypi.py", line 174, in get_dependencies
    legacy_results = self.get_legacy_dependencies(ireq)
  File "/usr/local/Cellar/pipenv/11.9.0/libexec/lib/python3.6/site-packages/pipenv/patched/piptools/repositories/pypi.py", line 222, in get_legacy_dependencies
    result = reqset._prepare_file(self.finder, ireq, ignore_requires_python=True)
  File "/usr/local/Cellar/pipenv/11.9.0/libexec/lib/python3.6/site-packages/pipenv/patched/notpip/req/req_set.py", line 644, in _prepare_file
    abstract_dist.prep_for_dist()
  File "/usr/local/Cellar/pipenv/11.9.0/libexec/lib/python3.6/site-packages/pipenv/patched/notpip/req/req_set.py", line 134, in prep_for_dist
    self.req_to_install.run_egg_info()
  File "/usr/local/Cellar/pipenv/11.9.0/libexec/lib/python3.6/site-packages/pipenv/vendor/pip9/req/req_install.py", line 439, in run_egg_info
    command_desc='python setup.py egg_info')
  File "/usr/local/Cellar/pipenv/11.9.0/libexec/lib/python3.6/site-packages/pipenv/vendor/pip9/utils/__init__.py", line 707, in call_subprocess
    % (command_desc, proc.returncode, cwd))
pip9.exceptions.InstallationError: Command "python setup.py egg_info" failed with error code 1 in /var/folders/_4/1x_zc88x6v32bkbk1mgbkvbc0000gn/T/tmp_cRE2Ybuild/poster/
Steps to replicate
Pipfile
[[source]]
url = "https://pypi.python.org/simple"
verify_ssl = true
name = "pypi"

[packages]
simplejson = "*"
poster = "*"
pyrobase = "*"
pyrocore = "*"
sqlalchemy = "*"
flask = "*"
requests = "*"
watchdog = "*"
cfscrape = "*"
pyexecjs = "*"
pyopenssl = "*"
transmissionrpc = "*"

[dev-packages]

[requires]
python_version = "2.7"
commands:
$ pipenv install
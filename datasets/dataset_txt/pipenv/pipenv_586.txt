imomaliev commented on 10 Oct 2018 •
edited
Issue description
When building with docker installation fails
Expected result
Successful build
Actual result
An error occurred while installing ruamel-yaml==0.15.72 --hash=sha256:10a8912a32f51eed40e32aa76e2700bb7bfc92f321a0e98409e3b1132bac4519 --hash=sha256:1224d1f6abefda0de53ded39e51fc5e0bc0bb496f9e2f6566d3abe2f03cf54c8 --hash=sha256:1d51f69dd8dd6fc58b8b3ca7aef87580b940ad0764ac1ea86f8b64feb555d5db --hash=sha256:3bc6377f623e48959bbc4eca07db614c9c0e374b9eea79feff93258aebafc38d --hash=sha256:3df98993f7e20864e60cba10606e14ad109175bb78c1129b06d38a0492beac36 --hash=sha256:4796caffcbb81929d8be643df46c74f1825fff4dc0f7e132ea10f727ef89a0cd --hash=sha256:57d1a4c2d158f53040a9d8a611e79a1235be3418a1f8370145493adbab0ebbeb --hash=sha256:6655d70b2e2f6b40220ea4c6caac5bed15cb477bbaf7c6687029f3c82a45bca0 --hash=sha256:7eff959cf0a792cb5650b5f50cc8bb5c53b3ab136695268c66ccd3cd332ba2b9 --hash=sha256:867e2d0f7d5b4b3dbd9810fa601a9cb663ca8eec45c1f4b3bf56281894c47119 --hash=sha256:9e5179afa032cd64216f9c508b5428cbe3cc42bb6b7dbb33e7cbf64c38eb2f2d --hash=sha256:a2fbb7e2e09390758f704dd04a17643108a3494292c49e9f4a10f248316ec2ae --hash=sha256:a3fde21c981928fde30c5ddded90d313487522c3e7b2011b20b4a17d82e14926 --hash=sha256:ab0353559bd1a47e67e287090daa04bed7c19ec887bf311010fe69ddb40fd8eb --hash=sha256:ab7ef6d1ca0dc914fd66eacc8a5cfbf47f5530fe106c81f645b55cff2e1da984 --hash=sha256:ab993f82687407dd8f478fb1c1213735524b10f1aa296391261838ee41331ed0 --hash=sha256:bd76a9aee355306bfc173865e891885a63888ee15b0e358a66d697bb5c9e208a --hash=sha256:c1483c3de2010b5eb7dfbf6a2484e59d96c5c3a96f67b6ef4dd801471a21195b --hash=sha256:dbf52838c2fd987417cf820aed3a7dea0ba19dfe47c978361afb00cc1366264b --hash=sha256:edce27e000efe88d280e05984175a38835b32929be5c893a8dab6d5af4090995 --hash=sha256:f037812ac7360201eef2aa6d977836b2a31419c65ce706c5e0bfb176a99efa04! Will try again.
Installing initially failed dependencies…
Collecting ruamel-yaml==0.15.72

  Could not find a version that satisfies the requirement ruamel-yaml==0.15.72 (from -r /tmp/pipenv-c5j86lnj-requirements/pipenv-yzvh_qko-requirement.txt (line 1)) (from versions: 0.15.41, 0.15.42)
No matching distribution found for ruamel-yaml==0.15.72 (from -r /tmp/pipenv-c5j86lnj-requirements/pipenv-yzvh_qko-requirement.txt (line 1))
You are using pip version 18.0, however version 18.1 is available.
You should consider upgrading via the 'pip install --upgrade pip' command.

The command '/bin/sh -c pipenv install --system --ignore-pipfile --dev' returned a non-zero code: 1
Steps to replicate
Dockerfile
FROM python:3.7-alpine3.8

RUN apk update && apk upgrade \
    && pip install pipenv

ENV PYTHONUNBUFFERED=1 \
    PYTHONIOENCODING=UTF-8

WORKDIR /project/backend

COPY Pipfile Pipfile.lock /project/backend/

RUN pipenv install --system --ignore-pipfile --dev --verbose
docker build -t drf_yasg .
$ pipenv --support
scanepa commented on 15 Sep 2017
My requirements.txt file contains the following line:
pbr!=2.1.0,>=2.0.0 # Apache-2.0
pipenv fails with:
No package provided, installing all dependencies.
Pipfile found at /home/c/src/o/m/m/Pipfile.
  Considering this to be the project home.
Pipfile.lock not found, creating…
Locking [dev-packages] dependencies…
⠼Locking [packages] dependencies…
Traceback (most recent call last):
  File "/home/canepas/.local/lib/python3.4/site-packages/pip/_vendor/packaging/requirements.py", line 92, in __init__
    req = REQUIREMENT.parseString(requirement_string)
  File "/home/canepas/.local/lib/python3.4/site-packages/pip/_vendor/pyparsing.py", line 1617, in parseString
    raise exc
  File "/home/canepas/.local/lib/python3.4/site-packages/pip/_vendor/pyparsing.py", line 1607, in parseString
    loc, tokens = self._parse( instring, 0 )
  File "/home/canepas/.local/lib/python3.4/site-packages/pip/_vendor/pyparsing.py", line 1379, in _parseNoCache
    loc,tokens = self.parseImpl( instring, preloc, doActions )
  File "/home/canepas/.local/lib/python3.4/site-packages/pip/_vendor/pyparsing.py", line 3376, in parseImpl
    loc, exprtokens = e._parse( instring, loc, doActions )
  File "/home/canepas/.local/lib/python3.4/site-packages/pip/_vendor/pyparsing.py", line 1383, in _parseNoCache
    loc,tokens = self.parseImpl( instring, preloc, doActions )
  File "/home/canepas/.local/lib/python3.4/site-packages/pip/_vendor/pyparsing.py", line 3164, in parseImpl
    raise ParseException(instring, loc, self.errmsg, self)
pip._vendor.pyparsing.ParseException: Expected stringEnd (at char 3), (line:1, col:4)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/canepas/.local/lib/python3.4/site-packages/pip/req/req_install.py", line 82, in __init__
    req = Requirement(req)
  File "/home/canepas/.local/lib/python3.4/site-packages/pip/_vendor/packaging/requirements.py", line 96, in __init__
    requirement_string[e.loc:e.loc + 8]))
pip._vendor.packaging.requirements.InvalidRequirement: Invalid requirement, parse error at "'=2.1.0,>'"

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/canepas/.local/bin/pipenv", line 11, in <module>
    sys.exit(cli())
  File "/home/canepas/.local/lib/python3.4/site-packages/pipenv/vendor/click/core.py", line 722, in __call__
    return self.main(*args, **kwargs)
  File "/home/canepas/.local/lib/python3.4/site-packages/pipenv/vendor/click/core.py", line 697, in main
    rv = self.invoke(ctx)
  File "/home/canepas/.local/lib/python3.4/site-packages/pipenv/vendor/click/core.py", line 1066, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
  File "/home/canepas/.local/lib/python3.4/site-packages/pipenv/vendor/click/core.py", line 895, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File "/home/canepas/.local/lib/python3.4/site-packages/pipenv/vendor/click/core.py", line 535, in invoke
    return callback(*args, **kwargs)
  File "/home/canepas/.local/lib/python3.4/site-packages/pipenv/cli.py", line 1210, in install
    do_init(dev=dev, allow_global=system, ignore_pipfile=ignore_pipfile, skip_lock=skip_lock, verbose=verbose)
  File "/home/canepas/.local/lib/python3.4/site-packages/pipenv/cli.py", line 906, in do_init
    do_lock()
  File "/home/canepas/.local/lib/python3.4/site-packages/pipenv/cli.py", line 764, in do_lock
    results = resolve_deps(deps, sources=project.sources)
  File "/home/canepas/.local/lib/python3.4/site-packages/pipenv/utils.py", line 64, in resolve_deps
    constraint = pip.req.InstallRequirement.from_line(dep)
  File "/home/canepas/.local/lib/python3.4/site-packages/pip/req/req_install.py", line 235, in from_line
    wheel_cache=wheel_cache, constraint=constraint)
  File "/home/canepas/.local/lib/python3.4/site-packages/pip/req/req_install.py", line 91, in __init__
    "Invalid requirement: '%s'\n%s" % (req, add_msg))
pip.exceptions.InstallationError: Invalid requirement: 'pbr=2.1.0,>=2.0.0'
Traceback (most recent call last):
  File "/home/canepas/.local/lib/python3.4/site-packages/pip/_vendor/packaging/requirements.py", line 92, in __init__
    req = REQUIREMENT.parseString(requirement_string)
  File "/home/canepas/.local/lib/python3.4/site-packages/pip/_vendor/pyparsing.py", line 1617, in parseString
    raise exc
  File "/home/canepas/.local/lib/python3.4/site-packages/pip/_vendor/pyparsing.py", line 1607, in parseString
    loc, tokens = self._parse( instring, 0 )
  File "/home/canepas/.local/lib/python3.4/site-packages/pip/_vendor/pyparsing.py", line 1379, in _parseNoCache
    loc,tokens = self.parseImpl( instring, preloc, doActions )
  File "/home/canepas/.local/lib/python3.4/site-packages/pip/_vendor/pyparsing.py", line 3376, in parseImpl
    loc, exprtokens = e._parse( instring, loc, doActions )
  File "/home/canepas/.local/lib/python3.4/site-packages/pip/_vendor/pyparsing.py", line 1383, in _parseNoCache
    loc,tokens = self.parseImpl( instring, preloc, doActions )
  File "/home/canepas/.local/lib/python3.4/site-packages/pip/_vendor/pyparsing.py", line 3164, in parseImpl
    raise ParseException(instring, loc, self.errmsg, self)
pip._vendor.pyparsing.ParseException: Expected stringEnd (at char 3), (line:1, col:4)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/canepas/.local/lib/python3.4/site-packages/pip/req/req_install.py", line 82, in __init__
    req = Requirement(req)
  File "/home/canepas/.local/lib/python3.4/site-packages/pip/_vendor/packaging/requirements.py", line 96, in __init__
    requirement_string[e.loc:e.loc + 8]))
pip._vendor.packaging.requirements.InvalidRequirement: Invalid requirement, parse error at "'=2.1.0,>'"
I reckon this is a tricky line but still valid in requirements.txt.
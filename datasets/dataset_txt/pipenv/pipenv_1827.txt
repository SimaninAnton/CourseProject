astronouth7303 commented on 14 Nov 2017
I tried running pipenv on debian under the www-data user, which has the configured home directory of /var/www, which isn't actually writable by www-data.
This produces errors like:
Traceback (most recent call last):
  File "/usr/local/bin/pipenv", line 11, in <module>
    sys.exit(cli())
  File "/usr/local/lib/python3.5/dist-packages/pipenv/vendor/click/core.py", line 722, in __call__
    return self.main(*args, **kwargs)
  File "/usr/local/lib/python3.5/dist-packages/pipenv/vendor/click/core.py", line 697, in main
    rv = self.invoke(ctx)
  File "/usr/local/lib/python3.5/dist-packages/pipenv/vendor/click/core.py", line 1063, in invoke
    Command.invoke(self, ctx)
  File "/usr/local/lib/python3.5/dist-packages/pipenv/vendor/click/core.py", line 895, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File "/usr/local/lib/python3.5/dist-packages/pipenv/vendor/click/core.py", line 535, in invoke
    return callback(*args, **kwargs)
  File "/usr/local/lib/python3.5/dist-packages/pipenv/vendor/click/decorators.py", line 17, in new_func
    return f(get_current_context(), *args, **kwargs)
  File "/usr/local/lib/python3.5/dist-packages/pipenv/cli.py", line 1626, in cli
    if need_update_check():
  File "/usr/local/lib/python3.5/dist-packages/pipenv/utils.py", line 962, in need_update_check
    mkdir_p(PIPENV_CACHE_DIR)
  File "/usr/local/lib/python3.5/dist-packages/pipenv/utils.py", line 750, in mkdir_p
    mkdir_p(head)
  File "/usr/local/lib/python3.5/dist-packages/pipenv/utils.py", line 752, in mkdir_p
    os.mkdir(newdir)
PermissionError: [Errno 13] Permission denied: '/var/www/.cache'
(Set PIPENV_CACHE_DIR in the environment to /tmp/pipenv-cache)
Virtualenv location: 
Creating a virtualenv for this projectâ€¦
Running virtualenv with interpreter /usr/bin/python2
Traceback (most recent call last):
  File "/usr/lib/python3/dist-packages/virtualenv.py", line 2375, in <module>
    main()
  File "/usr/lib/python3/dist-packages/virtualenv.py", line 724, in main
    symlink=options.symlink)
  File "/usr/lib/python3/dist-packages/virtualenv.py", line 946, in create_environment
    site_packages=site_packages, clear=clear, symlink=symlink))
  File "/usr/lib/python3/dist-packages/virtualenv.py", line 1157, in install_python
    mkdir(lib_dir)
  File "/usr/lib/python3/dist-packages/virtualenv.py", line 329, in mkdir
    os.makedirs(path)
  File "/usr/lib/python2.7/os.py", line 150, in makedirs
    makedirs(head, mode)
  File "/usr/lib/python2.7/os.py", line 150, in makedirs
    makedirs(head, mode)
  File "/usr/lib/python2.7/os.py", line 150, in makedirs
    makedirs(head, mode)
  File "/usr/lib/python2.7/os.py", line 150, in makedirs
    makedirs(head, mode)
  File "/usr/lib/python2.7/os.py", line 150, in makedirs
    makedirs(head, mode)
  File "/usr/lib/python2.7/os.py", line 157, in makedirs
    mkdir(name, mode)
OSError: [Errno 13] Permission denied: '/var/www/.local'
Error while trying to remove the /var/www/.local/share/virtualenvs/paa-SPp5mrC7 env: 
No such file or directory
(At this point, I decided to just give the application its own user, which did work.)
In general, I'm trying to use pipenv in production.
Describe your environment
Debian stretch
Python 3.5.3 (using pipenv --three)
Pipenv 8.3.2
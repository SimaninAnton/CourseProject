cLupus commented on 15 Mar 2018 â€¢
edited by uranusjr
Be sure to check the existing issues (both open and closed!).
Describe the issue briefly here.
Running pipenv run commands in docker causes pipenv to crash. Similar to #1728
Please run $ python -m pipenv.help, and paste the results here.
$ python -m pipenv.help output
Pipenv version: `'11.7.2'`
Expected result
The command to run
Actual result
$ pipenv  lock --dev --requirements --verbose
Traceback (most recent call last):
  File "/***/python3.6.1/bin/pipenv", line 11, in <module>
    load_entry_point('pipenv==11.7.2', 'console_scripts', 'pipenv')()
  File "/***/python3.6.1/lib/python3.6/site-packages/pipenv/vendor/click/core.py", line 722, in __call__
    return self.main(*args, **kwargs)
  File "/***/python3.6.1/lib/python3.6/site-packages/pipenv/vendor/click/core.py", line 697, in main
    rv = self.invoke(ctx)
  File "/***/python3.6.1/lib/python3.6/site-packages/pipenv/vendor/click/core.py", line 1066, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
  File "/***/python3.6.1/lib/python3.6/site-packages/pipenv/vendor/click/core.py", line 895, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File "/***/python3.6.1/lib/python3.6/site-packages/pipenv/vendor/click/core.py", line 535, in invoke
    return callback(*args, **kwargs)
  File "/***/python3.6.1/lib/python3.6/site-packages/pipenv/cli.py", line 236, in lock
    core.ensure_project(three=three, python=python)
  File "/***/python3.6.1/lib/python3.6/site-packages/pipenv/core.py", line 642, in ensure_project
    ensure_virtualenv(three=three, python=python, site_packages=site_packages)
  File "/***/python3.6.1/lib/python3.6/site-packages/pipenv/core.py", line 587, in ensure_virtualenv
    python = ensure_python(three=three, python=python)
  File "/***/python3.6.1/lib/python3.6/site-packages/pipenv/core.py", line 469, in ensure_python
    path_to_python = find_a_system_python(python)
  File "/***/python3.6.1/lib/python3.6/site-packages/pipenv/core.py", line 402, in find_a_system_python
    python_from_py = find_python_from_py(python)
  File "/***/python3.6.1/lib/python3.6/site-packages/pipenv/core.py", line 351, in find_python_from_py
    python_exe = subprocess.check_output([py, ver_arg, '-c', 'import sys; print(sys.executable)'])
  File "/***/python3.6.1/lib/python3.6/subprocess.py", line 336, in check_output
    **kwargs).stdout
  File "/***/python3.6.1/lib/python3.6/subprocess.py", line 403, in run
    with Popen(*popenargs, **kwargs) as process:
  File "/***/python3.6.1/lib/python3.6/subprocess.py", line 707, in __init__
    restore_signals, start_new_session)
  File "/***/python3.6.1/lib/python3.6/subprocess.py", line 1326, in _execute_child
    raise child_exception_type(errno_num, err_msg)
FileNotFoundError: [Errno 2] No such file or directory: 'which: no py in (/usr/lib64/openmpi/bin:/***/python3.6.1/bin:/***/gcc-7.3.0/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin)'
Steps to replicate
Provide the steps to replicate (which usually at least includes the commands and the Pipfile).
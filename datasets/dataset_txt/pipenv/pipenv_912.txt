dresnick-sf commented on 27 Jun 2018
Installing mysql-python with pip succeeds, but with pipenv it fails.
I see that pip is installing from MySQL_python-1.2.5-cp27-cp27m-macosx_10_13_x86_64.whl.
When installing via pipenv the wheel file is not used and it fails with:
  Using version 1.2.5 (newest of versions: 1.2.5)
  Created temporary directory: /private/var/folders/_t/4fb22psj4079hxxtjj3bqt31b8jsc8/T/pip-unpack-vXegtZ
  Looking up "https://files.pythonhosted.org/packages/a5/e9/51b544da85a36a68debe7a7091f068d802fc515a3a202652828c73453cad/MySQL-python-1.2.5.zip" in the cache
  Ignoring unknown cache-control directive:
  Current age based on date: 89524
  Ignoring unknown cache-control directive: immutable
  Freshness lifetime from max-age: 365000000
  The response is "fresh", returning cached response
  365000000 > 89524
  Using cached https://files.pythonhosted.org/packages/a5/e9/51b544da85a36a68debe7a7091f068d802fc515a3a202652828c73453cad/MySQL-python-1.2.5.zip
  Downloading from URL https://files.pythonhosted.org/packages/a5/e9/51b544da85a36a68debe7a7091f068d802fc515a3a202652828c73453cad/MySQL-python-1.2.5.zip#sha256=811040b647e5d5686f84db415efd697e6250008b112b6909ba77ac059e140c74 (from https://pypi.org/simple/mysql-python/)
  Running setup.py (path:/private/var/folders/_t/4fb22psj4079hxxtjj3bqt31b8jsc8/T/pip-install-785taV/mysql-python/setup.py) egg_info for package mysql-python
    Running command python setup.py egg_info
    Traceback (most recent call last):
      File "<string>", line 1, in <module>
      File "/private/var/folders/_t/4fb22psj4079hxxtjj3bqt31b8jsc8/T/pip-install-785taV/mysql-python/setup.py", line 17, in <module>
        metadata, options = get_config()
      File "setup_posix.py", line 53, in get_config
        libraries = [ dequote(i[2:]) for i in libs if i.startswith(compiler_flag("l")) ]
      File "setup_posix.py", line 8, in dequote
        if s[0] in "\"'" and s[0] == s[-1]:
    IndexError: string index out of range
With pip (in an empty virtualenv with the same python):
$ pip install -v mysql-python
...
Using version 1.2.5 (newest of versions: 1.2.3, 1.2.4, 1.2.5)
Using cached wheel link: file:///Users/user/Library/Caches/pip/wheels/07/d2/5f/314860e4cb53a44bf0ee0d051d4b34465e4b4fbe9de6d42f42/MySQL_python-1.2.5-cp27-cp27m-macosx_10_13_x86_64.whl
Installing collected packages: mysql-python

Successfully installed mysql-python-1.2.5
Cleaning up...
Versions:
pipenv, version 2018.05.18
Python 2.7.15 (Homebrew python@2)
pip 10.0.1 from /usr/local/lib/python2.7/site-packages/pip (python 2.7)
MacOs: 10.13.5
freddrake commented on 15 May 2018
The pipenv command assumes the virtualenv command is located on PATH. Since it is installed as a peer to pipenv, that copy should be used instead of search the PATH. If not on the PATH, an error is generated.
In my case, pipenv (including the associated virtualenv) is built in a separate venv, and pipenv was added to PATH by creating a symlink from a directory that was already on PATH.
I can provide the output from $ python -m pipenv.help, but don't believe it would be useful.
Expected result
Create the virtual environment in .venv as documented.
Actual result
$ PIPENV_VENV_IN_PROJECT=true pipenv install -vv
Creating a virtualenv for this project…
Using /opt/kt-python36/bin/python3 (3.6.5) to create virtualenv…
⠋Warning: it looks like virtualenv is not in your PATH. We cannot continue until this is resolved.
Steps to replicate
Install pipenv as an isolated tool:
$ mkdir tools; cd tools
$ python3.6 -m venv pipenv
$ cd pipenv
$ bin/pip install pipenv
...
$ cd /some/dir/on/path
$ ln -s .../tools/pipenv/bin/pipenv
Create project using a Pipfile, and install:
$ cd ~/projects/myproj/
$ PIPENV_VENV_IN_PROJECT=true pipenv install -vv
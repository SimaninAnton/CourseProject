eugenma commented on 29 Nov 2017
I wanted to install a package on a local drive as an editable package under Windows:
D:\projects\myproject>pipenv install -e D:\projects\DjangoApps\mypackage
Describe your environment
OS: Windows 10 Pro, 64 bit
Python version: Python 3.6.1
Pipenv version: pipenv, version 8.3.2
Expected result
the package is listed in Pipfile and myproject finds the mypackage dependency
Actual result
The following error occurs:
Installing -e D:\projects\DjangoApps\mypackageâ€¦
Traceback (most recent call last):
  File "c:\program files (x86)\python36-32\lib\runpy.py", line 193, in _run_module_as_main
    "__main__", mod_spec)
  File "c:\program files (x86)\python36-32\lib\runpy.py", line 85, in _run_code
    exec(code, run_globals)
  File "C:\Program Files (x86)\Python36-32\Scripts\pipenv.exe\__main__.py", line 9, in <module>
  File "c:\program files (x86)\python36-32\lib\site-packages\pipenv\vendor\click\core.py", line 722, in __call__
    return self.main(*args, **kwargs)
  File "c:\program files (x86)\python36-32\lib\site-packages\pipenv\vendor\click\core.py", line 697, in main
    rv = self.invoke(ctx)
  File "c:\program files (x86)\python36-32\lib\site-packages\pipenv\vendor\click\core.py", line 1066, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
  File "c:\program files (x86)\python36-32\lib\site-packages\pipenv\vendor\click\core.py", line 895, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File "c:\program files (x86)\python36-32\lib\site-packages\pipenv\vendor\click\core.py", line 535, in invoke
    return callback(*args, **kwargs)
  File "c:\program files (x86)\python36-32\lib\site-packages\pipenv\cli.py", line 1880, in install
    converted = convert_deps_from_pip(package_name)
  File "c:\program files (x86)\python36-32\lib\site-packages\pipenv\utils.py", line 547, in convert_deps_from_pip
    os.path.isfile(req.name)) and not req.vcs:
  File "c:\program files (x86)\python36-32\lib\genericpath.py", line 30, in isfile
    st = os.stat(path)
TypeError: stat: path should be string, bytes, os.PathLike or integer, not NoneType  
Solution
I checked the code in pyenv/utils.py and at the line 547, i.e. around:
[...]
  if (req.uri or (os.path.isfile(req.path) if req.path else False) or
        os.path.isfile(req.name)) and not req.vcs:
[...]
the error occurs because req.name is None. Hence the simple solution is check as for req.path:
if (req.uri or (os.path.isfile(req.path) if req.path else False) or
        (os.path.isfile(req.name) if req.name else False)) and not req.vcs:
At least on my pc it worked. The Pipfile looks as follows after installing the editable package:
[packages]
...
django = "==1.10.5"
"-e d:\projects\djangoapps\mypackage" = "*"
ed-alertedh commented on 4 Dec 2017
I'm trying to set up a basic numpy+scipy env on Windows using the builds from https://www.lfd.uci.edu/~gohlke/pythonlibs. I downloaded the latest wheels for numpy and scipy, then placed them in my project folder. Due to #1105 I currently have to use an absolute path and a "file://" URI to install from a local wheel. My Pipfile looks like this:
[[source]]

url = "https://pypi.python.org/simple"
verify_ssl = true
name = "pypi"


[packages]

"4dd5b0a" = {file = "file://d:/dev/branch_tests/issue-118/numpy-1.13.3+mkl-cp36-cp36m-win_amd64.whl", os_name = "=='nt'"}
"3a45660" = {file = "file://d:/dev/branch-tests/issue-118/scipy-1.0.0-cp36-cp36m-win-amd64.whl", os_name = "=='nt'"}
numpy = { version = "*", os_name = "=='linux'", index="pypi" }
scipy = { version = "*", os_name = "=='linux'", index="pypi" }
dask = "*"
distributed = "*"
dm-sonnet = "*"
fastparquet = "*"
pandas = "*"
pyodbc = "*"
scikit-learn = "*"
seaborn = "*"
sqlalchemy = "*"
tensorflow-gpu = ">= 1.4.0"

[dev-packages]

pytest = "*"
jupyter = "*"
nbdime = "*"
#pyreadline { version = "*", os_name = "=='nt'", index="pypi" }


[requires]

python_version = "3.6.3"
Describe your environment
Windows 10
Python version: 3.6.3 64-bit
Pipenv version: 8.3.2
Expected result
Numpy and scipy install successfully, plus all the other packages.
Actual result
Everything installs fine except for scipy, which fails with the message "not a supported wheel on this platform". If I run pipenv run pip install scipy-1.0.0-cp36-cp36m-win-amd64.whl then the package installs fine.
When I run with --verbose I get a couple of warnings which don't seem related:
"Config variable 'Py_DEBUG' is unset, Python ABI tag may be incorrect"
"Config variable 'WITH_PYMALLOC' is unset, Python ABI tag may be incorrect"
The contents of the temporary pipenv-*-requirements.txt files are:
file://d:/dev/branch-tests/issue-118/scipy-1.0.0-cp36-cp36m-win-amd64.whl; os_name =='nt'
and
file://d:/dev/branch_tests/issue-118/numpy-1.13.3+mkl-cp36-cp36m-win_amd64.whl; os_name =='nt'
Steps to replicate
(probably irrelevant) set PIPENV_VENV_IN_PROJECT=1
Download numpy-1.13.3+mkl-cp36-cp36m-win_amd64.whl and scipy-1.0.0-cp36-cp36m-win-amd64.whl
Update Pipfile to point to location of the downloaded wheels
pipenv install --verbose
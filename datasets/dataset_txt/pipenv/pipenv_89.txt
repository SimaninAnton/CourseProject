Redhouane commented on 30 Jul 2019 •
edited
Hi all,
I'm trying to install a homemade package using pipenv from a private pypi index setted up on an aws S3 bucket using S3PyPi following this tutorial.
I'm using:
python 3.7.3
pip 19.2.1
pipenv 2018.11.26
The install command line:
pipenv install my-homemade-package --extra-index-url https://my-private-index
I'm facing the following issue below and do not understand what I'm doing wrong (since the final issue did mension an unreachable).
Installing my-homemade-package…
Adding my-homemade-package to Pipfile's [packages]…
✔ Installation Succeeded 
Pipfile.lock (67b9a8) out of date, updating to (8e084c)…
Locking [dev-packages] dependencies…
✔ Success! 
Locking [packages] dependencies…
✘ Locking Failed! 
[pipenv.exceptions.ResolutionFailure]:   File "/home/redhouane/.local/lib/python3.7/site-packages/pipenv/resolver.py", line 69, in resolve
[pipenv.exceptions.ResolutionFailure]:       req_dir=requirements_dir
[pipenv.exceptions.ResolutionFailure]:   File "/home/redhouane/.local/lib/python3.7/site-packages/pipenv/utils.py", line 726, in resolve_deps
[pipenv.exceptions.ResolutionFailure]:       req_dir=req_dir,
[pipenv.exceptions.ResolutionFailure]:   File "/home/redhouane/.local/lib/python3.7/site-packages/pipenv/utils.py", line 480, in actually_resolve_deps
[pipenv.exceptions.ResolutionFailure]:       resolved_tree = resolver.resolve()
[pipenv.exceptions.ResolutionFailure]:   File "/home/redhouane/.local/lib/python3.7/site-packages/pipenv/utils.py", line 395, in resolve
[pipenv.exceptions.ResolutionFailure]:       raise ResolutionFailure(message=str(e))
[pipenv.exceptions.ResolutionFailure]:       pipenv.exceptions.ResolutionFailure: ERROR: ERROR: Could not find a version that matches my-homemade-package
[pipenv.exceptions.ResolutionFailure]:       No versions found
[pipenv.exceptions.ResolutionFailure]: Warning: Your dependencies could not be resolved. You likely have a mismatch in your sub-dependencies.
  First try clearing your dependency cache with $ pipenv lock --clear, then try the original command again.
 Alternatively, you can use $ pipenv install --skip-lock to bypass this mechanism, then run $ pipenv graph to inspect the situation.
  Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: ERROR: Could not find a version that matches my-homemade-package
No versions found
Were https://pypi.org/simple or https://my-private-index.my-domaine.com/my-homemade-package/ reachable?
[pipenv.exceptions.ResolutionFailure]:       req_dir=requirements_dir
[pipenv.exceptions.ResolutionFailure]:   File "/home/redhouane/.local/lib/python3.7/site-packages/pipenv/utils.py", line 726, in resolve_deps
[pipenv.exceptions.ResolutionFailure]:       req_dir=req_dir,
[pipenv.exceptions.ResolutionFailure]:   File "/home/redhouane/.local/lib/python3.7/site-packages/pipenv/utils.py", line 480, in actually_resolve_deps
[pipenv.exceptions.ResolutionFailure]:       resolved_tree = resolver.resolve()
[pipenv.exceptions.ResolutionFailure]:   File "/home/redhouane/.local/lib/python3.7/site-packages/pipenv/utils.py", line 395, in resolve
[pipenv.exceptions.ResolutionFailure]:       raise ResolutionFailure(message=str(e))
[pipenv.exceptions.ResolutionFailure]:       pipenv.exceptions.ResolutionFailure: ERROR: ERROR: Could not find a version that matches my-homemade-package
[pipenv.exceptions.ResolutionFailure]:       No versions found
[pipenv.exceptions.ResolutionFailure]: Warning: Your dependencies could not be resolved. You likely have a mismatch in your sub-dependencies.
  First try clearing your dependency cache with $ pipenv lock --clear, then try the original command again.
 Alternatively, you can use $ pipenv install --skip-lock to bypass this mechanism, then run $ pipenv graph to inspect the situation.
  Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: ERROR: Could not find a version that matches my-homemade-package
No versions found
Were https://pypi.org/simple or https://my-private-index.my-domaine.com/my-homemade-package/ reachable?
I did try the approaches recommanded in the stack trace :
First:
1 - Try clearing your dependency cache with pipenv lock --clear
2 - Try the original command again (the issue persist)
Second:
1 - Use pipenv install --skip-lock to bypass this mechanism
2 - run pipenv graph to inspect the situation (No dependency related to my private package is listed)
Third:
Try pipenv lock --pre if it is a pre-release dependency
Fourth:
I tryied to install my homemade package from my private package using pip with the following commande line:
pip install my-homemade-package --extra-index-url https://my-private-index.my-domaine.com/
But still does not work with the following error message:
WARNING: Retrying (Retry(total=4, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pip._vendor.urllib3.connection.VerifiedHTTPSConnection object at 0x7f9b67abb278>: Failed to establish a new connection: [Errno -2] Name or service not known')': /my-homemade-package/
WARNING: Retrying (Retry(total=3, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pip._vendor.urllib3.connection.VerifiedHTTPSConnection object at 0x7f9b67abb550>: Failed to establish a new connection: [Errno -2] Name or service not known')': /my-homemade-package/
WARNING: Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pip._vendor.urllib3.connection.VerifiedHTTPSConnection object at 0x7f9b67d0e5c0>: Failed to establish a new connection: [Errno -2] Name or service not known')': /my-homemade-package/
WARNING: Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pip._vendor.urllib3.connection.VerifiedHTTPSConnection object at 0x7f9b67a9fef0>: Failed to establish a new connection: [Errno -2] Name or service not known')': /my-homemade-package/
WARNING: Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pip._vendor.urllib3.connection.VerifiedHTTPSConnection object at 0x7f9b67a9ff98>: Failed to establish a new connection: [Errno -2] Name or service not known')': /my-homemade-package/
ERROR: Could not find a version that satisfies the requirement my-homemade-package (from versions: none)
ERROR: No matching distribution found for my-homemade-package
P.S: I did try to add my private index url into enabled source within my Pipefile with the following lines:
[[source]]
url = "https://my-private-index.my-domaine.com/"
verify_ssl = true
name = "my-private-index"
but, one more time, the issue still persist.
Did you ever fecad a similar issue ?
Thx in advance for your help,
Red1
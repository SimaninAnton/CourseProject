exhuma commented on 31 Dec 2017
I always have my variable PYTHONWARNINGS set to default when developing on my own applications. I realised today that pipenv emits a lot of warnings about unclosed resources. Apart from the resource warnings, others show up too. I was planning to submit a PR for the unclosed files but I can't locate them in the code. Which kind of surprises me... seems like the location shown in the warning message is incorrect?!?
In any case, these warnings make the pipenv output really messy. Here is the complete shell output from one small installation:
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/patched/pip/pep425tags.py:260: PendingDeprecationWarning: the imp module is deprecated in favour of importlib; see the module's documentation for alternative uses
  import imp
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/patched/prettytoml/elements/abstracttable.py:25: PendingDeprecationWarning: generator 'AbstractTable._enumerate_items' raised StopIteration
  for (key_i, key), (value_i, value) in self._enumerate_items():
Creating a virtualenv for this project…
Using base prefix '/usr'
/home/exhuma/.local/lib/python3.5/site-packages/virtualenv.py:1039: PendingDeprecationWarning: the imp module is deprecated in favour of importlib; see the module's documentation for alternative uses
  import imp
New python executable in /home/exhuma/.local/share/virtualenvs/config_resolver-2wt42mzo/bin/python3
Also creating executable in /home/exhuma/.local/share/virtualenvs/config_resolver-2wt42mzo/bin/python
Installing setuptools, pip, wheel.../home/exhuma/.local/lib/python3.5/site-packages/virtualenv.py:901: ResourceWarning: unclosed file <_io.BufferedReader name=5>
  call_subprocess(cmd, show_stdout=False, extra_env=env, stdin=SCRIPT)
done.

Virtualenv location: /home/exhuma/.local/share/virtualenvs/config_resolver-2wt42mzo
Installing dependencies from Pipfile.lock (c27fee)…
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:573: ResourceWarning: unclosed file <_io.FileIO name=4 mode='wb' closefd=True>
  do_create_virtualenv(python=python, site_packages=site_packages)
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:573: ResourceWarning: unclosed file <_io.FileIO name=5 mode='rb' closefd=True>
  do_create_virtualenv(python=python, site_packages=site_packages)
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/patched/prettytoml/elements/abstracttable.py:25: PendingDeprecationWarning: generator 'AbstractTable._enumerate_items' raised StopIteration
  for (key_i, key), (value_i, value) in self._enumerate_items():
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=47 mode='wb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=48 mode='rb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=44 mode='wb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=45 mode='rb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=41 mode='wb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=42 mode='rb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=38 mode='wb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=39 mode='rb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=35 mode='wb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=36 mode='rb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=32 mode='wb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=33 mode='rb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=29 mode='wb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=30 mode='rb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=26 mode='wb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=27 mode='rb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=23 mode='wb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=24 mode='rb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=20 mode='wb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=21 mode='rb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=17 mode='wb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=18 mode='rb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=14 mode='wb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=15 mode='rb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=11 mode='wb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=12 mode='rb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=8 mode='wb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=9 mode='rb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=5 mode='wb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=6 mode='rb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:831: ResourceWarning: unclosed file <_io.FileIO name=50 mode='wb' closefd=True>
  index=index
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:831: ResourceWarning: unclosed file <_io.FileIO name=51 mode='rb' closefd=True>
  index=index
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=63 mode='wb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=64 mode='rb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=60 mode='wb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=61 mode='rb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=57 mode='wb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=58 mode='rb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=54 mode='wb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=55 mode='rb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=51 mode='wb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=52 mode='rb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=48 mode='wb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=49 mode='rb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=39 mode='wb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=41 mode='rb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=30 mode='wb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=32 mode='rb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=21 mode='wb' closefd=True>
  procs = []
To activate this project's virtualenv, run the following:
 $ pipenv shell
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=23 mode='rb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=12 mode='wb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:841: ResourceWarning: unclosed file <_io.FileIO name=14 mode='rb' closefd=True>
  procs = []
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:831: ResourceWarning: unclosed file <_io.FileIO name=66 mode='wb' closefd=True>
  index=index
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:831: ResourceWarning: unclosed file <_io.FileIO name=67 mode='rb' closefd=True>
  index=index
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:1314: ResourceWarning: unclosed file <_io.FileIO name=26 mode='wb' closefd=True>
  skip_lock=skip_lock, verbose=verbose, concurrent=concurrent)
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:1314: ResourceWarning: unclosed file <_io.FileIO name=27 mode='rb' closefd=True>
  skip_lock=skip_lock, verbose=verbose, concurrent=concurrent)
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:1314: ResourceWarning: unclosed file <_io.FileIO name=18 mode='wb' closefd=True>
  skip_lock=skip_lock, verbose=verbose, concurrent=concurrent)
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:1314: ResourceWarning: unclosed file <_io.FileIO name=21 mode='rb' closefd=True>
  skip_lock=skip_lock, verbose=verbose, concurrent=concurrent)
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:1314: ResourceWarning: unclosed file <_io.FileIO name=12 mode='wb' closefd=True>
  skip_lock=skip_lock, verbose=verbose, concurrent=concurrent)
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:1314: ResourceWarning: unclosed file <_io.FileIO name=14 mode='rb' closefd=True>
  skip_lock=skip_lock, verbose=verbose, concurrent=concurrent)
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:1314: ResourceWarning: unclosed file <_io.FileIO name=32 mode='wb' closefd=True>
  skip_lock=skip_lock, verbose=verbose, concurrent=concurrent)
/home/exhuma/.local/lib/python3.5/site-packages/pipenv/cli.py:1314: ResourceWarning: unclosed file <_io.FileIO name=35 mode='rb' closefd=True>
  skip_lock=skip_lock, verbose=verbose, concurrent=concurrent)
1
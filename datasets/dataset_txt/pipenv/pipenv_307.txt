daegontaven commented on 2 Feb 2019 â€¢
edited
Issue description
Installing a package with a dependency defined as a git url installs the dependency from pypi instead of git. This is in contrast to pip which actually installs the dependency of the package from the defined git repository. I tried everything mentioned in the diagnose documentation with no success.
Expected result
Imagine two packages package1 (v0.1.0a) and package2 (released on pypi as v0.2.1). package1 has not been released on pypi yet and depends on a unreleased development branch (v1.0.0a) of package2. Then the following command will install the development version of package2 from git without problems:
pipenv install -e git+https://git.somegithost.com/myorg/package1@devbranch#egg=package1
Actual result
The above command installs v0.2.1 of package2 which as you can see is from pypi and not from git. The full output of an example of one such instance of pipenv install --verbose can be seen here.
Steps to replicate
1. Create a pipenv shell with the following pipfile
[[source]]
url = "https://pypi.org/simple"
verify_ssl = true
name = "pypi"

[packages]
erin = {editable = true,extras = ["voice"],git = "https://github.com/DiscordFederation/Erin.git",ref = "rewrite"}

[dev-packages]

[requires]
python_version = "3.7.1"
Notice: The setup function for setuptools in setup.py file has install_requires defined.
2. Check the version of discord.py installed. It should be discord.py==0.16.12 instead of the rewrite branch which is 1.0.0a.
$ pipenv --support
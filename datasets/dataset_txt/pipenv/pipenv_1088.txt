lorengordon commented on 8 May 2018
Expected result
Expected to be able to install pipenv without needing gcc.
Actual result
Failed to install pipenv on Python versions earlier than 3.5 due to transitive dependency on scandir.
Steps to replicate
On a clean system, using a python version earlier than 3.5, run pip install pipenv:
Collecting pipenv
  Downloading https://files.pythonhosted.org/packages/ae/3f/49aef3c9b24acda0e5f9e681ae9f5d8113ebff16e15cb0c436b627791a7c/pipenv-11.10.2-py2-none-any.whl (6.4MB)
    100% |████████████████████████████████| 6.4MB 73.3MB/s
Requirement already satisfied: certifi in /usr/lib/python2.7/site-packages (from pipenv)
Requirement already satisfied: virtualenv in /usr/lib/python2.7/site-packages (from pipenv)
Requirement already satisfied: setuptools>=36.2.1 in /usr/lib/python2.7/site-packages (from pipenv)
Requirement already satisfied: virtualenv-clone>=0.2.5 in /usr/lib/python2.7/site-packages (from pipenv)
Requirement already satisfied: pip>=9.0.1 in /usr/lib/python2.7/site-packages (from pipenv)
Requirement already satisfied: pathlib2; python_version < "3.4" in /usr/lib/python2.7/site-packages (from pipenv)
Requirement already satisfied: six in /usr/lib/python2.7/site-packages (from pathlib2; python_version < "3.4"->pipenv)
Collecting scandir; python_version < "3.5" (from pathlib2; python_version < "3.4"->pipenv)
  Downloading https://files.pythonhosted.org/packages/13/bb/e541b74230bbf7a20a3949a2ee6631be299378a784f5445aa5d0047c192b/scandir-1.7.tar.gz
Installing collected packages: pipenv, scandir
  Running setup.py install for scandir ... error
    Complete output from command /usr/bin/python -u -c "import setuptools, tokenize;__file__='/tmp/pip-build-ovM7h_/scandir/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\r\n', '\n');f.close();exec(compile(code, __file__, 'exec'))" install --record /tmp/pip-U2JSRH-record/install-record.txt --single-version-externally-managed --compile:
    running install
    running build
    running build_py
    creating build
    creating build/lib.linux-x86_64-2.7
    copying scandir.py -> build/lib.linux-x86_64-2.7
    running build_ext
    building '_scandir' extension
    creating build/temp.linux-x86_64-2.7
    gcc -pthread -fno-strict-aliasing -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -DNDEBUG -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -fPIC -I/usr/include/python2.7 -c _scandir.c -o build/temp.linux-x86_64-2.7/_scandir.o
    unable to execute gcc: No such file or directory
    error: command 'gcc' failed with exit status 1

    ----------------------------------------
Command "/usr/bin/python -u -c "import setuptools, tokenize;__file__='/tmp/pip-build-ovM7h_/scandir/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\r\n', '\n');f.close();exec(compile(code, __file__, 'exec'))" install --record /tmp/pip-U2JSRH-record/install-record.txt --single-version-externally-managed --compile" failed with error code 1 in /tmp/pip-build-ovM7h_/scandir/
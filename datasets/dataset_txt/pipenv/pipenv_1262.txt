Contributor
tsiq-oliver commented on 2 Apr 2018 â€¢
edited
When I run the test suite in a Python Docker container, there are 5 failures (not including the 17 skipped tests):
TestPipenv.test_complex_lock
TestPipenv.test_backup_resolver
TestPipenv.test_complex_deps_lock_and_install_properly
TestPipenv.test_complex_lock_deep_extras
TestPipenv.test_deploy_works
There seems to be some overlap with what's mentioned here.
Empirically, these failures appear to be deterministic (I've run the tests from clean twice, with the same results).
I'm not sure if this is Docker-specific yet - this is my first attempt to run the test suite, so I'll do some digging. But without the ability to run the tests in an isolated env, I'm not going to be able to make the changes I want to contribute
EDIT: Updated from 3.6.4 to 3.6.5 as that's no longer an official tag on Docker Hub.
Expected result
All the tests to pass.
Actual result
Test output
Steps to replicate
Spin up a Python container:
docker run --rm -it python:3.6.5 /bin/bash
docker inspect --format='{{index .RepoDigests 0}}' python:3.6.5    # python@sha256:5feadaa5837182a9b8e04a596ea8510f6e88a1455d286dbdd0b185fced9a21f7
Then clone the code, install stuff, and run the test suite per the instructions in CONTRIBUTING.rst:
git clone https://github.com/pypa/pipenv.git
cd pipenv
git rev-parse HEAD        # 8a67a21d61a2383253fe0dd5e7a8d79d51d30d2d
python setup.py develop
pipenv install --dev
pipenv run pytest tests
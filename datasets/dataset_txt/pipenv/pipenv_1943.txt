Contributor
k4nar commented on 12 Oct 2017
When a VCS dependency is present in the Pipfile, any VCS dependency in the virtualenv will be added to the Pipfile.lock. This can include packages installed with pip install -e <path>, as it's represented in the pip freeze as -e git+ssh://... if the path corresponds to a git repo.
In my case this wasn't an issue before #835 as git dependencies where not parsed correctly, but since this PR I'm seeing unexpected git repositories showing up in my Pipfile.lock.
I think that the culprit is in this loop, which adds any VCS dependency present in the pip freeze to the Pipfile.lock without checking if they are in the Pipfile:
https://github.com/kennethreitz/pipenv/blob/8685ba80d75c6489bbb4dce19861c9e91c2636ed/pipenv/cli.py#L1050-L1061
I'm working on a fix.
Contributor
giuscri commented on 25 Apr 2018 •
edited
$ python -m pipenv.help output
------------
Expected result
Behaviour should be the same of running pip install -r requirements.txt
Actual result
> pipenv install -r requirements.txt  --skip-lock --verbose
Requirements file provided! Importing into Pipfile…
Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/pipenv/vendor/requirements/fragment.py", line 18, in parse_fragment
    for key_value_string in fragment_string.split('&')
ValueError: dictionary update sequence element #0 has length 4; 2 is required

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/bin/pipenv", line 11, in <module>
    load_entry_point('pipenv==11.10.0', 'console_scripts', 'pipenv')()
  File "/usr/lib/python3.6/site-packages/pipenv/vendor/click/core.py", line 722, in __call__
    return self.main(*args, **kwargs)
  File "/usr/lib/python3.6/site-packages/pipenv/vendor/click/core.py", line 697, in main
    rv = self.invoke(ctx)
  File "/usr/lib/python3.6/site-packages/pipenv/vendor/click/core.py", line 1066, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
  File "/usr/lib/python3.6/site-packages/pipenv/vendor/click/core.py", line 895, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File "/usr/lib/python3.6/site-packages/pipenv/vendor/click/core.py", line 535, in invoke
    return callback(*args, **kwargs)
  File "/usr/lib/python3.6/site-packages/pipenv/cli.py", line 366, in install
    selective_upgrade=selective_upgrade,
  File "/usr/lib/python3.6/site-packages/pipenv/core.py", line 1794, in do_install
    import_requirements(r=project.path_to(requirements), dev=dev)
  File "/usr/lib/python3.6/site-packages/pipenv/core.py", line 212, in import_requirements
    project.add_package_to_pipfile(package_string, dev=dev)
  File "/usr/lib/python3.6/site-packages/pipenv/project.py", line 667, in add_package_to_pipfile
    converted = convert_deps_from_pip(package_name)
  File "/usr/lib/python3.6/site-packages/pipenv/utils.py", line 536, in convert_deps_from_pip
    req = get_requirement(dep)
  File "/usr/lib/python3.6/site-packages/pipenv/utils.py", line 125, in get_requirement
    req = [r for r in requirements.parse(dep)][0]
  File "/usr/lib/python3.6/site-packages/pipenv/utils.py", line 125, in <listcomp>
    req = [r for r in requirements.parse(dep)][0]
  File "/usr/lib/python3.6/site-packages/pipenv/vendor/requirements/parser.py", line 50, in parse
    yield Requirement.parse(line)
  File "/usr/lib/python3.6/site-packages/pipenv/vendor/requirements/requirement.py", line 220, in parse
    return cls.parse_line(line)
  File "/usr/lib/python3.6/site-packages/pipenv/vendor/requirements/requirement.py", line 162, in parse_line
    fragment = parse_fragment(groups['fragment'])
  File "/usr/lib/python3.6/site-packages/pipenv/vendor/requirements/fragment.py", line 23, in parse_fragment
    fragment_string=fragment_string
ValueError: Invalid fragment string egg=Theano==0.8.git
Steps to replicate
Use this requirements.txt
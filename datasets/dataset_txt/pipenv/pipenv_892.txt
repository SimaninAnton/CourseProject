item4 commented on 29 Jun 2018 ‚Ä¢
edited
Be sure to check the existing issues (both open and closed!).
Describe the issue briefly here.
Please run $ python -m pipenv.help, and paste the results here.
If you're on MacOS, just run the following:
$ python -m pipenv.help | pbcopy
$ python -m pipenv.help output
Expected result
There is no idna-ssl in Pipfile.lock because aiohttp do not need idna-ssl with py37
Actual result
pipenv make wrong lock file with idna-ssl
Steps to replicate
$ python -V
Python 3.7.0


$ mktmpenv
Using base prefix '/Users/item4/.pyenv/versions/3.7.0'
New python executable in /Users/item4/.virtualenvs/tmp-6327fd03a1e0f6d/bin/python3.7
Also creating executable in /Users/item4/.virtualenvs/tmp-6327fd03a1e0f6d/bin/python
Installing setuptools, pip, wheel...done.
virtualenvwrapper.user_scripts creating /Users/item4/.virtualenvs/tmp-6327fd03a1e0f6d/bin/predeactivate
virtualenvwrapper.user_scripts creating /Users/item4/.virtualenvs/tmp-6327fd03a1e0f6d/bin/postdeactivate
virtualenvwrapper.user_scripts creating /Users/item4/.virtualenvs/tmp-6327fd03a1e0f6d/bin/preactivate
virtualenvwrapper.user_scripts creating /Users/item4/.virtualenvs/tmp-6327fd03a1e0f6d/bin/postactivate
virtualenvwrapper.user_scripts creating /Users/item4/.virtualenvs/tmp-6327fd03a1e0f6d/bin/get_env_details
This is a temporary environment. It will be deleted when you run 'deactivate'.


$ pip install pipenv
Collecting pipenv
  Using cached https://files.pythonhosted.org/packages/0d/e5/cbd43eaf3ca60c4b75ac8a4ff4f7ba102b629f519a2b325d67c4237b7fcc/pipenv-2018.6.25-py3-none-any.whl
Collecting certifi (from pipenv)
  Using cached https://files.pythonhosted.org/packages/7c/e6/92ad559b7192d846975fc916b65f667c7b8c3a32bea7372340bfe9a15fa5/certifi-2018.4.16-py2.py3-none-any.whl
Requirement already satisfied: setuptools>=36.2.1 in ./lib/python3.7/site-packages (from pipenv) (39.2.0)
Requirement already satisfied: pip>=9.0.1 in ./lib/python3.7/site-packages (from pipenv) (10.0.1)
Collecting virtualenv (from pipenv)
  Using cached https://files.pythonhosted.org/packages/b6/30/96a02b2287098b23b875bc8c2f58071c35d2efe84f747b64d523721dc2b5/virtualenv-16.0.0-py2.py3-none-any.whl
Collecting virtualenv-clone>=0.2.5 (from pipenv)
  Using cached https://files.pythonhosted.org/packages/6d/c2/dccb5ccf599e0c5d1eea6acbd058af7a71384f9740179db67a9182a24798/virtualenv_clone-0.3.0-py2.py3-none-any.whl
Installing collected packages: certifi, virtualenv, virtualenv-clone, pipenv
Successfully installed certifi-2018.4.16 pipenv-2018.6.25 virtualenv-16.0.0 virtualenv-clone-0.3.0
(tmp-6327fd03a1e0f6d) [item4@item4-mbp tmp-6327fd03a1e0f6d]$ which pipenv
/Users/item4/.virtualenvs/tmp-6327fd03a1e0f6d/bin/pipenv


$ pipenv install aiohttp>=3.1.1
Courtesy Notice: Pipenv found itself running within a virtual environment, so it will automatically use that environment, instead of creating its own for any project. You can set PIPENV_IGNORE_VIRTUALENVS=1 to force pipenv to ignore that environment and create its own instead.
Creating a Pipfile for this project...
Pipfile.lock not found, creating...
Locking [dev-packages] dependencies...
Locking [packages] dependencies...
Updated Pipfile.lock (21a02d)!
  üêç   ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ 8/8 ‚Äî 00:00:02
  Could not find a version that satisfies the requirement idna-ssl==1.0.1 (from -r /var/folders/xv/1bk19gh52hqf4_x199v_w1b80000gn/T/pipenv-3t2rzj4d-requirements/pipenv-87snv0l2-requirement.txt (line 1)) (from versions: 0.0.1, 0.0.2, 1.0.0)
No matching distribution found for idna-ssl==1.0.1 (from -r /var/folders/xv/1bk19gh52hqf4_x199v_w1b80000gn/T/pipenv-3t2rzj4d-requirements/pipenv-87snv0l2-requirement.txt (line 1))

  ‚ò§  ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ 0/1 ‚Äî 00:00:00
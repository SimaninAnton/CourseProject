mamtach commented on 27 Nov 2019
Issue description
Current pip versions are
python -m pip --version
pip 19.3.1 (python 3.8)
pipenv --version
pipenv, version 2018.11.26
I am installing django-rest-knox (today only I upgraded python 3.7 to 3.8)
I was able to find solutions for other binaries (which was basically some compatible version for python 3.8), but I did not for pipenv solution for this binary.
One more point that I noticed is:
https://pypi.org/project/django-rest-knox/ says the binary is up to 3.7 version
Expected result
Successful installation via pipenv
[Please note, after investing time on this, I tried to install the binaries one by one ie djangorestframework, django-rest-knox via pycharm and was able to install it successfully ]
Before upgrading to Python3.8, I was able to install all the binaries via pipenv
Pycharm installed django-rest-knox 4.1.0 version
And I tried same binary version via pipenv, but the output is the same exception as follows:
Actual result
Installing django-rest-knox…
Adding django-rest-knox to Pipfile's [packages]…
Installation Succeeded
Pipfile.lock (062e85) out of date, updating to (64c062)…
Locking [dev-packages] dependencies…
Locking [packages] dependencies…
Locking Failed!
Traceback (most recent call last):
File "..../venv/lib/site-packages/pipenv/resolver.py", line 126, in
main()
File "..../venv/lib/site-packages/pipenv/resolver.py", line 118, in main
_main(parsed.pre, parsed.clear, parsed.verbose, parsed.system,
File "..../venv/lib/site-packages/pipenv/resolver.py", line 78, in _main
results = resolve(
File "..../venv/lib/site-packages/pipenv/resolver.py", line 61, in resolve
return resolve_deps(
File "....\venv\lib\site-packages\pipenv\utils.py", line 718, in resolve_deps
resolved_tree, hashes, markers_lookup, resolver = actually_resolve_deps(
File "....\venv\lib\site-packages\pipenv\utils.py", line 480, in actually_resolve_deps
resolved_tree = resolver.resolve()
File "....\venv\lib\site-packages\pipenv\utils.py", line 385, in resolve
results = self.resolver.resolve(max_rounds=environments.PIPENV_MAX_ROUNDS)
File "....\venv\lib\site-packages\pipenv\patched\piptools\resolver.py", line 102, in resolve
has_changed, best_matches = self._resolve_one_round()
File "....\venv\lib\site-packages\pipenv\patched\piptools\resolver.py", line 206, in _resolve_one_round
for dep in self._iter_dependencies(best_match):
File "....\venv\lib\site-packages\pipenv\patched\piptools\resolver.py", line 301, in _iter_dependencies
dependencies = self.repository.get_dependencies(ireq)
File "....\venv\lib\site-packages\pipenv\patched\piptools\repositories\pypi.py", line 234, in get_dependencies
legacy_results = self.get_legacy_dependencies(ireq)
File "....\venv\lib\site-packages\pipenv\patched\piptools\repositories\pypi.py", line 426, in get_legacy_dependen
cies
results, ireq = self.resolve_reqs(download_dir, ireq, wheel_cache)
File "....\venv\lib\site-packages\pipenv\patched\piptools\repositories\pypi.py", line 297, in resolve_reqs
results = resolver._resolve_one(reqset, ireq)
File "....\venv\lib\site-packages\pipenv\patched\notpip_internal\resolve.py", line 260, in _resolve_one
abstract_dist = self._get_abstract_dist_for(req_to_install)
File "....\venv\lib\site-packages\pipenv\patched\notpip_internal\resolve.py", line 211, in _get_abstract_dist_fo
r
abstract_dist = self.preparer.prepare_linked_requirement(
File "....\venv\lib\site-packages\pipenv\patched\notpip_internal\operations\prepare.py", line 294, in prepare_li
nked_requirement
abstract_dist.prep_for_dist(finder, self.build_isolation)
File "....\venv\lib\site-packages\pipenv\patched\notpip_internal\operations\prepare.py", line 127, in prep_for_d
ist
self.req.run_egg_info()
File "....\venv\lib\site-packages\pipenv\patched\notpip_internal\req\req_install.py", line 470, in run_egg_info
call_subprocess(
File "....\venv\lib\site-packages\pipenv\patched\notpip_internal\utils\misc.py", line 703, in call_subprocess
raise InstallationError(
pipenv.patched.notpip._internal.exceptions.InstallationError: Command "python setup.py egg_info" failed with error code 1 in C:\Users<UNAME>\AppData\Local
\Temp\tmp_meiz6tebuild\psycopg2-binary
File "..../venv/lib/site-packages/pipenv/resolver.py", line 126, in
main()
File "..../venv/lib/site-packages/pipenv/resolver.py", line 118, in main
_main(parsed.pre, parsed.clear, parsed.verbose, parsed.system,
File "..../venv/lib/site-packages/pipenv/resolver.py", line 78, in _main
results = resolve(
File "..../venv/lib/site-packages/pipenv/resolver.py", line 61, in resolve
return resolve_deps(
File "....\venv\lib\site-packages\pipenv\utils.py", line 718, in resolve_deps
resolved_tree, hashes, markers_lookup, resolver = actually_resolve_deps(
File "....\venv\lib\site-packages\pipenv\utils.py", line 480, in actually_resolve_deps
resolved_tree = resolver.resolve()
File "....\venv\lib\site-packages\pipenv\utils.py", line 385, in resolve
results = self.resolver.resolve(max_rounds=environments.PIPENV_MAX_ROUNDS)
File "....\venv\lib\site-packages\pipenv\patched\piptools\resolver.py", line 102, in resolve
has_changed, best_matches = self._resolve_one_round()
File "....\venv\lib\site-packages\pipenv\patched\piptools\resolver.py", line 206, in _resolve_one_round
for dep in self._iter_dependencies(best_match):
File "....\venv\lib\site-packages\pipenv\patched\piptools\resolver.py", line 301, in _iter_dependencies
dependencies = self.repository.get_dependencies(ireq)
File "....\venv\lib\site-packages\pipenv\patched\piptools\repositories\pypi.py", line 234, in get_dependencies
legacy_results = self.get_legacy_dependencies(ireq)
File "....\venv\lib\site-packages\pipenv\patched\piptools\repositories\pypi.py", line 426, in get_legacy_dependen
cies
results, ireq = self.resolve_reqs(download_dir, ireq, wheel_cache)
File "....\venv\lib\site-packages\pipenv\patched\piptools\repositories\pypi.py", line 297, in resolve_reqs
results = resolver._resolve_one(reqset, ireq)
File "....\venv\lib\site-packages\pipenv\patched\notpip_internal\resolve.py", line 260, in _resolve_one
abstract_dist = self._get_abstract_dist_for(req_to_install)
File "....\venv\lib\site-packages\pipenv\patched\notpip_internal\resolve.py", line 211, in _get_abstract_dist_fo
r
abstract_dist = self.preparer.prepare_linked_requirement(
File "....\venv\lib\site-packages\pipenv\patched\notpip_internal\operations\prepare.py", line 294, in prepare_li
nked_requirement
abstract_dist.prep_for_dist(finder, self.build_isolation)
File "....\venv\lib\site-packages\pipenv\patched\notpip_internal\operations\prepare.py", line 127, in prep_for_d
ist
self.req.run_egg_info()
File "....\venv\lib\site-packages\pipenv\patched\notpip_internal\req\req_install.py", line 470, in run_egg_info
call_subprocess(
File "....\venv\lib\site-packages\pipenv\patched\notpip_internal\utils\misc.py", line 703, in call_subprocess
raise InstallationError(
pipenv.patched.notpip._internal.exceptions.InstallationError: Command "python setup.py egg_info" failed with error code 1 in C:\Users<UNAME>\AppData\Local
\Temp\tmp_meiz6tebuild\psycopg2-binary\
Steps to replicate
pipenv install django-rest-knox
$ pipenv --support
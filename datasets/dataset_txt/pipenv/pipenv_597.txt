messa commented on 9 Oct 2018
Issue description
When I remove the file Pipfile.lock it fails with a traceback:
...
  File "/Users/messa/code/gh/naucse.python.cz/myvenv/lib/python3.7/site-packages/pipenv/utils.py", line 355, in venv_resolve_deps
    escape_grouped_arguments(which("python", allow_global=allow_global)),
  File "/Users/messa/code/gh/naucse.python.cz/myvenv/lib/python3.7/site-packages/pipenv/core.py", line 109, in which
    if not location and os.path.exists(location):
  File "/opt/local/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/genericpath.py", line 19, in exists
    os.stat(path)
TypeError: stat: path should be string, bytes, os.PathLike or integer, not NoneType
When I remove Pipfile it fails with another traceback:
  File "/Users/messa/code/gh/naucse.python.cz/myvenv/lib/python3.7/site-packages/pipenv/core.py", line 320, in ensure_pipfile
    project.create_pipfile(python=python)
  File "/Users/messa/code/gh/naucse.python.cz/myvenv/lib/python3.7/site-packages/pipenv/project.py", line 627, in create_pipfile
    config_parser = ConfigOptionParser(name=self.name)
  File "/Users/messa/code/gh/naucse.python.cz/myvenv/lib/python3.7/site-packages/pipenv/project.py", line 219, in name
    self._name = self.pipfile_location.split(os.sep)[-2]
AttributeError: 'NoneType' object has no attribute 'split'
Expected result
I would expect a proper error message that some required file is missing. I would expect such behavior from a high-level beginner-friendly software :)
In case of the lock file I would expect a new lock file to be created (similar to npm, for example).
In the second case, the error happens inside create_pipfile, so maybe it is trying to create the pipflle, but still fails. So maybe it's an another issue?
$ pipenv --support
1
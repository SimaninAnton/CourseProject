qinfeng commented on 28 Jun 2018
I removed my original venv and tried to create a new one with below command:
$ pipenv install --dev
However, I get below error whenever how many times I tried:
api git:(feature/celery) pipenv install --dev                                                                                        4m 46s 115ms
Pipfile.lock (b161f6) out of date, updating to (a30b82)...
Locking [dev-packages] dependencies...
Locking [packages] dependencies...
e 243, in get_dependencies
    legacy_results = self.get_legacy_dependencies(ireq)
  File "/usr/local/Cellar/pipenv/2018.6.25/libexec/lib/python3.6/site-packages/pipenv/patched/piptools/repositories/pypi.py", line 332, in get_legacy_dependencies
    self.resolver.resolve(reqset)
  File "/usr/local/Cellar/pipenv/2018.6.25/libexec/lib/python3.6/site-packages/pipenv/patched/notpip/_internal/resolve.py", line 107, in resolve
    self._resolve_one(requirement_set, req)
  File "/usr/local/Cellar/pipenv/2018.6.25/libexec/lib/python3.6/site-packages/pipenv/patched/notpip/_internal/resolve.py", line 264, in _resolve_one
    abstract_dist = self._get_abstract_dist_for(req_to_install)
  File "/usr/local/Cellar/pipenv/2018.6.25/libexec/lib/python3.6/site-packages/pipenv/patched/notpip/_internal/resolve.py", line 214, in _get_abstract_dist_for
    self.require_hashes
  File "/usr/local/Cellar/pipenv/2018.6.25/libexec/lib/python3.6/site-packages/pipenv/patched/notpip/_internal/operations/prepare.py", line 328, in prepare_linked_requirement
    abstract_dist.prep_for_dist(finder, self.build_isolation)
  File "/usr/local/Cellar/pipenv/2018.6.25/libexec/lib/python3.6/site-packages/pipenv/patched/notpip/_internal/operations/prepare.py", line 155, in prep_for_dist
    self.req.run_egg_info()
  File "/usr/local/Cellar/pipenv/2018.6.25/libexec/lib/python3.6/site-packages/pipenv/patched/notpip/_internal/req/req_install.py", line 486, in run_egg_info
    command_desc='python setup.py egg_info')
  File "/usr/local/Cellar/pipenv/2018.6.25/libexec/lib/python3.6/site-packages/pipenv/patched/notpip/_internal/utils/misc.py", line 698, in call_subprocess
    % (command_desc, proc.returncode, cwd))
pipenv.patched.notpip._internal.exceptions.InstallationError: Command "python setup.py egg_info" failed with error code 1 in /var/folders/cl/z7hqs68j0cqbh56_y277y1y40000gq/T/tmp0pcv8uxobuild/ecos/
I am in macOS, and just upgrade pipenv to 2018.6.25
Expected result
new venv created without error
Actual result
see above
Steps to replicate
pipenv install --dev
pipfile:
[[source]]
url = "https://pypi.python.org/simple"
verify_ssl = true
name = "pypi"

[packages]
flask = "*"
sphinx = "*"
scipy = "*"
numpy = "*"
pymongo = "*"
resampy = "*"
peakutils = "*"
daiquiri = "*"
gunicorn = "*"
mongoengine = "*"
pynamodb = "*"
pendulum = "*"
simplejson = "*"
jsonpickle = "*"
pandas = "*"
matplotlib = "*"
cvxpy = "*"
sklearn = "*"
celery = {extras = ["redis"]}
flower = "*"

[dev-packages]
pylint = "*"
invoke = "*"
jupyter = "*"
pytest = "*"
"pyqt5" = "*"
wfdb = "==1.3.6"
jupyterlab = "*"
Contributor
gtalarico commented on 7 May 2018
There are 2 issues that make Pipenv difficult to use on Windows + Cmder (#2 affects win+cmd.exe as well). I am also assuming these are also applicable for ConEmu.
Cmder/ConEmu is used by a many Windows users so it would be great to improve
support/documentation for it.
(PS: I also use it on Mac, but my transition there was much smoother with no noticeable issues)
Below are the two main issues I encountered, and the solutions I found.
Could we add this to either the Wiki or the Docs?
1 - Pipenv Uses cmder by default when entering into a new shell
We need to pipenv to continue using cmder when entering into a shell, otherwise it will default to cmd.exe
Solution
Set PIPENV_SHELL to cmder's init file
Edit your environment Variables and add:
PIPENV_SHELL=C:\path\to\cmder\vendor\init.bat
Note:
If path to your init.bat contains space it will not work, so you will need to use a copy of cmder that is not in one of those files (issue #2115 )
2 - Pipenv does not show the active env's in the prompt
This works fine out of the box with virtualenv + virtualenvwrapper.
For this feature to work on windows, the PROMPT variable which is normally set to $P$G need to be amended to (envname) $P$G
More details on #2116
Solution (Workaround; needs a PR for proper fix)
Make sure you have a .env file for your project, and in that file add
PROMPT=(envnameYouWant) $P$G
This will force pipenv to overwrite the %PROMPT% variable when a pipenv shell is started
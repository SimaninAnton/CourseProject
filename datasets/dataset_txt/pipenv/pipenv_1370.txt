anentropic commented on 13 Mar 2018
pipenv-11.6.1
I have in my Pipfile:
[dev-packages]
mypy = {version = "*", markers = "python_version >= '3.4'"}
When I run pipenv install --dev against Python 2.7 I get the following error:
Ignoring mypy: markers 'python_version >= "3.4"' don't match your environment
An error occurred while installing typed-ast==1.1.0! Will try again.
  🐍   ▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉ 48/48 — 00:00:53
typed-ast is not listed in my Pipfile. If I run pipenv graph it shows that mypy is the only package which depends on typed-ast:
mypy==0.570
  - typed-ast [required: >=1.1.0,<1.2.0, installed: 1.1.0]
So it seems that pipenv is trying to install typed-ast due to mypy being in my Pipfile, despite the fact that the markers for mypy correctly caused pipenv to skip installing mypy itself.
I am struggling generally with the workflow for using pipenv on a library which needs to be tested against multiple python versions. The lock-file seems not helpful in this case.
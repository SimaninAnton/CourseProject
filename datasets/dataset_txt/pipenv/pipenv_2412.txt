jdno commented on 24 Feb 2017
Hi,
when trying to uninstall a package, I noticed that it stayed in the Pipfile even though the command output told we it would be removed. I started to dig into this thinking I discovered a bug in the uninstall command, but it seems it's a more general problem related to the way pipenv compares package names.
See this example:
 $ pipenv install pyyaml
 $ pipenv uninstall PyYAML
These commands successfully install and uninstall the Python package. But, the package won't be removed from the Pipfile, because the comparison in project.remove_package_from_pipfile is case sensitive.
This seems to be a violation of PEP-426, which states that
All comparisons of distribution names MUST be case insensitive, and MUST consider hyphens and underscores to be equivalent.
The easiest way to handle this seems to be to transform the package name with something like package_name.lower() and package_name.replace('-', '_') into a "known" format, but it might also be worth it to look how pip deals with this. Sadly, my time is limited right now, otherwise I would have already looked into this myself.
Let me know how you want to solve this, and I'll see if I can prepare a pull request. :)
justinmoon commented on 2 Aug 2018 •
edited
Issue description
pipenv shell doesn't work using fish.
The last two comments in this issue are related. I tried the recommended commands, and they do work:
env SHELL=/usr/bin/fish pipenv shell works
pipenv shell --fancy also works
I'm using fish version 2.7.1
Expected result
Pipenv should source /home/justin/.local/share/virtualenvs/project-GA1fLWru/bin/activate.fish” and enter a shell in the virtual environment.
Actual result
Pipenv sources /home/justin/.local/share/virtualenvs/project-GA1fLWru/bin/activate”. I'm left in the subshell with python still pointing at the system python installation.
Steps to replicate
$ pipenv install
$ pipenv shell
  . /home/justin/.local/share/virtualenvs/project-GA1fLWru/bin/activate
~/.local/share/virtualenvs/project-GA1fLWru/bin/activate (line 23): Unsupported use of '||'. In fish, please use 'COMMAND; or COMMAND'.
    if [ -n "${BASH-}" ] || [ -n "${ZSH_VERSION-}" ] ; then
                          ^
from sourcing file ~/.local/share/virtualenvs/project-GA1fLWru/bin/activate
 called on line 230 of file /usr/share/fish/config.fish

in function “.”
 called on standard input

source: Error while reading file “/home/justin/.local/share/virtualenvs/project-GA1fLWru/bin/activate”
$ which python
/usr/bin/python
$ pipenv --support
1
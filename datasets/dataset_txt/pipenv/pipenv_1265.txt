Contributor
tsiq-oliver commented on 1 Apr 2018
When updating Pipfile.lock, the old version is deleted before anything happens. If the update process fails (maybe because one Ctrl+C's it because of a mistake, or it's taking too long, or it crashes, etc.), then one is left with no lockfile.
Could the behaviour be changed so that the lockfile deletion is performed immediately before the serialisation of the new content? (FWIW, I'd be happy to attempt a PR for this.)
I guess two rationales for the current behaviour:
Your Pipfile.lock should be in Git. Yes, but it still sucks if you're doing a sequence of new package installs/etc. and haven't committed your work.
The update of the Pipfile.lock should be consistent with the current state of the virtualenv. I'd buy that, but the current behaviour (no lockfile) doesn't strike me as better .
Steps to replicate
Start with an existing Pipenv environment (i.e. you have a working Pipfile/Pipfile.lock).
Run pipenv install <any_dep_that_takes_a_long_time>.
Hit Ctrl+C before it's finished.
3
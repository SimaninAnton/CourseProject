abramsba commented on 10 Jul 2019
I'm using arch linux and I have python 2.7 installed via pyenv. I've already tried pipenv lock --clear, but that doesn't work.
I installed:
pacman -S pyenv pip pipenv
As an example library, I'm using pymongo.
[root@arch-linux jobber]# python --version
Python 2.7.16
[root@arch-linux jobber]# pip --version
pip 19.1.1 from /root/.pyenv/versions/2.7.16/lib/python2.7/site-packages/pip (python 2.7)
[root@arch-linux jobber]# pipenv --version
pipenv, version 2018.11.26
And using pip alone, it seems to work fine:
[root@arch-linux jobber]# pip install pymongo
DEPRECATION: Python 2.7 will reach the end of its life on January 1st, 2020. Please upgrade your Python as Python 2.7 won't be maintained after that date. A future version of pip will drop support for Python 2.7.
Collecting pymongo
  Using cached https://files.pythonhosted.org/packages/6e/ea/353a9f8ced71b9e258438aa4d6aa048c1eaf5b774d3ef2273d686fde0947/pymongo-3.8.0-cp27-cp27mu-manylinux1_x86_64.whl
Installing collected packages: pymongo
Successfully installed pymongo-3.8.0
[root@arch-linux jobber]# python
Python 2.7.16 (default, Jul 10 2019, 11:41:45) 
[GCC 9.1.0] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import pymongo
>>> 
But once I include it as a dependency in my pipenv project, I'm not sure what's going on.
[root@arch-linux jobber]# pipenv install pymongo
Installing pymongo...
Adding pymongo to Pipfile's [packages]...
OK Installation Succeeded 
Pipfile.lock (e8a841) out of date, updating to (ce99dd)...
Locking [dev-packages] dependencies...
Locking [packages] dependencies...
x Locking Failed! 
[pipenv.exceptions.ResolutionFailure]:   File "/root/.pyenv/versions/2.7.16/lib/python2.7/site-packages/pipenv/resolver.py", line 69, in resolve
[pipenv.exceptions.ResolutionFailure]:       req_dir=requirements_dir
[pipenv.exceptions.ResolutionFailure]:   File "/root/.pyenv/versions/2.7.16/lib/python2.7/site-packages/pipenv/utils.py", line 726, in resolve_deps
[pipenv.exceptions.ResolutionFailure]:       req_dir=req_dir,
[pipenv.exceptions.ResolutionFailure]:   File "/root/.pyenv/versions/2.7.16/lib/python2.7/site-packages/pipenv/utils.py", line 480, in actually_resolve_deps
[pipenv.exceptions.ResolutionFailure]:       resolved_tree = resolver.resolve()
[pipenv.exceptions.ResolutionFailure]:   File "/root/.pyenv/versions/2.7.16/lib/python2.7/site-packages/pipenv/utils.py", line 395, in resolve
[pipenv.exceptions.ResolutionFailure]:       raise ResolutionFailure(message=str(e))
[pipenv.exceptions.ResolutionFailure]:       ResolutionFailure: ERROR: ERROR: Could not find a version that matches pymongo
[pipenv.exceptions.ResolutionFailure]:       No versions found
[pipenv.exceptions.ResolutionFailure]: Warning: Your dependencies could not be resolved. You likely have a mismatch in your sub-dependencies.
  First try clearing your dependency cache with $ pipenv lock --clear, then try the original command again.
 Alternatively, you can use $ pipenv install --skip-lock to bypass this mechanism, then run $ pipenv graph to inspect the situation.
  Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: ERROR: Could not find a version that matches pymongo
No versions found
Was https://.../jobber reachable?
[pipenv.exceptions.ResolutionFailure]:       req_dir=requirements_dir
[pipenv.exceptions.ResolutionFailure]:   File "/root/.pyenv/versions/2.7.16/lib/python2.7/site-packages/pipenv/utils.py", line 726, in resolve_deps
[pipenv.exceptions.ResolutionFailure]:       req_dir=req_dir,
[pipenv.exceptions.ResolutionFailure]:   File "/root/.pyenv/versions/2.7.16/lib/python2.7/site-packages/pipenv/utils.py", line 480, in actually_resolve_deps
[pipenv.exceptions.ResolutionFailure]:       resolved_tree = resolver.resolve()
[pipenv.exceptions.ResolutionFailure]:   File "/root/.pyenv/versions/2.7.16/lib/python2.7/site-packages/pipenv/utils.py", line 395, in resolve
[pipenv.exceptions.ResolutionFailure]:       raise ResolutionFailure(message=str(e))
[pipenv.exceptions.ResolutionFailure]:       ResolutionFailure: ERROR: ERROR: Could not find a version that matches pymongo
[pipenv.exceptions.ResolutionFailure]:       No versions found
[pipenv.exceptions.ResolutionFailure]: Warning: Your dependencies could not be resolved. You likely have a mismatch in your sub-dependencies.
  First try clearing your dependency cache with $ pipenv lock --clear, then try the original command again.
 Alternatively, you can use $ pipenv install --skip-lock to bypass this mechanism, then run $ pipenv graph to inspect the situation.
  Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: ERROR: Could not find a version that matches pymongo
No versions found
Was https://.../jobber reachable?
[root@arch-linux jobber]# 
Am I missing a step inbetween? The machine is not behind a firewall, there's nothing that's blocking outside traffic. After adding this package, I have to manually remove it from the Pipfile or I can't use pipenv in any capacity. pipenv install --skip-lock && pipenv graph didn't show anything.
realslimshanky commented on 25 Jun 2018
Be sure to check the existing issues (both open and closed!).
Describe the issue briefly here.
While installing dependency from the Pipfile which in turn is using .git from Github, error occurs. But the same can be successfully installed by calling pipenv install explicitly.
In my case, I'm trying to install Kivy's 1.10.1 version using git+http://github.com/kivy/kivy.git#egg=kivy-1.10.1
Please run $ python -m pipenv.help, and paste the results here.
$ python -m pipenv.help output
If you're on MacOS, just run the following:
$ python -m pipenv.help | pbcopy
Expected result
Dependency should be installed by mentioning "kivy-1.10.1" = {path = "git+http://github.com/kivy/kivy.git#egg=kivy-1.10.1"} in the Pipfile.
Actual result
When we run pipenv install git+http://github.com/kivy/kivy.git, dependency can be successfully installed. But the same is not the case with Pipfile.
While installing Kivy from Pipfile the following error occurs
Installing 'git+http://github.com/kivy/kivy.git#egg=kivy-1.10.1'
$ "/home/realslimshanky/.local/share/virtualenvs/edumodwiz-WZ8dLI63/bin/pip" install   --verbose  --no-deps  -r "/tmp/pipenv-EIOrx4-requirements/pipenv-aT1X8_-requirement.txt" -i https://pypi.org/simple --exists-action w
Created temporary directory: /tmp/pip-ephem-wheel-cache-0mfs6b4u
Created temporary directory: /tmp/pip-install-br8l_eq6                                                                       
Requirement already satisfied: cython==0.28 in /home/realslimshanky/.local/share/virtualenvs/edumodwiz-WZ8dLI63/lib/python3.5/site-packages (from -r /tmp/pipenv-EIOrx4-requirements/pipenv-Itn28s-requirement.txt (line 1)) (0.28)                       
  Since it is already installed, we are trusting this package without checking its hash. To ensure a completely repeatable environment, install into an empty virtualenv.                                                                                 
Cleaning up...                                                                                                               

Created temporary directory: /tmp/pip-ephem-wheel-cache-y1wbxykw
Created temporary directory: /tmp/pip-install-yyv5puvx                                                                       
Collecting kivy-1.10.1 from git+http://github.com/kivy/kivy.git#egg=kivy-1.10.1 (from -r /tmp/pipenv-EIOrx4-requirements/pipenv-aT1X8_-requirement.txt (line 1))                                                                                          
  Cloning http://github.com/kivy/kivy.git to /tmp/pip-install-yyv5puvx/kivy-1.10.1                                           
  Running command git clone -q http://github.com/kivy/kivy.git /tmp/pip-install-yyv5puvx/kivy-1.10.1                         
fatal: unable to access 'https://github.com/kivy/kivy.git/': GnuTLS recv error (-9): A TLS packet with unexpected length was received.                                                                                                                    
Cleaning up...                                                                                                               
Command "git clone -q http://github.com/kivy/kivy.git /tmp/pip-install-yyv5puvx/kivy-1.10.1" failed with error code 128 in None                                                                                                                           
Exception information:                                                                                                       
Traceback (most recent call last):                                                                                           
  File "/home/realslimshanky/.local/share/virtualenvs/edumodwiz-WZ8dLI63/lib/python3.5/site-packages/pip/_internal/basecommand.py", line 228, in main                                                                                                     
    status = self.run(options, args)                                                                                         
  File "/home/realslimshanky/.local/share/virtualenvs/edumodwiz-WZ8dLI63/lib/python3.5/site-packages/pip/_internal/commands/install.py", line 291, in run                                                                                                 
    resolver.resolve(requirement_set)                                                                                        
  File "/home/realslimshanky/.local/share/virtualenvs/edumodwiz-WZ8dLI63/lib/python3.5/site-packages/pip/_internal/resolve.py", line 103, in resolve                                                                                                      
    self._resolve_one(requirement_set, req)                                                                                  
  File "/home/realslimshanky/.local/share/virtualenvs/edumodwiz-WZ8dLI63/lib/python3.5/site-packages/pip/_internal/resolve.py", line 257, in _resolve_one                                                                                                 
    abstract_dist = self._get_abstract_dist_for(req_to_install)                                                              
  File "/home/realslimshanky/.local/share/virtualenvs/edumodwiz-WZ8dLI63/lib/python3.5/site-packages/pip/_internal/resolve.py", line 210, in _get_abstract_dist_for                                                                                       
    self.require_hashes                                                                                                      
  File "/home/realslimshanky/.local/share/virtualenvs/edumodwiz-WZ8dLI63/lib/python3.5/site-packages/pip/_internal/operations/prepare.py", line 310, in prepare_linked_requirement                                                                        
    progress_bar=self.progress_bar                                                                                           
  File "/home/realslimshanky/.local/share/virtualenvs/edumodwiz-WZ8dLI63/lib/python3.5/site-packages/pip/_internal/download.py", line 820, in unpack_url                                                                                                  
    unpack_vcs_link(link, location)                                                                                          
  File "/home/realslimshanky/.local/share/virtualenvs/edumodwiz-WZ8dLI63/lib/python3.5/site-packages/pip/_internal/download.py", line 495, in unpack_vcs_link                                                                                             
    vcs_backend.unpack(location)                                                                                             
  File "/home/realslimshanky/.local/share/virtualenvs/edumodwiz-WZ8dLI63/lib/python3.5/site-packages/pip/_internal/vcs/__init__.py", line 388, in unpack                                                                                                  
    self.obtain(location)                                                                                                    
  File "/home/realslimshanky/.local/share/virtualenvs/edumodwiz-WZ8dLI63/lib/python3.5/site-packages/pip/_internal/vcs/git.py", line 187, in obtain                                                                                                       
    self.run_command(['clone', '-q', url, dest])                                                                             
  File "/home/realslimshanky/.local/share/virtualenvs/edumodwiz-WZ8dLI63/lib/python3.5/site-packages/pip/_internal/vcs/__init__.py", line 427, in run_command                                                                                             
    spinner=spinner)                                                                                                         
  File "/home/realslimshanky/.local/share/virtualenvs/edumodwiz-WZ8dLI63/lib/python3.5/site-packages/pip/_internal/utils/misc.py", line 698, in call_subprocess                                                                                           
    % (command_desc, proc.returncode, cwd))                                                                                  
pip._internal.exceptions.InstallationError: Command "git clone -q http://github.com/kivy/kivy.git /tmp/pip-install-yyv5puvx/kivy-1.10.1" failed with error code 128 in None 
Steps to replicate
My Pipfile contains the following
[[source]]
url = "https://pypi.org/simple"
verify_ssl = true
name = "pypi"

[dev-packages]
pylint = "==1.9.1"
pytest = "==3.6.0"
pytest-cov = "==2.5.1"

[packages]
cython = "==0.28"
"kivy-1.10.1" = {path = "git+http://github.com/kivy/kivy.git#egg=kivy-1.10.1"}

[requires]
python_version = "3.5"
Running pipenv install prompts the error.
arshbot commented on 6 Aug 2019
Issue description
A packaged distribution version does not install googleapis-common-protos as a dependancy
Expected result
A packaged distribution version should install all dependencies as specified.
Actual result
The packaged distribution does not install googleapis-common-protos
Steps to replicate
To replicate with the erroneous distribution ( notice how googleapis-common-protos isn't included in the install log ):
$ pip3 install lnt

Collecting lnt
  Downloading https://files.pythonhosted.org/packages/d1/44/31546d04776675e84877e3c1cf34d4bd0a5779bf412b9b29d9e8cbd8c429/lnt-0.2.1-py3-none-any.whl (48kB)                                   
    100% |‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 51kB 3.1MB/s
Requirement already satisfied: grpcio in ./.local/lib/python3.7/site-packages (from lnt) (1.22.0)                                                                                            
Requirement already satisfied: click in ./.local/lib/python3.7/site-packages (from lnt) (7.0)
Requirement already satisfied: grpcio-tools in ./.local/lib/python3.7/site-packages (from lnt) (1.22.0)                                                                                      
Requirement already satisfied: PyInquirer in ./.local/lib/python3.7/site-packages (from lnt) (1.0.3)                                                                                         
Requirement already satisfied: six>=1.5.2 in /usr/lib/python3/dist-packages (from grpcio->lnt) (1.12.0)                                                                                      
Requirement already satisfied: protobuf>=3.5.0.post1 in /usr/lib/python3/dist-packages (from grpcio-tools->lnt) (3.6.1)                                                                      
Requirement already satisfied: prompt-toolkit==1.0.14 in ./.local/lib/python3.7/site-packages (from PyInquirer->lnt) (1.0.14)                                                                
Requirement already satisfied: regex>=2016.11.21 in ./.local/lib/python3.7/site-packages (from PyInquirer->lnt) (2019.6.8)                                                                   
Requirement already satisfied: Pygments>=2.2.0 in ./.local/lib/python3.7/site-packages (from PyInquirer->lnt) (2.4.2)                                                                        
Requirement already satisfied: wcwidth in ./.local/lib/python3.7/site-packages (from prompt-toolkit==1.0.14->PyInquirer->lnt) (0.1.7)                                                        
Installing collected packages: lnt
Successfully installed lnt-0.2.1

$ lnt --help

Traceback (most recent call last):
  File "/usr/local/bin/lnt", line 11, in <module>
    load_entry_point('lnt==0.2', 'console_scripts', 'lnt')()
  File "/home/harshagoli/.local/lib/python3.7/site-packages/pkg_resources/__init__.py", line 489, in load_entry_point
    return get_distribution(dist).load_entry_point(group, name)
  File "/home/harshagoli/.local/lib/python3.7/site-packages/pkg_resources/__init__.py", line 2843, in load_entry_point
    return ep.load()
  File "/home/harshagoli/.local/lib/python3.7/site-packages/pkg_resources/__init__.py", line 2434, in load
    return self.resolve()
  File "/home/harshagoli/.local/lib/python3.7/site-packages/pkg_resources/__init__.py", line 2440, in resolve
    module = __import__(self.module_name, fromlist=['__name__'], level=0)
  File "/usr/local/lib/python3.7/dist-packages/lnt/cli.py", line 5, in <module>
    from lnt.commands import create as cmd_create
  File "/usr/local/lib/python3.7/dist-packages/lnt/commands/create.py", line 6, in <module>
    import lnt.rpc.rpc_pb2 as ln, lnt.rpc.rpc_pb2_grpc as lnrpc
  File "/usr/local/lib/python3.7/dist-packages/lnt/rpc/rpc_pb2.py", line 17, in <module>
    from google.api import annotations_pb2 as google_dot_api_dot_annotations__pb2
ModuleNotFoundError: No module named 'google.api'
However, installing from source works fine:
$ git clone https://github.com/arshbot/lnt.git
$ cd lnt
$ pipenv install

Creating a virtualenv for this project...
Pipfile: /home/harshagoli/Projects/lntools/Pipfile
Using /usr/bin/python3 (3.7.3) to create virtualenv...
‚†è Creating virtual environment...Already using interpreter /usr/bin/python3
Using base prefix '/usr'
New python executable in /home/harshagoli/.local/share/virtualenvs/lntools-d74h9MY5/bin/python3
Also creating executable in /home/harshagoli/.local/share/virtualenvs/lntools-d74h9MY5/bin/python                                                                                            
Installing setuptools, pip, wheel...
done.
Running virtualenv with interpreter /usr/bin/python3

‚úî Successfully created virtual environment!
Virtualenv location: /home/harshagoli/.local/share/virtualenvs/lntools-d74h9MY5
Installing u'regex'‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ 0/11 ‚Äî 00:00:00
$ ['/home/harshagoli/.local/share/virtualenvs/lntools-d74h9MY5/bin/pip', 'install', '--verbose', '--upgrade', '--no-deps', '-r', '/tmp/pipenv-PkT4le-requirements/pipenv-fWoIFs-requirement.txt', '-i', u'https://pypi.org/simple', '--require-hashes']
Installing u'googleapis-common-protos'‚ñâ 1/11 ‚Äî 00:00:00
$ ['/home/harshagoli/.local/share/virtualenvs/lntools-d74h9MY5/bin/pip', 'install', '--verbose', '--upgrade', '--no-deps', '-r', '/tmp/pipenv-PkT4le-requirements/pipenv-9DWTWl-requirement.txt', '-i', u'https://pypi.org/simple', '--require-hashes']
Installing u'protobuf'‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ 2/11 ‚Äî 00:00:00
$ ['/home/harshagoli/.local/share/virtualenvs/lntools-d74h9MY5/bin/pip', 'install', '--verbose', '--upgrade', '--no-deps', '-r', '/tmp/pipenv-PkT4le-requirements/pipenv-jH3TQZ-requirement.txt', '-i', u'https://pypi.org/simple', '--require-hashes']
Installing u'six'‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ 3/11 ‚Äî 00:00:00
$ ['/home/harshagoli/.local/share/virtualenvs/lntools-d74h9MY5/bin/pip', 'install', '--verbose', '--upgrade', '--no-deps', '-r', '/tmp/pipenv-PkT4le-requirements/pipenv-LZUEig-requirement.txt', '-i', u'https://pypi.org/simple', '--require-hashes']
Installing u'wcwidth'‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ 4/11 ‚Äî 00:00:00
$ ['/home/harshagoli/.local/share/virtualenvs/lntools-d74h9MY5/bin/pip', 'install', '--verbose', '--upgrade', '--no-deps', '-r', '/tmp/pipenv-PkT4le-requirements/pipenv-P4I3nW-requirement.txt', '-i', u'https://pypi.org/simple', '--require-hashes']
Installing u'grpcio'‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ 5/11 ‚Äî 00:00:00
$ ['/home/harshagoli/.local/share/virtualenvs/lntools-d74h9MY5/bin/pip', 'install', '--verbose', '--upgrade', '--no-deps', '-r', '/tmp/pipenv-PkT4le-requirements/pipenv-SsIU_F-requirement.txt', '-i', u'https://pypi.org/simple', '--require-hashes']
Installing u'pygments'‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ 6/11 ‚Äî 00:00:00
$ ['/home/harshagoli/.local/share/virtualenvs/lntools-d74h9MY5/bin/pip', 'install', '--verbose', '--upgrade', '--no-deps', '-r', '/tmp/pipenv-PkT4le-requirements/pipenv-6NY00e-requirement.txt', '-i', u'https://pypi.org/simple', '--require-hashes']
Installing u'pyinquirer'‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ 7/11 ‚Äî 00:00:00
$ ['/home/harshagoli/.local/share/virtualenvs/lntools-d74h9MY5/bin/pip', 'install', '--verbose', '--upgrade', '--no-deps', '-r', '/tmp/pipenv-PkT4le-requirements/pipenv-JCeGeD-requirement.txt', '-i', u'https://pypi.org/simple', '--require-hashes']
Installing u'grpcio-tools'‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ 8/11 ‚Äî 00:00:00
$ ['/home/harshagoli/.local/share/virtualenvs/lntools-d74h9MY5/bin/pip', 'install', '--verbose', '--upgrade', '--no-deps', '-r', '/tmp/pipenv-PkT4le-requirements/pipenv-n7C8FF-requirement.txt', '-i', u'https://pypi.org/simple', '--require-hashes']
Installing u'prompt-toolkit'‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ 9/11 ‚Äî 00:00:00
$ ['/home/harshagoli/.local/share/virtualenvs/lntools-d74h9MY5/bin/pip', 'install', '--verbose', '--upgrade', '--no-deps', '-r', '/tmp/pipenv-PkT4le-requirements/pipenv-3JrcQW-requirement.txt', '-i', u'https://pypi.org/simple', '--require-hashes']
Installing u'click'‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ 10/11 ‚Äî 00:00:00
$ ['/home/harshagoli/.local/share/virtualenvs/lntools-d74h9MY5/bin/pip', 'install', '--verbose', '--upgrade', '--no-deps', '-r', '/tmp/pipenv-PkT4le-requirements/pipenv-lhSow1-requirement.txt', '-i', u'https://pypi.org/simple', '--require-hashes']
  üêç   ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ 11/11 ‚Äî 00:00:08

$ lnt --help
# ... expected output
setup.py:
from setuptools import setup

setup(
    name='lnt',
    version='0.2.1',
    packages=['lnt', 'lnt.commands', 'lnt.rpc', 'lnt.graphics', 'lnt.commands.utils'],
    include_package_data=True,
    install_requires=[
        'click',
        'grpcio-tools',
        'grpcio',
        'PyInquirer',
    ],
    entry_points='''
        [console_scripts]
        lnt=lnt.cli:main
    ''',
)
Pipfile:
[[source]]
name = "pypi"
url = "https://pypi.org/simple"
verify_ssl = true

[dev-packages]
ptpython = "*"

[packages]
grpcio-tools = "*"
grpcio = "*"
click = "*"
PyInquirer = "*"
googleapis-common-protos = "*"

[requires]
python_version = "3.7"
The package is open source, so feel free to poke around wherever you'd like.
Provide the steps to replicate (which usually at least includes the commands and the Pipfile).
$ pipenv --support
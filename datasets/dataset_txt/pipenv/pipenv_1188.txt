Meravnext commented on 16 Apr 2018
Be sure to check the existing issues (both open and closed!).
Describe the issue briefly here.
Since updating to 10.11.0 Pipenv always fails when creating lock file when downloading its own dependencies (what for?)
Please run $ python -m pipenv.help, and paste the results here.
Will not do this, this contains too much private information.
OS is MS Windows, Python is 3.6.5, CPython, official build.
Expected result
Lock file created.
Actual result
INFO:pip9._vendor.requests.packages.urllib3.connectionpool:Starting new HTTPS connection (1): pypi.python.org
INFO:pip9._vendor.requests.packages.urllib3.connectionpool:Starting new HTTPS connection (1): pypi.org
INFO:notpip.index:Could not fetch URL https://pypi.python.org/simple/autopep8/: There was a problem confirming the ssl certificate: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:833) - skipping
Warning: Your dependencies could not be resolved. You likely have a mismatch in your sub-dependencies.
  You can use $ pipenv install --skip-lock to bypass this mechanism, then run $ pipenv graph to inspect the situation.
Could not find a version that matches autopep8
Tried: (no version found at all)
This should be an error, not a warning (Pipenv failed to do everything it was asked, how is this a warning?)
What changed? Why are there two different PEM files in Pipenv sources and ssl.py is still using neither? What were you trying to achieve by manipulating these certificates?
Steps to replicate
I haven't yet seen any Pipenv version 10.11.0 that would work on MS Windows... just run it on one?
The problem doesn't exist on Linux with the same versions. Bare PIP install works, the URL it is trying to access is accessible to every HTTP client I tried (a bunch of browsers, Cygwin version of curl and wget, Putty's telnet). I'm still debugging ssl.py to try to get a better error report, but this is really difficult due to how pipenv's code is using it, so I may not get better info.
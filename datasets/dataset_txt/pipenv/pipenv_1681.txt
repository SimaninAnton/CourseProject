dereksantibanez commented on 3 Jan 2018
pipenv install suffers an exception when trying to report on failures to import a requirements.txt.
This is under python3.
For example, to reproduce, under python3.6:
$ cat req.txt
-e thing

$ pipenv install -r req.txt
Requirements file provided! Importing into Pipfileâ€¦
Traceback (most recent call last):
  ...<snip>...
  File "/Users/dsantibanez/Library/Python/3.6/lib/python/site-packages/pipenv/cli.py", line 1813, in install
    if error and e:
UnboundLocalError: local variable 'e' referenced before assignment
This is because some pipenv cli except clauses are shadowing a variable, and their finally is expecting to be able to use that variable.
pipenv/pipenv/cli.py
Line 1795 in 50ad774
 error, e = None, None 

pipenv/pipenv/cli.py
Line 1799 in 50ad774
 except (UnicodeDecodeError, pip.exceptions.PipError) as e: 

pipenv/pipenv/cli.py
Line 1804 in 50ad774
 except AssertionError as e: 

pipenv/pipenv/cli.py
Line 1813 in 50ad774
 if error and e: 
By line 1813, e is out of scope.
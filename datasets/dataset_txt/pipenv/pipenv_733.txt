titita commented on 17 Aug 2018
Issue description
Dependencies could not be resolved when installing both ccxt and onetoken packages.
latest ccxt requires 'aiohttp>=3.0.1'. (https://github.com/ccxt/ccxt/blob/master/python/setup.py)
latest onetoken requires 'aiohttp==3.1.3'. (https://github.com/1token-trade/onetoken-py-sdk/blob/master/setup.py)
latest aiohttp requires 'async_timeout>=3.0,<4.0'. (https://github.com/aio-libs/aiohttp/blob/master/setup.py)
aiohttp v3.1.3 requires 'async_timeout>=1.2,<3.0'. (https://github.com/aio-libs/aiohttp/blob/v3.1.3/setup.py)
'aiohttp==3.1.3' is specified in Pipfile. 'async-timeout==2.0.1' is installed. This combination matches the requirements and should work.
Expected result
pipenv update should succeed with no error.
Actual result
$ pipenv update
Running $ pipenv lock then $ pipenv sync.
Locking [dev-packages] dependencies...
Locking [packages] dependencies...

Warning: Your dependencies could not be resolved. You likely have a mismatch in your sub-dependencies.
  You can use $ pipenv install --skip-lock to bypass this mechanism, then run $ pipenv graph to inspect the situation.
  Hint: try $ pipenv lock --pre if it is a pre-release dependency.
Could not find a version that matches async-timeout<3.0,<4.0,>=1.2,>=3.0
Tried: 1.0.0, 1.0.0, 1.1.0, 1.1.0, 1.2.0, 1.2.0, 1.2.1, 1.2.1, 1.3.0, 1.3.0, 1.4.0, 1.4.0, 2.0.0, 2.0.0, 2.0.1, 2.0.1, 3.0.0, 3.0.0
There are incompatible versions in the resolved dependencies.
$ pipenv update --verbose
Steps to replicate
Use the following Pipfile and run pipenv update.
[[source]]
url = "https://pypi.org/simple"
verify_ssl = true
name = "pypi"

[packages]
protobuf = "*"
websocket-client = "==0.48.0"
oslash = "*"
requests = "*"
influxdb = "*"
pyfunctional = "*"
pympler = "*"
google-auth = "*"
boto3 = "*"
bintrees = "*"
xgboost = "*"
sklearn = "*"
rx = "*"
botocore = "*"
aiohttp = "==3.1.3"
onetoken = "*"
google-cloud-storage = "*"
ccxt = "*"

[dev-packages]
pylint = "*"
mypy = "*"

[requires]
python_version = "3.6"
$ pipenv --support
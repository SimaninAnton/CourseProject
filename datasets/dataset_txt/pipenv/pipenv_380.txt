dimaqq commented on 7 Dec 2018
The problem I'm facing is that on the given project (many deps, private pypi server), pipenv operations that may update the lock file take really long...
> pipenv lock -v
Locking [dev-packages] dependencies…
⠼ Locking...
# -- couple minutes before to first line of output -- #

# [output snipped]
------------------------------------------------------------
Result of round 4: stable, done


Locking [packages] dependencies…
⠦ Locking...
# -- some five minutes to next output chunk -- #
This means that "trivial" changes like pipenv install --dev pytest-xdist take prohibitively long to try.
I'm pretty sure it's because of this specific project (either specific deps or private pypi), for example, another project that only has public dependencies is notably faster.
How can I see what's really taking so long?
I've tried the basics -- pstree, profiler, and I can see that pipenv spawned resolver, which spends its time in do_poll. What do I do next?
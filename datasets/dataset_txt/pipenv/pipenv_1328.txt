Contributor
asherf commented on 18 Mar 2018 â€¢
edited
When the I use a custom source in the Pipfile that is protected by a user & password.
The logic in prepare_pip_source_args tries to manually parse ParseResult.netloc (returned from urlparse) this results in the username being passed as the --trusted-host when verify_ssl is set to false in the Pipfile.
For example, if one of the sources in the Pipfile is https://user:password@custom.example.com/simple
it will result calling resolver.py with the wrong params (passed via the PIPENV_PACKAGES environment variable) and called from venv_resolve_deps
the value of the --trusted-host will be the username instead of the host name.
I am adding a PR with tests to demonstrate & fix the issue.
y2kbugger commented on 28 Mar 2018
Please run $ python -m pipenv.help, and paste the results here.
$ python -m pipenv.help output
I tried various combinations of setting SHELL and --fancy and --anyway
pipenv run works flawlessly.
Termux developers are aware, but it seems like this is a security "enhancement" termux/termux-packages#1359
Expected result
pipenv shell to not crash.
Actual result
$ SHELL=/data/data/com.termux/files/usr/bin/bash pipenv shell
Spawning environment shell (/data/data/com.termux/files/usr/bin/bash). Use 'exit' to leave.
Traceback (most recent call last):
  File "/data/data/com.termux/files/usr/bin/pipenv", line 11, in <module>
    load_entry_point('pipenv==11.9.0', 'console_scripts', 'pipenv')()
  File "/data/data/com.termux/files/usr/lib/python3.6/site-packages/pipenv/vendor/click/core.py", line 722, in __call__
    return self.main(*args, **kwargs)
  File "/data/data/com.termux/files/usr/lib/python3.6/site-packages/pipenv/vendor/click/core.py", line 697, in main
    rv = self.invoke(ctx)
  File "/data/data/com.termux/files/usr/lib/python3.6/site-packages/pipenv/vendor/click/core.py", line 1066, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
  File "/data/data/com.termux/files/usr/lib/python3.6/site-packages/pipenv/vendor/click/core.py", line 895, in invoke
    return ctx.invoke(self.callback, **ctx.params)               File "/data/data/com.termux/files/usr/lib/python3.6/site-packages/pipenv/vendor/click/core.py", line 535, in invoke
    return callback(*args, **kwargs)
  File "/data/data/com.termux/files/usr/lib/python3.6/site-packages/pipenv/cli.py", line 572, in shell
    three=three, python=python, fancy=fancy, shell_args=shell_args
  File "/data/data/com.termux/files/usr/lib/python3.6/site-packages/pipenv/core.py", line 2174, in do_shell
    c.interact(escape_character=None)
  File "/data/data/com.termux/files/usr/lib/python3.6/site-packages/pipenv/vendor/pexpect/pty_spawn.py", line 745, in interact
    tty.setraw(self.STDIN_FILENO)
  File "/data/data/com.termux/files/usr/lib/python3.6/tty.py", line 28, in setraw
    tcsetattr(fd, when, mode)
termios.error: (13, 'Permission denied')
Steps to replicate
Install termux on Android
$ pkg install python
$ pip install  pipenv
$ cd ./project
$ pipenv install --dev
$ SHELL=/data/data/com.termux/files/usr/bin/bash pipenv shell
I guess there is another issue that the shell is not detected correctly because of the logon script that's used on termux but that can be fixed my setting the shell.
chbndrhnns commented on 18 Oct 2019
Issue description
Running pipenv lock -rd > requirements.txt is missing non-dev dependencies in case you install a package with extras. This is in contrast to the CLI help message.
bash-5.0# pipenv lock --help

[...]

Options:
  -r, --requirements  Generate output in requirements.txt format.
  -d, --dev           Install both develop and default packages.  [env var:
                      PIPENV_DEV]
Expected result
Default and dev dependencies are written to requirements.txt
Actual result
Only dev dependencies are written to requirements.txt
Steps to replicate
Run pipenv install
Run pipenv install fastapi[all]
Run pipenv install -d pytest
Run pipenv lock -rd > requirements.txt
Look at requirements.txt. It is missing the FastAPI dependencies.
bash-5.0# pipenv lock -rd
-i https://pypi.org/simple
atomicwrites==1.3.0
attrs==19.3.0
importlib-metadata==0.23 ; python_version < '3.8'
more-itertools==7.2.0
packaging==19.2
pluggy==0.13.0
py==1.8.0
pyparsing==2.4.2
pytest==5.2.1
six==1.12.0
wcwidth==0.1.7
zipp==0.6.0
$ pipenv --support
2
1
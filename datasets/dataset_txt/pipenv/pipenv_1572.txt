ipmb commented on 12 Feb 2018
Describe your environment
MacOS 10.12.6
Python 3.6.3
pipenv, version 9.0.3
Expected result
The lock file should include all the dependencies of the installed package. Usually this isn't an issue because setuptools will already be installed, but it prevents me from using pip wheel against the generated requirements to create wheels.
Actual result
setuptools is excluded from the lock file and requirements which prevents the generation of wheels using pip wheel.
Steps to replicate
$ pipenv install python-json-logger
...
$ pipenv graph
python-json-logger==0.1.8
  - setuptools [required: Any, installed: 38.5.1]
$ grep setuptools Pipfile.lock || echo "not found"
not found
$ pipenv lock --requirements > requirements.txt
$ $ virtualenv .tmp
...
max:test pete$ ./tmp/bin/pip wheel -r requirements.txt
Collecting python-json-logger==0.1.8 (from -r requirements.txt (line 1))
  File was already downloaded /Users/pete/projects/test/python_json_logger-0.1.8-py2.py3-none-any.whl
Collecting setuptools (from python-json-logger==0.1.8->-r requirements.txt (line 1))
In --require-hashes mode, all requirements must have their versions pinned with ==. These do not:
    setuptools from https://pypi.python.org/packages/43/41/033a273f9a25cb63050a390ee8397acbc7eae2159195d85f06f17e7be45a/setuptools-38.5.1-py2.py3-none-any.whl#md5=908b8b5e50bf429e520b2b5fa1b350e5 (from python-json-logger==0.1.8->-r requirements.txt (line 1))
1
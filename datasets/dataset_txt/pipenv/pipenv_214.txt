pgorczak commented on 1 Apr 2019 •
edited
Issue description
The docs on VCS dependencies mention a shortcut for git/ssh URLS which doesn't work (but there's a workaround below):
git+git@<location>:<user_or_organization>/<repository>@<branch_or_tag>#<package_name>
URL as documented fails
pipenv install -e git+git@github.com:pgorczak/pip-test-package.git@master#piptestpackage
Installing -e git+git@github.com:pgorczak/pip-test-package.git@master#piptestpackage…
WARNING: pipenv requires an #egg fragment for version controlled dependencies. Please install remote dependency in the form git+git@github.com:pgorczak/pip-test-package.git#egg=<package-name>.
✘ Installation Failed 
Using fragment as mentioned in the warning hint still fails to lock
pipenv install -e git+git@github.com:pgorczak/pip-test-package.git#egg=piptestpackage
Installing -e git+git@github.com:pgorczak/pip-test-package.git#egg=piptestpackage…
Adding piptestpackage to Pipfile's [packages]…
✔ Installation Succeeded 
Pipfile.lock (1c33a8) out of date, updating to (041216)…
Locking [dev-packages] dependencies…
Locking [packages] dependencies…
⠋ Pinning VCS Packages...ssh: Could not resolve hostname github.com:pgorczak: Name or service not known
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.
Traceback (most recent call last):
Workaround
Found in #2704.
It works after replacing the colon before user with a slash, so the working shorthand would be
git+git@<location>/<user_or_organization>/<repository>@<branch_or_tag>#egg=<package_name>
Successful command:
pipenv install -e git+git@github.com/pgorczak/pip-test-package.git#egg=piptestpackage
Steps to replicate
fork pip-test-package
setup github ssh access
run the commands above (replace my username with yours)
$ pipenv --support
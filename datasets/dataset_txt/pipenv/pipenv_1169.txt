gonvaled commented on 20 Apr 2018
Summary
Running with --skip-lock fails if an extra index is defined in the Pipfile. The problem disappears if we remove the extra index definition.
System
¬ª python -m pipenv.help
<details><summary>$ python -m pipenv.help output</summary>

Pipenv version: `'11.10.0'`

Pipenv location: `'/home/gonvaled/.pyenv/versions/2.7.14/lib/python2.7/site-packages/pipenv'`

Python location: `'/home/gonvaled/.pyenv/versions/2.7.14/bin/python'`

Other Python installations in `PATH`:

  - `2.7`: `/home/gonvaled/.pyenv/versions/2.7.14/bin/python2.7`
  - `2.7`: `/home/gonvaled/.pyenv/versions/2.7.14/bin/python2.7`
  - `2.7`: `/home/gonvaled/.pyenv/shims/python2.7`
  - `2.7`: `/home/gonvaled/.pyenv/shims/python2.7`
  - `2.7`: `/usr/bin/python2.7`
Expected result
I expect the packages to be installled normally.
Actual result
¬ª pipenv install --skip-lock --verbose
Installing dependencies from Pipfile‚Ä¶
Installing 'billiard --extra-index-url http://devpi.dgv/metrosys/dev/+simple --trusted-host devpi.dgv'
WARNING: Invalid requirement, parse error at "'--extra-'"
ABORTING INSTALL... You will have to reinstall any packages that failed to install.
You may have to manually run pipenv lock when you are finished.
  üêç   ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ‚ñâ 0/72 ‚Äî 00:00:00
/home/gonvaled/.pyenv/versions/2.7.14/lib/python2.7/site-packages/pipenv/utils.py:1258: ResourceWarning: Implicitly cleaning up <TemporaryDirectory '/tmp/pipenv-07PASi-requirements'>
  warnings.warn(warn_message, ResourceWarning)
Steps to replicate
My Pipfile:
[[source]]
url = "https://pypi.python.org/simple"
# url = "http://devpi.dgv/root/pypi/+simple/"
verify_ssl = true
name = "pypi"

[[source]]
url = "http://devpi.dgv/something/dev/+simple"
verify_ssl = false
name = "private"

[dev-packages]

[packages]
arrow = "*"
Babel = "*"
billiard = "*"
blessed = "*"
boto = "*"
"boto3" = "*"
brotlipy = "*"
click = "*"
croniter = "*"
csscompressor = "*"
cssselect = "*"
decorator = "*"
Django = "==1.10.8"
django-admin-views = "*"
django-allauth = "*"
django-autoslug = "*"
django-braces = "*"
django-cachalot = "*"
django_chartit = "*"
django_compressor = "*"
django-constance = "*"
django-controlcenter = "*"
django-cors-middleware = "*"
django-crispy-forms = "*"
django-dashing = "*"
django-debug-toolbar = "*"
django-dynamic-preferences = "*"
django-envelope = "*"
django-extra-views = "*"
django-hijack-admin = "*"
django-htmlmin = "*"
django-import-export = "*"
django-logentry-admin = "*"
django-messages-extends = "*"
django-newsletter = "*"
django-notifications-hq = "*"
"django-nvd3" = "*"
django-oauth-toolkit = "*"
django-picklefield = "*"
django-request = "*"
django-reversion = "*"
django-rosetta = "*"
django-simple-captcha = "*"
django-sslserver = "*"
django-stronghold = "*"
"django-tables2" = "*"
django-tellme = "*"
django-templated-email = "*"
django-tinymce = "*"
django-vanilla-views = "*"
djangorestframework = "*"
gunicorn = "*"
"html2text" = "*"
huey = "*"
humanfriendly = "*"
kombu = "*"
lxml = "*"
olefile = "*"
Paste = "*"
psutil = "*"
"psycopg2" = "*"
"pyasn1" = "*"
pycryptodomex = "*"
PyJWT = "*"
pyparsing = "*"
"pysaml2" = "*"
python-memcached = "*"
raven = "*"
redis = "*"
"repoze.who" = "*"
tinycss = "*"
django-rest-models = "*"

[requires]
python_version = "3.5"
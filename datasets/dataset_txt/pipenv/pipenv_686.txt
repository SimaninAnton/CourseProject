hkozachkov commented on 5 Sep 2018
Issue description
pipenv is adding a version of tensorflow (1.10.1) to the .lock file which I do not have installed and which does not exist as a binary for my architecture (windows) on pypi.org yet. It is then, unsurprisingly, failing to install that version.
I actually have tensorflow 1.10.0 installed in this virtualenv, and I have checked that by importing it, etc.
Expected result
Since I have tensorflow 1.10.0 installed in this virtualenv, that is the version that should be added to the .lock file. Similarly, during dependency resolution, 1.10.1 should not be considered because it does not exist on pypi for my architecture.
Actual result
Tensorflow 1.10.1 is getting added to my .lock file, and then cannot be installed because it doesn't exist for windows.
Steps to replicate
I've attached a redacted version of my .lock file. I've also attached my pipfile, where I've commented out irrelevant local dependencies, so in principle, installing it on a windows machine should reproduce my error.
A simpler way to replicate it might just be to start with a fresh virtualenv on windows, manually pip install tensorflow in it (which will install 1.10.0 unless google adds the windows binary for 1.10.1 to pypi between now and then), and then trying to do pipenv update tensorflow
I've attached a screenshot of the current state of the relevant pypi page to show that no windows binary for 1.10.1 is listed there.
The included output of pipenv --support is also lightly redacted (some directory names and the name of the virtualenv has been changed)
Files are below:
verbose_output_redacted.txt
pipfile_redacted.txt
$ pipenv --support
1
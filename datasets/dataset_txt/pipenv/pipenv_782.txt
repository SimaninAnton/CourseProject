shtratos commented on 30 Jul 2018
Issue description
When you run pipenv check with multiple --ignore flags, it fails to pass them to safety tool correctly.
Expected result
I'd expect both vulnerabilities to be passed to safety correctly and thus be ignored by safety tool.
Actual result
$ pipenv check -i 36333 -i 36351
Checking PEP 508 requirements...
Passed!
Checking installed package safety...
Notice: Ignoring CVE(s) 36333, 36351
An error occurred:
Usage: safety check [OPTIONS]

Error: Got unexpected extra argument (36351)
Fix
This seems to be caused by the way vulnerability numbers are being passed to safety here:
https://github.com/pypa/pipenv/blob/master/pipenv/core.py#L2237
ignored = '--ignore {0}'.format('--ignore '.join(ignore))
This code produces --ignore 36333--ignore 36351 - notice lack of space after 36333!
This can be fixed by adding a space in front of join string:
ignored = '--ignore {0}'.format(' --ignore '.join(ignore))
                                 ^
Steps to replicate
$ pipenv check -i 36333 -i 36351
Please run $ pipenv --support, and paste the results here.
$ pipenv --support
Zoramite commented on 15 Aug 2018
Issue description
Trying to use pipenv to install on a fresh ubuntu install causes an error AttributeError: 'tuple' object has no attribute 'value'
Expected result
Expect that the pipenv install should install. It works correctly on OSX.
Actual result
pipenv install --dev --verbose
Installing dependencies from Pipfile.lock (bbe571)...
Traceback (most recent call last):
  File "/usr/local/bin/pipenv", line 11, in <module>
 sys.exit(cli())
  File "/usr/local/lib/python2.7/dist-packages/pipenv/vendor/click/core.py", line 722, in __call__
 return self.main(*args, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/pipenv/vendor/click/core.py", line 697, in main
 rv = self.invoke(ctx)
  File "/usr/local/lib/python2.7/dist-packages/pipenv/vendor/click/core.py", line 1066, in invoke
 return _process_result(sub_ctx.command.invoke(sub_ctx))
  File "/usr/local/lib/python2.7/dist-packages/pipenv/vendor/click/core.py", line 895, in invoke
 return ctx.invoke(self.callback, **ctx.params)
  File "/usr/local/lib/python2.7/dist-packages/pipenv/vendor/click/core.py", line 535, in invoke
 return callback(*args, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/pipenv/cli.py", line 435, in install
 selective_upgrade=selective_upgrade,
  File "/usr/local/lib/python2.7/dist-packages/pipenv/core.py", line 1943, in do_install
 pypi_mirror=pypi_mirror,
  File "/usr/local/lib/python2.7/dist-packages/pipenv/core.py", line 1322, in do_init
 pypi_mirror=pypi_mirror,
  File "/usr/local/lib/python2.7/dist-packages/pipenv/core.py", line 764, in do_install_dependencies
 only=only,
  File "/usr/local/lib/python2.7/dist-packages/pipenv/utils.py", line 803, in merge_deps
 file_dict[section], project, r=False, include_index=include_index
  File "/usr/local/lib/python2.7/dist-packages/pipenv/utils.py", line 513, in convert_deps_to_pip
 new_dep = Requirement.from_pipfile(dep_name, dep)
  File "/usr/local/lib/python2.7/dist-packages/pipenv/vendor/requirementslib/models/requirements.py", line 771, in from_pipfile
 "markers": PipenvMarkers.from_pipfile(name, _pipfile).line_part,
  File "/usr/local/lib/python2.7/dist-packages/pipenv/vendor/requirementslib/models/markers.py", line 93, in from_pipfile
 marker_dict = cls.make_marker(marker)
  File "/usr/local/lib/python2.7/dist-packages/pipenv/vendor/requirementslib/models/markers.py", line 74, in make_marker
 if var.value in cls.attr_fields():
AttributeError: 'tuple' object has no attribute 'value'
/usr/local/lib/python2.7/dist-packages/pipenv/_compat.py:113: ResourceWarning: Implicitly cleaning up <TemporaryDirectory '/tmp/pipenv-LQrawG-requirements'>
  warnings.warn(warn_message, ResourceWarning)
Steps to replicate
Provide the steps to replicate (which usually at least includes the commands and the Pipfile).
Installed a new Ubuntu.
Installed pipenv using pip install --user pipenv
Ran pipenv install --dev on the codebase.
$ pipenv --support
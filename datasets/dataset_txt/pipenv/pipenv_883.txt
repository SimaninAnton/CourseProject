maxgrenderjones commented on 2 Jul 2018
Issue description
I use pyarrow, and have a spec of ~=pyarrow-0.9.0 in my requirements.txt file. This is because the latest version on OSX is 0.9.0.post1 and the latest version on linux is 0.9.0 (neither version is available on the other architecture). No, not how I'd run my release process either...
Expected result
I would expect that when running pipenv install -r requirements.txt on linux it would create a lockfile pointing to the 0.9.0 release, and on OSX it would create a lockfile pointing to the 0.9.0.post1 release.
Actual result
It locks to 0.9.0.post1 on linux.
Steps to replicate
> uname -srv
Linux 3.10.0-229.20.1.el7.x86_64 #1 SMP Tue Nov 3 19:10:07 UTC 2015
> pipenv --version
pipenv, version 2018.05.18
> cat requirements.txt
pyarrow~=0.9.0
> pipenv install -r requirements.txt
Requirements file provided! Importing into Pipfile…
Pipfile.lock not found, creating…
Locking [dev-packages] dependencies…
Locking [packages] dependencies…
Updated Pipfile.lock (52f7b3)!
Installing dependencies from Pipfile.lock (52f7b3)…
An error occurred while installing pyarrow==0.9.0.post1! Will try again.
     ▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉ 4/4 — 00:00:02
Installing initially–failed dependencies…
Collecting pyarrow==0.9.0.post1 ▉▉▉▉▉ 0/1 — 00:00:00

  Could not find a version that satisfies the requirement pyarrow==0.9.0.post1 (from -r /tmp/pipenv-VlGKcH-requirements/pipenv-4KZHdd-requirement.txt (line 1)) (from versions: 0.2.0, 0.3.0, 0.4.0, 0.4.1, 0.5.0.post2, 0.6.0, 0.7.0, 0.7.1, 0.8.0, 0.9.0)
No matching distribution found for pyarrow==0.9.0.post1 (from -r /tmp/pipenv-VlGKcH-requirements/pipenv-4KZHdd-requirement.txt (line 1))
You are using pip version 9.0.1, however version 10.0.1 is available.
You should consider upgrading via the 'pip install --upgrade pip' command.
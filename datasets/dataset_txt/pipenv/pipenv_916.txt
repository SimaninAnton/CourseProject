mrstewar commented on 27 Jun 2018
Running Python 2.7.12 with pipenv installed in user site (pip install --user pipenv) fails because
pathlib.Path.mkdir function doesn't have a exist_ok argument specified.
Actual error (from bottom of full output):
TypeError: mkdir() got an unexpected keyword argument 'exist_ok'
Seems like it's confied to python2 as python2 doesn't have pathlib natively in the standard library and must use a backport.
Full output:
project_dir>pipenv update --dev
Running $ pipenv lock then $ pipenv sync.
Locking [dev-packages] dependencies...
Traceback (most recent call last):
File "c:\python27\lib\runpy.py", line 174, in _run_module_as_main
"main", fname, loader, pkg_name)
File "c:\python27\lib\runpy.py", line 72, in run_code
exec code in run_globals
File "<user_base>\Scripts\pipenv.exe_main.py", line 9, in
File "<user_base>\Python\Python27\site-packages\pipenv\vendor\click\core.py", line 722, in call
return self.main(*args, **kwargs)
File "<user_base>\Python27\site-packages\pipenv\vendor\click\core.py", line 697, in main
rv = self.invoke(ctx)
File "<user_base>\Python27\site-packages\pipenv\vendor\click\core.py", line 1066, in invoke
return _process_result(sub_ctx.command.invoke(sub_ctx))
File "<user_base>\Python27\site-packages\pipenv\vendor\click\core.py", line 895, in invoke
return ctx.invoke(self.callback, **ctx.params)
File "<user_base>\Python27\site-packages\pipenv\vendor\click\core.py", line 535, in invoke
return callback(*args, **kwargs)
File "<user_base>\Python27\site-packages\pipenv\vendor\click\decorators.py", line 17, in new_func
return f(get_current_context(), *args, **kwargs)
File "<user_base>\Python27\site-packages\pipenv\cli.py", line 850, in update
verbose=verbose, clear=clear, pre=pre, keep_outdated=keep_outdated, pypi_mirror=pypi_mirror
File "<user_base>\Python27\site-packages\pipenv\core.py", line 1098, in do_lock
dev=settings['dev']
File "<user_base>\Python27\site-packages\pipenv\utils.py", line 1177, in get_vcs_deps
src_dir.mkdir(mode=0o775, exist_ok=True)
TypeError: mkdir() got an unexpected keyword argument 'exist_ok'
pipenv_help.txt
Expected result
Expected the update to run without error
Actual result
Failed as shown at the beginning
Steps to replicate
In pristine project directory (no Pipfile) using python 2.7.12 or greater run:
pipenv install future
You should actually see the problem there as well.
If not, then run "pipenv update"
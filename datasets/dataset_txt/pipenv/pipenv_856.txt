changhsinlee commented on 8 Jul 2018
Issue description
Failed to run any command in pipenv such as
pipenv shell
pipenv install
pipenv sync
with 64-bit Python installed from python.org - but everything works fine with 32-bit Python from python.org on the same PC with Windows 10.
System specs
System: Windows 10 with non-English locale (Traditional Chinese)
Python version: 3.6.5, 64-bit
pipenv version: 2018.7.1, install via pip
pip version: 10.0.1
Expected result
pipenv works with 32-bit Python 3.6.5 on the same PC in the same project folder D:\foo as follows.
It also works on another Windows 7 machine that has 64-bit Python 3.6.1 via Anaconda.
> pipenv shell
Creating a virtualenv for this project...
Pipfile: D:\foo\Pipfile
Using D:\Python36-32\python.exe (3.6.5) to create virtualenv...
Running virtualenv with interpreter D:\Python36-32\python.exe
Using base prefix 'D:\\Python36-32'
New python executable in C:\Users\Chang\.virtualenvs\foo-7FbnSn9-\Scripts\python.exe
Installing setuptools, pip, wheel...done.
Setting project for foo-7FbnSn9- to D:\foo
Actual result
Running the same command in 64-bit Python 3.6.5 on the same PC throws this error.
> pipenv shell

Traceback (most recent call last):
  File "d:\python36\lib\runpy.py", line 193, in _run_module_as_main
    "__main__", mod_spec)
  File "d:\python36\lib\runpy.py", line 85, in _run_code
    exec(code, run_globals)
  File "D:\Python36\Scripts\pipenv.exe\__main__.py", line 9, in <module>
  File "d:\python36\lib\site-packages\pipenv\vendor\click\core.py", line 722, in __call__
    return self.main(*args, **kwargs)
  File "d:\python36\lib\site-packages\pipenv\vendor\click\core.py", line 697, in main
    rv = self.invoke(ctx)
  File "d:\python36\lib\site-packages\pipenv\vendor\click\core.py", line 1066, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
  File "d:\python36\lib\site-packages\pipenv\vendor\click\core.py", line 895, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File "d:\python36\lib\site-packages\pipenv\vendor\click\core.py", line 535, in invoke
    return callback(*args, **kwargs)
  File "d:\python36\lib\site-packages\pipenv\cli.py", line 664, in shell
    three=three, python=python, fancy=fancy, shell_args=shell_args, pypi_mirror=pypi_mirror
  File "d:\python36\lib\site-packages\pipenv\core.py", line 2141, in do_shell
    ensure_project(three=three, python=python, validate=False, pypi_mirror=pypi_mirror)
  File "d:\python36\lib\site-packages\pipenv\core.py", line 609, in ensure_project
    three=three, python=python, site_packages=site_packages, pypi_mirror=pypi_mirror
  File "d:\python36\lib\site-packages\pipenv\core.py", line 545, in ensure_virtualenv
    python = ensure_python(three=three, python=python)
  File "d:\python36\lib\site-packages\pipenv\core.py", line 436, in ensure_python
    path_to_python = find_a_system_python(python)
  File "d:\python36\lib\site-packages\pipenv\core.py", line 368, in find_a_system_python
    python_from_py = find_python_from_py(python)
  File "d:\python36\lib\site-packages\pipenv\core.py", line 320, in find_python_from_py
    [py, ver_arg, '-c', 'import sys; print(sys.executable)']
  File "d:\python36\lib\subprocess.py", line 336, in check_output
    **kwargs).stdout
  File "d:\python36\lib\subprocess.py", line 403, in run
    with Popen(*popenargs, **kwargs) as process:
  File "d:\python36\lib\subprocess.py", line 709, in __init__
    restore_signals, start_new_session)
  File "d:\python36\lib\subprocess.py", line 997, in _execute_child
    startupinfo)
FileNotFoundError: [WinError 2] The system cannot find the file specified
Steps to replicate
Running pipenv shell in the project folder throws the error above. Same error appears with pipenv install, pipenv sync etc.
Content of Pipfile:
[[source]]
url = "https://pypi.org/simple"
verify_ssl = true
name = "pypi"

[packages]
click = "*"
coverage = "*"
awscli = "*"
"flake8" = "*"
python-dotenv = ">=0.5.1"
Sphinx = "*"
pytest = "*"
numpy = "*"
scipy = "*"
matplotlib = "*"
ipython = "*"
jupyter = "*"
pandas = "*"
sympy = "*"
nose = "*"
pyyaml = "*"
jupyterlab = "*"
scikit-learn = "*"

[dev-packages]

[requires]
python_version = "3.6"
pipenv --support results
$ pipenv --support
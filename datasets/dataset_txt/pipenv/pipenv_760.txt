Contributor
slhck commented on 7 Aug 2018
Issue description
I want to install a Git dependency:
I'm trying to run the following with pipenv/2018.7.1:
pipenv install "git+ssh://git@subsub.sub.example.com/group-name/reponame.git@0.0.2#egg=reponame"
It works, but says:
To enable this sub-dependency functionality, specify that this dependency is editable
So, for lack of better knowledge of how to do that, I try:
pipenv install -e "git+ssh://git@subsub.sub.example.com/group-name/reponame.git@0.0.2#egg=reponame"
Expected result
The pip should be installed in editable mode and added to Pipfile and Pipfile.lock.
Actual result
It tries to install -e:
Installing -e...
Traceback (most recent call last):
  File "/usr/local/Cellar/pipenv/2018.7.1/libexec/bin/pipenv", line 11, in <module>
    load_entry_point('pipenv==2018.7.1', 'console_scripts', 'pipenv')()
  File "/usr/local/Cellar/pipenv/2018.7.1/libexec/lib/python3.7/site-packages/pipenv/vendor/click/core.py", line 722, in __call__
    return self.main(*args, **kwargs)
  File "/usr/local/Cellar/pipenv/2018.7.1/libexec/lib/python3.7/site-packages/pipenv/vendor/click/core.py", line 697, in main
    rv = self.invoke(ctx)
  File "/usr/local/Cellar/pipenv/2018.7.1/libexec/lib/python3.7/site-packages/pipenv/vendor/click/core.py", line 1066, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
  File "/usr/local/Cellar/pipenv/2018.7.1/libexec/lib/python3.7/site-packages/pipenv/vendor/click/core.py", line 895, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File "/usr/local/Cellar/pipenv/2018.7.1/libexec/lib/python3.7/site-packages/pipenv/vendor/click/core.py", line 535, in invoke
    return callback(*args, **kwargs)
  File "/usr/local/Cellar/pipenv/2018.7.1/libexec/lib/python3.7/site-packages/pipenv/cli.py", line 435, in install
    selective_upgrade=selective_upgrade,
  File "/usr/local/Cellar/pipenv/2018.7.1/libexec/lib/python3.7/site-packages/pipenv/core.py", line 1971, in do_install
    pypi_mirror=pypi_mirror,
  File "/usr/local/Cellar/pipenv/2018.7.1/libexec/lib/python3.7/site-packages/pipenv/core.py", line 1375, in pip_install
    package_name.split('--hash')[0].split('--trusted-host')[0]
  File "/usr/local/Cellar/pipenv/2018.7.1/libexec/lib/python3.7/site-packages/pipenv/vendor/requirementslib/models/requirements.py", line 732, in from_line
    r = NamedRequirement.from_line(line)
  File "/usr/local/Cellar/pipenv/2018.7.1/libexec/lib/python3.7/site-packages/pipenv/vendor/requirementslib/models/requirements.py", line 73, in from_line
    req = first(requirements.parse(line))
  File "/usr/local/Cellar/pipenv/2018.7.1/libexec/lib/python3.7/site-packages/pipenv/vendor/first.py", line 70, in first
    for el in iterable:
  File "/usr/local/Cellar/pipenv/2018.7.1/libexec/lib/python3.7/site-packages/pipenv/vendor/requirements/parser.py", line 50, in parse
    yield Requirement.parse(line)
  File "/usr/local/Cellar/pipenv/2018.7.1/libexec/lib/python3.7/site-packages/pipenv/vendor/requirements/requirement.py", line 218, in parse
    re.sub(r'^(-e|--editable=?)\s*', '', line))
  File "/usr/local/Cellar/pipenv/2018.7.1/libexec/lib/python3.7/site-packages/pipenv/vendor/requirements/requirement.py", line 123, in parse_editable
    assert local_match is not None, 'This should match everything'
AssertionError: This should match everything
Is that an issue with requirements parsing, or am I doing something wrong? I thought that editable dependencies worked like that (e.g. by looking at the documentation here: https://docs.pipenv.org/basics/#editable-dependencies-e-g-e)
$ pipenv --support
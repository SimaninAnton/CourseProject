omri374 commented on 27 Oct 2019 â€¢
edited
How to reproduce the behaviour
Weird behavior when calling char_span to create JSON for training.
When the entity is 'Graematter Inc':
text = 'He offered to map it for Graematter Inc.'
entities =[(25, 39, 'ORG')]
import spacy
from spacy.lang.en import English
nlp = English()
doc = nlp(text)
[doc.char_span(start_idx, end_idx, label=label) for start_idx, end_idx, label in entities]
# returns [None]
Whereas when the entity is 'Graematter Int':
text = 'He offered to map it for Graematter Int.'
entities =[(25, 39, 'ORG')]
from spacy.lang.en import English
nlp = English()
doc = nlp(text)
[doc.char_span(start_idx, end_idx, label=label) for start_idx, end_idx, label in entities]
# returns [Graematter Int]
I get different results.
I'm not sure what's causing the difference here. Note that the period at the end of the sentence is not a part of the entity.
Info about spaCy
spaCy version: 2.2.1
Platform: Windows-10-10.0.18362-SP0
Python version: 3.7.4
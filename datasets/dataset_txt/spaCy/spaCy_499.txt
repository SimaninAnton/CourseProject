nyejon commented on 23 Jul 2019 â€¢
edited
Hi,
The merge entities doesn't seem to work as expected. Entities remain Span objects instead of token objects.
How to reproduce the behaviour
import spacy
from spacy.pipeline import merge_entities


text = """
                100 sqm
                100 square meters
                100 sq meters
                """
_nlp = spacy.load("en_core_web_sm")
_nlp.add_pipe(merge_entities)

doc = _nlp(text)

print(doc.ents)

texts = [t.ent_type_ for t in doc.ents]
print(texts)
The output looks like this:
'spacy.tokens.span.Span' object has no attribute 'ent_type_'
Your Environment
Operating System: macOS
Python Version Used: 3.7.4
spaCy Version Used: 2.1.6
Environment Information:
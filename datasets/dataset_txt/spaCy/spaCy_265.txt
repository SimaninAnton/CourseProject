zrlaida commented on 10 Oct 2019
How to reproduce the behaviour
In spacy==2.2.1, the following code snippet doesn't match. Whereas, in spacy==2.1.8, it matches correctly.
import spacy

nlp = spacy.load("de_core_news_sm")

nlp.Defaults.lemma_lookup["therapie"] = "Therapie"
nlp.Defaults.lemma_lookup["versuch"] = "Versuch"

doc = nlp("ein therapie versuch")

matcher = spacy.matcher.Matcher(nlp.vocab)

pattern = [{'LEMMA': 'Therapie'}, {'LEMMA': 'Versuch'}]

matcher.add("test_id", None, pattern)

for match in matcher(doc):
    print("Match: ", match, nlp.vocab.strings[match[0]])
Your Environment
Operating System: macOS 10.14.6
Python Version Used: 3.7.0
spaCy Version Used: 2.2.1
Environment Information:
venkarafa commented on 17 Dec 2019 â€¢
edited
I am trying to find similar words between one list of words with the the other through the .similarity function.
Also, after reading one suggestion to not use smaller language models like 'en_core_web_sm' for similarity purpose, I started to use "en_core_web_lg" and "en_vectors_web_lg".
The warning "UserWarning: [W008] Evaluating Doc.similarity based on empty vectors." occurs despite using language models "en_core_web_lg" and "en_vectors_web_lg". I have successfully suppressed the warning by setting the environment variable ['SPACY_WARNING_IGNORE'] = 'W008'. But intermittently the variable setting seems to be ignored and the code takes longer time to render the results.
Can this issue be resolved pls ?
How to reproduce the behaviour
import en_vectors_web_lg
nlp = en_vectors_web_lg.load()
listx =['HSBC', 'JP Morgan',......] #500 words lists
listy = ['Currency','Blockchain'.......] #1000 words lists
s_words = []
for token1 in listy:
    list_to_sort = [] 
    for token2 in listx:    
        list_to_sort.append((token1, token2,nlp(str(token1)).similarity(nlp(str(token2)))))
        sorted_list = sorted(list_to_sort, key = itemgetter(2), reverse=True)[0][:2]
        s_words.append(sorted_list)
Your Environment
Operating System: Windows 10
Python Version Used: 3.7
spaCy Version Used: 2.2.3
IDE: spyder
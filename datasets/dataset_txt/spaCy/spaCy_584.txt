asarmohd commented on 26 Jun 2019 â€¢
edited by honnibal
How to reproduce the behaviour
Run Spacy dependency parsing for the above sentence using the large module.
Whenever we try to find token which has simillar to some other token in the sentence wrong parent is getting fetched.
text = "The increase in non-cash adjustments was primarily due to a " \
"$26.0 million increase in stock-based compensation as a result of increase in headcount, $15.9 million **amortization** of issuance cost "\
"related to convertible notes, and $7.1 million increase in **amortization** of deferred sales commission and depreciation and **amortization**."
nlp = spacy.load("en_core_web_lg")
doc=nlp(str(text))

print(doc[55].text)

print([x.text for x in doc[55].ancestors])
amortization
['depreciation', 'commission', 'of', '**amortization**', 'in', 'increase', '**amortization**', 'increase', 'of', 'result', 'as', 'increase', 'due', 'was']
In the above output
instead of taking parent of 2nd amortization it took parent of 1 st amortization
print(doc[47].text)

print([x.text for x in doc[47].ancestors])
amortization
['in', 'increase', 'amortization', 'increase', 'of', 'result', 'as', 'increase', 'due', 'was']
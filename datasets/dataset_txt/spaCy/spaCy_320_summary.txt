Make configuration operations return new objects? (or least add_pipe)
mansiganatra commented on 9 Jul 2019 â€¢
edited
Hi,
I'm trying to render the output from displacy ent in the jupyter notebook and also save the html form to the disk. I have the following code:
    displacy.render(document, style='ent', jupyter=True)
    html =  displacy.render(document, style='ent', page=True)
    print("HTML markup: ", html)
    with open("./1.html", 'w+', encoding="utf-8") as fp:
        fp.write(html)
        fp.close()
But this doesn't work for exporting the html. On looking through the code in init.py I found that it is due to the following lines of code:
    _html["parsed"] = renderer.render(parsed, page=page, minify=minify).strip()
    html = _html["parsed"]
    if RENDER_WRAPPER is not None:
        html = RENDER_WRAPPER(html)
    **if jupyter or is_in_jupyter():  # return HTML rendered by IPython display()**
        from IPython.core.display import display, HTML

        return display(HTML(html))
    return html
The is_in_jupyter() property is set to true if the code is in a jupyter notebook. But in this case, I still want to export it as an html along with displaying in the notebook.
I'm able to have a workaround by changing the above line of code to :
**if (jupyter or is_in_jupyter()) and not page:**
There maybe other cases where it may break due to it. Need to resolve this in the correct manner.
AbhayGodbole commented on 7 Aug 2019 •
edited
I am getting error while executing “spacy_ner_custom_entities.py”
Loaded model 'en'
KeyError Traceback (most recent call last)
in
----> 1 main(model="en",output_dir="../Data/Out")
C:\Abhay\AI\Spacy-NER\Notebooks\spacy_ner_custom_entities.py in main(model, new_model_name, output_dir, n_iter)
68 texts, annotations = zip(*batch)
69 nlp.update(texts, annotations, sgd=optimizer, drop=0.35,
---> 70 losses=losses)
71 print('Losses', losses)
72
c:\abhay\ai\spacy-ner\vir-spacy\lib\site-packages\spacy\language.py in update(self, docs, golds, drop, sgd, losses, component_cfg)
450 kwargs = component_cfg.get(name, {})
451 kwargs.setdefault("drop", drop)
--> 452 proc.update(docs, golds, sgd=get_grads, losses=losses, **kwargs)
453 for key, (W, dW) in grads.items():
454 sgd(W, dW, key=key)
nn_parser.pyx in spacy.syntax.nn_parser.Parser.update()
nn_parser.pyx in spacy.syntax.nn_parser.Parser._init_gold_batch()
ner.pyx in spacy.syntax.ner.BiluoPushDown.preprocess_gold()
ner.pyx in spacy.syntax.ner.BiluoPushDown.lookup_transition()
KeyError: "[E022] Could not find a transition with the name 'U-Tag' in the NER model."
I am using following custom lables:
LABEL = [‘B-NewNom’,’I-NewNom’,’B-OldNom’,’I-OldNom’]
NewNom = New Nominee
OldNom = Old Nominee
I am using latest Sapcy:
===== Info about spaCy =========
spaCy version 2.1.0
Platform Windows-10–10.0.16299-SP0
Python version 3.7.1
Models en
Environment
Operating System: Windows-10–10.0.16299-SP0
Python Version Used: 3.7.1
spaCy Version Used: 2.1.0
Environment Information:
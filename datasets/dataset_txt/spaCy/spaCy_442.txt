dxiao2003 commented on 9 Aug 2019 â€¢
edited
How to reproduce the behaviour
Using the base English en_core_web_sm model, it's possible for the dependency parser to produce tokens with the "subtok" label. This seems like unexpected behavior and it's definitely problematic since training the parser on examples with "subtok" labels causes crashes.
To reproduce:
> nlp = spacy.load("en_core_web_sm")
> d = nlp("I'd rather have one Sharks with no crunch mustard instead of 205S")
> d[11].dep_
'subtok'
Granted the above isn't a particularly well-formed English sentence, but nevertheless I would not expect the "subtok" label. Is there a flag we can set that prevents the model from generating this label?
Also, running merge_subtokens afterwards isn't a solution because I need "of" to be a separate token.
Your Environment
Info about spaCy
spaCy version: 2.1.8
Platform: Linux-4.15.0-1040-aws-x86_64-with-debian-9.9
Python version: 3.7.3
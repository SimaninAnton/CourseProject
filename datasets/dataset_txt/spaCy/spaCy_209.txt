Chipandcharge commented on 27 Oct 2019
How to reproduce the problem
Does someone else experience problems installing spacy in a Docker container based on a amr python image?
I am using a simple Dockerfile structure and it takes ages to installing back end dependencies for spacy, which ultimately results in an error.
FROM arm32v7/python:3

WORKDIR /usr/src/app

COPY requirements.txt ./

RUN pip install --no-cache-dir -r requirements.txt

RUN python3 -m spacy download de_core_news_sm

COPY . .

CMD ["python", "app.py"]
  ERROR: Command errored out with exit status 1:
   command: /usr/local/bin/python /usr/local/lib/python3.8/site-packages/pip install --ignore-installed --no-user --prefix /tmp/pip-build-env-iy4thlv7/normal --no-warn-script-location --no-binary :none: --only-binary :none: -i https://pypi.org/simple -- 'murmurhash<1.1.0,>=0.28.0' 'thinc<7.2.0,>=7.1.1' wheel 'preshed<3.1.0,>=3.0.2' 'cymem<2.1.0,>=2.0.2' 'cython>=0.25'
       cwd: None
  Complete output (228 lines):
  Collecting murmurhash<1.1.0,>=0.28.0
    Downloading https://files.pythonhosted.org/packages/22/e9/411be1845f1ac07ae3bc40a4b19ba401819baed4fa63b4f5ef28b2300eb4/murmurhash-1.0.2.tar.gz
  Collecting thinc<7.2.0,>=7.1.1
    Downloading https://files.pythonhosted.org/packages/38/13/fe9cbdc0a97578d13063352ecc9cc3d1e0dda2e59aa68cc91428b2a1b106/thinc-7.1.1.tar.gz (1.9MB)
  Collecting wheel
    Downloading https://files.pythonhosted.org/packages/00/83/b4a77d044e78ad1a45610eb88f745be2fd2c6d658f9798a15e384b7d57c9/wheel-0.33.6-py2.py3-none-any.whl
  Collecting preshed<3.1.0,>=3.0.2
    Downloading https://files.pythonhosted.org/packages/5f/14/de231123ddbe0bf12bd9b1993122d67f22859643bee4dad3b6ce91986336/preshed-3.0.2.tar.gz (167kB)
  Collecting cymem<2.1.0,>=2.0.2
    Downloading https://files.pythonhosted.org/packages/8b/dc/0976e04cc46f86e0dd3ee3797ec68057eaafebf31daca9a076dc138b9920/cymem-2.0.2.tar.gz (47kB)
  Collecting cython>=0.25
    Downloading https://files.pythonhosted.org/packages/a5/1f/c7c5450c60a90ce058b47ecf60bb5be2bfe46f952ed1d3b95d1d677588be/Cython-0.29.13.tar.gz (2.1MB)
  Collecting blis<0.5.0,>=0.4.0
    Downloading https://files.pythonhosted.org/packages/98/5a/f9b8a78e3d1fdde1b0215413d88ab55d907ab81f95b62418a6e9cda30dec/blis-0.4.1.tar.gz (1.8MB)
  Collecting wasabi<1.1.0,>=0.0.9
    Downloading https://files.pythonhosted.org/packages/c9/a1/6a75283482e6662cc3b050aed656ab234b97d64c3e12df10d08f1c4932ad/wasabi-0.3.0-py3-none-any.whl
  Collecting srsly<1.1.0,>=0.0.6
    Downloading https://files.pythonhosted.org/packages/b0/63/b68061954228346cbab2c41adb36339678605c47da016f5c71c7ef65f510/srsly-0.1.0.tar.gz (186kB)
  Collecting numpy>=1.7.0
    Downloading https://files.pythonhosted.org/packages/b6/d6/be8f975f5322336f62371c9abeb936d592c98c047ad63035f1b38ae08efe/numpy-1.17.3.zip (6.4MB)
  Collecting plac<1.0.0,>=0.9.6
    Downloading https://files.pythonhosted.org/packages/9e/9b/62c60d2f5bc135d2aa1d8c8a86aaf84edb719a59c7f11a4316259e61a298/plac-0.9.6-py2.py3-none-any.whl
  Collecting tqdm<5.0.0,>=4.10.0
    Downloading https://files.pythonhosted.org/packages/e1/c1/bc1dba38b48f4ae3c4428aea669c5e27bd5a7642a74c8348451e0bd8ff86/tqdm-4.36.1-py2.py3-none-any.whl (52kB)
  Building wheels for collected packages: murmurhash, thinc, preshed, cymem, cython, blis, srsly, numpy
    Building wheel for murmurhash (setup.py): started
    Building wheel for murmurhash (setup.py): finished with status 'done'
    Created wheel for murmurhash: filename=murmurhash-1.0.2-cp38-cp38-linux_armv7l.whl size=80517 sha256=6116f466ecdcd6a96b88b2ba07bd1944d380bb81f08f358a8a63d7398581579c
    Stored in directory: /root/.cache/pip/wheels/77/f4/97/79cf3c5af8be5044c749bb449340a0f667ebb1d8c1f388cd65
    Building wheel for thinc (setup.py): started
    Building wheel for thinc (setup.py): still running...
    Building wheel for thinc (setup.py): still running...
    Building wheel for thinc (setup.py): finished with status 'done'
    Created wheel for thinc: filename=thinc-7.1.1-cp38-cp38-linux_armv7l.whl size=5187587 sha256=cd18dfd6921de8335e257b0ea49375e6a23b89786ecacc6b5a9f3a62d3a9005b
    Stored in directory: /root/.cache/pip/wheels/d3/b4/8a/2e6141a07f1e2d6a11f41f7d42169e10268c776ead03deb2c1
    Building wheel for preshed (setup.py): started
    Building wheel for preshed (setup.py): finished with status 'done'
    Created wheel for preshed: filename=preshed-3.0.2-cp38-cp38-linux_armv7l.whl size=634661 sha256=5b398a415ac8b0d667071dc01db7798d2bd98448dd99b6494d584063fd720fcd
    Stored in directory: /root/.cache/pip/wheels/17/94/15/50a48f534bac3ff98ef0394ae81d03babf76545cf6270433ec
    Building wheel for cymem (setup.py): started
    Building wheel for cymem (setup.py): finished with status 'done'
    Created wheel for cymem: filename=cymem-2.0.2-cp38-cp38-linux_armv7l.whl size=141624 sha256=421e0ce32594e12997da81f27ef9673176347742766c3b729d2bcef68ef4a02e
    Stored in directory: /root/.cache/pip/wheels/a9/50/b8/dffa92fefe7fd39bd1fdb8dc1fa790b981356b82a2275ffb81
    Building wheel for cython (setup.py): started
    Building wheel for cython (setup.py): still running...
    Building wheel for cython (setup.py): still running...
    Building wheel for cython (setup.py): still running...
    Building wheel for cython (setup.py): finished with status 'done'
    Created wheel for cython: filename=Cython-0.29.13-cp38-cp38-linux_armv7l.whl size=5806454 sha256=dd1690fda9a57fb746a53477d9a3e861903e9d26a3f0bc67085ac17b139a0ce8
    Stored in directory: /root/.cache/pip/wheels/5b/1e/17/15dd6d435ec0644967eb8e1493af09ae28cd94184c6f416d02
    Building wheel for blis (setup.py): started
    Building wheel for blis (setup.py): finished with status 'error'
    ERROR: Command errored out with exit status 1:
     command: /usr/local/bin/python -u -c 'import sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-qri_89ty/blis/setup.py'"'"'; __file__='"'"'/tmp/pip-install-qri_89ty/blis/setup.py'"'"';f=getattr(tokenize, '"'"'open'"'"', open)(__file__);code=f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' bdist_wheel -d /tmp/pip-wheel-mnboxjbm --python-tag cp38
         cwd: /tmp/pip-install-qri_89ty/blis/
    Complete output (71 lines):
    BLIS_COMPILER? None
    running bdist_wheel
    running build
    running build_py
    creating build
    creating build/lib.linux-armv7l-3.8
    creating build/lib.linux-armv7l-3.8/blis
    copying blis/about.py -> build/lib.linux-armv7l-3.8/blis
    copying blis/__init__.py -> build/lib.linux-armv7l-3.8/blis
    copying blis/benchmark.py -> build/lib.linux-armv7l-3.8/blis
    creating build/lib.linux-armv7l-3.8/blis/tests
    copying blis/tests/test_dotv.py -> build/lib.linux-armv7l-3.8/blis/tests
    copying blis/tests/common.py -> build/lib.linux-armv7l-3.8/blis/tests
    copying blis/tests/__init__.py -> build/lib.linux-armv7l-3.8/blis/tests
    copying blis/tests/test_gemm.py -> build/lib.linux-armv7l-3.8/blis/tests
    copying blis/py.pyx -> build/lib.linux-armv7l-3.8/blis
    copying blis/cy.pyx -> build/lib.linux-armv7l-3.8/blis
    copying blis/__init__.pxd -> build/lib.linux-armv7l-3.8/blis
    copying blis/cy.pxd -> build/lib.linux-armv7l-3.8/blis
    running build_ext
    unix
    py_compiler gcc
    {'BLIS_ARCH': 'generic', 'HOSTNAME': 'aa9d42588791', 'SSL_CERT_FILE': '/opt/_internal/certs.pem', 'TERM': 'xterm', 'OLDPWD': '/usr/local/repos/cython-blis', 'LD_LIBRARY_PATH': '/opt/rh/devtoolset-2/root/usr/lib64:/opt/rh/devtoolset-2/root/usr/lib:/usr/local/lib64:/usr/local/lib', 'LS_COLORS': 'no=00:fi=00:di=00;34:ln=00;36:pi=40;33:so=00;35:bd=40;33;01:cd=40;33;01:or=01;05;37;41:mi=01;05;37;41:ex=00;32:*.cmd=00;32:*.exe=00;32:*.com=00;32:*.btm=00;32:*.bat=00;32:*.sh=00;32:*.csh=00;32:*.tar=00;31:*.tgz=00;31:*.arj=00;31:*.taz=00;31:*.lzh=00;31:*.zip=00;31:*.z=00;31:*.Z=00;31:*.gz=00;31:*.bz2=00;31:*.bz=00;31:*.tz=00;31:*.rpm=00;31:*.cpio=00;31:*.jpg=00;35:*.gif=00;35:*.bmp=00;35:*.xbm=00;35:*.xpm=00;35:*.png=00;35:*.tif=00;35:', 'VIRTUAL_ENV': '/usr/local/repos/cython-blis/env3.6', 'PATH': '/usr/local/repos/cython-blis/env3.6/bin:/opt/rh/devtoolset-2/root/usr/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', 'PWD': '/usr/local/repos/cython-blis/flame-blis', 'BLIS_ARCh': 'generic', 'LANG': 'en_US.UTF-8', 'HOME': '/root', 'SHLVL': '2', 'LANGUAGE': 'en_US.UTF-8', 'BLIS_ARC': 'generic', 'AUDITWHEEL_PLAT': 'manylinux1_x86_64', 'PKG_CONFIG_PATH': '/usr/local/lib/pkgconfig', 'LESSOPEN': '|/usr/bin/lesspipe.sh %s', 'G_BROKEN_FILENAMES': '1', '_': '/usr/local/repos/cython-blis/env3.6/bin/python'}
    gcc -c /tmp/pip-install-qri_89ty/blis/blis/_src/config/generic/bli_cntx_init_generic.c -o /tmp/tmpz39samp7/bli_cntx_init_generic.o -O3 -fPIC -std=c99 -D_POSIX_C_SOURCE=200112L -DBLIS_VERSION_STRING="0.5.1" -DBLIS_IS_BUILDING_LIBRARY -Iinclude/linux-x86_64 -I./frame/3/ -I./frame/ind/ukernels/ -I./frame/1m/ -I./frame/1f/ -I./frame/1/ -I./frame/include -I/tmp/pip-install-qri_89ty/blis/blis/_src/include/linux-x86_64
    gcc -c /tmp/pip-install-qri_89ty/blis/blis/_src/config/haswell/bli_cntx_init_haswell.c -o /tmp/tmpz39samp7/bli_cntx_init_haswell.o -O3 -fPIC -std=c99 -D_POSIX_C_SOURCE=200112L -DBLIS_VERSION_STRING="0.5.1" -DBLIS_IS_BUILDING_LIBRARY -Iinclude/linux-x86_64 -I./frame/3/ -I./frame/ind/ukernels/ -I./frame/1m/ -I./frame/1f/ -I./frame/1/ -I./frame/include -I/tmp/pip-install-qri_89ty/blis/blis/_src/include/linux-x86_64
    gcc -c /tmp/pip-install-qri_89ty/blis/blis/_src/config/penryn/bli_cntx_init_penryn.c -o /tmp/tmpz39samp7/bli_cntx_init_penryn.o -O3 -fPIC -std=c99 -D_POSIX_C_SOURCE=200112L -DBLIS_VERSION_STRING="0.5.1" -DBLIS_IS_BUILDING_LIBRARY -Iinclude/linux-x86_64 -I./frame/3/ -I./frame/ind/ukernels/ -I./frame/1m/ -I./frame/1f/ -I./frame/1/ -I./frame/include -I/tmp/pip-install-qri_89ty/blis/blis/_src/include/linux-x86_64
    gcc -c /tmp/pip-install-qri_89ty/blis/blis/_src/config/piledriver/bli_cntx_init_piledriver.c -o /tmp/tmpz39samp7/bli_cntx_init_piledriver.o -O3 -fPIC -std=c99 -D_POSIX_C_SOURCE=200112L -DBLIS_VERSION_STRING="0.5.1" -DBLIS_IS_BUILDING_LIBRARY -Iinclude/linux-x86_64 -I./frame/3/ -I./frame/ind/ukernels/ -I./frame/1m/ -I./frame/1f/ -I./frame/1/ -I./frame/include -I/tmp/pip-install-qri_89ty/blis/blis/_src/include/linux-x86_64
    gcc -c /tmp/pip-install-qri_89ty/blis/blis/_src/config/sandybridge/bli_cntx_init_sandybridge.c -o /tmp/tmpz39samp7/bli_cntx_init_sandybridge.o -O3 -fPIC -std=c99 -D_POSIX_C_SOURCE=200112L -DBLIS_VERSION_STRING="0.5.1" -DBLIS_IS_BUILDING_LIBRARY -Iinclude/linux-x86_64 -I./frame/3/ -I./frame/ind/ukernels/ -I./frame/1m/ -I./frame/1f/ -I./frame/1/ -I./frame/include -I/tmp/pip-install-qri_89ty/blis/blis/_src/include/linux-x86_64
    gcc -c /tmp/pip-install-qri_89ty/blis/blis/_src/config/steamroller/bli_cntx_init_steamroller.c -o /tmp/tmpz39samp7/bli_cntx_init_steamroller.o -O3 -fPIC -std=c99 -D_POSIX_C_SOURCE=200112L -DBLIS_VERSION_STRING="0.5.1" -DBLIS_IS_BUILDING_LIBRARY -Iinclude/linux-x86_64 -I./frame/3/ -I./frame/ind/ukernels/ -I./frame/1m/ -I./frame/1f/ -I./frame/1/ -I./frame/include -I/tmp/pip-install-qri_89ty/blis/blis/_src/include/linux-x86_64
    gcc -c /tmp/pip-install-qri_89ty/blis/blis/_src/kernels/zen/1/bli_amaxv_zen_int.c -o /tmp/tmpz39samp7/bli_amaxv_zen_int.o -O3 -mavx2 -mfma -mfpmath=sse -march=core-avx2 -fPIC -std=c99 -D_POSIX_C_SOURCE=200112L -DBLIS_VERSION_STRING="0.5.1" -DBLIS_IS_BUILDING_LIBRARY -Iinclude/linux-x86_64 -I./frame/3/ -I./frame/ind/ukernels/ -I./frame/1m/ -I./frame/1f/ -I./frame/1/ -I./frame/include -I/tmp/pip-install-qri_89ty/blis/blis/_src/include/linux-x86_64
    gcc: error: unrecognized -march target: core-avx2
    gcc: note: valid arguments are: armv2 armv2a armv3 armv3m armv4 armv4t armv5 armv5t armv5e armv5te armv5tej armv6 armv6j armv6k armv6z armv6kz armv6zk armv6t2 armv6-m armv6s-m armv7 armv7-a armv7ve armv7-r armv7-m armv7e-m armv8-a armv8.1-a armv8.2-a armv8.3-a armv8.4-a armv8-m.base armv8-m.main armv8-r iwmmxt iwmmxt2 native
    gcc: error: missing argument to ‘-march=’
    gcc: error: unrecognized command line option ‘-mavx2’
    gcc: error: unrecognized command line option ‘-mfma’
    gcc: error: unrecognized command line option ‘-mfpmath=sse’
    Traceback (most recent call last):
      File "<string>", line 1, in <module>
      File "/tmp/pip-install-qri_89ty/blis/setup.py", line 239, in <module>
        setup(
      File "/usr/local/lib/python3.8/site-packages/setuptools/__init__.py", line 145, in setup
        return distutils.core.setup(**attrs)
      File "/usr/local/lib/python3.8/distutils/core.py", line 148, in setup
        dist.run_commands()
      File "/usr/local/lib/python3.8/distutils/dist.py", line 966, in run_commands
        self.run_command(cmd)
      File "/usr/local/lib/python3.8/distutils/dist.py", line 985, in run_command
        cmd_obj.run()
      File "/usr/local/lib/python3.8/site-packages/wheel/bdist_wheel.py", line 192, in run
        self.run_command('build')
      File "/usr/local/lib/python3.8/distutils/cmd.py", line 313, in run_command
        self.distribution.run_command(command)
      File "/usr/local/lib/python3.8/distutils/dist.py", line 985, in run_command
        cmd_obj.run()
      File "/usr/local/lib/python3.8/distutils/command/build.py", line 135, in run
        self.run_command(cmd_name)
      File "/usr/local/lib/python3.8/distutils/cmd.py", line 313, in run_command
        self.distribution.run_command(command)
      File "/usr/local/lib/python3.8/distutils/dist.py", line 985, in run_command
        cmd_obj.run()
      File "/usr/local/lib/python3.8/distutils/command/build_ext.py", line 340, in run
        self.build_extensions()
      File "/tmp/pip-install-qri_89ty/blis/setup.py", line 103, in build_extensions
        objects = self.compile_objects(compiler.split("-")[0], arch, OBJ_DIR)
      File "/tmp/pip-install-qri_89ty/blis/setup.py", line 188, in compile_objects
        objects.append(self.build_object(env=env, **spec))
      File "/tmp/pip-install-qri_89ty/blis/setup.py", line 201, in build_object
        subprocess.check_call(command, cwd=BLIS_DIR)
      File "/usr/local/lib/python3.8/subprocess.py", line 364, in check_call
        raise CalledProcessError(retcode, cmd)
    subprocess.CalledProcessError: Command '['gcc', '-c', '/tmp/pip-install-qri_89ty/blis/blis/_src/kernels/zen/1/bli_amaxv_zen_int.c', '-o', '/tmp/tmpz39samp7/bli_amaxv_zen_int.o', '-O3', '-mavx2', '-mfma', '-mfpmath=sse', '-march=core-avx2', '-fPIC', '-std=c99', '-D_POSIX_C_SOURCE=200112L', '-DBLIS_VERSION_STRING="0.5.1"', '-DBLIS_IS_BUILDING_LIBRARY', '-Iinclude/linux-x86_64', '-I./frame/3/', '-I./frame/ind/ukernels/', '-I./frame/1m/', '-I./frame/1f/', '-I./frame/1/', '-I./frame/include', '-I/tmp/pip-install-qri_89ty/blis/blis/_src/include/linux-x86_64']' returned non-zero exit status 1.
    ----------------------------------------
    ERROR: Failed building wheel for blis
    Running setup.py clean for blis
    Building wheel for srsly (setup.py): started
    Building wheel for srsly (setup.py): finished with status 'done'
    Created wheel for srsly: filename=srsly-0.1.0-cp38-cp38-linux_armv7l.whl size=553213 sha256=42303ed71cb5998ed9108e5fabaea32755d37eb920ac6328dd53d1712fcd200f
    Stored in directory: /root/.cache/pip/wheels/f4/ec/a6/28e4169fc27cdfdd9f3ea828069a6bb02f7d251dfa2f9ad4f8
    Building wheel for numpy (setup.py): started
    Building wheel for numpy (setup.py): still running...
    Building wheel for numpy (setup.py): still running...
    Building wheel for numpy (setup.py): still running...
    Building wheel for numpy (setup.py): still running...
    Building wheel for numpy (setup.py): still running...
    Building wheel for numpy (setup.py): still running...
    Building wheel for numpy (setup.py): finished with status 'done'
    Created wheel for numpy: filename=numpy-1.17.3-cp38-cp38-linux_armv7l.whl size=14981903 sha256=5065cce415f70364b27b9b1a4193a405135a8e85b35ea17433c180a278a60e6c
    Stored in directory: /root/.cache/pip/wheels/5e/e9/4b/dd5a8eb53e97dfcc1314eca9c6769edd3cad379d6644c1ad94
  Successfully built murmurhash thinc preshed cymem cython srsly numpy
  Failed to build blis
  Installing collected packages: murmurhash, cymem, preshed, numpy, blis, wasabi, srsly, plac, tqdm, thinc, wheel, cython
      Running setup.py install for blis: started
      Running setup.py install for blis: finished with status 'error'
      ERROR: Command errored out with exit status 1:
       command: /usr/local/bin/python -u -c 'import sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-qri_89ty/blis/setup.py'"'"'; __file__='"'"'/tmp/pip-install-qri_89ty/blis/setup.py'"'"';f=getattr(tokenize, '"'"'open'"'"', open)(__file__);code=f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' install --record /tmp/pip-record-goybt5fy/install-record.txt --single-version-externally-managed --prefix /tmp/pip-build-env-iy4thlv7/normal --compile
           cwd: /tmp/pip-install-qri_89ty/blis/
      Complete output (73 lines):
      BLIS_COMPILER? None
      running install
      running build
      running build_py
      creating build
      creating build/lib.linux-armv7l-3.8
      creating build/lib.linux-armv7l-3.8/blis
      copying blis/about.py -> build/lib.linux-armv7l-3.8/blis
      copying blis/__init__.py -> build/lib.linux-armv7l-3.8/blis
      copying blis/benchmark.py -> build/lib.linux-armv7l-3.8/blis
      creating build/lib.linux-armv7l-3.8/blis/tests
      copying blis/tests/test_dotv.py -> build/lib.linux-armv7l-3.8/blis/tests
      copying blis/tests/common.py -> build/lib.linux-armv7l-3.8/blis/tests
      copying blis/tests/__init__.py -> build/lib.linux-armv7l-3.8/blis/tests
      copying blis/tests/test_gemm.py -> build/lib.linux-armv7l-3.8/blis/tests
      copying blis/py.pyx -> build/lib.linux-armv7l-3.8/blis
      copying blis/cy.pyx -> build/lib.linux-armv7l-3.8/blis
      copying blis/__init__.pxd -> build/lib.linux-armv7l-3.8/blis
      copying blis/cy.pxd -> build/lib.linux-armv7l-3.8/blis
      running build_ext
      unix
      py_compiler gcc
      {'BLIS_ARCH': 'generic', 'HOSTNAME': 'aa9d42588791', 'SSL_CERT_FILE': '/opt/_internal/certs.pem', 'TERM': 'xterm', 'OLDPWD': '/usr/local/repos/cython-blis', 'LD_LIBRARY_PATH': '/opt/rh/devtoolset-2/root/usr/lib64:/opt/rh/devtoolset-2/root/usr/lib:/usr/local/lib64:/usr/local/lib', 'LS_COLORS': 'no=00:fi=00:di=00;34:ln=00;36:pi=40;33:so=00;35:bd=40;33;01:cd=40;33;01:or=01;05;37;41:mi=01;05;37;41:ex=00;32:*.cmd=00;32:*.exe=00;32:*.com=00;32:*.btm=00;32:*.bat=00;32:*.sh=00;32:*.csh=00;32:*.tar=00;31:*.tgz=00;31:*.arj=00;31:*.taz=00;31:*.lzh=00;31:*.zip=00;31:*.z=00;31:*.Z=00;31:*.gz=00;31:*.bz2=00;31:*.bz=00;31:*.tz=00;31:*.rpm=00;31:*.cpio=00;31:*.jpg=00;35:*.gif=00;35:*.bmp=00;35:*.xbm=00;35:*.xpm=00;35:*.png=00;35:*.tif=00;35:', 'VIRTUAL_ENV': '/usr/local/repos/cython-blis/env3.6', 'PATH': '/usr/local/repos/cython-blis/env3.6/bin:/opt/rh/devtoolset-2/root/usr/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', 'PWD': '/usr/local/repos/cython-blis/flame-blis', 'BLIS_ARCh': 'generic', 'LANG': 'en_US.UTF-8', 'HOME': '/root', 'SHLVL': '2', 'LANGUAGE': 'en_US.UTF-8', 'BLIS_ARC': 'generic', 'AUDITWHEEL_PLAT': 'manylinux1_x86_64', 'PKG_CONFIG_PATH': '/usr/local/lib/pkgconfig', 'LESSOPEN': '|/usr/bin/lesspipe.sh %s', 'G_BROKEN_FILENAMES': '1', '_': '/usr/local/repos/cython-blis/env3.6/bin/python'}
      gcc -c /tmp/pip-install-qri_89ty/blis/blis/_src/config/generic/bli_cntx_init_generic.c -o /tmp/tmpr_3z_ol8/bli_cntx_init_generic.o -O3 -fPIC -std=c99 -D_POSIX_C_SOURCE=200112L -DBLIS_VERSION_STRING="0.5.1" -DBLIS_IS_BUILDING_LIBRARY -Iinclude/linux-x86_64 -I./frame/3/ -I./frame/ind/ukernels/ -I./frame/1m/ -I./frame/1f/ -I./frame/1/ -I./frame/include -I/tmp/pip-install-qri_89ty/blis/blis/_src/include/linux-x86_64
      gcc -c /tmp/pip-install-qri_89ty/blis/blis/_src/config/haswell/bli_cntx_init_haswell.c -o /tmp/tmpr_3z_ol8/bli_cntx_init_haswell.o -O3 -fPIC -std=c99 -D_POSIX_C_SOURCE=200112L -DBLIS_VERSION_STRING="0.5.1" -DBLIS_IS_BUILDING_LIBRARY -Iinclude/linux-x86_64 -I./frame/3/ -I./frame/ind/ukernels/ -I./frame/1m/ -I./frame/1f/ -I./frame/1/ -I./frame/include -I/tmp/pip-install-qri_89ty/blis/blis/_src/include/linux-x86_64
      gcc -c /tmp/pip-install-qri_89ty/blis/blis/_src/config/penryn/bli_cntx_init_penryn.c -o /tmp/tmpr_3z_ol8/bli_cntx_init_penryn.o -O3 -fPIC -std=c99 -D_POSIX_C_SOURCE=200112L -DBLIS_VERSION_STRING="0.5.1" -DBLIS_IS_BUILDING_LIBRARY -Iinclude/linux-x86_64 -I./frame/3/ -I./frame/ind/ukernels/ -I./frame/1m/ -I./frame/1f/ -I./frame/1/ -I./frame/include -I/tmp/pip-install-qri_89ty/blis/blis/_src/include/linux-x86_64
      gcc -c /tmp/pip-install-qri_89ty/blis/blis/_src/config/piledriver/bli_cntx_init_piledriver.c -o /tmp/tmpr_3z_ol8/bli_cntx_init_piledriver.o -O3 -fPIC -std=c99 -D_POSIX_C_SOURCE=200112L -DBLIS_VERSION_STRING="0.5.1" -DBLIS_IS_BUILDING_LIBRARY -Iinclude/linux-x86_64 -I./frame/3/ -I./frame/ind/ukernels/ -I./frame/1m/ -I./frame/1f/ -I./frame/1/ -I./frame/include -I/tmp/pip-install-qri_89ty/blis/blis/_src/include/linux-x86_64
      gcc -c /tmp/pip-install-qri_89ty/blis/blis/_src/config/sandybridge/bli_cntx_init_sandybridge.c -o /tmp/tmpr_3z_ol8/bli_cntx_init_sandybridge.o -O3 -fPIC -std=c99 -D_POSIX_C_SOURCE=200112L -DBLIS_VERSION_STRING="0.5.1" -DBLIS_IS_BUILDING_LIBRARY -Iinclude/linux-x86_64 -I./frame/3/ -I./frame/ind/ukernels/ -I./frame/1m/ -I./frame/1f/ -I./frame/1/ -I./frame/include -I/tmp/pip-install-qri_89ty/blis/blis/_src/include/linux-x86_64
      gcc -c /tmp/pip-install-qri_89ty/blis/blis/_src/config/steamroller/bli_cntx_init_steamroller.c -o /tmp/tmpr_3z_ol8/bli_cntx_init_steamroller.o -O3 -fPIC -std=c99 -D_POSIX_C_SOURCE=200112L -DBLIS_VERSION_STRING="0.5.1" -DBLIS_IS_BUILDING_LIBRARY -Iinclude/linux-x86_64 -I./frame/3/ -I./frame/ind/ukernels/ -I./frame/1m/ -I./frame/1f/ -I./frame/1/ -I./frame/include -I/tmp/pip-install-qri_89ty/blis/blis/_src/include/linux-x86_64
      gcc -c /tmp/pip-install-qri_89ty/blis/blis/_src/kernels/zen/1/bli_amaxv_zen_int.c -o /tmp/tmpr_3z_ol8/bli_amaxv_zen_int.o -O3 -mavx2 -mfma -mfpmath=sse -march=core-avx2 -fPIC -std=c99 -D_POSIX_C_SOURCE=200112L -DBLIS_VERSION_STRING="0.5.1" -DBLIS_IS_BUILDING_LIBRARY -Iinclude/linux-x86_64 -I./frame/3/ -I./frame/ind/ukernels/ -I./frame/1m/ -I./frame/1f/ -I./frame/1/ -I./frame/include -I/tmp/pip-install-qri_89ty/blis/blis/_src/include/linux-x86_64
      gcc: error: unrecognized -march target: core-avx2
      gcc: note: valid arguments are: armv2 armv2a armv3 armv3m armv4 armv4t armv5 armv5t armv5e armv5te armv5tej armv6 armv6j armv6k armv6z armv6kz armv6zk armv6t2 armv6-m armv6s-m armv7 armv7-a armv7ve armv7-r armv7-m armv7e-m armv8-a armv8.1-a armv8.2-a armv8.3-a armv8.4-a armv8-m.base armv8-m.main armv8-r iwmmxt iwmmxt2 native
      gcc: error: missing argument to ‘-march=’
      gcc: error: unrecognized command line option ‘-mavx2’
      gcc: error: unrecognized command line option ‘-mfma’
      gcc: error: unrecognized command line option ‘-mfpmath=sse’
      Traceback (most recent call last):
        File "<string>", line 1, in <module>
        File "/tmp/pip-install-qri_89ty/blis/setup.py", line 239, in <module>
          setup(
        File "/usr/local/lib/python3.8/site-packages/setuptools/__init__.py", line 145, in setup
          return distutils.core.setup(**attrs)
        File "/usr/local/lib/python3.8/distutils/core.py", line 148, in setup
          dist.run_commands()
        File "/usr/local/lib/python3.8/distutils/dist.py", line 966, in run_commands
          self.run_command(cmd)
        File "/usr/local/lib/python3.8/distutils/dist.py", line 985, in run_command
          cmd_obj.run()
        File "/usr/local/lib/python3.8/site-packages/setuptools/command/install.py", line 61, in run
          return orig.install.run(self)
        File "/usr/local/lib/python3.8/distutils/command/install.py", line 545, in run
          self.run_command('build')
        File "/usr/local/lib/python3.8/distutils/cmd.py", line 313, in run_command
          self.distribution.run_command(command)
        File "/usr/local/lib/python3.8/distutils/dist.py", line 985, in run_command
          cmd_obj.run()
        File "/usr/local/lib/python3.8/distutils/command/build.py", line 135, in run
          self.run_command(cmd_name)
        File "/usr/local/lib/python3.8/distutils/cmd.py", line 313, in run_command
          self.distribution.run_command(command)
        File "/usr/local/lib/python3.8/distutils/dist.py", line 985, in run_command
          cmd_obj.run()
        File "/usr/local/lib/python3.8/distutils/command/build_ext.py", line 340, in run
          self.build_extensions()
        File "/tmp/pip-install-qri_89ty/blis/setup.py", line 103, in build_extensions
          objects = self.compile_objects(compiler.split("-")[0], arch, OBJ_DIR)
        File "/tmp/pip-install-qri_89ty/blis/setup.py", line 188, in compile_objects
          objects.append(self.build_object(env=env, **spec))
        File "/tmp/pip-install-qri_89ty/blis/setup.py", line 201, in build_object
          subprocess.check_call(command, cwd=BLIS_DIR)
        File "/usr/local/lib/python3.8/subprocess.py", line 364, in check_call
          raise CalledProcessError(retcode, cmd)
      subprocess.CalledProcessError: Command '['gcc', '-c', '/tmp/pip-install-qri_89ty/blis/blis/_src/kernels/zen/1/bli_amaxv_zen_int.c', '-o', '/tmp/tmpr_3z_ol8/bli_amaxv_zen_int.o', '-O3', '-mavx2', '-mfma', '-mfpmath=sse', '-march=core-avx2', '-fPIC', '-std=c99', '-D_POSIX_C_SOURCE=200112L', '-DBLIS_VERSION_STRING="0.5.1"', '-DBLIS_IS_BUILDING_LIBRARY', '-Iinclude/linux-x86_64', '-I./frame/3/', '-I./frame/ind/ukernels/', '-I./frame/1m/', '-I./frame/1f/', '-I./frame/1/', '-I./frame/include', '-I/tmp/pip-install-qri_89ty/blis/blis/_src/include/linux-x86_64']' returned non-zero exit status 1.
      ----------------------------------------
  ERROR: Command errored out with exit status 1: /usr/local/bin/python -u -c 'import sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-qri_89ty/blis/setup.py'"'"'; __file__='"'"'/tmp/pip-install-qri_89ty/blis/setup.py'"'"';f=getattr(tokenize, '"'"'open'"'"', open)(__file__);code=f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' install --record /tmp/pip-record-goybt5fy/install-record.txt --single-version-externally-managed --prefix /tmp/pip-build-env-iy4thlv7/normal --compile Check the logs for full command output.
  ----------------------------------------
ERROR: Command errored out with exit status 1: /usr/local/bin/python /usr/local/lib/python3.8/site-packages/pip install --ignore-installed --no-user --prefix /tmp/pip-build-env-iy4thlv7/normal --no-warn-script-location --no-binary :none: --only-binary :none: -i https://pypi.org/simple -- 'murmurhash<1.1.0,>=0.28.0' 'thinc<7.2.0,>=7.1.1' wheel 'preshed<3.1.0,>=3.0.2' 'cymem<2.1.0,>=2.0.2' 'cython>=0.25' Check the logs for full command output.
The command '/bin/sh -c pip3 install --no-cache-dir -r requirements.txt' returned a non-zero code: 1
Your Environment
Operating System: raspberrian
Python Version Used: 3
spaCy Version Used:
Environment Information:
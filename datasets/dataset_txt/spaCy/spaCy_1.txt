Alea4jacta6est commented 2 days ago
When I try to visualize entities, if the list of entities is not sorted by by start-end positions in the dictionary, I get a strange visualization.
from spacy import displacy
dict = {'text': 'Droits de rejet La loi fédérale russe n°71 FZ du 06 mai 1998 « Sur les charges d’exploitation des sources hydrologiques » ( modifiée par les lois fédérales n°54 FZ du 30 mars 1999 , n°111 FZ du 07 août 2001 et n°194 FZ du 30 décembre 2001 ) rassemblait les charges d’exploitation des ressources hydrologiques ( taxe sur l’eau ) et des charges de protection et de restauration des ressources hydrologiques ( toutes deux introduites par le code sur l’eau de la Fédération de Russie ) sous une seule appellation : les charges d’exploitation des ressources hydrologiques .',
  'ents': [{'entity': 'taxe sur l’eau',
    'start': 311,
    'end': 325,
    'label': '4 Water Management'},
   {'entity': 'exploitation des sources hydrologiques',
    'start': 81,
    'end': 119,
    'label': '4 Water Management'},
   {'entity': 'exploitation des ressources hydrologiques',
    'start': 267,
    'end': 308,
    'label': '4 Water Management'},
   {'entity': 'exploitation des ressources hydrologiques',
    'start': 525,
    'end': 566,
    'label': '4 Water Management'}]}
displacy.render(dict, manual=True, style='ent', jupyter=True)
Is it an expected behavour of displacy?
Info about spaCy
spaCy version: 2.0.18
Platform: Linux-4.15.0-74-generic-x86_64-with-debian-stretch-sid
Python version: 3.7.3
Models: en_core_web_sm, en_core_web_lg
Member
svlandeg commented on 8 Aug 2019 â€¢
edited
When merging PR #4097 we ran into an error for test_issue_1971_4 which was resolved after restarting. What happened is that test, which is supposed to produce 1 match like [(1046765068364475028, 0, 3)], produced 1 for each token instead: [(9223420625083070725, 0, 1), (9223420625083070725, 1, 2), (9223420625083070725, 2, 3)]. I can't reproduce the error on my own system, even though I also run Windows and Python 3.6.
Note that the unit test has a comment:
# Uncommenting this caused a segmentation fault
After discussing with @ines, this seems related to previous issues #3839 and #3291, where the matcher was producing "ghost matches" with IDs that weren't in the string store.
Possibly, the fix that was supposed to resolve the original issue (matcher segfault) didn't fully fix it...
Not very clear on how to proceed here because it's so difficult to test, but we wanted to record this for future reference.
1
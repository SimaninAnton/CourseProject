jdukatz commented on 5 Dec 2019 â€¢
edited
How to reproduce the problem
I'm running spark on a kubernetes cluster to do some data processing, so I'm using spark's recommended image to build my spark containers, which is found here:
https://github.com/apache/spark/blob/master/resource-managers/kubernetes/docker/src/main/dockerfiles/spark/bindings/python/Dockerfile
I want to do some distributed processing with spacy, so I added the following lines to it:
RUN pip3 install spacy==2.1.1 \
    && python3 -m spacy download en
To be clear, spacy works just fine once the container is built, but the installation takes a long time, around 3 hours, mostly due to installing dependencies, e.g. Running setup.py install for blis: still running... (I can paste the full output if it would help).
I've messed around with trying to add some of the dependency libraries via apk install which seems to help a bit, but it's still over 2 hours.
So my question is, is this something I have to live with, or is there a way to install some of the dependencies manually so it goes faster?
Your Environment
Operating System: alpine linux
Python Version Used: 3
spaCy Version Used: 2.1.1
Environment Information: spark kubernetes docker image
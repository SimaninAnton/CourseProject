vsraptor commented on 13 Aug 2019 â€¢
edited
How to reproduce the behaviour
spacy convert test.iob ./
It fails if the file have tokens that contain "? , $" f.e. PRP$ i.e. explain('PRP$') => 'pronoun, possessive'
Here is the fix. Modify the regex in iob2json.py::read_iob() , from :
tokens = [re.split("[^\w-]", line.strip())]
to:
tokens = [re.split("[^\w-$,?.]", line.strip())]
or it will be probably better to split on white-space, rather than enumerating all the exception cases !!
Example :
Lily NNP B-SRC
has VBZ O
sung VBN B-PRED
the DT O
blues NNS B-DTGT
all PDT O
her PRP$ O
life NN O
ddelange commented on 3 Dec 2019
How to reproduce the behaviour
Download the latest tar from PyPI and inspect
When creating dists for upload to PyPI, by default all top-level files are excluded, but there are many more files included in the tar than specified in MANIFEST.in. Minimal suggestion is to remove test files from the tar by adding recursive-exclude spacy/tests/ to MANIFEST.in (which are now all installed along spacy, unnecessarily taking up space), but a safer way of setting this up would be building the tar up from scratch: starting empty, and building up selectively from there (for instance with recursive includes using graft), e.g. something like
global-exclude *
include setup.py
include README*
include LICENSE*
graft bin/
graft include/
graft spacy/
recursive-exclude spacy/tests/
recursive-exclude * __pycache__
include pyproject.toml
recursive-exclude spacy/lang *.json
recursive-include spacy/lang *.json.gz
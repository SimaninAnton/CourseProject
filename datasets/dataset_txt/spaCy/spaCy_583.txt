michaeljohnclancy commented on 26 Jun 2019
How to reproduce the behaviour
import spacy

nlp = spacy.load('en_core_web_sm')
test_doc = nlp('This is a test doc!')

#Set a value in user_data to a set
test_doc.user_data['test_data'] = set()

spacy.displacy.serve(test_doc, style='dep')
The serialisation of the user_data attribute fails when attempting to dump a set. I assume this is because the set datatype is not part of standard JSON notation.
Are only simple datatypes allowed in the user_data attribute?
Thanks, Michael
Error
TypeError: can not serialise 'set' object
Your Environment
spaCy version: 2.1.4
Platform: Darwin-18.6.0-x86_64-i386-64bit
Python version: 3.6.8
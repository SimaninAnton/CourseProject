Member
honnibal commented on 6 Aug 2019
This is really a Thinc change, but posting it here for visibility.
Thinc currently contains some kernels implemented in .cu files, which live in the thinc-gpu-ops library. This library needs compilation, as we can't ship a wheel for it that works across both CPU and GPU.
It should be possible to instead move these kernels to be compiled by Cupy, by specifying the source as strings. At the same time, I'm sure the efficiency of the kernels can be improved (I did a pretty poor job of these, as I'm not an expert in CUDA). The only ones that might be difficult are the Murmurhash kernels.
Moving these kernels back into Thinc and using the Cupy kernel functionality should allow us to remove the dependency on the thinc-gpu-ops sublibrary. This would greatly improve ease of GPU utilisation for Windows users, as currently the thinc-gpu-ops sublibrary requires a compiler to be installed.
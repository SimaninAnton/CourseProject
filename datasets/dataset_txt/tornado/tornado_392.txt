playablebox commented on 28 Jan 2017 â€¢
edited
I'm developing a web game with the latest version of Tornado.
It consists of 1 thread for tornado and 1 thread for the game loop.
The issue below happens sometimes when I leave the clients (around 100 of them) running for by themselves for a few minutes (The clients are updated at 60 times per second).
If I refresh the page, it acquires a new connection and everything works fine until it happens again.
Any ideias?
BTW I'm not doing any IO calls myself yet (DB, flies, etc).
[E 170128 14:34:30 iostream:546] Uncaught exception, closing connection.
    Traceback (most recent call last):
      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tornado/iostream.py", line 515, in _handle_events
        self._handle_write()
      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tornado/iostream.py", line 837, in _handle_write
        num_bytes = self.write_to_fd(self._write_buffer[0])
    IndexError: deque index out of range
[E 170128 14:34:30 ioloop:633] Exception in callback None
    Traceback (most recent call last):
      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tornado/ioloop.py", line 887, in start
        handler_func(fd_obj, events)
      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tornado/stack_context.py", line 275, in null_wrapper
        return fn(*args, **kwargs)
      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tornado/iostream.py", line 515, in _handle_events
        self._handle_write()
      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tornado/iostream.py", line 837, in _handle_write
        num_bytes = self.write_to_fd(self._write_buffer[0])
    IndexError: deque index out of range
slingamn commented on 26 Aug 2010
We were using the blocking HTTPClient in some multithreaded code and we started getting segmentation faults. We think they were caused by libcurl/pycurl's use of signals to implement timeouts, as discussed here:
http://www.python-forum.org/pythonforum/viewtopic.php?f=5&t=9395
We monkeypatched tornado.httpclient._curl_create to do:
curl.setopt(pycurl.NOSIGNAL, 1)
which fixed the segmentation fault issues. The libcurl documentation indicates that this breaks DNS lookup timeouts on some builds:
http://curl.haxx.se/libcurl/c/curl_easy_setopt.html
so it may not be a desirable solution. Thoughts? Thanks for your time.
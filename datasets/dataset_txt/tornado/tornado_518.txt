BingLau7 commented on 16 Apr 2016
this is error log
Traceback (most recent call last):
  File "/home/huntcoder/.buildout/tornado-4.2-py2.7-linux-x86_64.egg/tornado/web.py", line 1388, in _execute
    self.check_xsrf_cookie()
  File "/home/huntcoder/.buildout/tornado-4.2-py2.7-linux-x86_64.egg/tornado/web.py", line 1236, in check_xsrf_cookie
    if not _time_independent_equals(utf8(token), utf8(expected_token)):
  File "/home/huntcoder/.buildout/tornado-4.2-py2.7-linux-x86_64.egg/tornado/web.py", line 2969, in _time_independent_equals
    if len(a) != len(b):
TypeError: object of type 'NoneType' has no len()
In source code, if my xsrf cookie format is error, _decode_xsrf_token return None, None, None, and the check_xsrf_cookie function's _time_independent_equals(utf8(token), utf8(expected_token)) is wrong, the token is None and has no len().
I think of the if judgment statement can modify if not token or _time_independent_equals(utf8(token), utf8(expected_token))
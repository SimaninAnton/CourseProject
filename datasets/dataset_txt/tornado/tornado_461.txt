Contributor
mrocklin commented on 19 Aug 2016 â€¢
edited
The following causes my CPU to stay pinned at 100% usage
from tornado.ioloop import IOLoop
from tornado import gen
from threading import Thread

loop = IOLoop.current()
t = Thread(target=loop.start, daemon=True)
t.start()

@gen.coroutine
def f():
    yield gen.sleep(0)
    return {}

loop.add_callback(f)

from time import sleep  # just to stick around in case you run this in a script
sleep(100)
Replacing the empty dict {} with an empty list [] has the same effect. Replacing with None behaves as expected.
Running Python 3.5, Tornado 4.4.1, on Ubuntu 16.04
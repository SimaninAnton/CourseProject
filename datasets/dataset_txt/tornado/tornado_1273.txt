elephantum commented on 25 May 2010
The following circular reference can be observed in runtime:
RequestHandler -> .request -> HTTPRequest -> .connection -> HTTPConnection -> .stream -> IOStream -> ._close_callback -> RequestHandler.on_connection_close -> RequestHandler
This prevents gc to collect RequestHandler and all the associated objects, which leads to evergrowing memory consumption.
There is very simple fix for this problem: http://github.com/elephantum/tornado/commit/8ffbe0e64df2c36b93e8ca66abfe483b211efd52
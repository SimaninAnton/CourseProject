repeatedly commented on 30 May 2011
Hi,
I use HTTPError for exception handling, but following code raises TypeError.
raise tornado.web.HTTPError(500, "Unknown Error!", True)
# TypeError: not all arguments converted during string formatting
The reason for this is simple: _handle_request_exception does not consider args attribute for formatting.
Patch is bellow,
diff --git a/tornado/web.py b/tornado/web.py
index ecc686f..ff19d2e 100644
--- a/tornado/web.py
+++ b/tornado/web.py
@@ -941,7 +941,7 @@ class RequestHandler(object):
     def _handle_request_exception(self, e):
         if isinstance(e, HTTPError):
             if e.log_message:
-                format = "%d %s: " + e.log_message
+                format = "%d %s" + (" %s" * len(e.args)) + ": " + e.log_message
                 args = [e.status_code, self._request_summary()] + list(e.args)
                 logging.warning(format, *args)
             if e.status_code not in httplib.responses:
restran commented on 4 Jun 2018 •
edited
If request.url contains no-ascii char, such as http://www.example.com/备份.rar will raises exception
UnicodeEncodeError: 'ascii' codec can't encode characters in position 22-23: ordinal not in range(128)
tornado/curl_httpclient.py
i do this change, and it works for me.
def _curl_setup_request(self, curl, request, buffer, headers):
    # change native_str to utf8
    curl.setopt(pycurl.URL, utf8(request.url))
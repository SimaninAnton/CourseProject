Contributor
legnaleurc commented on 24 Feb 2018
I was using a RESTful API to download a file, so I did this (simplified):
response = await client.fetch(url, streaming_callback=fn_to_write_file)
But the problem is, even if the response code is not 200, the streaming_callback will still be called anyway, no matter raise_error is true or not.
For example, Google Drive API will put error detail as a JSON in the body, so this will cause serious problem when trying to resume downloading. The real content and error message may interleave in the output file.
Probably #2209 could solve the root cause.
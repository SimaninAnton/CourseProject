heppg commented on 31 Mar 2018 â€¢
edited
Create a server in a thread (code shortened for clarity):
1547 self.app = self.make_app()
1548 self.app.listen( 8080)
1549 if debug:
1550 print("ServerThread tornado ioloop started")
1551 tornado.ioloop.IOLoop.current().start()
System is Python 3.5.3 (default, Jan 19 2017, 14:11:04)
[GCC 6.3.0 20170124] on linux
In 5.0.1, I get an exception in app.listen:
Traceback (most recent call last):
File "/home/pi/scratchClient/src/server/scratchClientServer.py", line 1548, in run
self.app.listen( 8080)
File "/usr/local/lib/python3.5/dist-packages/tornado/web.py", line 1986, in listen
server.listen(port, address)
File "/usr/local/lib/python3.5/dist-packages/tornado/tcpserver.py", line 145, in listen
self.add_sockets(sockets)
File "/usr/local/lib/python3.5/dist-packages/tornado/tcpserver.py", line 159, in add_sockets
sock, self._handle_connection)
File "/usr/local/lib/python3.5/dist-packages/tornado/netutil.py", line 219, in add_accept_handler
io_loop = IOLoop.current()
File "/usr/local/lib/python3.5/dist-packages/tornado/ioloop.py", line 283, in current
loop = asyncio.get_event_loop()
File "/usr/lib/python3.5/asyncio/events.py", line 671, in get_event_loop
return get_event_loop_policy().get_event_loop()
File "/usr/lib/python3.5/asyncio/events.py", line 583, in get_event_loop
% threading.current_thread().name)
RuntimeError: There is no current event loop in thread 'GUIServerThread_0'.
The .IOLoop.current().start() is not executed.
The code runs with release 4.5.2. As a workaround, I changed the tornado version back to 4.5.2 in installation documentation.
GuoHongke commented on 21 Dec 2016 â€¢
edited
when I do this:
@gen.coroutine
def fetch(url):
print url
client = AsyncHTTPClient()
response = yield gen.Task(client.fetch, url)
if response.code == 200:
resp = {"url": url, "message": response.body}
else:
resp = {"url": url, "message": "fetch client error"}
print resp
if name == 'main':
for url in url_list:
tornado.ioloop.PeriodicCallback(lambda: fetch(url), 2000).start()
instance = tornado.ioloop.IOLoop.instance()
instance.start()
I just got the response of the last url in url_list
when I change the main like this:
if name == 'main':
tornado.ioloop.PeriodicCallback(lambda: fetch('http://www.google.com'), 2000).start()
tornado.ioloop.PeriodicCallback(lambda: fetch('https://www.python.org'), 2000).start()
instance = tornado.ioloop.IOLoop.instance()
instance.start()
I got both the massage from the tow url. Is there any magic?
thanks
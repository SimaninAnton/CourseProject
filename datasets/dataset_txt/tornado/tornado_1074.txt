raptium commented on 9 May 2012
URLs like http://www.example.com//haha (note there are 2 slashes) will never been matched and always get a HTTP 404 error.
at httpserver.py around line 394
scheme, netloc, path, query, fragment = urlparse.urlsplit(native_str(uri))
self.path = path
self.query = query
arguments = parse_qs_bytes(query)
tornado.web.httpserver.HTTPRequest gets its path attribute from the result of urlparse.urlsplit(), however urlsplit returns an empty path if the uri starts with 2 slashes.
>>> uri = '/haha?a=b&c=d'
>>> print urlsplit(uri)
SplitResult(scheme='', netloc='', path='/haha', query='a=b&c=d', fragment='')
>>> uri = '//haha?a=b&c=d'
>>> print urlsplit(uri)
SplitResult(scheme='', netloc='haha', path='', query='a=b&c=d', fragment='')
>>> 
Contributor
joerussbowman commented on 15 Mar 2011
The HTTPRequest object will always set the Expect header to '' if the header isn't included. When using the curl implementation this is fine. However, trying to move to the simple_httpclient I have found that Twitter's Varnish servers will send error 417. I confirmed, switching back and forth between the two clients that only simple_httpclient get's the value returned. I also removed the if statement that adds the head in httpclient.py HTTPRequest
    if "Expect" not in headers:
        headers["Expect"] = ""
And then found that simple_httpclient would work, of course without that header not being sent in the request.
It's late for me, so I'm not going to be able to figure out how to set up something to do packet inspection on my laptop, sorry new to osx. Hopefully this error report carries enough information.
The Twitter API I was hitting is the search api which uses the url format of
"http://search.twitter.com/search.json?q=%s" % query
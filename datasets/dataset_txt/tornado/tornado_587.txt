speranskydanil commented on 17 Oct 2015
Code below does not log anything in v4.2.1 (however it works in v3.2.1) :
from tornado.ioloop import IOLoop
from tornado.httpclient import AsyncHTTPClient
from threading import Thread
from time import sleep

import logging
from tornado.options import parse_command_line

parse_command_line()
log = logging.getLogger().info

loop = IOLoop.current()
http = AsyncHTTPClient()

def f():
    while True:
        sleep(1)
        http.fetch("http://google.com", lambda r: log(r))

Thread(target=f).start()
loop.start()
Interesting moment -- it works if we change the code for f as follows:
def f():
    while True:
        sleep(1)
        http.fetch("http://google.com", lambda r: log(r))
        loop.add_callback(lambda: None) # hack
// Windows, Python 3.4.3
1
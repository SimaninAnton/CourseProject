mccutchen commented on 26 Feb 2015
The new raise_error kwarg added in #1258 does not seem to work as documented with the synchronous tornado.httpclient.HTTPClient. Given this test script:
import tornado
import tornado.httpclient
print tornado.version
client = tornado.httpclient.HTTPClient()
resp = client.fetch('http://httpbin.org/status/400', raise_error=False)
print resp.code, resp.reason
I get the following output, which seems to show that the raise_error=False argument isn't actually working for this case:
$ python tornado_test.py 
4.1
Traceback (most recent call last):
  File "tornado_test.py", line 5, in <module>
    resp = client.fetch('http://httpbin.org/status/400', raise_error=False)
  File "/opt/buzzfeed/cassandra-playground/venv/lib/python2.7/site-packages/tornado/httpclient.py", line 103, in fetch
    response.rethrow()
  File "/opt/buzzfeed/cassandra-playground/venv/lib/python2.7/site-packages/tornado/httpclient.py", line 576, in rethrow
    raise self.error
tornado.httpclient.HTTPError: HTTP 400: BAD REQUEST
I would expect instead to get output like so:
$ python tornado_test.py 
4.1
400 BAD REQUEST
If this is indeed an bug and not some mistake in my setup or understanding of the expected behavior, I'll try to find the time to submit a fix.
elephantum commented on 25 May 2010
The following circular reference appears in runtime:
RequestHandler -> .request -> HTTRequest -> .connection -> HTTPConnection -> .stream -> IOStream -> ._close_callback -> RequestHandler.on_connection_close -> RequestHandler
This prevents gc to collect RequestHandler and it hangs in memory (forever?) resulting in huge memory consumption.
There is an easy fix for this problem: http://github.com/elephantum/tornado/commit/8ffbe0e64df2c36b93e8ca66abfe483b211efd52
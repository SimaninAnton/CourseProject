Contributor
risboo6909 commented on 14 Nov 2017
I was trying to write tests for my code which uses ThreadedResolver to resolve ip addrs of a list of hosts. Each host may have both ipv4 and ipv6 addrs simultaneously or just one of them, so the goal of the tests was to ensure that my code, which uses ThreadedResolver to obtain those addrs, behaves as expected.
If I understand the docs right, OverrideResolver is the right tool to test code that uses various kinds of resolvers. But it appears that I can't easily assign both addrs to one host using OverrideResolver because it lacks of addr family parameter. My solution is to copypaste the code of OverrideResolver into a separate file in my project and add an additional family parameter to resolve method so it can map triplets of (host, port, family) into (host, port). And it works as expected now.
I propose to add family parameter into OverriderResolver's resolve method for it to cover wider range of use cases.
bryndin commented on 22 Apr 2014
Due to the new optimization in tornado.gen in Tornado 3.2, my function returns None instead of finished Future in 3.1.1. Yielding None causes BadYieldError exception.
In gen.py:
yielded in yielded = self.gen.send(next) (line 531) becomes None, while there is no handling for None in lines lines 550-560
simplified example where get() is called:
@gen.coroutine
def auth(self, handle_success=None):
    if handle_success:
            return
    else:
            yield foo()

@gen.coroutine
def get(self):
    f = self.auth(True)
    # here f is None (3.2) instead of Future (3.1.1)
    yield f
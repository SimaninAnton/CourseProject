Contributor
rickardb commented on 20 Sep 2010
Authentication with the Facebook Graph API somtimes generates an expection. This seems to be due to the fact that facebook doesn't return the 'expires' keyword in the response to _OAUTH_ACCESS_TOKEN_URL. Stacktrace:
Traceback (most recent call last):
  File "vendor/tornado/tornado/web.py", line 789, in wrapper
    return callback(*args, **kwargs)
  File "vendor/tornado/tornado/auth.py", line 967, in _on_access_token
    "expires": cgi.parse_qs(response.body)["expires"]
KeyError: 'expires'
Looking at response.body does indeed show that the expires keyword is not returned:
access_token=xxx
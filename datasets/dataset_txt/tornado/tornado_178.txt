ElenaVasylenko commented on 4 Jun 2018 â€¢
edited
Good day, I have a simple Tornado-web server (Tornado 4.5.3, Python 2.7 ) and want to override handle_callback_exception to implement own exception description, so I've created class which inherits from IOLoop and rewrite described method, like this:
class IOLoopHandler(IOLoop):
def add_timeout(self, deadline, callback, *args, **kwargs):
return super(IOLoopHandler, self).add_timeout(time.time, callback, *args, **kwargs)
def handle_callback_exception(self, callback):
 _logger.error("Exception catched!")
When I start server, I use the instance of my own writen IOLoop class:
IOLoopHandler.instance().start()
I am trying to handle Exception in callback <bound method WebSocketProtocol13.periodic_ping of <tornado.websocket.WebSocketProtocol13 object at 0x7f52f4
870150>> Traceback (most recent call last):
File "/usr/local/lib/python2.7/dist-packages/tornado/ioloop.py", line 1026, in _run
return self.callback()
File "/usr/local/lib/python2.7/dist-packages/tornado/websocket.py", line 1038, in periodic_ping
self.write_ping(b'')
File "/usr/local/lib/python2.7/dist-packages/tornado/websocket.py", line 798, in write_ping
self._write_frame(True, 0x9, data)
File "/usr/local/lib/python2.7/dist-packages/tornado/websocket.py", line 776, in _write_frame
return self.stream.write(frame)
File "/usr/local/lib/python2.7/dist-packages/tornado/iostream.py", line 395, in write
self._write_buffer += data
BufferError: Existing exports of data: object cannot be re-sized
But always called the standart handle_callback_exception. Maybe I missed something? Or it is bug?
Will be thankful for your help
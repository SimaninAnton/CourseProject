marodev commented on 16 Mar 2019
Tornado doesn't seem to work properly on windows with multiple sub-processes.
simple hello world example:
main.py
from abc import ABC

import tornado.ioloop
import tornado.web
from tornado.httpserver import HTTPServer


class MainHandler(tornado.web.RequestHandler, ABC):

    def get(self):
        self.write("Hello, world")


def make_app():
    return tornado.web.Application([
        (r"/(\d+)$", MainHandler),
    ])


if __name__ == "__main__":
    app = make_app()
    server = HTTPServer(app)
    server.bind(8888)
    server.start(2)  # Forks multiple sub-processes
    tornado.ioloop.IOLoop.current().start()
execution:
$ pipenv install tornado
$ pipenv run main.py
exception:
Traceback (most recent call last):
  File "C:\Users\marodev\source\repos\TornadoHelloWorld2\main.py", line 24, in <module>
    server.start(2)  # Forks multiple sub-processes
  File "C:\Users\marodev\.virtualenvs\TornadoHelloWorld2-GAcRFl-e\lib\site-packages\tornado\tcpserver.py", line 241, in start
    process.fork_processes(num_processes, max_restarts)
  File "C:\Users\marodev\.virtualenvs\TornadoHelloWorld2-GAcRFl-e\lib\site-packages\tornado\process.py", line 142, in fork_processes
    id = start_child(i)
  File "C:\Users\marodev\.virtualenvs\TornadoHelloWorld2-GAcRFl-e\lib\site-packages\tornado\process.py", line 130, in start_child
    pid = os.fork()
AttributeError: module 'os' has no attribute 'fork'
my environment:
windows 10
python 3.6.6
pipenv
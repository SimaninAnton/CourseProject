run_sync leaking file descriptors
Contributor
felixonmars commented on 1 Apr 2017
======================================================================
ERROR: test_iterator_async_await (tornado.test.gen_test.WaitIteratorTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/build/python-tornado/src/tornado-4.4.3/tmp_install/usr/lib/python3.6/site-packages/tornado/testing.py", line 136, in __call__
    result = self.orig_method(*args, **kwargs)
  File "/build/python-tornado/src/tornado-4.4.3/tmp_install/usr/lib/python3.6/site-packages/tornado/testing.py", line 529, in post_coroutine
    timeout=timeout)
  File "/build/python-tornado/src/tornado-4.4.3/tmp_install/usr/lib/python3.6/site-packages/tornado/ioloop.py", line 457, in run_sync
    return future_cell[0].result()
  File "/build/python-tornado/src/tornado-4.4.3/tmp_install/usr/lib/python3.6/site-packages/tornado/concurrent.py", line 237, in result
    raise_exc_info(self._exc_info)
  File "<string>", line 3, in raise_exc_info
  File "/build/python-tornado/src/tornado-4.4.3/tmp_install/usr/lib/python3.6/site-packages/tornado/gen.py", line 1021, in run
    yielded = self.gen.throw(*exc_info)
  File "/usr/lib/python3.6/types.py", line 184, in throw
    return self.__wrapped.throw(tp, *rest)
  File "/build/python-tornado/src/tornado-4.4.3/tmp_install/usr/lib/python3.6/site-packages/tornado/test/gen_test.py", line 1358, in test_iterator_async_await
    yield namespace['f']()
  File "/build/python-tornado/src/tornado-4.4.3/tmp_install/usr/lib/python3.6/site-packages/tornado/gen.py", line 1015, in run
    value = future.result()
  File "/build/python-tornado/src/tornado-4.4.3/tmp_install/usr/lib/python3.6/site-packages/tornado/concurrent.py", line 237, in result
    raise_exc_info(self._exc_info)
  File "<string>", line 3, in raise_exc_info
  File "/build/python-tornado/src/tornado-4.4.3/tmp_install/usr/lib/python3.6/site-packages/tornado/gen.py", line 285, in wrapper
    yielded = next(result)
  File "<string>", line 6, in _wrap_awaitable
  File "<string>", line 6, in f
DeprecationWarning: 'WaitIterator' implements legacy __aiter__ protocol; __aiter__ should return an asynchronous iterator, not awaitable

======================================================================
ERROR: test_async_for (tornado.test.queues_test.QueueGetTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/build/python-tornado/src/tornado-4.4.3/tmp_install/usr/lib/python3.6/site-packages/tornado/testing.py", line 136, in __call__
    result = self.orig_method(*args, **kwargs)
  File "/build/python-tornado/src/tornado-4.4.3/tmp_install/usr/lib/python3.6/site-packages/tornado/testing.py", line 529, in post_coroutine
    timeout=timeout)
  File "/build/python-tornado/src/tornado-4.4.3/tmp_install/usr/lib/python3.6/site-packages/tornado/ioloop.py", line 457, in run_sync
    return future_cell[0].result()
  File "/build/python-tornado/src/tornado-4.4.3/tmp_install/usr/lib/python3.6/site-packages/tornado/concurrent.py", line 237, in result
    raise_exc_info(self._exc_info)
  File "<string>", line 3, in raise_exc_info
  File "/build/python-tornado/src/tornado-4.4.3/tmp_install/usr/lib/python3.6/site-packages/tornado/gen.py", line 1021, in run
    yielded = self.gen.throw(*exc_info)
  File "/usr/lib/python3.6/types.py", line 184, in throw
    return self.__wrapped.throw(tp, *rest)
  File "/build/python-tornado/src/tornado-4.4.3/tmp_install/usr/lib/python3.6/site-packages/tornado/test/queues_test.py", line 174, in test_async_for
    results = yield namespace['f']()
  File "/build/python-tornado/src/tornado-4.4.3/tmp_install/usr/lib/python3.6/site-packages/tornado/gen.py", line 1015, in run
    value = future.result()
  File "/build/python-tornado/src/tornado-4.4.3/tmp_install/usr/lib/python3.6/site-packages/tornado/concurrent.py", line 237, in result
    raise_exc_info(self._exc_info)
  File "<string>", line 3, in raise_exc_info
  File "/build/python-tornado/src/tornado-4.4.3/tmp_install/usr/lib/python3.6/site-packages/tornado/gen.py", line 285, in wrapper
    yielded = next(result)
  File "<string>", line 6, in _wrap_awaitable
  File "<string>", line 4, in f
DeprecationWarning: 'Queue' implements legacy __aiter__ protocol; __aiter__ should return an asynchronous iterator, not awaitable

----------------------------------------------------------------------
Ran 1445 tests in 13.083s

FAILED (errors=2, skipped=14)
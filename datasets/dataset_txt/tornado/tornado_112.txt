felipefaraco commented on 2 Dec 2018
Python 3.6
Tornado 5.1.1
This works:
@tornado.gen.coroutine
def _http(self, _list):
responses = yield { name: self.http_client.fetch(self._build_request(name)) for name in _list }
raise tornado.gen.Return(responses)
This throws TypeError: object dict can't be used in 'await' expression:
async def _http(self, _list):
responses = await { name: self.http_client.fetch(self._build_request(name)) for name in _list }
return responses
Where self.http_client = AsyncHTTPClient()
I thought they would be equivalent, but clearly I'm wrong.
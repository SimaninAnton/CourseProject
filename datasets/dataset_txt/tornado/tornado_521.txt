Contributor
bluetech commented on 8 Apr 2016
The html.entities module contains a huge dict and is thus somewhat costly to import, as this non-scientific program shows:
from resource import getrusage, RUSAGE_SELF

before = getrusage(RUSAGE_SELF)
import html.entities
after = getrusage(RUSAGE_SELF)

print(after.ru_maxrss - before.ru_maxrss)
Prints 528 (kilobytes) here (linux 64 bit, python 3.5).
tornado.escape imports html.entities, which is used to build _HTML_UNICODE_MAP, which is used in _convert_entity, which is used by xhtml_unescape, which is a public function but is not used anywhere else.
0.5MB is not so much but can add up when running many processes (I am going through some code trying to reduce memory usage).
Perhaps it is worth loading this module lazily, only if the xhtml_unescape function is used?
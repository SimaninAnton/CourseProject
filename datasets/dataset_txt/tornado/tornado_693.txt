Contributor
ccampbell commented on 4 Feb 2015
This one had me scratching my head for a little bit.
It's not actually a tornado bug, so I understand if you don't feel like fixing it, but I think it would make sense for Tornado to handle this so that the behavior is not completely unexpected.
self.set_cookie('test', '1', secure=False)
Ends up writing back the cookie with secure flag.
I did the following
>>> morsel = Cookie.SimpleCookie()
>>> morsel['test'] = '1'
>>> morsel['test']['secure'] = False
>>> morsel.output()
'Set-Cookie: test=1; secure'
Seems like SimpleCookie only checks for the presence of the key and not the value. Could perhaps add a simple check to make sure v != False in this loop
tornado/tornado/web.py
Lines 524 to 526 in 96f81df
 for k, v in kwargs.items(): 
     if k == 'max_age': 
         k = 'max-age' 
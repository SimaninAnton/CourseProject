ninduni commented on 26 Aug 2014
I've got a main process that is generating a lot of data, and I'm using a tornado server (started in a background thread) to feed it to clients. I would rather not run it in a thread, but I don't know how to stop ioloop.start() from blocking otherwise.
Problem is, I've got to start and stop this server for various reasons. Stopping it works fine, but when I try to start it again, I get
[Errno 10048] Only one usage of each socket address (protocol/network address/port) is normally permitted
I then tried adding all_fds=True to the ioloop.close() call, but that gives a TypeError: 'NoneType' object is not iterable on line 779 of ioloop.py. Same thing occurs if I try stopping the HTTPServer before closing the ioloop.
I've seen #737 but I'm not seeing a solution that fixes my problem.
What is the appropriate way to close and restart an ioloop?
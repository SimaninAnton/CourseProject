mmoreirasouza commented on 16 Aug 2018
Hey guys.
Please, is it possible to use cross-site authentication between two different domains?
I'm logged in on http://app.example.com and my app needs to consume some data (get and post) from http://api.example.com.
So, when the host is equal, it works.
Tornado
`
class BaseRequestHandler(tornado.web.RequestHandler):
def set_default_headers(self):

    origin = self.request.headers.get("Origin", None)

    if origin:
        self.set_header("Access-Control-Allow-Origin", origin)
        self.set_header('Access-Control-Allow-Credentials', "true")
        self.set_header('Access-Control-Allow-Methods', "GET, POST, OPTIONS")
        self.set_header('Access-Control-Expose-Headers', "Content-Type")
        self.set_header('Access-Control-Allow-Headers', "Content-Type, Depth, User-Agent, X-File-Size, X-Requested-With, X-Requested-By, If-Modified-Since, X-File-Name, Cache-Control")
        self.set_header('Access-Control-Max-Age', 600)

def options(self):

    self.set_status(204)
    self.finish()
`
Javascript
xmlHttpRequest = new XMLHttpRequest(); xmlHttpRequest.open("GET",http://..., true); xmlHttpRequest.withCredentials = true; xmlHttpRequest.setRequestHeader("Content-Type", "application/json"); xmlHttpRequest.send();
tornado is not getting the cookie.
Please, can anybody help me.
thanks.
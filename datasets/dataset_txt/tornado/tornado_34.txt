FWirtz commented on 6 Aug 2019
The docs read as such:
The XSRF cookie is normally set when xsrf_form_html is used, but in a pure-Javascript application that does not use any regular forms you may need to access self.xsrf_token manually (just reading the property is enough to set the cookie as a side effect).
Upon further inspection, I found this:
tornado/tornado/web.py
Lines 1417 to 1420 in 4ac3d54
 if version is None: 
     if self.current_user and "expires_days" not in cookie_kwargs: 
         cookie_kwargs["expires_days"] = 30 
     self.set_cookie("_xsrf", self._xsrf_token, **cookie_kwargs) 
It only seems to be setting the cookie as a side effect, if version is None.
For my usecase, I want to update the CSRF cookie with every mutating request (read != GET). I can't rely however on just calling self.xsrf_token, as it does not always update the cookie.
I am unsure about the intended effect of said line for this project. For my usecase however it is breaking the side effect of the property or rather just runs it once.
I think it would be nice if the documentation was changed this way or the part that sets the cookie was changed, not sure why it's only set when version is None.
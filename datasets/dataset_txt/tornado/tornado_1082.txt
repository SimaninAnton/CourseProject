ceymard commented on 12 Apr 2012
This has stuck me for quite a while, because flush would not call its callback if I didn't write anything between two calls.
I don't really know which is the best : calling the callback directly ? Or raising an exception maybe ?
Right now, we have
        if headers or chunk:
            self.request.write(headers + chunk, callback=callback)
So it would either be
        if headers or chunk:
            self.request.write(headers + chunk, callback=callback)
       else:
            raise Exception("Don't call flush if you have nothing to actually flush")
or
        if headers or chunk:
            self.request.write(headers + chunk, callback=callback)
       else:
            callback() # Or something a little more complex than that ?
Thoughts ?
Contributor
kmike commented on 4 May 2011
WebSocketHandler._on_end_delimiter calls on_message callback and then calls self._receive_message().
If an exception occurs in on_messsage callback then the stream gets closed (https://github.com/facebook/tornado/blob/master/tornado/websocket.py#L170).
This leads to IOError("Stream is closed") erorrs in self._receive_message() because 'if not self.client_terminated:' is not checked again.
I think this can be one of the causes for #252
bhch commented on 10 Feb 2016
The url for /example/? or /example/{0,1} should be /example/ in both cases but the urls returned by reverse_url are /example/? and /example/%7B0,1%7D respectively.
Below is a simple test to reproduce the bug. I've written the test for URLSpec.reverse because that is what actually generates the urls for reverse_url.
import unittest
from tornado.web import URLSpec

class URLSpecReverseTest(unittest.TestCase):
    def setUp(self):
        self.test_urls = [
            '/example/?', 
            '/example/+', 
            '/example/*', 
            '/example/{0,1}',
        ]

    def test_urls_ending_with_metachar(self):
        """ url returned by  `URLSpec.reverse` for urls in `self.test_urls` 
        should be '/example/'
        """
        for url in self.test_urls:
            url_spec = URLSpec(url, handler=None)
            self.assertEqual(url_spec.reverse(), '/example/')

if __name__ == '__main__':
    unittest.main()
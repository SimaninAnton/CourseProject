m41nt41n3r commented on 20 Feb 2018 â€¢
edited
Hello. It's a pity but I can't provide test data, but sometimes a see next error (Python 2.7):
ERROR:tornado.general:Uncaught exception
Traceback (most recent call last):
File "\tornado\http1connection.py", line 730, in _server_request_loop
File "\tornado\gen.py", line 1088, in run
File "\tornado\concurrent.py", line 255, in result
File "\tornado\gen.py", line 1102, in run
File "\tornado\http1connection.py", line 172, in _read_message
File "\tornado\http1connection.py", line 524, in _parse_headers
File "\tornado\httputil.py", line 205, in parse
File "\tornado\httputil.py", line 188, in parse_line
KeyError: None
It seems that sometimes add routine of HTTPHeaders class sets None to the self._last_key:
    def add(self, name, value):
        # type: (str, str) -> None
        """Adds a new value for the given key."""
        norm_name = _normalized_headers[name]
        self._last_key = norm_name
Thanks for attention.
yannmh commented on 10 Mar 2016
Hello,
I recently found an issue that causes Python 64-bit to crash when using tornado CurlAsyncHTTPClient on Windows .
For example, the following snippet
import tornado.ioloop
import tornado.httpclient

tornado.httpclient.AsyncHTTPClient.configure("tornado.curl_httpclient.CurlAsyncHTTPClient")
http_client = tornado.httpclient.AsyncHTTPClient()

def done(r):
    print "done!", r

response = http_client.fetch("https://google.com", done)

tornado.ioloop.IOLoop.instance().start()
would immediately stops, and raises a "python.exe has stopped working" Windows pop-up.
At the opposite, it does not happen with Python 32-bit.
Investigating a little more, the crash occurs at this line and the Event Log shows it's happening within pycurl.pyd module.
I opened a ticket with the PycURL team to report the issue and get their thoughts about it:
pycurl/pycurl#395. The early feedback shows it could be related to libcurl.
Nevertheless, I thought it'd be interesting to share the issue and maybe get your thoughts about a potential workaround.
Versions
Python version
Python 2.7.11 (v2.7.11:6d1b6a68f775, Dec  5 2015, 20:40:30) [MSC v.1500 64 bit (AMD64)] on win32
Tornado version
4.3
PycURL version
PycURL/7.43.0 libcurl/7.47.0 OpenSSL/1.0.2e zlib/1.2.8 c-ares/1.10.0 libssh2/1.6.0
Best,
Yann
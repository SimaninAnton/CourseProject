tatarqa commented on 20 Aug 2018
hello I tried to run basic version of tornado and aiopg inspired from your blog example, my full code is here.
when I tried to run the code with tornado.ioloop.IOLoop.current().run_sync(main) it always gets stuck on method async with aiopg.create_pool(dsn) as db: and I was able to stop it only with ctrl+c which produced this traceback:
^CTraceback (most recent call last): File "/home/pocitac/vs_projects/whatthehell/bshit.py", line 42, in <module> tornado.ioloop.IOLoop.current().run_sync(main) File "/usr/lib/python3/dist-packages/tornado/ioloop.py", line 453, in run_sync self.start() File "/usr/lib/python3/dist-packages/tornado/ioloop.py", line 863, in start event_pairs = self._impl.poll(poll_timeout) KeyboardInterrupt
Also when I stop it with ctrl+c, new record apears in postgres log which says '2018-08-20 18:27:24.541 CEST [22236] [unknown]@[unknown] LOG: incomplete startup packet'
Same thing happend (stuck on method async with aiopg.create_pool(...) as db:) when I use and run blog example code 1:1.
but when I run the server with asyncio loop:
import tornado.platform.asyncio
......
if __name__ == "__main__":
   loop=tornado.platform.asyncio.AsyncIOMainLoop()
   loop.run_sync(main)
everything works OK.
my python version is following
Python 3.6.5 (default, Apr 1 2018, 05:46:30) [GCC 7.3.0] on linux
I know blog example works, cause I tried it on another computer (same python version) without problem, but on this computer, it just does not work.
Does anybody have some idea where could be a problem?
And many thanks for your great work at this project.
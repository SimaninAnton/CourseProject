Contributor
vovanec commented on 12 Mar 2015
Hey,
I've just noticed that close_code and close_reason are never set for WebSocketHandler, so they're always None. In my custom websocket handler implementation I'm overriding that by overriding close method in a way:
    def __init__(self, handler, mask_outgoing=False):
        self.closed = False

    def close(self, code=None, reason=None):
        """Closes the WebSocket connection."""

        if not self.closed:
            super().close(code, reason)
            self.handler.close_code = code
            self.handler.close_reason = reason
            self.closed = True
I'm happy to submit pull request but not really sure whether the way I'm working it around is completely correct.
Please advise.
--Vovan
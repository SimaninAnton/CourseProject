davidrecordon commented on 22 Apr 2011
Apparently the HTTP spec allows proxies to combine multiple duplicate headers into a single one with the value being separated by a comma and a space.
We're thus seeing some photos with a header like Content-Length: 12345, 12345
This results in an uncaught exception:
[W 110421 17:42:59 simple_httpclient:227] uncaught exception
Traceback (most recent call last):
File "tornado/simple_httpclient.py", line 225, in cleanup
File "tornado/stack_context.py", line 171, in wrapped
File "tornado/simple_httpclient.py", line 258, in _on_headers
ValueError: invalid literal for int() with base 10: '28760,28760'
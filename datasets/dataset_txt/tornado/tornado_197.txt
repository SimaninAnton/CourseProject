rgaufman commented on 9 Apr 2018
I have this code:
#!/usr/bin/env python3

import threading
import tornado.ioloop
import tornado.web
from tornado import gen

class RequestHandler(tornado.web.RequestHandler):

    @tornado.web.asynchronous
    @gen.coroutine
    def get(self, path):
        self.write("Test")
        self.finish()

class WebServer(threading.Thread):
    def run(self):
        application = tornado.web.Application([
            (r"/(.*)", RequestHandler)])
        application.listen(12345)
        tornado.ioloop.IOLoop.instance().start()

WebServer().start()
It works just fine on Linux, however, on Mac I get an exception:
$ python3 testtornado.rb
Exception in thread Thread-1:
Traceback (most recent call last):
  File "/usr/local/Cellar/python/3.6.5/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py", line 916, in _bootstrap_inner
    self.run()
  File "testtornado.rb", line 20, in run
    application.listen(12345)
  File "/usr/local/lib/python3.6/site-packages/tornado/web.py", line 1986, in listen
    server.listen(port, address)
  File "/usr/local/lib/python3.6/site-packages/tornado/tcpserver.py", line 145, in listen
    self.add_sockets(sockets)
  File "/usr/local/lib/python3.6/site-packages/tornado/tcpserver.py", line 159, in add_sockets
    sock, self._handle_connection)
  File "/usr/local/lib/python3.6/site-packages/tornado/netutil.py", line 219, in add_accept_handler
    io_loop = IOLoop.current()
  File "/usr/local/lib/python3.6/site-packages/tornado/ioloop.py", line 282, in current
    loop = asyncio.get_event_loop()
  File "/usr/local/Cellar/python/3.6.5/Frameworks/Python.framework/Versions/3.6/lib/python3.6/asyncio/events.py", line 694, in get_event_loop
    return get_event_loop_policy().get_event_loop()
  File "/usr/local/Cellar/python/3.6.5/Frameworks/Python.framework/Versions/3.6/lib/python3.6/asyncio/events.py", line 602, in get_event_loop
    % threading.current_thread().name)
RuntimeError: There is no current event loop in thread 'Thread-1'.
Any ideas?
I'm using tornado (5.0.2) and Python 3.6.5.
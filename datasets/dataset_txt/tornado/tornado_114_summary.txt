InvalidStateError when cancelling http requests
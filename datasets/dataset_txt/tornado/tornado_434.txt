why2pac commented on 1 Oct 2016
I got below exception intermittently.
Traceback (most recent call last):
  File "/test/__init__.py", line 23, in <Module>
    bootstrap.run(**kwargs)
  File "/test/venv/python2.7/site-packages/dp-tornado/__init__.py", line 136, in run
    instance.start()
  File "/test/venv/python2.7/site-packages/tornado/ioloop.py", line 880, in start
    fd, events = self._events.popitem()
KeyError: 'popitem(): dictionary is empty'
suggest what if code fixes like this.
Original Code
                while self._events:
                    fd, events = self._events.popitem()
                    try:
                        fd_obj, handler_func = self._handlers[fd]
                        handler_func(fd_obj, events)
                    except (OSError, IOError) as e:
                        if errno_from_exception(e) == errno.EPIPE:
                            # Happens when the client closes the connection
                            pass
                        else:
                            self.handle_callback_exception(self._handlers.get(fd))
                    except Exception:
                        self.handle_callback_exception(self._handlers.get(fd))
Suggest Code
                while self._events:
                    fd, events = None, None
                    try:
                        fd, events = self._events.popitem()
                        fd_obj, handler_func = self._handlers[fd]
                        handler_func(fd_obj, events)
                    except (OSError, IOError) as e:
                        if errno_from_exception(e) == errno.EPIPE:
                            # Happens when the client closes the connection
                            pass
                        else:
                            self.handle_callback_exception(self._handlers.get(fd))
                    except Exception:
                        if fd:
                            self.handle_callback_exception(self._handlers.get(fd))
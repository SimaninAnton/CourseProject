huchhong commented on 27 May 2017
I am new to tornado. I want to build a web app using tornado's asynchronous function. I tried the following simple code:
from tornado.ioloop import IOLoop
from tornado import gen
from datetime import datetime


class TestHandler(tornado.web.RequestHandler):
    @gen.coroutine
    def get(self):
        print('get /test at {}'.format(datetime.now()))
        yield gen.sleep(10)
        print('sleep end at {}'.format(datetime.now()))
        self.finish()


application = tornado.web.Application([
    (r"/test", TestHandler),
    ])

application.listen(9999)
IOLoop.instance().start()
Every time i send two request at almost same time, the later one would block for 10 seconds after the first request finished which seems that coroutine does not work at all.
I know maybe i missed something, so what do i need to modify to let coroutine work?
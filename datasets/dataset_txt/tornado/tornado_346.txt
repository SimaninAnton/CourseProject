drafter250 commented on 2 May 2017 â€¢
edited
Background
Hello Thanks for Tornado!
I am in the middle of trying to develop a single page app for some data-processing stuff where i work. One of the things I need to do is upload a Microsoft excel file and load it to a pandas DataFrame.
Problem
I have been trying to figure out how to tell if a "message" that comes through the WebsocketHandler.on_message(message) method is binary or text. I found this article on the websocket protocol https://hpbn.co/websocket/ which says the first few bits of the message frame tells whether it is binary or text.
I have seen some tutorials for base64encoding the file first but i would rather not as this would make the already large files even larger.
So I have some questions:
Questions
What is the object type for "message" that is passed to the on_message method of a WebSocketHandler?
Can i query whatever object type comes through as the "message" for whether it is binary or text?
If you can't directly query the "message", does it contain the full frame of the message so that I can manually check the bits in question or has that part been stripped out and only the blob payload left?
(optional) receiving a binary file is great but if I wan't to do different things based on say the file type I can't tell my app what to do with it. can someone point me to some resources on how to setup an extension protocol to add some metadata to the binary message?
Once I figure all this out I would be happy to write something up for the docs or will at least put it on my GitHub.
I would have asked this on SO but like i said if I can figure this out I would be happy to contribute to the docs if permitted.
Thanks for your time!
loretoparisi commented on 26 Oct 2019
I get this error when running Tornado in a thread and using AnyThreadEventLoopPolicy.
class WebServer(threading.Thread):
    def run(self):
        PORT = os.getenv('PORT', 8888)
        
        #asyncio.set_event_loop(asyncio.new_event_loop())
        asyncio.set_event_loop(AnyThreadEventLoopPolicy())
        
        app = application()
        app.listen(PORT)
        tornado.ioloop.IOLoop.instance().start()
WebServer.start()
Full stack trace:
Exception in thread Thread-1:
Traceback (most recent call last):
  File "/usr/local/lib/python3.7/threading.py", line 926, in _bootstrap_inner
    self.run()
  File "tornadoaas.py", line 101, in run
    asyncio.set_event_loop(AnyThreadEventLoopPolicy())
  File "/usr/local/lib/python3.7/asyncio/events.py", line 757, in set_event_loop
    get_event_loop_policy().set_event_loop(loop)
  File "/usr/local/lib/python3.7/asyncio/unix_events.py", line 1119, in set_event_loop
    super().set_event_loop(loop)
  File "/usr/local/lib/python3.7/asyncio/events.py", line 651, in set_event_loop
    assert loop is None or isinstance(loop, AbstractEventLoop)
AssertionError
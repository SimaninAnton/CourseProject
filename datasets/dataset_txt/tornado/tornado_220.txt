MrP4p3r commented on 13 Mar 2018 â€¢
edited
I try to decorate get method in request handler to execute it in separate thread (via thread pool) by using tornado.concurrent.Future.
Code:
https://gist.github.com/MrP4p3r/8d0e7ff0ab4bd42af7f1fd5b12c65ea1
I tried five similar decorators. Two of them wrap request handler method with tornado.gen.coroutine decorated wrapper. They always work with tornado 4.5.3. But with tornado 5.0.0 request handler hangs almost in all cases until I refresh the page. Browser does not receive data.
Other two decorators is an attempt to use asyncio.Future and async def wrapper for request handler method. They do not work in 5.0.0 as well.
The last one starts separate thread and executes method get in separate thread. It works in both 4.5.3 and 5.0.0. But is not suitable in my case since I have to use thread pool.
How it looks:
peterbe commented on 16 May 2011
As of the latest commit, it breaks cookies. This naive patch fixes it:
diff --git a/tornado/web.py b/tornado/web.py
index 0702131..9533fcc 100644
--- a/tornado/web.py
+++ b/tornado/web.py
@@ -264,8 +264,11 @@ class RequestHandler(object):
         if not hasattr(self, "_cookies"):
             self._cookies = Cookie.BaseCookie()
             if "Cookie" in self.request.headers:
+                cookie = self.request.headers["Cookie"]
+                if isinstance(cookie, unicode):
+                    cookie = cookie.encode('utf-8')
                 try:
-                    self._cookies.load(self.request.headers["Cookie"])
+                    self._cookies.load(cookie)
                 except:
                     self.clear_all_cookies()
         return self._cookies
Clearly, it's somehow related to the python3 merge but I can't pinpoint what exactly.
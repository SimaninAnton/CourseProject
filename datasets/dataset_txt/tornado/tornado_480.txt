Contributor
onovy commented on 12 Jul 2016
Hi,
tests is failing on Python 3.5.2. Details: https://bugs.python.org/issue27243
======================================================================
ERROR: test_iterator_async_await (tornado.test.gen_test.WaitIteratorTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python3/dist-packages/tornado/testing.py", line 132, in __call__
    result = self.orig_method(*args, **kwargs)
  File "/usr/lib/python3/dist-packages/tornado/testing.py", line 525, in post_coroutine
    timeout=timeout)
  File "/usr/lib/python3/dist-packages/tornado/ioloop.py", line 453, in run_sync
    return future_cell[0].result()
  File "/usr/lib/python3/dist-packages/tornado/concurrent.py", line 232, in result
    raise_exc_info(self._exc_info)
  File "<string>", line 3, in raise_exc_info
  File "/usr/lib/python3/dist-packages/tornado/gen.py", line 1014, in run
    yielded = self.gen.throw(*exc_info)
  File "/usr/lib/python3.5/types.py", line 179, in throw
    return self.__wrapped.throw(tp, *rest)
  File "/usr/lib/python3/dist-packages/tornado/test/gen_test.py", line 1345, in test_iterator_async_await
    yield namespace['f']()
  File "/usr/lib/python3/dist-packages/tornado/gen.py", line 1008, in run
    value = future.result()
  File "/usr/lib/python3/dist-packages/tornado/concurrent.py", line 232, in result
    raise_exc_info(self._exc_info)
  File "<string>", line 3, in raise_exc_info
  File "/usr/lib/python3/dist-packages/tornado/gen.py", line 282, in wrapper
    yielded = next(result)
  File "<string>", line 6, in _wrap_awaitable
  File "<string>", line 6, in f
PendingDeprecationWarning: 'WaitIterator' implements legacy __aiter__ protocol; __aiter__ should return an asynchronous iterator, not awaitable

======================================================================
ERROR: test_async_for (tornado.test.queues_test.QueueGetTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python3/dist-packages/tornado/testing.py", line 132, in __call__
    result = self.orig_method(*args, **kwargs)
  File "/usr/lib/python3/dist-packages/tornado/testing.py", line 525, in post_coroutine
    timeout=timeout)
  File "/usr/lib/python3/dist-packages/tornado/ioloop.py", line 453, in run_sync
    return future_cell[0].result()
  File "/usr/lib/python3/dist-packages/tornado/concurrent.py", line 232, in result
    raise_exc_info(self._exc_info)
  File "<string>", line 3, in raise_exc_info
  File "/usr/lib/python3/dist-packages/tornado/gen.py", line 1014, in run
    yielded = self.gen.throw(*exc_info)
  File "/usr/lib/python3.5/types.py", line 179, in throw
    return self.__wrapped.throw(tp, *rest)
  File "/usr/lib/python3/dist-packages/tornado/test/queues_test.py", line 174, in test_async_for
    results = yield namespace['f']()
  File "/usr/lib/python3/dist-packages/tornado/gen.py", line 1008, in run
    value = future.result()
  File "/usr/lib/python3/dist-packages/tornado/concurrent.py", line 232, in result
    raise_exc_info(self._exc_info)
  File "<string>", line 3, in raise_exc_info
  File "/usr/lib/python3/dist-packages/tornado/gen.py", line 282, in wrapper
    yielded = next(result)
  File "<string>", line 6, in _wrap_awaitable
  File "<string>", line 4, in f
PendingDeprecationWarning: 'Queue' implements legacy __aiter__ protocol; __aiter__ should return an asynchronous iterator, not awaitable
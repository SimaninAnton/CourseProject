lostangelwangyang commented on 25 Jul 2018
the test code is quite simple:
`from tornado import ioloop, web, gen
#import asyncio
#import uvloop
#asyncio.set_event_loop_policy(uvloop.EventLoopPolicy())
import json
from tornado import simple_httpclient
class MainHandler(web.RequestHandler):
@gen.coroutine
def get(self):
self.write({'name': "The source code for the benchmark can be found in benchmarks directory"})
def make_app():
return web.Application([
(r"/", MainHandler),
])
if name == "main":
app = make_app()
app.listen(8888)
ioloop.IOLoop.current().start()`
the speed I got with siege [ siege 'http://10.10.10.xxx:8888/' -c 30 -t 30s -b ]
python-3.5.2 tornado-5.1
Transactions: 36831 hits
Availability: 100.00 %
Elapsed time: 29.47 secs
Data transferred: 2.88 MB
Response time: 0.02 secs
Transaction rate: 1249.78 trans/sec
Throughput: 0.10 MB/sec
Concurrency: 29.97
Successful transactions: 36831
Failed transactions: 0
Longest transaction: 0.40
Shortest transaction: 0.00
python-2.7.12 tornado-5.1
Transactions: 37760 hits
Availability: 100.00 %
Elapsed time: 29.29 secs
Data transferred: 2.95 MB
Response time: 0.02 secs
Transaction rate: 1289.18 trans/sec
Throughput: 0.10 MB/sec
Concurrency: 29.98
Successful transactions: 37760
Failed transactions: 0
Longest transaction: 0.38
Shortest transaction: 0.01
python-3.5.2 tornado-5.1 on uvloop-0.8.1
Transactions: 40683 hits
Availability: 100.00 %
Elapsed time: 29.16 secs
Data transferred: 3.18 MB
Response time: 0.02 secs
Transaction rate: 1395.16 trans/sec
Throughput: 0.11 MB/sec
Concurrency: 29.97
Successful transactions: 40683
Failed transactions: 0
Longest transaction: 0.36
Shortest transaction: 0.00
python-2.7.12 tornado-4.5.3
Transactions: 45485 hits
Availability: 100.00 %
Elapsed time: 29.43 secs
Data transferred: 3.56 MB
Response time: 0.02 secs
Transaction rate: 1545.53 trans/sec
Throughput: 0.12 MB/sec
Concurrency: 29.97
Successful transactions: 45485
Failed transactions: 0
Longest transaction: 0.17
Shortest transaction: 0.00
python-3.5.2 tornado-4.5.3
Transactions: 46496 hits
Availability: 100.00 %
Elapsed time: 29.95 secs
Data transferred: 3.64 MB
Response time: 0.02 secs
Transaction rate: 1552.45 trans/sec
Throughput: 0.12 MB/sec
Concurrency: 29.97
Successful transactions: 46496
Failed transactions: 0
Longest transaction: 0.17
Shortest transaction: 0.00
the 5.1 is more slower then 4.5.3 no mater python2/python3.
Is that because asyncio runs slow?
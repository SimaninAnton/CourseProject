douglas-raillard-arm commented on 1 Mar 2019 â€¢
edited
Hi,
Tornado 6.0 tornado.concurrent module seems to not be importable on Python 3.5.1 as can be seen on that backtrace:
Traceback (most recent call last):
  File "/home/travis/build/ARM-software/lisa/.lisa-venv-3.5/bin/jupyter-labextension", line 6, in <module>
    from jupyterlab.labextensions import main
  File "/home/travis/build/ARM-software/lisa/.lisa-venv-3.5/lib/python3.5/site-packages/jupyterlab/labextensions.py", line 16, in <module>
    from .commands import (
  File "/home/travis/build/ARM-software/lisa/.lisa-venv-3.5/lib/python3.5/site-packages/jupyterlab/commands.py", line 27, in <module>
    from jupyterlab_server.process import which, Process, WatchHelper
  File "/home/travis/build/ARM-software/lisa/.lisa-venv-3.5/lib/python3.5/site-packages/jupyterlab_server/__init__.py", line 4, in <module>
    from .app import LabServerApp
  File "/home/travis/build/ARM-software/lisa/.lisa-venv-3.5/lib/python3.5/site-packages/jupyterlab_server/app.py", line 9, in <module>
    from .server import ServerApp
  File "/home/travis/build/ARM-software/lisa/.lisa-venv-3.5/lib/python3.5/site-packages/jupyterlab_server/server.py", line 14, in <module>
    from notebook.base.handlers import (
  File "/home/travis/build/ARM-software/lisa/.lisa-venv-3.5/lib/python3.5/site-packages/notebook/base/handlers.py", line 30, in <module>
    from tornado import web, gen, escape, httputil
  File "/home/travis/build/ARM-software/lisa/.lisa-venv-3.5/lib/python3.5/site-packages/tornado/web.py", line 84, in <module>
    from tornado.concurrent import Future, future_set_result_unless_cancelled
  File "/home/travis/build/ARM-software/lisa/.lisa-venv-3.5/lib/python3.5/site-packages/tornado/concurrent.py", line 175, in <module>
    future: Union["futures.Future[_T]", "Future[_T]"], value: _T
  File "/usr/lib/python3.5/typing.py", line 552, in __getitem__
    dict(self.__dict__), parameters, _root=True)
  File "/usr/lib/python3.5/typing.py", line 512, in __new__
    for t2 in all_params - {t1} if not isinstance(t2, TypeVar)):
  File "/usr/lib/python3.5/typing.py", line 512, in <genexpr>
    for t2 in all_params - {t1} if not isinstance(t2, TypeVar)):
  File "/usr/lib/python3.5/typing.py", line 190, in __subclasscheck__
    self._eval_type(globalns, localns)
  File "/usr/lib/python3.5/typing.py", line 177, in _eval_type
    eval(self.__forward_code__, globalns, localns),
  File "<string>", line 1, in <module>
TypeError: 'type' object is not subscriptable
Please note that it seems to fail on 3.5.2 as well, but works fine on Python 3.5.6, so concurrent.py is probably relying on a typing feature introduced in between, maybe that one: https://docs.python.org/3/library/typing.html#typing.ClassVar
Best regards,
Douglas
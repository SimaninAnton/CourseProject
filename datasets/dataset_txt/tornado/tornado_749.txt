nospamcalfee commented on 24 Sep 2014
I am using tornado, in Ubuntu 13.10 (64 bit). I am not sure of the Tornado version.
Here is a console dump of the failure. It happens when the mp4 playback is started. Interestingly, the playback works ok.
ERROR:tornado.application:Uncaught exception GET /Ollie_Hopnoodles_Haven_of_Bliss.mp4 (127.0.0.1)
HTTPServerRequest(protocol='http', host='localhost:8888', method='GET', uri='/Ollie_Hopnoodles_Haven_of_Bliss.mp4', version='HTTP/1.1', remote_ip='127.0.0.1', headers={'Host': 'localhost:8888', 'Accept-Language': 'en-US,en;q=0.5', 'Range': 'bytes=1572864-', 'Accept': 'video/webm,video/ogg,video/;q=0.9,application/ogg;q=0.7,audio/;q=0.6,/;q=0.5', 'User-Agent': 'Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:30.0) Gecko/20100101 Firefox/30.0', 'Connection': 'keep-alive', 'Referer': 'http://localhost:8888/', 'Cookie': 'chatdemo_user="2|1:0|10:1409957404|13:chatdemo_user|224:eyJjbGFpbWVkX2lkIjogImh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vYWNjb3VudHMvbzgvaWQ/aWQ9QUl0T2F3bm96ajloT3FnVTF6UUdVeGJFb1RPdmZQSjBIc0JacVg0IiwgImZpcnN0X25hbWUiOiAiU3RldmUiLCAibGFzdF9uYW1lIjogIkNhbGZlZSIsICJuYW1lIjogIlN0ZXZlIENhbGZlZSJ9|5ca21c20862a501375700bf3c1d9c975cac9cff1d1fdf5893f63f37500b3df0a"; _xsrf=2|f5e1d17e|86893f3413646199c64dfe78faf87916|1409957404'})
Traceback (most recent call last):
File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 1334, in _execute
result = yield result
File "/usr/local/lib/python2.7/dist-packages/tornado/gen.py", line 617, in run
value = future.result()
File "/usr/local/lib/python2.7/dist-packages/tornado/concurrent.py", line 109, in result
raise_exc_info(self._exc_info)
File "/usr/local/lib/python2.7/dist-packages/tornado/gen.py", line 620, in run
yielded = self.gen.throw(*sys.exc_info())
File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 2172, in get
yield self.flush()
File "/usr/local/lib/python2.7/dist-packages/tornado/gen.py", line 617, in run
value = future.result()
File "/usr/local/lib/python2.7/dist-packages/tornado/concurrent.py", line 111, in result
raise self._exception
StreamClosedError
ERROR:tornado.general:Cannot send error response after headers written
Here is the python source:
!/usr/bin/python2
import tornado.web
import tornado.websocket
import tornado.ioloop
class MainHandler(tornado.web.RequestHandler):
def get(self):
self.render("mini.html")
application = tornado.web.Application([
(r"/", MainHandler),
(r"/(.*)", tornado.web.StaticFileHandler, {'path': '.'}),
])
if name == "main":
application.listen(8888)
tornado.ioloop.IOLoop.instance().start()
And here is the html source with all "<" s removed to not confuse this website:
!DOCTYPE html>
html>
head>
title>mp4 server /title>
/head>
body>
video controls
source src="./Ollie_Hopnoodles_Haven_of_Bliss.mp4" type="video/mp4">
/video>
/body>
/html>
jayanth1991 commented on 28 Jul 2017 â€¢
edited
So we are facing a baffling problem with regards to the our websockets timing out for our client connections ALL at once from our Tornado Websocket server.
The Tornado server doesn't run behind Nginx or any Proxy server. We are seeing this odd behavior where the client's which are using websocket-client all timeout due to the same reason of ping/pong timing out and being forced to reconnect.
So what I don't understand is why the timeout grace period needs < the ping interval. Based on the source code it says it will try to do max of 3 pings or 30 seconds before it times out. Not sure why we have to do wait for 3 pings when the underlying protocol is using TCP.
The websocket-client works under the premise of if a single ping hasn't been acknowledged with a pong. It times out immediately. Which is the way it should be. Unless I am missing something (which I probably am).
The sockets timing out all at once might be something else. But just curious if someone can explain this to me.
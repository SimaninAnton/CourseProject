imro2 commented on 18 Dec 2014
If Web application is not set to autoreload modified modules, tornado only sends two chunks of 128KB and then gets stuck in poll on select until another request comes in.
Scenario;
Running tornado on Windows 7
data to be written to socket must be larger then 256KB
when request comes, a thread is created and in BaseIOStream._handle_write writes data to socket, in its third iteration thru the while loop it receives an exception from socket: "[Errno 10035] A non-blocking socket operation could not be completed immediately", it breaks and the thread ads fd to pending fds and quits.
Problem is that if there are no other request coming in the main thread is stuck in _Select.poll waiting for select.select to return. Since the default _POLL_TIMEOUT is 3600s, and there were no other poll_timeouts, only way to release this lock is make another request.
If autoreload is set to true, this does not happen as the autoreloader keeps scheduling itself in regular intervals and therefore the timeout is always only few seconds.
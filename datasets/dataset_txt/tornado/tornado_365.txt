max32002 commented on 29 Mar 2017 â€¢
edited
My environment:
OS: Mac OSX 10.12.3
Python: Python 2.7.10
Tornado: 4.4.2
curl 7.51.0 (x86_64-apple-darwin16.0)
I am developing a streaming feature on tornado web framework, I copy whole StaticFileHandler to modify. I use curl to test my API, with method==GET everything is correct, but when I
test method==HEAD, I need manually press Ctrl + C to break the http connection in client side.
even I add self.finish or assert when method==HEAD, but the connection still keep connected.
class StaticFileHandler(RequestHandler):

    def head(self, path):
        return self.get(path, include_body=False)

    @gen.coroutine
    def get(self, path, include_body=True):
Here is my whole source code:
https://github.com/max32002/dropboxlike-server/blob/master/app/controller/temp_link.py
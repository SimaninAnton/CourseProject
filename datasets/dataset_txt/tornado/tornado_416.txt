mohanson commented on 16 Nov 2016 â€¢
edited
I want to achieve a function: received binary data from body, and just skip if data is not an image.
class MainHandler(tornado.web.RequestHandler):

    def put(self):
        if self.request.headers.get('Content-Type') ! = 'image/jpeg':
            return
        data = self.request.body
        # my codes
        # ...
        return
I tested it:
http PUT :8080 < 100M_size.xxx
The question is: I realized that when I do if self.request.headers.get('Content-Type') ! = 'image/jpeg':, the body has been completely read into memory, which creates a huge amount of memory and time wasted.
LaszloKatona commented on 10 May 2016 â€¢
edited
Tornado responds with status 500 when gets non decimal characters in Content-Length header.
Environment:
Ubuntu 14.04
Python 3.4.3
Tornado 4.3
Logged error message:
[ERROR] tornado.general: Uncaught exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.4/dist-packages/tornado/http1connection.py", line 706, in _server_request_loop
    ret = yield conn.read_response(request_delegate)
  File "/usr/local/lib/python3.4/dist-packages/tornado/gen.py", line 1008, in run
    value = future.result()
  File "/usr/local/lib/python3.4/dist-packages/tornado/concurrent.py", line 232, in result
    raise_exc_info(self._exc_info)
  File "<string>", line 3, in raise_exc_info
  File "/usr/local/lib/python3.4/dist-packages/tornado/gen.py", line 1017, in run
    yielded = self.gen.send(value)
  File "/usr/local/lib/python3.4/dist-packages/tornado/http1connection.py", line 219, in _read_message
    start_line.code if self.is_client else 0, headers, delegate)
  File "/usr/local/lib/python3.4/dist-packages/tornado/http1connection.py", line 534, in _read_body
    content_length = int(headers["Content-Length"])
ValueError: invalid literal for int() with base 10: '\x8d\x00\x00\x00'
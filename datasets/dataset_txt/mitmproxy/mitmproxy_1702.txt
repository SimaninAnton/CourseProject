stoarca commented on 19 Mar 2014
Hi there,
I'm working on a proxy rotation service on top of libmproxy. There's two major things I'd like to be able to do:
Detect when a failure happens. For example, an error code returned from the server, or the proxy is down. How would I set a timeout on the request? If I currently try to forward to a non-existing proxy, libmproxy sits there for a few minutes before stopping.
When a failure happens, retry the same request through a different upstream proxy. Note that I am currently setting the upstream proxy auth headers in Master's handle_request(), yet choosing the upstream server in get_upstream_server(). I would need to know about the selected upstream server in handle_request() in order to fill out the right auth details. How would I retry a request through a different proxy? I'm not even sure where to look for this one.
Any help would be greatly appreciated.
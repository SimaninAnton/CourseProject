Contributor
monoxygen commented on 22 Mar 2015
I have a setup where multiple clients are hitting an instance of mitmdump which is doing server playback. If enough of these clients start connecting, I start to see very slow page loads and sometimes connection resets.
I ran ApacheBench against mitmdump to see what sort of performance I was getting, and it was extremely low, about 340 requests per second on my machine (OS X, 2013 MacBook Pro).
$ mitmdump --no-pop --keepserving --anticache -p8888 -S /tmp/file
$ ab -c20 -n1000 -X '127.0.0.1:8888' -k 'http://simplewebsite/'
Concurrency Level: 20
Time taken for tests: 2.946 seconds
Complete requests: 1000
Failed requests: 0
Keep-Alive requests: 0
Total transferred: 7454000 bytes
HTML transferred: 7261000 bytes
Requests per second: 339.47 #/sec
Time per request: 58.915 ms
Time per request: 2.946 [ms](mean, across all concurrent requests)
Transfer rate: 2471.10 [Kbytes/sec] received
If I increase ApacheBench's connection count to 30 or greater, then it just gets 'apr_socket_recv: Connection reset by peer (54)'.
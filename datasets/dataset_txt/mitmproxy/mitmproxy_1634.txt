deployable commented on 23 Aug 2014
mitmproxy (head/0.11) crashes when creating a custom response via flow.request.reply as used in the redirect_requests.py example. mitmdump continues to work after the request/reqponse via the same script. The trace looks like some timestamp information in the response is not populated when the response is short circuited.
Server
mitmproxy -p 3130 -s ./examples/redirect_requests.py
Client
$ http_proxy=localhost:3130 curl http://example.com/
helloworld
Trace (snipped)
      File "/home/matt/clones/mitmproxy/help/src/mitmproxy/libmproxy/console/common.py", line 193, in format_flow
    delta = f.response.timestamp_end - f.response.timestamp_start
TypeError: unsupported operand type(s) for -: 'NoneType' and 'NoneType'
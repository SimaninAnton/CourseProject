0xC0FFEE commented on 22 Sep 2014
Mitmproxy reports an unhandled exception when replaying a previously recorded session as the server.
Error in processing of request from 127.0.0.1:48254
Traceback (most recent call last):
  File "/usr/lib/python2.7/site-packages/netlib/tcp.py", line 379, in request_thread
    self.handle_connection(request, client_address)
  File "/usr/lib/python2.7/site-packages/libmproxy/proxy.py", line 549, in handle_connection
    h.handle()
  File "/usr/lib/python2.7/site-packages/libmproxy/proxy.py", line 196, in handle
    while self.handle_request(cc) and not cc.close:
  File "/usr/lib/python2.7/site-packages/libmproxy/proxy.py", line 278, in handle_request
    self.send_response(response)
  File "/usr/lib/python2.7/site-packages/libmproxy/proxy.py", line 497, in send_response
    d = response._assemble()
AttributeError: 'NoneType' object has no attribute '_assemble'
Steps to reproduce:
mitmdump -w data
wget google.com
ctrl-c mitmdump
mitmdump -S data
wget google.com
mitmdump reports the above exception and wget reports "connection refused".
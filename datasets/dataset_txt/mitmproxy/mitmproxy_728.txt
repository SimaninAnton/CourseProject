rbairwell commented on 8 Mar 2017
Steps to reproduce the problem:
Run MITMDump in a Vagrant powered virtual machine which only has an IPv4 address: mitmdump -p 5757
Configure Firefox to use it a proxy (Firefox is on a host which has IPv6)
Visit http://[2a01:b000:d:dc1::2:cafe]/images-nc/bg.gif?&testdomain=test-ipv6.com&testname=test_ipv6_img
Receive unexpected warning/error in mimdump console:
10.0.2.2:61356: HTTP protocol error in client request: Bad HTTP request line: b'GET http://[2a01:b000:d:dc1::2:cafe]/images-nc/bg.gif?&testdomain=test-ipv6.com&testname=test_ipv6_img HTTP/1.1'
and in Firefox:
400 Bad Request

HttpSyntaxException("Bad HTTP request line: b'GET http://[2a01:b000:d:dc1::2:cafe]/images-nc/bg.gif?&testdomain=test-ipv6.com&testname=test_ipv6_img HTTP/1.1'",)
[expected a graphic to be returned]
(found when testing http://test-ipv6.com)
Any other comments? What have you tried so far?
I do not know the IPv4 limitation of the Vagrant machine running MITMDump is a contributing factor at this point.
System information
Mitmproxy version: 2.0.0 (release version) Precompiled Binary
Python version: 3.5.2
Platform: Linux-3.13.0-83-generic-x86_64-with-debian-jessie-sid
SSL version: OpenSSL 1.1.0e 16 Feb 2017
Linux distro: debian jessie/sid
1
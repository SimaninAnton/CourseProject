du-premraj commented on 30 Aug 2017
Steps to reproduce the problem:
I have configured my system to use the MITM proxy in my Cent OS 6.7 VM appliance.
Copied the mitmproxy-ca-cert.pem to /etc/pki/ca-trust/source/anchors/
issued update-ca-trust force-enable and update-ca-trust extract commands
Started the MITMdump in upstream mode and tried to access the www.cisco.com. Segmentation fault occured as shown below. If I try non-https connection it went through fine.
mitmdump -U http://:8080
Proxy server listening at http://0.0.0.0:8080
127.0.0.1:46213: clientconnect
127.0.0.1:46213: GET http://www.cisco.com/
<< 301 Moved Permanently 0b
127.0.0.1:46213: clientdisconnect
127.0.0.1:46222: clientconnect
Segmentation fault
Any other comments? What have you tried so far?
Also tried below option to convert to .crt format using openssl and appended to ca-bundle.crt as shown below, it did not help to make the https work
openssl x509 -in mitmproxy-ca-cert.pem -inform PEM -out mitmproxy-ca-cert.crt
cat mitmproxy-ca-cert.crt >>/etc/pki/tls/certs/ca-bundle.crt
System information
Its a VM running Cent OS
cat /proc/version
Linux version 2.6.32-573.3.1.el6.x86_64 (mockbuild@c6b8.bsys.dev.centos.org) (gcc version 4.4.7 20120313 (Red Hat 4.4.7-16) (GCC) ) #1 SMP Thu Aug 13 22:55:16 UTC 2015
cat /etc/centos-release
MgmtOS release 6.7 (Final)
[root@ci-005056adb97e ~]# mitmdump --version
Mitmproxy version: 2.0.2 (release version)
Python version: 3.5.1
Platform: Linux-2.6.32-573.3.1.el6.x86_64-x86_64-with-centos-6.7-Final
SSL version: OpenSSL 1.1.0f 25 May 2017
Linux distro: MgmtOS 6.7 Final
mitmproxy --version
Mitmproxy version: 2.0.2 (release version)
Python version: 3.5.1
Platform: Linux-2.6.32-573.3.1.el6.x86_64-x86_64-with-centos-6.7-Final
SSL version: OpenSSL 1.1.0f 25 May 2017
Linux distro: MgmtOS 6.7 Final
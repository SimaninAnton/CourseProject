kwitiii commented on 5 Mar 2018 â€¢
edited
Steps to reproduce the problem:
Have an up to date arch linux machine
run mitmproxy or mitmdump with --mode transparent
the first request ushered through the application will cause it to halt
Any other comments? What have you tried so far?
The offending line is dst = csock.getsockopt(socket.SOL_IP, SO_ORIGINAL_DST, 16) on line 27 of https://github.com/mitmproxy/mitmproxy/blob/master/mitmproxy/platform/linux.py
Kernel 4.15.3-1 is shown to be working still.
Ongoing forum discussion can be found here
System information
Mitmproxy: 3.0.3
Python: 3.6.4
OpenSSL: OpenSSL 1.1.0g 2 Nov 2017
Platform: Linux-4.15.6-1-ARCH-x86_64-with-arch
paskyorg commented on 28 Mar 2018 â€¢
edited
I want to kill some type of requests, on request event when the flow is not json and is replay.
def request(flow):
    print("URL: {}".format(flow.request.path))
    if flow.request.headers.get('Content-Type', None) != "application/json" and flow.request.is_replay:
        flow.kill()
The exception is:
Exception in thread RequestReplayThread:
Traceback (most recent call last):
File "c:\program files (x86)\python36-32\lib\threading.py", line 916, in _bootstrap_inner
self.run()
File "c:\program files (x86)\python36-32\lib\site-packages\mitmproxy\proxy\protocol\http_replay.py", line 116, in run
if server.connected():
AttributeError: 'NoneType' object has no attribute 'connected'
I'm using mitmproxy 2.0.2 with Python 3.6, on Windows 10.
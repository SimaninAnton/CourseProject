gennadicho commented on 14 Dec 2017 â€¢
edited
Steps to reproduce the problem:
install mitmproxy from master branch
run script with body modify and replay by beautifulsoup
send a 1000-2000 request to proxy
mitmdump -p 30000 -k -w out.file -s bla1.py
bla1.py: just insert in body one tag with bs4 and send it to client
Any other comments? What have you tried so far?
Hello. mitmproxy not accepted new connection, and not working anymore, after 1000-2000 connect. And count of thread growing crazy:
`810
root@localhost:~# ps a -L|grep -i mitmproxy|wc -l
819
root@localhost:~# ps a -L|grep -i mitmproxy|wc -l
829
root@localhost:~# ps a -L|grep -i mitmproxy|wc -l
^[[A846
root@localhost:~# ps a -L|grep -i mitmproxy|wc -l
846
root@localhost:~# ps a -L|grep -i mitmproxy|wc -l
1010
root@localhost:~# ps a -L|grep -i mitmproxy|wc -l
1023
root@localhost:~# ps a -L|grep -i mitmproxy|wc -l
1034
root@localhost:~# ps a -L|grep -i mitmproxy|wc -l
1042
root@localhost:~# ps a -L|grep -i mitmproxy|wc -l
1042
root@localhost:~# ps a -L|grep -i mitmproxy|wc -l
1177
root@localhost:~# ps a -L|grep -i mitmproxy|wc -l
1204
root@localhost:~# ps a -L|grep -i mitmproxy|wc -l
1218
root@localhost:~# ps a -L|grep -i mitmproxy|wc -l
1230
root@localhost:~# ps a -L|grep -i mitmproxy|wc -l
1238
root@localhost:~# ps a -L|grep -i mitmproxy|wc -l
1996
root@localhost:~# ps a -L|grep -i mitmproxy|wc -l
`
But proxy not working, and connect failed after timeout :(
System information
(venv) koka@localhost:~$ mitmproxy --version
Mitmproxy: 3.0.0dev0976 (472d122)
Python: 3.5.3
OpenSSL: OpenSSL 1.1.0g 2 Nov 2017
Platform: Linux-3.16.0-4-amd64-x86_64-with-debian-8.0
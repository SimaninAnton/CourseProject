bayandin commented on 27 Feb 2015
Sometimes mitmproxy is crashing with error:
Traceback (most recent call last):
  File "/Users/bayandin/tools/mitmproxy/lib/python2.7/site-packages/libmproxy/proxy/server.py", line 99, in handle
    protocol_handler(self.conntype)(self, **conn_kwargs).handle_messages()
  File "/Users/bayandin/tools/mitmproxy/lib/python2.7/site-packages/libmproxy/protocol/http.py", line 982, in handle_messages
    while self.handle_flow():
  File "/Users/bayandin/tools/mitmproxy/lib/python2.7/site-packages/libmproxy/protocol/http.py", line 1055, in handle_flow
    ret = self.process_request(flow, req)
  File "/Users/bayandin/tools/mitmproxy/lib/python2.7/site-packages/libmproxy/protocol/http.py", line 1248, in process_request
    return self.process_connect_request(self.c.server_conn.address)
  File "/Users/bayandin/tools/mitmproxy/lib/python2.7/site-packages/libmproxy/protocol/http.py", line 1395, in process_connect_request
    self.c.establish_ssl(server=True, client=True)
  File "/Users/bayandin/tools/mitmproxy/lib/python2.7/site-packages/libmproxy/proxy/server.py", line 215, in establish_ssl
    chain_file=chain_file
  File "/Users/bayandin/tools/mitmproxy/lib/python2.7/site-packages/libmproxy/proxy/connection.py", line 66, in convert_to_ssl
    tcp.BaseHandler.convert_to_ssl(self, *args, **kwargs)
  File "/Users/bayandin/tools/mitmproxy/lib/python2.7/site-packages/netlib/tcp.py", line 428, in convert_to_ssl
    ctx = self._create_ssl_context(cert, key, **sslctx_kwargs)
  File "/Users/bayandin/tools/mitmproxy/lib/python2.7/site-packages/netlib/tcp.py", line 412, in _create_ssl_context
    ctx.use_certificate(cert.x509)
  File "/Users/bayandin/tools/mitmproxy/lib/python2.7/site-packages/OpenSSL/SSL.py", line 406, in use_certificate
    _raise_current_error()
  File "/Users/bayandin/tools/mitmproxy/lib/python2.7/site-packages/OpenSSL/_util.py", line 22, in exception_from_error_queue
    raise exceptionType(errors)
Error: [('SSL routines', 'SSL_SET_CERT', 'unknown certificate type')]

Segmentation fault: 11
I use Python 2.7.9, OS X 10.10 and use mitm proxy for capturing traffic from Android 5.0.1
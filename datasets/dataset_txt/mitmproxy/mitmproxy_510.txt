djfromlost commented on 4 Dec 2017
When the proxy is bound to the local interface, replayed requests fail.
Example that works:
Start mitmproxy with no arguments. Proxy will listen on port 8080 of all interfaces.
$ netstat -na | grep 8080
tcp          0      0  *.8080                 *.*                    LISTEN
Make a request through the proxy. Example: http_proxy="http://127.0.0.1:8080" curl -v http://www.example.org. A response is received.
Modify or just resend the request in mitmproxy (key r). A new response is received, and everything works correctly.
Example that fails:
Start mitmproxy binding only to the local interface: mitmproxy --listen-host 127.0.0.1
 $ netstat -na | grep 8080
 tcp          0      0  127.0.0.1.8080         *.*                    LISTEN
Make a request through the proxy, as before. A response is received.
Modify or just resend the request in mitmproxy (key r). Now the request fails after a while (some timeout?) with an error. At least one of the errors is Error connecting to "www.example.org": [Errno -5] no address associated with name.
Version tested:
$ mitmproxy --version
Mitmproxy: 3.0.0dev0967 (5067438e) 
Python:    3.6.0
OpenSSL:   LibreSSL 2.5.3
Platform:  OpenBSD-6.1-amd64-64bit
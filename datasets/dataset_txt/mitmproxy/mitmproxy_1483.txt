myguelraton commented on 28 Mar 2015
Steps to reproduce the problem:
$ mitmdump --setheader '/~hs Server/Server/something'
$ curl -svo /dev/null -x 0:8080 google.com
or
$ mitmdump --setheader '/~hs gws/Server/something
$ curl -svo /dev/null -x 0:8080 google.com
What is the expected behavior?
the goal is to set a header (server) only if it exists. replace
the server header (only if it exists) with "server: something".
What went wrong?
the header (server) ends up being removed from the response. instead
of "server: something" there is no server header in the response at all.
Any other comments?
--setheader will remove a header if the filter matches either the name
or the value of the header to be set.
mitmproxy version: 0.11.3
Operating System: ubuntu/12.04
iragsdale commented on 10 Feb 2015
When I try to examine the conversation between an iPhone and an Exchange server configured with optional client certificate authentication, mitmproxy fails to make requests to the Exchange server.
I just see this error for the request: “← TCP connection closed unexpectedly”. However, if I disable the proxy in the iOS settings, requests succeed just fine.
If I attempt to make the same request with curl, I get "curl: (35) Server aborted the SSL handshake". If I connect to the server using openssl s_client, I can make valid requests.
If I change the server's authentication policy from "Accept client certificates" to "Ignore client certificates", mitmproxy works just fine.
So, it appears that mitmproxy (and curl) are doing something different in how they negotiate an SSL connection with the remote server. I'm not sure exactly what it might be, but it would be nice if it worked in that scenario.
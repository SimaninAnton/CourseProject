rtoma commented on 18 Feb 2016
Hi, I hit a site that responds with a Pragma header without a value:
Pragma:
Mitmproxy 0.14.0 (from homebrew) is unable to handle this and throws this to the client:
<html>
            <head>
                <title>502 Bad Gateway</title>
            </head>
            <body>HttpSyntaxException('Invalid headers',)</body>
My workaround in netlib/http/http1/read.py
--- read.py.original    2016-02-17 20:57:32.000000000 +0100
+++ netlib-http-http1-read.py   2016-02-17 20:59:46.000000000 +0100
@@ -321,7 +321,7 @@ def _read_headers(rfile):
             try:
                 name, value = line.split(b":", 1)
                 value = value.strip()
-                if not name or not value:
+                if not name:
                     raise ValueError()
                 ret.append([name, value])
             except ValueError:
ymmv
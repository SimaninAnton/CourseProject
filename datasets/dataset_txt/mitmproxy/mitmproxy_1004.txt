Member
mhils commented on 26 Jul 2016 â€¢
edited by Kriechi
Steps to reproduce the problem:
Start mitmdump with the following inline script:
def request(flow):
    if flow.request.host == "google.com":
        flow.request.host = "example.com"
Use a HTTP2-capable browser to open https://google.com
What is the expected behavior?
Requests should be redirected to example.com.
What went wrong?
Requests are answered by google.com, even though the UI indicates example.com.
Any other comments? What have you tried so far?
This issue can be mitigated by passing --no-http2.
Implementing host change for HTTP2 is super tricky, so we may not go for this right now.
However, the user should get a visible notification when changing hosts and the request should probably be aborted.
Mitmproxy Version: master
Operating System: Win10 x64
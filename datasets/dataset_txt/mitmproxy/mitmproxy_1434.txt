creedflan738 commented on 5 Jun 2015
pfSense 2.2.x is now based on FreeBSD 10.1, so I have the luxury of using some more modern software. Unfortunately FreeBSD ports still includes mitmproxy-0.10.1, where Transparent mode isn't supported. I understand this was fixed in mitmproxy-0.11.
I'm a noob at massaging build dependencies manually so I may well be missing some obvious -devel library.
All attempts to either 'pip install mitmproxy' or to build from source fail at the same point.
Here's netlib failing to build.
running build_ext
building '_cffi__x88a8fd90x94e38fe2' extension
creating /tmp/pip-build-SrTHd4/netlib/netlib/__pycache__/netlib
creating /tmp/pip-build-SrTHd4/netlib/netlib/__pycache__/netlib/__pycache__
cc -fno-strict-aliasing -O2 -pipe -fstack-protector -fno-strict-aliasing -DNDEBUG -fPIC -I/usr/local/include/python2.7 -c netlib/__pycache__/_cffi__x88a8fd90x94e38fe2.c -o /tmp/pip-build-SrTHd4/netlib/netlib/__pycache__/netlib/__pycache__/_cffi__x88a8fd90x94e38fe2.o -w
In file included from /usr/local/lib/gcc5/gcc/x86_64-portbld-freebsd10.1/5.1.0/include-fixed/syslimits.h:7:0,
                 from /usr/local/lib/gcc5/gcc/x86_64-portbld-freebsd10.1/5.1.0/include-fixed/limits.h:34,
                 from /usr/local/include/python2.7/Python.h:19,
                 from netlib/__pycache__/_cffi__x88a8fd90x94e38fe2.c:2:
/usr/local/lib/gcc5/gcc/x86_64-portbld-freebsd10.1/5.1.0/include-fixed/limits.h:168:61: fatal error: limits.h: No such file or directory
compilation terminated.
Full log: http://pastebin.com/YYzz9qCX
(I've also tried with gcc-4.8.4 and gcc49-4.9.3, it didn't make a difference.)
Here's cffi failing to build:
http://pastebin.com/PRaDaFM1
Here's the dump of all the packages I currently have installed.
http://pastebin.com/Czt0F8cH
edit: here's what I have installed via pip http://pastebin.com/yiZ9jWVx
Although I have py27-cffi-0.8.6_3 and libffi-3.2.1 installed, but neither seems to satisfy the dependency.
You can grab current pfSense here: https://www.pfsense.org/download/mirror.php?section=downloads
Thanks in advance for any pointers on getting 0.12 installed.
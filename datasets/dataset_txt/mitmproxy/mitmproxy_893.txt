tomlabaude commented on 9 Nov 2016 â€¢
edited
Steps to reproduce the problem:
Launch mitmdump without argument, ./mitmdump
Set HTTPS proxy as a general system proxy on Mac
On Chrome, visit https://www.evernote.com -> it crashes with traceback:
127.0.0.1:55955: GET https://www.evernote.com/
Traceback (most recent call last):
  File "<string>", line 3, in <module>
  File "site-packages/mitmproxy/main.py", line 108, in mitmdump
  File "site-packages/mitmproxy/dump.py", line 89, in run
  File "site-packages/mitmproxy/controller.py", line 142, in run
  File "site-packages/mitmproxy/controller.py", line 163, in tick
  File "site-packages/mitmproxy/controller.py", line 253, in wrapper
  File "site-packages/mitmproxy/addons.py", line 85, in __call__
  File "site-packages/mitmproxy/addons.py", line 81, in invoke
  File "site-packages/mitmproxy/builtins/dumper.py", line 229, in response
  File "site-packages/mitmproxy/builtins/dumper.py", line 211, in echo_flow
  File "site-packages/mitmproxy/builtins/dumper.py", line 203, in _echo_response_line
  File "site-packages/mitmproxy/builtins/dumper.py", line 46, in echo
  File "site-packages/click/termui.py", line 420, in secho
  File "site-packages/click/utils.py", line 259, in echo
UnicodeEncodeError: 'utf-8' codec can't encode character '\udce9' in position 57: surrogates not allowed
mitmdump returned -1
Any other comments? What have you tried so far?
It doesn't happen on https://evernote.com
System information
./mitmdump --sysinfo
Mitmproxy version: 0.18.2
Python version: 3.5.2
Platform: Darwin-16.1.0-x86_64-i386-64bit
SSL version: OpenSSL 1.0.2j  26 Sep 2016
Mac version: 10.12.1 ('', '', '') x86_64
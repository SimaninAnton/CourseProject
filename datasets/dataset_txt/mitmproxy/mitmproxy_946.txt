timmc commented on 9 Sep 2016 â€¢
edited
Steps to reproduce the problem:
pathoc www.example.com 'get:/:pa,f'
What is the expected behavior?
Send request, but pause forever after sending.
What went wrong?
I get a stack trace with "a float is required".
$ pathoc www.example.com 'get:/:pa,f'
08-09-16 16:59:41: >> 'GET':/:pa,f
Traceback (most recent call last):
  File "/usr/local/bin/pathoc", line 11, in <module>
    sys.exit(go_pathoc())
  File "/usr/local/lib/python2.7/dist-packages/pathod/pathoc_cmdline.py", line 226, in go_pathoc
    pathoc.main(args)
  File "/usr/local/lib/python2.7/dist-packages/pathod/pathoc.py", line 522, in main
    ret = p.request(spec)
  File "/usr/local/lib/python2.7/dist-packages/pathod/pathoc.py", line 452, in request
    return self.http(r)
  File "/usr/local/lib/python2.7/dist-packages/pathod/pathoc.py", line 432, in http
    return resp
  File "/usr/local/lib/python2.7/dist-packages/pathod/pathoc.py", line 411, in http
    req = language.serve(r, self.wfile, self.settings)
  File "/usr/local/lib/python2.7/dist-packages/pathod/language/__init__.py", line 105, in serve
    disconnect = writer.write_values(fp, vals, actions[:])
  File "/usr/local/lib/python2.7/dist-packages/pathod/language/writer.py", line 61, in write_values
    time.sleep(a[2])
TypeError: a float is required
Any other comments? What have you tried so far?
All other combinations of pause flags work as expected:
$ pathoc www.example.com 'get:/:p2,5'
08-09-16 17:05:07: >> 'GET':/:p2,5
<< 200 OK: 1270 bytes
$ pathoc www.example.com 'get:/:pr,5'
08-09-16 17:05:21: >> 'GET':/:pr,5
<< 200 OK: 1270 bytes
$ pathoc www.example.com 'get:/:pa,5'
08-09-16 17:05:41: >> 'GET':/:pa,5
<< 200 OK: 1270 bytes
$ pathoc www.example.com 'get:/:p2,f'
^C08-09-16 17:04:46: >> 'GET':/:p2,f
$ pathoc www.example.com 'get:/:pr,f'
^C08-09-16 17:04:55: >> 'GET':/:pr,f
pathoc version: 0.17
Operating System: Debian Linux 8.5 "Jessie" x64
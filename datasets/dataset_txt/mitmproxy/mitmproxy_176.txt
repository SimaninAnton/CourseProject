Contributor
BkPHcgQL3V commented on 16 Dec 2018
Steps to reproduce the problem:
Run ./dev.sh
Any other comments? What have you tried so far?
The command's output ends with:
  Running setup.py install for blinker ... done
  Running setup.py install for pycparser ... done
  Running setup.py install for brotlipy ... done
  Running setup.py install for kaitaistruct ... done
  Running setup.py install for ldap3 ... done
  Running setup.py install for pyperclip ... done
  Running setup.py install for tornado ... done
  Running setup.py install for urwid ... done
  Running setup.py install for rstcheck ... done
  Running setup.py develop for mitmproxy
    Complete output from command /home/BkPHcgQL3V/mitmproxy/venv/bin/python3 -c "import setuptools, tokenize;__file__='/home/BkPHcgQL3V/mitmproxy/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\r\n', '\n');f.close();exec(compile(code, __file__, 'exec'))" develop --no-deps --user --prefix=:
    /home/BkPHcgQL3V/mitmproxy/venv/lib/python3.7/site-packages/setuptools/dist.py:397: UserWarning: Normalizing '5.0.0.dev' to '5.0.0.dev0'
      normalized_version,
    usage: -c [global_opts] cmd1 [cmd1_opts] [cmd2 [cmd2_opts] ...]
       or: -c --help [cmd1 cmd2 ...]
       or: -c --help-commands
       or: -c cmd --help
    
    error: option --user not recognized
    
    ----------------------------------------
Command "/home/BkPHcgQL3V/mitmproxy/venv/bin/python3 -c "import setuptools, tokenize;__file__='/home/BkPHcgQL3V/mitmproxy/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\r\n', '\n');f.close();exec(compile(code, __file__, 'exec'))" develop --no-deps --user --prefix=" failed with error code 1 in /home/BkPHcgQL3V/mitmproxy/
You are using pip version 10.0.1, however version 18.1 is available.
You should consider upgrading via the 'pip install --upgrade pip' command.
I've also tried invoking it with a clean PATH (PATH=/bin ./dev.sh), which results in the same error.
I found exactly one reference to this error message, in a blog post (Chinese):
http://codewenda.com/如何轻松分发具有python模块依赖关系的python软件？-unix上python/
It seems to say that there are two implementations of user_install, only one of which has a --user option.
System information
Output is from the distribution package of mitmproxy (whereas I'm trying to set up a development environment):
Mitmproxy: 4.0.4
Python:    3.7.1
OpenSSL:   OpenSSL 1.1.0j  20 Nov 2018
Platform:  Linux-4.18.16-arch1-1-ARCH-x86_64-with-arch
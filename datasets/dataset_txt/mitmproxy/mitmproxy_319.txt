MarvinSmarDTV commented on 26 Apr 2018
Hi,
I use your proxy in transparent mode for intercepting traffic between an IP camera and a client. I want to modify on the fly the ONVIF command sent to the camera.
During my tests the client requests a RTSP stream over HTTP by sending a HTTP GET request to the server and the server respond with 200 OK without "Content-Length" header because it will send more data next. See https://opensource.apple.com/source/QuickTimeStreamingServer/QuickTimeStreamingServer-412.42/Documentation/RTSP_Over_HTTP.pdf for more details.
The problem is that mitmproxy doesn't forward the response to the client.
The response looks like this:
HTTP/1.1 200 OK 
Connection: close 
Content-Type: application/x-rtsp-tunnelled 
How can I handle this please ?
System information
Mitmproxy: 3.0.4
Python: 3.6.4
OpenSSL: OpenSSL 1.1.0h 27 Mar 2018
Platform: Linux-4.14.0-kali3-amd64-x86_64-with-Kali-kali-rolling-kali-rolling
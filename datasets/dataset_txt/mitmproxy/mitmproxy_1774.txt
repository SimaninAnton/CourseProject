apburton commented on 1 Jul 2013
Hi
I am running my libmproxy as a transparent proxy on a remote server. The original request destination details are sent upon socket connection and just prior to the first request (eg an SSL Client Helo). I have written a custom platform resolver to extract this message data and remove it from the socket ( msg = csock.recv(msg_size) ). However, the call to convert_to_ssl (in the Proxy.read_request_transparent function) throw an exception:
NetLibError("SSL handshake error: (-1, 'Unexpected EOF')",)
Any ideas why it might be doing that?
I have also tried sending this initial message out-of-band and reading it in the resolver with csock.recv(msg_size, socket.MSG_OOB) but this is not returning any data as it still appears to be 'in-band'.
Appreciate your comments.
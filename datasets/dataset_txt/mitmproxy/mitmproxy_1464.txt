cxagit commented on 27 Apr 2015
I'm using the response streaming to modify response data seamless and everything works fine so far.
But libmproxy seems to embezzle the last chunk, if the the response data is not an exact multiple of 4096.
For example, I'm downloading a 2224640 bytes file. libmproxy will pass the chunks 0-4096, 4096-8192, ..., 222031 - 2224128 though the generator to the modifier. But the last 512 byte part 2224128-2224640 isn't passed. (But It's passed to the client, it's just not passed to the modifier)
If the file size is 2228224 bytes (a multiple of 4096) also the last chunk is passed.
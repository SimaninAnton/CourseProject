Getting "OSError: raw write() returned invalid length 2 (should have been between 0 and 1)"
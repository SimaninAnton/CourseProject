dutzi commented on 4 Sep 2014
Hi,
I was playing with handle_responseheaders, trying to print the response object (the second param given to handle_responseheaders and got the following error:
Traceback (most recent call last):
  File "./player_proxy.py", line 780, in <module>
    main(sys.argv)
  File "./player_proxy.py", line 777, in main
    m.run()
  File "./player_proxy.py", line 152, in run
    return flow.FlowMaster.run(self)
  File "/Library/Python/2.7/site-packages/libmproxy/controller.py", line 112, in run
    self.tick(self.masterq)
  File "/Library/Python/2.7/site-packages/libmproxy/flow.py", line 606, in tick
    return controller.Master.tick(self, q)
  File "/Library/Python/2.7/site-packages/libmproxy/controller.py", line 102, in tick
    self.handle(*msg)
  File "/Library/Python/2.7/site-packages/libmproxy/controller.py", line 119, in handle
    m(obj)
  File "./player_proxy.py", line 249, in handle_responseheaders
    print resp
  File "/Library/Python/2.7/site-packages/libmproxy/protocol/http.py", line 645, in __repr__
    size=utils.pretty_size(len(self.content))
TypeError: object of type 'NoneType' has no len()
The code that caused this:
247:    def handle_responseheaders(self, resp):
248:        f = resp.flow
249:        print resp
250:        resp.reply()
249:        return f
Contributor
StevenVanAcker commented on 25 Apr 2016 â€¢
edited
Steps to reproduce the problem:
start mitmdump with stickycookies: mitmdump -t "." and point a browser through it
visit https://httpbin.org/cookies/set?aaa=1 to set a cookie
visit https://httpbin.org/cookies/delete?aaa= to delete the cookie
visit https://httpbin.org/cookies to display the cookies
What is the expected behavior?
The expected behavior, according to RFC 6265, is that the cookie is deleted
What went wrong?
The cookie is not deleted
Any other comments?
The cookie library used by mitmproxy is Cookie.py from python, which is woefully outdated.
It implements RFC 2109 from 1997 and does not (yet?) support RFC 6265 from 2011.
RFC 6265 standardises both "expires" and "max-age" attributes which can be used
for expiration control of cookies. A cookie can be deleted by setting "expires" to a date in the past,
or "max-age" to 0.
A more up-to-date cookie library is probably beneficial here. I'm not sure if there are any
special reasons for depending on Cookie.py?
Is it better to attempt to fix cookie.py, or switch mitmproxy to another cookie library?
Mitmproxy Version: latest
Operating System:
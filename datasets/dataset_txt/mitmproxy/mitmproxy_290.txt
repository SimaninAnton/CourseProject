Contributor
ohhorob commented on 26 May 2018
Steps to reproduce the problem:
create an ipv6 network connection to the proxy host on a bridge
set the device to request through the proxy host
watch some traffic start flowing
Addon error: Traceback (most recent call last):
  File "/usr/local/Cellar/mitmproxy/4.0.1/libexec/lib/python3.6/site-packages/mitmproxy/addons/block.py", line 24, in clientconnect
    address = ipaddress.ip_address(layer.client_conn.address[0])
  File "/usr/local/opt/python/Frameworks/Python.framework/Versions/3.6/lib/python3.6/ipaddress.py", line 54, in ip_address
    address)
ValueError: 'fe80::884:9f3b:3afd:6eae%bridge100' does not appear to be an IPv4 or IPv6 address
System information
$ mitmproxy --version
Mitmproxy: 4.0.1 
Python:    3.6.5
OpenSSL:   OpenSSL 1.0.2o  27 Mar 2018
Platform:  Darwin-17.6.0-x86_64-i386-64bit
renebruns commented on 28 May 2015
While playing around with tamper (http://dutzi.github.io/tamper/) I ran into an issue with libmproxy.
Error:
mitmproxy has crashed!
Please lodge a bug report at: https://github.com/mitmproxy/mitmproxy
Traceback (most recent call last):
File "/usr/local/lib/python2.7/site-packages/libmproxy/proxy/server.py", line 99, in handle
protocol_handler(self.conntype)(self, **conn_kwargs).handle_messages()
File "/usr/local/lib/python2.7/site-packages/libmproxy/protocol/http.py", line 994, in handle_messages
while self.handle_flow():
File "/usr/local/lib/python2.7/site-packages/libmproxy/protocol/http.py", line 1098, in handle_flow
self.send_response_to_client(flow)
File "/usr/local/lib/python2.7/site-packages/libmproxy/protocol/http.py", line 1344, in send_response_to_client
self.c.client_conn.send(flow.response.assemble())
File "/usr/local/lib/python2.7/site-packages/libmproxy/protocol/http.py", line 791, in assemble
return head + self.content
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc2 in position 4450: ordinal not in range(128)
Steps to reproduce:
Install latest mitmproxy via pip
Install tamper via pip
Install tamper Chrome extension (https://chrome.google.com/webstore/detail/tamper/mabhojhgigkmnkppkncbkblecnnanfmd)
Open Developer Console and switch to tamper tab
Restart tamper proxy by clicking on the settings wheel in the left box and choosing "Restart Proxy"
Open http://www.seat.de
Click on de.html in the appearing list (eventually you need to configure a text editor for this to work in tamper's settings)
Reload page (from this moment on it tries to serve the de.html file via mitmproxy)
Error can be seen if Chrome is started in debug mode
$ /Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome --enable-logging --v=1
Let me know if you need anything else!
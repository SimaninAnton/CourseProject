Contributor
dlethin commented on 16 May 2015
We're migrating a set of jobs that run integration tests for one of our applications from one server to another. There is a pair of jobs -- one that runs mitmdump to write to a file capturing the http traffic from our tests and then one that runs the same test suite using mitmdump replaying the responses.
This process is working fine our current server, which runs on OSX using v 0.10 of mitmdump. However, we are experiencing one issue on our server we are moving to, which is redhat linux running v0.11.4 of mitmpdump.
One our tests performs and post to a webservice and expects it to succeed with an HTTP 201 status code. It then repeats the same web service call, only this time it expects the call to fail -- because its testing that the process is non-repeatable.
Our test job that uses the actual backend web service succeeds -- the first response passes, 2nd fails.
However, our test job that replays the captured conversation from the above job fails. Both web services calls result in a 201 status, where we expect the 2nd call to fail.
Was there a change in behavior between 0.10 and 0.11.4 that might have introduced this behavior difference?
Is there some switch or configuration option I might be able to tweak to adjust the behavior for sequential requests? I looked at the doc but didn't see anything obvious.
In the meantime, it looks like the capture file is just pure text. I'm going to try to see if I can see anything obvious in them that might provide some clues.
Thanks.
Doug
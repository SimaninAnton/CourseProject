yosradirgham commented on 7 Jun 2019 â€¢
edited
Steps to reproduce the problem:
Install mitmproxy's CA on a rooted Android
open wireshark on the same device on which mitmproxy is running using $ mitmproxy --ssl-insecure
open an application to inspect its HTTPS traffic
Any other comments?
I want to intercept the traffic coming from a specific app, when i first open this app, I can see that mitmproxy does intercept some dafa from it, however it doesn't not intercept all the traffic. Mitmproxy only intercepts https requests that the application sends automatically to update its content, but the https requests I send aren't intercepted by mitmproxy.
What have you tried so far?
I've rooted my android device
I've added the mitmproxy certificate to the root store on my android following these steps
I've tried to run mitmproxy in transparent mode following the steps from the documentation, and when I do, mitmproxy doesn't intercept anything at all.
I've used ProxyDroid to force all the traffic to be redirected to mitmproxy. When I do this, Wireshark does intercept the requests that are sent to the server, but the server never responds, what I get instead is a 502 Bad Gateway message from the proxy. Since this enables me at least to intercept the request that the application sends to the proxy, I tried sending it on postman, and what I get is There was an error connecting to https://192.168.10.211/message.
System information
This is my topology:
Android --> mitmproxy --> server
Android's version is : 6.0.1, it's IP address is 192.168.10.199
Mitmproxy is running on Linux, it's IP address is 192.168.10.264
Server's IP address is 192.168.10.211
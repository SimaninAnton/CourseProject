Calpicow commented on 18 Jun 2015
I'm trying to send a canned response in the responseheaders function, as I'm using the response headers to decide whether I want to continue.
I'm getting this exception:
127.0.0.1:57156: Traceback (most recent call last):
  File "/Library/Python/2.7/site-packages/libmproxy/proxy/server.py", line 125, in handle
    **conn_kwargs).handle_messages()
  File "/Library/Python/2.7/site-packages/libmproxy/protocol/http.py", line 1033, in handle_messages
    while self.handle_flow():
  File "/Library/Python/2.7/site-packages/libmproxy/protocol/http.py", line 1127, in handle_flow
    self.get_response_from_server(flow)
  File "/Library/Python/2.7/site-packages/libmproxy/protocol/http.py", line 1079, in get_response_from_server
    if flow.response.stream:
AttributeError: 'HTTPResponse' object has no attribute 'response'
And the code I'm using:
def responseheaders(context, flow):
    res = HTTPResponse([1, 1], 200, "OK", ODictCaseless(), 'Test')
    flow.reply(res)
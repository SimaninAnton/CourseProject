ghost commented on 4 Aug 2015
Used example script flowwriter.py to collect some data
Then tryed to run it with example script read_dumpfile
getting :
...
        "code": 200, 
        "content": Traceback (most recent call last):
  File "read_dumpfile", line 16, in <module>
    json.dump(f.get_state(), sys.stdout, indent=4)
  File "/usr/lib/python2.7/json/__init__.py", line 189, in dump
    for chunk in iterable:
  File "/usr/lib/python2.7/json/encoder.py", line 434, in _iterencode
    for chunk in _iterencode_dict(o, _current_indent_level):
  File "/usr/lib/python2.7/json/encoder.py", line 408, in _iterencode_dict
    for chunk in chunks:
  File "/usr/lib/python2.7/json/encoder.py", line 390, in _iterencode_dict
    yield _encoder(value)
UnicodeDecodeError: 'utf8' codec can't decode byte 0x8b in position 1: invalid start byte
...
Example file that was collected with flowwrite.py is attached. I filltered out one http response that causes this bug
md5sum logfile
fc0285d300cccc88b757e4ff70bf128b logfile
Tested with mitmproxy commit adf2877
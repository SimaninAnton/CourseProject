arnau commented on 27 Feb 2016
This is question about --ignore I'm not able to solve by reading http://docs.mitmproxy.org/en/stable/features/passthrough.html
Steps to reproduce the problem:
Run mitmdump -I google.com -s foo.py (see below for foo.py's content).
Run curl --proxy http://localhost:8080 http://google.com.
# foo.py
def request(context, flow):
  print("url", flow.request.url)
What is the expected behavior?
I expect the script to not handle the request.
What went wrong?
The requests is handled by the script. The STDOUT shows:
127.0.0.1:65318: clientconnect
('url', 'http://google.com/')
127.0.0.1 GET http://google.com/
 << 302 Found 261B
127.0.0.1:65318: clientdisconnect
Any other comments?
When I run the same but using HTTPS, the request is not handled by the script as I expected.
Run mitmdump -I google.com -s foo.py.
Run curl --proxy http://localhost:8080 https://google.com.
Results in:
127.0.0.1:65318: clientconnect
127.0.0.1:65318: clientdisconnect
If --ignore is only intended to ignore HTTPS traffic, the question is: How do I ignore HTTP traffic too?
Thanks,
Mitmproxy Version: 0.16, 0.15
Operating System: OSX 10.11
Python: 2.7
I tested it with a dockerised Debian 8, Python 2.7 and mitmproxy 0.15 as well with the same result.
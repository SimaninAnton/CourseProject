Member
mhils commented on 24 Aug 2016
Steps to reproduce the problem:
Have a response with a Set-Cookie header that specifies HttpOnly
Try to edit the cookie.
What went wrong?
Traceback (most recent call last):
  File "/mnt/c/Users/user/git/mitmproxy/mitmproxy/console/master.py", line 537, in run
    self.loop.run()
  File "/usr/local/lib/python3.5/dist-packages/urwid/main_loop.py", line 278, in run
    self._run()
  File "/usr/local/lib/python3.5/dist-packages/urwid/main_loop.py", line 376, in _run
    self.event_loop.run()
  File "/usr/local/lib/python3.5/dist-packages/urwid/main_loop.py", line 682, in run
    self._loop()
  File "/usr/local/lib/python3.5/dist-packages/urwid/main_loop.py", line 719, in _loop
    self._watch_files[fd]()
  File "/usr/local/lib/python3.5/dist-packages/urwid/raw_display.py", line 393, in <lambda>
    event_loop, callback, self.get_available_raw_input())
  File "/usr/local/lib/python3.5/dist-packages/urwid/raw_display.py", line 493, in parse_input
    callback(processed, processed_codes)
  File "/usr/local/lib/python3.5/dist-packages/urwid/main_loop.py", line 403, in _update
    self.process_input(keys)
  File "/usr/local/lib/python3.5/dist-packages/urwid/main_loop.py", line 503, in process_input
    k = self._topmost_widget.keypress(self.screen_size, k)
  File "/mnt/c/Users/user/git/mitmproxy/mitmproxy/console/window.py", line 78, in keypress
    k = super(self.__class__, self).keypress(size, k)
  File "/usr/local/lib/python3.5/dist-packages/urwid/container.py", line 1128, in keypress
    return self.body.keypress( (maxcol, remaining), key )
  File "/mnt/c/Users/user/git/mitmproxy/mitmproxy/console/grideditor/base.py", line 370, in keypress
    elif column.keypress(key, self) and not self.handle_key(key):
  File "/mnt/c/Users/user/git/mitmproxy/mitmproxy/console/grideditor/col_subgrid.py", line 37, in keypress
    editor.walker.focus_col
  File "/mnt/c/Users/user/git/mitmproxy/mitmproxy/console/master.py", line 596, in view_grideditor
    ge.make_help()
  File "/usr/local/lib/python3.5/dist-packages/blinker/base.py", line 267, in send
    for receiver in self.receivers_for(sender)]
  File "/usr/local/lib/python3.5/dist-packages/blinker/base.py", line 267, in <listcomp>
    for receiver in self.receivers_for(sender)]
  File "/mnt/c/Users/user/git/mitmproxy/mitmproxy/console/master.py", line 333, in sig_push_view_state
    self.loop.draw_screen()
  File "/usr/local/lib/python3.5/dist-packages/urwid/main_loop.py", line 578, in draw_screen
    canvas = self._topmost_widget.render(self.screen_size, focus=True)
  File "/usr/local/lib/python3.5/dist-packages/urwid/widget.py", line 141, in cached_render
    canv = fn(self, size, focus=focus)
  File "/usr/local/lib/python3.5/dist-packages/urwid/container.py", line 1083, in render
    focus and self.focus_part == 'body')
  File "/usr/local/lib/python3.5/dist-packages/urwid/widget.py", line 141, in cached_render
    canv = fn(self, size, focus=focus)
  File "/usr/local/lib/python3.5/dist-packages/urwid/decoration.py", line 225, in render
    canv = self._original_widget.render(size, focus=focus)
  File "/usr/local/lib/python3.5/dist-packages/urwid/widget.py", line 141, in cached_render
    canv = fn(self, size, focus=focus)
  File "/usr/local/lib/python3.5/dist-packages/urwid/widget.py", line 1750, in render
    canv = get_delegate(self).render(size, focus=focus)
  File "/usr/local/lib/python3.5/dist-packages/urwid/widget.py", line 141, in cached_render
    canv = fn(self, size, focus=focus)
  File "/usr/local/lib/python3.5/dist-packages/urwid/container.py", line 1083, in render
    focus and self.focus_part == 'body')
  File "/usr/local/lib/python3.5/dist-packages/urwid/widget.py", line 141, in cached_render
    canv = fn(self, size, focus=focus)
  File "/usr/local/lib/python3.5/dist-packages/urwid/listbox.py", line 455, in render
    (maxcol, maxrow), focus=focus)
  File "/usr/local/lib/python3.5/dist-packages/urwid/listbox.py", line 337, in calculate_visible
    self._set_focus_complete( (maxcol, maxrow), focus )
  File "/usr/local/lib/python3.5/dist-packages/urwid/listbox.py", line 702, in _set_focus_complete
    (maxcol,maxrow), focus)
  File "/usr/local/lib/python3.5/dist-packages/urwid/listbox.py", line 672, in _set_focus_first_selectable
    (maxcol, maxrow), focus=focus)
  File "/usr/local/lib/python3.5/dist-packages/urwid/listbox.py", line 400, in calculate_visible
    next, pos = self.body.get_next( pos )
  File "/mnt/c/Users/user/git/mitmproxy/mitmproxy/console/grideditor/base.py", line 245, in get_next
    return GridRow(None, False, self.editor, self.lst[pos + 1]), pos + 1
  File "/mnt/c/Users/user/git/mitmproxy/mitmproxy/console/grideditor/base.py", line 86, in __init__
    w = self.editor.columns[i].Display(v)
  File "/mnt/c/Users/user/git/mitmproxy/mitmproxy/console/grideditor/col_text.py", line 19, in Display
    return TDisplay(data, self.encoding_args)
  File "/mnt/c/Users/user/git/mitmproxy/mitmproxy/console/grideditor/col_text.py", line 33, in __init__
    data = data.encode(*self.encoding_args)
AttributeError: 'NoneType' object has no attribute 'encode'
Mitmproxy Version: 0.18
Operating System: Win10 x64
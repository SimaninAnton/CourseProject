nlitsme commented on 30 Oct 2014
proxy/config.py does not pass the ssl_ports parameter to TransparentProxyMode and Socks5ProxyMode.
diff --git a/libmproxy/proxy/config.py b/libmproxy/proxy/config.py
index fe2b45f..2c52899 100644
--- a/libmproxy/proxy/config.py
+++ b/libmproxy/proxy/config.py
@@ -43,9 +43,9 @@ class ProxyConfig:
         self.body_size_limit = body_size_limit

         if mode == "transparent":
-            self.mode = TransparentProxyMode(platform.resolver(), TRANSPARENT_SSL_PORTS)
+            self.mode = TransparentProxyMode(platform.resolver(), ssl_ports)
         elif mode == "socks5":
-            self.mode = Socks5ProxyMode(TRANSPARENT_SSL_PORTS)
+            self.mode = Socks5ProxyMode(ssl_ports)
         elif mode == "reverse":
             self.mode = ReverseProxyMode(upstream_server)
         elif mode == "upstream":
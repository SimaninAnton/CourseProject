rhamnett commented on 24 Feb 2014
If you set up a fake DNS record to resolve guzzoni.apple.com to the IP of your mitmproxy and install the mitmproxy ca-cert.pem on your iPhone, you can intercept the traffic being sent to siri server when making a siri request on the handset.
If you are running dnsmasq it's as simple as this line in the conf:
address=/guzzoni.apple.com/192.168.0.138
I am running mitmproxy like so:
sudo ./mitmproxy -p 443 -P https://guzzoni.apple.com:443
mitmproxy does not seem to complete the request, looks like there are some headers in play that @cortesi seems to suggest mean that siri server would be expecting a single connection to be held open whilst multiple requests ( speech packets I presume) are sent to the siriserver.
This is part of a wider goal to fix github project siriproxy ( https://github.com/plamoni/SiriProxy/ ) which also experiences the same issues.
If someone could kindly investigate as to why the requests to not fully complete and provide an explanation, there would be many many happy people over on this thread: plamoni/SiriProxy#542
Thanks for your consideration.
Richard
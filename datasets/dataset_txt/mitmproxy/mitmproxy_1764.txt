apburton commented on 26 Jul 2013
Hi
I've had my libmproxy based server running for about a week and then it errors with:
Error in processing of request from 80.176.153.206:49325 Traceback (most recent call last):
File "/usr/lib/python2.7/site-packages/netlib/tcp.py", line 353, in request_thread
self.handle_connection(request, client_address)
File "/home/staging/sslproxy/libmproxy/proxy.py", line 559, in handle_connection
h.handle()
File "/home/staging/sslproxy/libmproxy/proxy.py", line 189, in handle
while self.handle_request(cc) and not cc.close:
File "/home/staging/sslproxy/libmproxy/proxy.py", line 204, in handle_request
request = self.read_request(cc)
File "/home/staging/sslproxy/libmproxy/proxy.py", line 473, in read_request
return self.read_request_transparent(client_conn)
File "/home/staging/sslproxy/libmproxy/proxy.py", line 371, in read_request_transparent
self.convert_to_ssl(dummycert, self.config.certfile or self.config.cacert, handle_sni=sni)
File "/usr/lib/python2.7/site-packages/netlib/tcp.py", line 289, in convert_to_ssl
ctx.use_privatekey_file(key)
Error: [('system library', 'fopen', 'Too many open files'), ('BIO routines', 'FILE_CTRL', 'system lib'), ('SSL routines', 'SSL_CTX_use_PrivateKey_file', 'system lib')]
This was a fresh install (with pip install) last week so I should be using the latest packages.
Any ideas?
Thanks
Adrian
NuSkooler commented on 25 Apr 2017
Steps to reproduce the problem:
Perhaps I'm missing something here, but I cannot seem to modify HTTP/2 responses. HTTP/1.1 works fine. The following script breaks when the browser attempts to use HTTP/2:
def response(flow):
 flow.response.headers['X-Filtered'] = 'true'
Invoked with mitmproxy -T --host -s script.py.
Any other comments? What have you tried so far?
If I additionally add --no-http2, the script works correctly. If the browser does not use HTTP/2, everything also works as expected.
System information
Mitmproxy version: 2.0.1 (release version) Precompiled Binary
Python version: 3.5.2
Platform: Linux-3.16.0-4-amd64-x86_64-with-debian-8.7
SSL version: OpenSSL 1.1.0e  16 Feb 2017
Linux distro: debian 8.7 
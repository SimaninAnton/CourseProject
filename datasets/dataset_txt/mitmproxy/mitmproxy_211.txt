jkryanchou commented on 6 Sep 2018 â€¢
edited
Steps to reproduce the problem:
Using https proxy as upstream proxy as following commands: mitmdump --mode upstream:https://foo.com -p 8081 -s ./proxy/flow_dumper.py
The mode represents as below:
Client <--- http ---> MITMproxy<----HTTPS(Proxy)---> Internet
It shows Server disconnected as below
127.0.0.1:51409: HTTP protocol error in client request: Server disconnected
127.0.0.1:51409: clientdisconnect
 << Server disconnected
127.0.0.1:51408: HTTP protocol error in client request: Server disconnected
127.0.0.1:51408: clientdisconnect
127.0.0.1:51412: clientconnect
 << Server disconnected
127.0.0.1:51412: HTTP protocol error in client request: Server disconnected
127.0.0.1:51412: clientdisconnect
127.0.0.1:51419: clientconnect
 << Server disconnected
127.0.0.1:51419: HTTP protocol error in client request: Server disconnected
127.0.0.1:51419: clientdisconnect
127.0.0.1:51429: clientconnect
 << Server disconnected
... ...
Any other comments? What have you tried so far?
I have no idea what options set to mitmproxy. Try several options while it doesn't work.
System information
Mitmproxy: 4.0.4
Python: 3.6.1
OpenSSL: OpenSSL 1.1.0i 14 Aug 2018
Platform: Darwin-17.5.0-x86_64-i386-64bit
qifuren1985 commented on 26 Apr 2016 â€¢
edited by mhils
Steps to reproduce the problem:
init upstream mode
config = proxy.ProxyConfig(
        cadir=os.path.expanduser('./'),
        port=9077,
        mode='upstream',
        upstream_server=("http", ("127.0.0.1", 9977))
    )
    server = proxy.ProxyServer(config)
return HTTPResponse in request
def request(context, flow):
     resp = HTTPResponse(
                "HTTP/1.1", 200, "OK",
                Headers(Content_Type="text/html"),
                "helloworld")
            msg.reply(resp)
use curl to get response
curl "http://www.google.com" -x "http://127.0.0.1:9077" -k
helloworld

curl "https://www.google.com" -x "http://127.0.0.1:9077" -k
curl: (35) error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol
What is the expected behavior?
return helloworld
What went wrong?
curl: (35) error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol
Any other comments?
Mitmproxy Version:
Operating System:
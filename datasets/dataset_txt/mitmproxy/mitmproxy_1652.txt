Jamie-Landeg-Jones commented on 18 Jul 2014
When using mitmproxy with a forward proxy, the displayed log for https connections changes from:
>> GET https://github.com/mitmproxy/mitmproxy
       ← 200 text/html 67.18kB 245.33kB/s
to:
>> CONNECT github.com:443
       ← 200 [no content] 134.87kB/s
   GET https://127.0.0.1:8123/mitmproxy/mitmproxy
       ← 200 text/html 67.25kB 342.91kB/s
I can see why this is occuring - it's simply sort of describing the connection flow process, but I'm assuming it's a bug/oversight.
These are the problems as I see it:
It's messy, more confusing, and uses up more screen space. - Any forward proxy in use is already displayed in the status bar at the bottom of the screen, and the URL displayed shouldn't be dependent on the proxy configuration.
Also, non-https requests are displayed normally, without any indication of the proxy address.
replacement actions don't work without modification - as they key on the same text that is displayed, they need to be altered to deal with the proxy string.
'r' ('replay request') no longer works - trying to replay either the connect or the GET fail, as the two operations should be tied together.
For these reasons, I'd like to attempt changing the screen-output so that it is the same as if a forwarding proxy isn't in use, solving the above problems in the process.
Any thoughts?
Cheers, Jamie
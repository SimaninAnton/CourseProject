Member
mhils commented on 2 Nov 2017 â€¢
edited by cortesi
Umbrella issue for all the console-related improvements that are needed for 3.0. The command/options changes introduced a lot of changes here, and we need to make sure that the regressions aren't too severe:
UX for Keyboard Shortcuts
If I press b in the flow list, :cut.save s.content|@focus appears. It's unclear what I as a user am supposed to do here. (#2650)
Same for |, wherescript.run @focus appears. If I naively press enter it (too) briefly displays "usage: script.run flowspec str". It is at no point obvious that str is for a filename. Same goes for e export, w save file, etc. (#2198)
ctrl+l is a shortcut for "send cuts to clipboard" in the flow list. It is not really clear what that means. (#2650)
Command List (Shift+C) UX is a bit rough around the edges...
console.bodyview - doesn't mention that str must be "request" or "response", crashes when I just try console.bodyview @focused vim. (#2651)
console.choose/console.choose.cmd: Invoking them with zero parameters crashes mitmproxy. It's not clear how I can specify [str]. Where/how do I specify the command that is next invoked and how are args passed - positional? (#2652)
console.edit.focus: Needs docs and an example - not sure what it does at the moment. (#2653)
console.edit.focus.options -> Needs docs and an example - not sure what it does at the moment. "Command returned too much data for display". (#2653, #2654)
console.flowview.mode.set is confusingly named, and should probably be .prompt. (#2655)
Key binding issues
"shift tab" to focus on the next pane doesn't work for me - microsoft/WSL#1770
Given that we really really want to get out 3.0 soon-ish, I would be strongly in favor of not exposing commands to users (of course continue using them internally) for 3.0 and ship it with 4.0. The changes for that would be negligible and we can really focus on getting commands right after that. There really is a lot lot lot of potential in the commands feature, and I think we'd do ourselves a favor if we introduce it in a state where it's not so easy to hate.
@mitmproxy/devs, thoughts?
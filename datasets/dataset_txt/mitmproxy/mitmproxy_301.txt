pravic commented on 17 May 2018 â€¢
edited
Steps to reproduce the problem:
I even compared this behavior with 3.0.4.
4.0.1:
Run mitmweb
Press Ctrl+C in console
Nothing happens.
if you close web browser, you will get a warning:
lib\asyncio\base_events.py:492: RuntimeWarning: coroutine 'Master._shutdown' was never awaited
self._ready.clear()
So, you have to kill python.exe manually.
3.0.4:
Run mitmweb
Press Ctrl+C in console
mitmweb will be closed regardless of a browser.
Any other comments? What have you tried so far?
4.0.1 works fine on Linux. It may be connected with asyncio.
And just a guess: https://gist.github.com/lambdalisue/05d5654bd1ec04992ad316d50924137c (Ctrl+C hotfix patch of asyncio on Windows)
System information
Mitmproxy: 4.0.1
Python: 3.6.2 (3.6.5 - the same issue)
OpenSSL: OpenSSL 1.1.0h 27 Mar 2018
Platform: Windows-7-6.1.7601-SP1
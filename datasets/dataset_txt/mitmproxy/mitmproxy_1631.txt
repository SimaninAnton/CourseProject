clarkewd commented on 26 Aug 2014
I saw issue 328 but I'm still confused. It looks like
change_server should be able to be used with inline scripts. Is that correct?
Basically, how can I have one SSL host handle requests for a different SSL host? i.e. make all requests for https://www.bing.com/ load corresponding resources from https://www.google.com/ ?
I'm using a build from the master branch. Here's are the scripts I tried:
def serverconnect(context, flow):
    flow.live.change_server( ('google.com', '443') )

def request(context, flow):
    flow.live.change_server( ('google.com', '443') )
Those lines are in a file like scripts.py that gets referenced with mitmproxy -s /path/to/scripts.py
Requests continue through the serverconnect hook although they do not seem to affect the remote host etc. Adding the line in the request hook causes the request to crash - although I'm not sure how I can tell mitmproxy that I want to see the exact errors generated.
What am I doing wrong? Thank you again
Contributor
KostyaEsmukov commented on 14 May 2016
Steps to reproduce the problem:
>>> from netlib.http.headers import Headers
>>> h = Headers([['set-cookie', 'fdf'], ['set-cookie', 'htyy']])
>>> h.items()
[('set-cookie', 'fdf, htyy')]
What is the expected behavior?
>>> from netlib.http.headers import Headers
>>> h = Headers([['set-cookie', 'fdf'], ['set-cookie', 'htyy']])
>>> h.items()
[('set-cookie', 'fdf'),('set-cookie', 'htyy')]
What went wrong?
Take a look here: https://github.com/python-hyper/hyper-h2/blob/b2cbb2f1862ee3cab58f88aee92c0414ec67f4e5/h2/stream.py#L734
.items() method is called on headers, thus set-cookie headers are getting folded on HTTP2.
Mitmproxy Version: mitmproxy==0.17
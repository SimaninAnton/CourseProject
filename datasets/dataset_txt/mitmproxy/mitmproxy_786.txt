michaelschem commented on 25 Jan 2017 â€¢
edited
Steps to reproduce the problem:
start mitmdump
mitmdump -w dump -p 8080 --anticomp
start android emulator and point it to the same port
emulator -avd emulator1 -http-proxy localhost:8080
load a couple of https (I used facebook.com) web pages
Eventually this will happen.
Traceback (most recent call last):
  File "/home/mac/.local/bin/mitmdump", line 11, in <module>
    sys.exit(mitmdump())
  File "/home/mac/.local/lib/python2.7/site-packages/mitmproxy/main.py", line 108, in mitmdump
    master.run()
  File "/home/mac/.local/lib/python2.7/site-packages/mitmproxy/dump.py", line 89, in run
    super(DumpMaster, self).run()
  File "/home/mac/.local/lib/python2.7/site-packages/mitmproxy/controller.py", line 142, in run
    self.tick(0.1)
  File "/home/mac/.local/lib/python2.7/site-packages/mitmproxy/controller.py", line 163, in tick
    handle_func(obj)
  File "/home/mac/.local/lib/python2.7/site-packages/mitmproxy/controller.py", line 253, in wrapper
    master.addons(f.__name__, message)
  File "/home/mac/.local/lib/python2.7/site-packages/mitmproxy/addons.py", line 85, in __call__
    self.invoke(i, name, *args, **kwargs)
  File "/home/mac/.local/lib/python2.7/site-packages/mitmproxy/addons.py", line 81, in invoke
    func(*args, **kwargs)
  File "/home/mac/.local/lib/python2.7/site-packages/mitmproxy/builtins/dumper.py", line 233, in error
    self.echo_flow(f)
  File "/home/mac/.local/lib/python2.7/site-packages/mitmproxy/builtins/dumper.py", line 216, in echo_flow
    self.echo(" << {}".format(msg), bold=True, fg="red")
UnicodeEncodeError: 'ascii' codec can't encode character u'\x89' in position 64: ordinal not in range(128)
Any other comments? What have you tried so far?
After googling the issue, there was a stack overflow that mentioned that this might be an issue with using str() vs encode().
http://stackoverflow.com/questions/9942594/unicodeencodeerror-ascii-codec-cant-encode-character-u-xa0-in-position-20
System information
Linux DarkNetLab 4.4.0-31-generic #50-Ubuntu SMP Wed Jul 13 00:07:12 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux
mitmproxy 0.18.2
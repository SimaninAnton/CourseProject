ghost commented on 25 Jun 2015
RFC 7230 (HTTP 1.1) declares in 5.4 Host that it is possible to add the port to the Host header field. For example Host = this.is.some.example.host:8080. This is especially true if not the default port is used.
This is not properly handled by mitmdump. In my first, pre 0.12.1, tests with HTTPS mitmdump generates a bad gateway as response. In my current test with HTTP and port 8080 it seems to work but the output of mitmdump is still incorrect. It uses this.is.some.example.host:8080:8080 in its output.
I am not sure if this is only a display error or if mitmdump internally use the duplicated port and that the old HTTPS server could not handle it but the current HTTP could.
Sjord commented on 20 Nov 2017 â€¢
edited
Steps to reproduce the problem:
I captured some traffic, and ran the following to filter it:
$ mitmdump -r traffic.mitm -w out.mitm '~u main.css'
Proxy server listening at http://[::]:8080
172.16.122.1:51049: GET https://www.sjoerdlangkemper.nl/css/main.css
                 << 304 Not Modified 0b
$
It displays only the matched URL, but it saves all traffic. When done, out.mitm contains the same requests and responses as traffic.mitm. I.e. mitmproxy -r out.mitm shows a lot of requests, where I would expect only the request for main.css.
Any other comments? What have you tried so far?
I tried this with release 2.0.2, and there it worked as expected. This issue seems to be similar to #1089.
System information
$ mitmdump --version
Mitmproxy version: 3.0.0 (2.0.0dev0965-0x168c72a) 
Python version: 3.5.2
Platform: Linux-4.4.0-98-generic-x86_64-with-Ubuntu-16.04-xenial
SSL version: OpenSSL 1.1.0f  25 May 2017
Linux distro: Ubuntu 16.04 xenial
javixeneize commented on 16 Nov 2018
Hi
I have noticed that the docker image of mitmproxy runs as root
However, in the dockerfile less privileged user, mitmproxy, is created
I am trying to modify the dockerfile to start the container as mitmproxy, it is, adding a new step before
VOLUME /home/mitmproxy/.mitmproxy to switch to that user
USER mitmproxy
But, when running it, this user has no write permission in .mitmproxy folder to store the certificate there
with open(os.path.join(path, basename + "-ca.pem"), "wb") as f:
PermissionError: [Errno 13] Permission denied: '/home/mitmproxy/.mitmproxy/mitmproxy-ca.pem'
I have tried to own that folder for mitmproxy user (RUN chown mitmproxy /home/mitmproxy/mitmproxy) and even change the permissions to 777, but i still face that problem
Any idea what could i do to make this work?
Thanks
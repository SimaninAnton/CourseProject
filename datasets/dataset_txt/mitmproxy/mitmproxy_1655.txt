Member
mhils commented on 6 Jul 2014
https://groups.google.com/forum/#!topic/mitmproxy/RMEbEP7j_kc
Gist:
mitmproxy only accepts absolute-urls in regular proxy mode (GET http://example.com/). In reverse proxy mode, this changes to relative form (GET /), as a normal HTTP server would receive. This logic sits in front of everything else. The server replay mode is not aware that the recorded traffic has been in relative form and rightfully complains about the invalid request mode.
TL;DR: A very simple workaround is running mitmproxy -S revproxy.out -R http://127.0.0.1 (arbitrary reverse proxy URL). This sets mitmproxy in relative URL mode and everything works fine.
@cortesi: Do we want to change the behaviour or the documentation?
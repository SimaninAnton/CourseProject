Member
mhils commented on 6 Jul 2014
https://groups.google.com/forum/#!topic/mitmproxy/4YynkCSFUoM
I am writing an app using libmproxy. The example in the libmproxy document shows functions for run, handle_request, and handle_response. I'm wondering if a similar function is available that would get called when the proxy is running and ready to receive traffic. I would like to have a function called at that time so it could start a browser that would drive the traffic through the proxy. Anyone know if libmproxy has something like this? Thanks.
I have tried starting the browser process in the run callback, just before calling controller.Master.run(self). It works in my limited testing so far. However, I'm not sure if this will always work or if I am just getting lucky with the timing (i.e., the browser process takes a while to get going, and that gives the call to controller.Master.run(self) time to get the proxy ready to handle traffic).
Rather than relying on race conditions here, we should have a threading.Event() (like should_exit) that signals that mitmproxy has started.
SmashGuy2 commented on 20 Jun 2017
Hi, I've just install mitmproxy on Bananian. Using Python 3.5 and installed v2.0.2 release version via pip3. Connecting to non-SSL sites works just fine, but when I attempt to connect to SSL sites (google.com in this case), Chrome complains. mitmdump shows various TlsExceptions.
I am posting the output below. The first errors were triggered as I was typing "google.com" into the address bar. When I pressed enter, I received a 301 error followed by the two final errors.
Any help appreciated. Happy to provide whatever additional information I can.
mitmdump -p 8181
HTTP/2 is disabled because ALPN support missing!
OpenSSL 1.0.2+ required to support HTTP/2 connections.
Use --no-http2 to silence this warning.
Proxy server listening at http://0.0.0.0:8181
192.168.101.154:52637: clientconnect
192.168.101.154:52638: clientconnect
192.168.101.154:52635: clientconnect
192.168.101.154:52636: clientconnect
192.168.101.154:52639: clientconnect
192.168.101.154:52637: CONNECT www.google.com:443
<< Cannot establish TLS with client (sni: www.google.com): TlsException("(-1, 'Unexpecte
d EOF')",)
192.168.101.154:52637: clientdisconnect
192.168.101.154:52635: CONNECT www.google.com:443
<< Cannot establish TLS with client (sni: www.google.com): TlsException("(-1, 'Unexpecte
d EOF')",)
192.168.101.154:52635: clientdisconnect
192.168.101.154:52638: CONNECT www.google.com:443
<< Cannot establish TLS with client (sni: www.google.com): TlsException("(-1, 'Unexpecte
d EOF')",)
192.168.101.154:52638: clientdisconnect
192.168.101.154:52636: CONNECT www.google.com:443
<< Cannot establish TLS with client (sni: www.google.com): TlsException("(-1, 'Unexpecte
d EOF')",)
192.168.101.154:52636: clientdisconnect
192.168.101.154:52639: CONNECT www.google.com:443
<< Cannot establish TLS with client (sni: www.google.com): TlsException("(-1, 'Unexpecte
d EOF')",)
192.168.101.154:52639: clientdisconnect
192.168.101.154:52640: clientconnect
192.168.101.154:52641: clientconnect
192.168.101.154:52640: CONNECT www.google.com:443
<< Cannot establish TLS with client (sni: www.google.com): TlsException("(-1, 'Unexpecte
d EOF')",)
192.168.101.154:52640: clientdisconnect
192.168.101.154:52641: CONNECT www.google.com:443
<< Cannot establish TLS with client (sni: www.google.com): TlsException("(-1, 'Unexpecte
d EOF')",)
192.168.101.154:52641: clientdisconnect
192.168.101.154:52642: clientconnect
192.168.101.154:52643: clientconnect
192.168.101.154:52642: CONNECT www.google.com:443
<< Cannot establish TLS with client (sni: www.google.com): TlsException("(-1, 'Unexpecte
d EOF')",)
192.168.101.154:52642: clientdisconnect
192.168.101.154:52644: clientconnect
192.168.101.154:52643: CONNECT www.google.com:443
<< Cannot establish TLS with client (sni: www.google.com): TlsException("(-1, 'Unexpecte
d EOF')",)
192.168.101.154:52643: clientdisconnect
192.168.101.154:52645: clientconnect
192.168.101.154:52646: clientconnect
192.168.101.154:52644: CONNECT www.google.com:443
<< Cannot establish TLS with client (sni: www.google.com): TlsException("(-1, 'Unexpecte
d EOF')",)
192.168.101.154:52644: clientdisconnect
192.168.101.154:52646: CONNECT www.google.com:443
<< Cannot establish TLS with client (sni: www.google.com): TlsException("(-1, 'Unexpecte
d EOF')",)
192.168.101.154:52646: clientdisconnect
192.168.101.154:52645: CONNECT www.google.com:443
<< Cannot establish TLS with client (sni: www.google.com): TlsException("(-1, 'Unexpecte
d EOF')",)
192.168.101.154:52645: clientdisconnect
192.168.101.154:52647: clientconnect
192.168.101.154:52647: GET http://google.com/
<< 301 Moved Permanently 219b
192.168.101.154:52648: clientconnect
192.168.101.154:52648: CONNECT www.google.com:443
<< Cannot establish TLS with client (sni: www.google.com): TlsException("(-1, 'Unexpecte
d EOF')",)
192.168.101.154:52648: clientdisconnect
192.168.101.154:52649: clientconnect
192.168.101.154:52649: CONNECT clients4.google.com:443
<< Cannot establish TLS with client (sni: clients4.google.com): TlsException("(-1, 'Unex
pected EOF')",)
192.168.101.154:52649: clientdisconnect
System information
#mitmproxy --version
Mitmproxy version: 2.0.2 (release version)
Python version: 3.5.2
Platform: Linux-3.4.111-bananian-armv7l-with-debian-8.8
SSL version: OpenSSL 1.0.1t 3 May 2016
Linux distro: debian 8.8
clarkewd commented on 29 Jul 2014
Hi Max,
Would it be possible to do something like this:
mitmproxy -R https2http://\*:80
The idea would be that it would match all SSL traffic and redirect it to http, for multiple domains. The use would be for testing SSL when developing locally. Granted it works if the URL that is accessed in the browser is https://localhost:8080 and the command is mitmproxy -R https2http://localhost:80 - but my issue is that I have multiple local domain names setup in my /etc/hosts file.
Basically it throws this error:
You attempted to reach https://sandbox, but instead you actually reached a server identifying itself as https://localhost
I checked out the Reverse Proxy Documentation Issue and the SSL23_GET_CLIENT_HELLO issues, and I realize that the https2http / http2https features are still undocumented but was still not able to figure this out.
I guess this could be the issue with the CONNECT before REQUEST way that the SSL handshake works? ... basically that the server name has to be specified via the command line since the hostname is not sent with the CONNECT ?
However, with the Complication 3: Server Name Indication it looks like there are some possible workarounds. Are they already built in or would this have to be something we would need to write?
Thanks!
ankitsaini2609 commented on 20 Jan 2018 â€¢
edited
Steps to reproduce the problem:
Run mitmproxy
Make a new request using n press enter twice to create the request.
Go to response tab in console view
Edit the response using e and select response headers
You will get the following Screen
Reason :
It is due to the following line in mitmproxy/tools/console/consoleaddons.py
elif part == "response-headers":
            self.master.switch_view("edit_focus_response_headers")
Solution :
I have added a check for flow.response being NoneType
elif part == "response-headers":
    message = flow.response
    if not message:
        raise exceptions.CommandError("Flow has no {}.".format(part.split("-")[0]))
    self.master.switch_view("edit_focus_response_headers")
System information
Mitmproxy: 3.0.0.dev1147 (commit b7db304) 
Python:    3.6.4
OpenSSL:   OpenSSL 1.1.0g  2 Nov 2017
Platform:  Linux-4.14.0-kali3-amd64-x86_64-with-Kali-kali-rolling-kali-rolling
gajus commented on 16 Mar 2016
Steps to reproduce the problem:
Make request to get http://m.cinemasgaumontpathe.com/cinemas/.
GET /cinemas/ HTTP/1.1
encoding: iso-8859-1
host: m.cinemasgaumontpathe.com
Connection: close
What is the expected behavior?
Expected to see original headers, without Transfer-Encoding: chunked, e.g.
$ curl -I http://m.cinemasgaumontpathe.com/cinemas/
HTTP/1.1 200 OK
Server: Apache
Pragma: no-cache
Last-Modified: Wed, 16 Mar 2016 12:46:15 +0100
Content-Type: text/html; charset=iso-8859-1
Cache-Control: no-cache, no-store
Date: Wed, 16 Mar 2016 11:46:15 GMT
Connection: keep-alive
What went wrong?
Response includes Transfer-Encoding: chunked and Content-Length headers.
HTTP/1.1 200 OK
Server: Apache
Pragma: no-cache
Last-Modified: Wed, 16 Mar 2016 12:46:55 +0100
Content-Type: text/html; charset=iso-8859-1
X-Akamai-Transformed: 9 5509 0 pmb=mRUM,1
Cache-Control: no-cache, no-store
Date: Wed, 16 Mar 2016 11:46:55 GMT
Transfer-Encoding: chunked
Connection: close
Connection: Transfer-Encoding
Vary: Accept-Encoding, User-Agent
content-length: 33907

8473
Any other comments?
Chunked transfer encoding must not include Content-Length header (https://en.wikipedia.org/wiki/Chunked_transfer_encoding).
Related issue request/request#2091
Mitmproxy Version: v0.15
Operating System: OSX v10.11.3
CorTal commented on 26 Feb 2018 â€¢
edited
Steps to reproduce the problem:
1.Install latest version of mitmproxy
2. Try to run mitmdump without any arguments
Any other comments? What have you tried so far?
In order to use mitmproxy and adapt it to my use, I did all the steps to start the development.
I managed to make it work last Friday but now mitmdump says that it can't find the .mitmproxy repertory.
It might be a problem from my PATH or my environment, but then I tried to put directly the path to the file with the option "--set cadir", I tried to put directly in the command line the path and I got the same error.

Because of this error, I'm unable to see the --options display since it crashes before (Which can make it difficult to correct that issue).
So then, I went into the "mitmproxy/options.py" directly to put the path in the variable "CA_DIR", making it working.

I used the working state of mitmdump to use the --options and put the output in a config file. In this config file, I modified directly the "cadir" line with the exact same path I wrote in the command line with --set.

Then, reverted my modifications to "options.py" to return back to the initial state and gave my config file to the command line with --conf and made it work.
So I wondered that maybe the --set option wasn't working properly, but maybe I'm wrong. And I wondered too if any troubles with the Windows PATH handling got into the new updates of mitmproxy
UPDATE 1
After getting through to understand better what's going on, I realized that on start, the proxy is initiated first with default values from options.py, and then some lines after, the options are modified accordingly to the --set commands.
So, it may not be an issue here, but the thing is that if mitmproxy's default configuration of path to .mitmproxy is incorrect for the current system, it is not possible to put "--set cadir='...'" because it will crash before.
System information
Misc
I use that issue to thank you for that amazing tool I will be using in my apprenticeship, you're doing an amazing work and I'm really grateful for giving us that tool.
Contributor
gcmurphy commented on 22 May 2018
Steps to reproduce the problem:
Start the following addon with mitmproxy --scripts eg.py
from mitmproxy import http, ctx

class MyAddon:
    def load(self, loader) -> None:
        loader.add_option(name='AAAAA_addon_message',
                          typespec=str,
                          default='your request is bad and you should feel bad',
                          help='Respond with this message')

        loader.add_option(name='AAAAA_addon_status_code',
                          typespec=int,
                          default=400,
                          help='Respond with this status code')

    def request(self, flow: http.HTTPFlow) -> None:
        ctx.log.info('my_addon request')

    def response(self, flow: http.HTTPFlow) -> None:
        ctx.log.info('my_addon response')
        flow.response.status_code = ctx.options.AAAAA_status_code 
        flow.response.content = ctx.options.AAAAA_addon_message.encode('utf-8')

addons = [
    MyAddon()
]
Open the options with 'O' key binding and see the options AAAA_* are not editable
Any other comments? What have you tried so far?
mitmweb displays the options correctly:
Could be related to the deferred options?
This affects the current version 4.0.1 as well as master.
System information
(venv) ➜  mitmproxy git:(master) ✗ mitmproxy --version
Mitmproxy: 5.0.0.dev12 (commit 7aaf495) 
Python:    3.6.5
OpenSSL:   OpenSSL 1.1.0h  27 Mar 2018
Platform:  Darwin-17.5.0-x86_64-i386-64bit
jpstotz commented on 23 Oct 2019
Currently mitmproxy opens the proxy port always using the option allow_reuse_address = True without any exception.
mitmproxy/mitmproxy/proxy/server.py
Lines 35 to 36 in e74e97b
 class ProxyServer(tcp.TCPServer): 
     allow_reuse_address = True 
In my understanding this option should only be set in cases where load distribution by using multiple processes is used. Or is there any other mitmproxy related use case I don't see that requires multiple mitmproxy instances listening on the same proxy port for incoming requests?
On the other hand the current situation with allow_reuse_address = True can lead nondeterministic behavior in situations where multiple mproxy/mitmdump instances are using the same proxy port (or even other third party programs).
Therefore I suggestion is to change this and set allow_reuse_address = False or at least provide an command-line option to set the default reuse behavior for the proxy port.
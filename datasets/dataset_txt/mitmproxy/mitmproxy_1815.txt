hendersj commented on 27 Oct 2012
If I run mitmproxy and set Firefox up to use it, I get the following crash:
Traceback (most recent call last):
File "/usr/local/bin/mitmproxy", line 64, in
m.run()
File "/usr/local/lib/python2.7/site-packages/libmproxy/console/init.py", line 538, in run
self.ui.run_wrapper(self.loop)
File "/usr/local/lib64/python2.7/site-packages/urwid/raw_display.py", line 242, in run_wrapper
return fn()
File "/usr/local/lib/python2.7/site-packages/libmproxy/console/init.py", line 747, in loop
changed = self.tick(self.masterq)
File "/usr/local/lib/python2.7/site-packages/libmproxy/flow.py", line 1421, in tick
return controller.Master.tick(self, q)
File "/usr/local/lib/python2.7/site-packages/libmproxy/controller.py", line 77, in tick
self.handle(msg)
File "/usr/local/lib/python2.7/site-packages/libmproxy/controller.py", line 95, in handle
m(msg)
File "/usr/local/lib/python2.7/site-packages/libmproxy/flow.py", line 1499, in handle_clientconnect
self.add_event("Connect from: %s:%s"%cc.address)
File "/usr/local/lib/python2.7/site-packages/libmproxy/console/init.py", line 948, in add_event
self.eventlist.set_focus(len(self.eventlist))
File "/usr/local/lib64/python2.7/site-packages/urwid/listbox.py", line 178, in set_focus
raise IndexError, "No widget at position %s" % (position,)
IndexError: No widget at position 1
I also get a crash if I try to bring up the eventlog:
Traceback (most recent call last):
File "/usr/local/bin/mitmproxy", line 64, in
m.run()
File "/usr/local/lib/python2.7/site-packages/libmproxy/console/init.py", line 538, in run
self.ui.run_wrapper(self.loop)
File "/usr/local/lib64/python2.7/site-packages/urwid/raw_display.py", line 242, in run_wrapper
return fn()
File "/usr/local/lib/python2.7/site-packages/libmproxy/console/init.py", line 766, in loop
k = self.view.keypress(size, k)
File "/usr/local/lib64/python2.7/site-packages/urwid/container.py", line 1103, in keypress
return self.body.keypress( (maxcol, remaining), key )
File "/usr/local/lib/python2.7/site-packages/libmproxy/console/flowlist.py", line 208, in keypress
self.master.toggle_eventlog()
File "/usr/local/lib/python2.7/site-packages/libmproxy/console/init.py", line 430, in toggle_eventlog
self.view_flowlist()
File "/usr/local/lib/python2.7/site-packages/libmproxy/console/init.py", line 585, in view_flowlist
self.body = flowlist.BodyPile(self)
File "/usr/local/lib/python2.7/site-packages/libmproxy/console/flowlist.py", line 76, in init
self.focus = 0
AttributeError: can't set attribute
They both seem to be related, but I'm not sure - any suggestions on how to resolve?
This was installed using pip earlier this evening. The system is x86_64 openSUSE 12.1 with the current updates (as of now) applied.
mitmdump seems to work OK.
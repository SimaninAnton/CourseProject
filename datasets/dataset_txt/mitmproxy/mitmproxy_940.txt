sabberworm commented on 19 Sep 2016 â€¢
edited
Steps to reproduce the problem:
Run mitmdump -R http://host1.example.com -p 8080
Edit /etc/hosts to let host2.example.com point to the host/interface running mitmdump, e.g. 127.0.0.1
Connect to https://host2.example.com:8080 using a browser that has the mitmproxy root CA installed
What is the expected behavior?
mitmdump should create a certificate for the SNI host that the client requested, host2.example.com.
What went wrong?
mitmdump sends a certificate that is valid for the configured upstream host name, host1.example.com.
Any other comments? What have you tried so far?
This behaviour change could also be implemented behind a command-line option to not break existing workflows.
Mitmproxy Version: mitmdump 0.17
Operating System: alpine:3.4 docker image
Member
cortesi commented on 26 Jul 2016
Steps to reproduce the problem:
Use mitmproxy Python 3
Try to edit a query component ("e" -> "q" -> etc.)
What is the expected behavior?
No crash
What went wrong?
Traceback (most recent call last): File "/Users/cortesi/mitmproxy/mitmproxy/mitmproxy/console/master.py", line 515, in run self.loop.run() File "/Users/cortesi/mitmproxy/mitmproxy/venv3.5/lib/python3.5/site-packages/urwid/main_loop.py", line 278, in run self._run() File "/Users/cortesi/mitmproxy/mitmproxy/venv3.5/lib/python3.5/site-packages/urwid/main_loop.py", line 376, in _run self.event_loop.run() File "/Users/cortesi/mitmproxy/mitmproxy/venv3.5/lib/python3.5/site-packages/urwid/main_loop.py", line 682, in run self._loop() File "/Users/cortesi/mitmproxy/mitmproxy/venv3.5/lib/python3.5/site-packages/urwid/main_loop.py", line 719, in _loop self._watch_files[fd]() File "/Users/cortesi/mitmproxy/mitmproxy/venv3.5/lib/python3.5/site-packages/urwid/raw_display.py", line 393, in <lambda> event_loop, callback, self.get_available_raw_input()) File "/Users/cortesi/mitmproxy/mitmproxy/venv3.5/lib/python3.5/site-packages/urwid/raw_display.py", line 493, in parse_input callback(processed, processed_codes) File "/Users/cortesi/mitmproxy/mitmproxy/venv3.5/lib/python3.5/site-packages/urwid/main_loop.py", line 403, in _update self.process_input(keys) File "/Users/cortesi/mitmproxy/mitmproxy/venv3.5/lib/python3.5/site-packages/urwid/main_loop.py", line 503, in process_input k = self._topmost_widget.keypress(self.screen_size, k) File "/Users/cortesi/mitmproxy/mitmproxy/mitmproxy/console/window.py", line 42, in keypress k = super(self.__class__, self).keypress(size, k) File "/Users/cortesi/mitmproxy/mitmproxy/venv3.5/lib/python3.5/site-packages/urwid/container.py", line 1128, in keypress return self.body.keypress( (maxcol, remaining), key ) File "/Users/cortesi/mitmproxy/mitmproxy/mitmproxy/console/grideditor/base.py", line 370, in keypress elif column.keypress(key, self) and not self.handle_key(key): File "/Users/cortesi/mitmproxy/mitmproxy/mitmproxy/console/grideditor/col_bytes.py", line 63, in keypress n = editor.master.spawn_editor(o) File "/Users/cortesi/mitmproxy/mitmproxy/mitmproxy/console/master.py", line 395, in spawn_editor os.write(fd, data) TypeError: a bytes-like object is required, not 'str'
mitmproxy --sysinfo
Mitmproxy version: 0.18
Python version: 3.5.1
Platform: Darwin-15.6.0-x86_64-i386-64bit
SSL version: OpenSSL 1.0.2h 3 May 2016
Mac version: 10.11.6 ('', '', '') x86_64
Member
Kriechi commented on 18 Nov 2016 â€¢
edited
weebly.com
curl -L -k -s -A 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10.12; rv:50.0) Gecko/20100101 Firefox/50.0' --proxy http://localhost:8080 http://weebly.com/ -v
gives:
127.0.0.1:60757: clientconnect
127.0.0.1:60757: GET http://weebly.com/
              << 301 Moved Permanently 230b
127.0.0.1:60757: GET http://www.weebly.com/
              << 302 Found 0b
127.0.0.1:60757: GET http://www.weebly.com/dehttp://www.weebly.com:80/
              << 301 Moved Permanently 661b
after which the client connection just hangs. This seems to be related to first-line format being absolute.
Same for bbc.co.uk
addthis.com
curl -L -k -s -A 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10.12; rv:50.0) Gecko/20100101 Firefox/50.0' --proxy http://localhost:8080 http://addthis.com/ -v
gives:
127.0.0.1:61559: clientconnect
127.0.0.1:61559: GET http://addthis.com/
              << 400 Bad Request 0b
127.0.0.1:61559: clientdisconnect
> GET http://addthis.com/ HTTP/1.1
> Host: addthis.com
> User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.12; rv:50.0) Gecko/20100101 Firefox/50.0
> Accept: */*
> Proxy-Connection: Keep-Alive
>
< HTTP/1.1 400 Bad Request
< Date: Fri, 18 Nov 2016 18:09:02 GMT
< Transfer-Encoding: chunked
< Connection: keep-alive
< Server: cloudflare-nginx
< CF-RAY: 303d5f05901763df-FRA
<
same for soundcloud.com and www.huffingtonpost.com
ref #1754
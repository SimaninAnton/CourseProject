therealklanni commented on 3 Dec 2014
I am getting this a lot:
mitmproxy has crashed!
Please lodge a bug report at: https://github.com/mitmproxy/mitmproxy
 Traceback (most recent call last):
  File "/usr/local/lib/python2.7/site-packages/libmproxy/proxy/server.py", line 100, in handle
    protocol_handler(self.conntype)(self, **conn_kwargs).handle_messages()
  File "/usr/local/lib/python2.7/site-packages/libmproxy/protocol/http.py", line 1001, in handle_messages
    while self.handle_flow():
  File "/usr/local/lib/python2.7/site-packages/libmproxy/protocol/http.py", line 1074, in handle_flow
    ret = self.process_request(flow, req)
  File "/usr/local/lib/python2.7/site-packages/libmproxy/protocol/http.py", line 1268, in process_request
    return self.process_connect_request(self.c.server_conn.address)
  File "/usr/local/lib/python2.7/site-packages/libmproxy/protocol/http.py", line 1409, in process_connect_request
    self.c.establish_ssl(server=True, client=True)
  File "/usr/local/lib/python2.7/site-packages/libmproxy/proxy/server.py", line 198, in establish_ssl
    chain_file=chain_file
  File "/usr/local/lib/python2.7/site-packages/libmproxy/proxy/connection.py", line 66, in convert_to_ssl
    tcp.BaseHandler.convert_to_ssl(self, *args, **kwargs)
  File "/usr/local/lib/python2.7/site-packages/netlib/tcp.py", line 426, in convert_to_ssl
    ctx = self._create_ssl_context(cert, key, **sslctx_kwargs)
  File "/usr/local/lib/python2.7/site-packages/netlib/tcp.py", line 410, in _create_ssl_context
    ctx.use_certificate(cert.x509)
  File "/usr/local/lib/python2.7/site-packages/OpenSSL/SSL.py", line 406, in use_certificate
    _raise_current_error()
  File "/usr/local/lib/python2.7/site-packages/OpenSSL/_util.py", line 22, in exception_from_error_queue
    raise exceptionType(errors)
Error: [('SSL routines', 'SSL_SET_CERT', 'unknown certificate type')]
$ mitmproxy --version
mitmproxy 0.11
$ python --version
Python 2.7.8
Not sure if relevant:
$ ssh -V
OpenSSH_6.2p2, OSSLShim 0.9.8r 8 Dec 2011
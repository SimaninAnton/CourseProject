adr-arroyo commented on 22 Apr 2019 â€¢
edited
Steps to reproduce the problem:
Created the following dockerfile:
FROM mitmproxy/mitmproxy:latest

RUN mkdir data_tampering
WORKDIR /home/$USER/data_tampering
COPY ./modify_content.py .


EXPOSE 80:80
EXPOSE 8080:8080

ENTRYPOINT ["mitmdump --mode transparent -s ./modify_content.py"]
Build image by: docker build . -t mitmdump_tampering
RUN image with: docker run -it mitmdump_tampering:latest resulting in:
docker: Error response from daemon: OCI runtime create failed: container_linux.go:348: starting container process caused "exec: "mitmdump --mode transparent -s ./modify_content.py": stat mitmdump --mode transparent -s ./modify_content.py: no such file or directory": unknown.
Any other comments? What have you tried so far?
I have iteratively run the container (with docker run -it mitmdump_tampering /bin/bash) without the ENTRYPOINT and mitmdump runs successfully with the python script INSIDE the container. However, if I directly run the container from the host, i get the error above. I cannot see the reason for this
System information
Mitmproxy: 4.0.4
Python: 3.6.7
OpenSSL: OpenSSL 1.1.0g 2 Nov 2017
Platform: Linux-4.15.0-47-generic-x86_64-with-Ubuntu-18.04-bionic
lorenmh commented on 13 Aug 2016
I have a subclass of Serializer with a custom init method that has an additional parameter. Somehow this is causing DRF to output the following assertion error (when I am NOT using the data kwarg at all):
AssertionError: When a serializer is passed a data keyword argument you must call .is_valid() before attempting to access the serialized .data representation.
You should either call .is_valid() first, or access .initial_data instead.
I have a simple 'error.py' file here which demonstrates the issue:
from rest_framework.serializers import Serializer, CharField

class Foo(Serializer):
    foo = CharField()
    def __init__(self, some_param, *args, **kwargs):
        self.some_param = some_param
        super(Foo, self).__init__(*args, **kwargs)

bar = [{'foo':1}, {'foo':2}, {'foo':3}]

serializer = Foo('some_param', bar, many=True)
print serializer.data
Also added this repo where you can clone it and run it (if you trust running a shell script from the internet ;) ):
https://github.com/lorenmh/drf-error
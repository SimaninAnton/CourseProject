jonasgeiregat commented on 17 Oct 2012
Hello,
While fiddling around with this great new version of rest-framework I stumbled upon something I didn't expect.
I was using the generics.ListCreateAPIView. While the docs note that authentication_classes can be used with an APIView I was expecting the same behavior for the generics classes.
As a way around this I wrote the following snippet, to check for authentication on generics classes.
def get(self, request, *args, **kwargs):
    parser_context = self.get_parser_context(request)

    req = Request(request,
                  parsers=self.get_parsers(),
                  authenticators=self.get_authenticators(),
                  negotiator=self.get_content_negotiator(),
                  parser_context=parser_context)

    if req.user.is_anonymous():
        return HttpResponseNotAllowed("Unauthorised")

    return super(MealsResource, self).get(request, *args, **kwargs)
Could this possibly be a good solution ? If so couldn't a decorator be written to encapsulate the authentication for all generic classes in generics.py in such a way as written above ?
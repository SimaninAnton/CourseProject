xhochipe commented on 8 Oct 2017
def get(self, request, format=None):
    goods = Goods.objects.all()[:10]
    goods_serializer = GoodsSerializer(goods, many=True)
    return Response(goods_serializer.data)
goods_serializer.data 里面有数据面试一个ReturnList
不知道为什么访问接口页面报错，根据文档操作下来的
Environment:
Request Method: GET
Request URL: http://127.0.0.1:8000/goods/
Django Version: 1.11.6
Python Version: 3.6.1
Installed Applications:
['django.contrib.auth',
'django.contrib.contenttypes',
'django.contrib.sessions',
'django.contrib.messages',
'django.contrib.staticfiles',
'apps.users.apps.UsersConfig',
'rest_framework',
'DjangoUeditor',
'goods',
'trade',
'user_operation',
'xadmin',
'crispy_forms']
Installed Middleware:
['django.middleware.security.SecurityMiddleware',
'django.contrib.sessions.middleware.SessionMiddleware',
'django.middleware.common.CommonMiddleware',
'django.middleware.csrf.CsrfViewMiddleware',
'django.contrib.auth.middleware.AuthenticationMiddleware',
'django.contrib.messages.middleware.MessageMiddleware',
'django.middleware.clickjacking.XFrameOptionsMiddleware']
Template error:
In template D:\Program Files (x86)\python\pythonenv\lib\site-packages\rest_framework\templates\rest_framework\base.html, error at line 48
str returned non-string (type NoneType) 38 :
39 : {% block branding %}
40 :
41 : Django REST framework
42 :
43 : {% endblock %}
44 :
45 :

46 : {% block userlinks %}
47 : {% if user.is_authenticated %}
48 : {% optional_logout request user %}
49 : {% else %}
50 : {% optional_login request %}
51 : {% endif %}
52 : {% endblock %}
53 :

54 :
55 :
56 : {% endblock %}
57 :
58 :
Traceback:
File "D:\Program Files (x86)\python\pythonenv\lib\site-packages\django\core\handlers\exception.py" in inner
41. response = get_response(request)
File "D:\Program Files (x86)\python\pythonenv\lib\site-packages\django\core\handlers\base.py" in _get_response
217. response = self.process_exception_by_middleware(e, request)
File "D:\Program Files (x86)\python\pythonenv\lib\site-packages\django\core\handlers\base.py" in _get_response
215. response = response.render()
File "D:\Program Files (x86)\python\pythonenv\lib\site-packages\django\template\response.py" in render
107. self.content = self.rendered_content
File "D:\Program Files (x86)\python\pythonenv\lib\site-packages\rest_framework\response.py" in rendered_content
72. ret = renderer.render(self.data, accepted_media_type, context)
File "D:\Program Files (x86)\python\pythonenv\lib\site-packages\rest_framework\renderers.py" in render
709. ret = template.render(context, request=renderer_context['request'])
File "D:\Program Files (x86)\python\pythonenv\lib\site-packages\django\template\backends\django.py" in render
66. return self.template.render(context)
File "D:\Program Files (x86)\python\pythonenv\lib\site-packages\django\template\base.py" in render
207. return self._render(context)
File "D:\Program Files (x86)\python\pythonenv\lib\site-packages\django\template\base.py" in _render
199. return self.nodelist.render(context)
File "D:\Program Files (x86)\python\pythonenv\lib\site-packages\django\template\base.py" in render
990. bit = node.render_annotated(context)
File "D:\Program Files (x86)\python\pythonenv\lib\site-packages\django\template\base.py" in render_annotated
957. return self.render(context)
File "D:\Program Files (x86)\python\pythonenv\lib\site-packages\django\template\loader_tags.py" in render
177. return compiled_parent._render(context)
File "D:\Program Files (x86)\python\pythonenv\lib\site-packages\django\template\base.py" in _render
199. return self.nodelist.render(context)
File "D:\Program Files (x86)\python\pythonenv\lib\site-packages\django\template\base.py" in render
990. bit = node.render_annotated(context)
File "D:\Program Files (x86)\python\pythonenv\lib\site-packages\django\template\base.py" in render_annotated
957. return self.render(context)
File "D:\Program Files (x86)\python\pythonenv\lib\site-packages\django\template\loader_tags.py" in render
72. result = block.nodelist.render(context)
File "D:\Program Files (x86)\python\pythonenv\lib\site-packages\django\template\base.py" in render
990. bit = node.render_annotated(context)
File "D:\Program Files (x86)\python\pythonenv\lib\site-packages\django\template\base.py" in render_annotated
957. return self.render(context)
File "D:\Program Files (x86)\python\pythonenv\lib\site-packages\django\template\loader_tags.py" in render
72. result = block.nodelist.render(context)
File "D:\Program Files (x86)\python\pythonenv\lib\site-packages\django\template\base.py" in render
990. bit = node.render_annotated(context)
File "D:\Program Files (x86)\python\pythonenv\lib\site-packages\django\template\base.py" in render_annotated
957. return self.render(context)
File "D:\Program Files (x86)\python\pythonenv\lib\site-packages\django\template\loader_tags.py" in render
72. result = block.nodelist.render(context)
File "D:\Program Files (x86)\python\pythonenv\lib\site-packages\django\template\base.py" in render
990. bit = node.render_annotated(context)
File "D:\Program Files (x86)\python\pythonenv\lib\site-packages\django\template\base.py" in render_annotated
957. return self.render(context)
File "D:\Program Files (x86)\python\pythonenv\lib\site-packages\django\template\defaulttags.py" in render
322. return nodelist.render(context)
File "D:\Program Files (x86)\python\pythonenv\lib\site-packages\django\template\base.py" in render
990. bit = node.render_annotated(context)
File "D:\Program Files (x86)\python\pythonenv\lib\site-packages\django\template\base.py" in render_annotated
957. return self.render(context)
File "D:\Program Files (x86)\python\pythonenv\lib\site-packages\django\template\library.py" in render
203. output = self.func(*resolved_args, **resolved_kwargs)
File "D:\Program Files (x86)\python\pythonenv\lib\site-packages\rest_framework\templatetags\rest_framework.py" in optional_logout
146. snippet = format_html(snippet, user=escape(user), href=logout_url, next=escape(request.path))
File "D:\Program Files (x86)\python\pythonenv\lib\site-packages\django\utils\functional.py" in wrapper
219. return func(*args, **kwargs)
File "D:\Program Files (x86)\python\pythonenv\lib\site-packages\django\utils\html.py" in escape
49. force_text(text).replace('&', '&').replace('<', '<')
File "D:\Program Files (x86)\python\pythonenv\lib\site-packages\django\utils\encoding.py" in force_text
76. s = six.text_type(s)
File "D:\Program Files (x86)\python\pythonenv\lib\site-packages\django\utils\functional.py" in inner
239. return func(self._wrapped, *args)
Exception Type: TypeError at /goods/
Exception Value: str returned non-string (type NoneType)
mmmcorpsvit commented on 28 Sep 2018 â€¢
edited
Checklist
I have verified that that issue exists against the master branch of Django REST framework.
I have searched for similar issues in both open and closed tickets and cannot find a duplicate.
This is not a usage question. (Those should be directed to the discussion group instead.)
This cannot be dealt with as a third party library. (We prefer new functionality to be in the form of third party libraries where possible.)
I have reduced the issue to the simplest possible case.
I have included a failing test as a pull request. (If you are unable to do so we can still accept the issue.)
Steps to reproduce
class PlainTextRenderer(renderers.BaseRenderer):
    media_type = 'text/plain'
    format = 'txt'

    def render(self, data, media_type=None, renderer_context=None):
        raise ValueError(str(data))
        # logger.debug(str(data))
        return str(data)
        #return data.encode(self.charset)

.
.
.
    @renderer_classes((PlainTextRenderer,))
    def get_balance(self):
        return Response('balance:%s' % self.user.balance) # <- Plaine
not have raise error. @renderer_classes - ignore?
ok, add decorator api_view how describe there: http://www.django-rest-framework.org/api-guide/views/#api-policy-decorators
    @api_view(['GET', 'POST'])
    @renderer_classes((PlainTextRenderer,))
    def get_balance(self):
        return Response('ACCESS_BALANCE:%s' % self.user.balance)
get:
Traceback:  

File "/home/smslike/venv/lib/python3.5/site-packages/django/core/handlers/exception.py" in inner
  41.             response = get_response(request)

File "/home/smslike/venv/lib/python3.5/site-packages/django/core/handlers/base.py" in _get_response
  187.                 response = self.process_exception_by_middleware(e, request)

File "/home/smslike/venv/lib/python3.5/site-packages/django/core/handlers/base.py" in _get_response
  185.                 response = wrapped_callback(request, *callback_args, **callback_kwargs)

File "/home/smslike/venv/lib/python3.5/site-packages/django/views/decorators/csrf.py" in wrapped_view
  58.         return view_func(*args, **kwargs)

File "/home/smslike/venv/lib/python3.5/site-packages/django/views/generic/base.py" in view
  68.             return self.dispatch(request, *args, **kwargs)

File "/home/smslike/venv/lib/python3.5/site-packages/rest_framework/views.py" in dispatch
  489.             response = self.handle_exception(exc)

File "/home/smslike/venv/lib/python3.5/site-packages/rest_framework/views.py" in handle_exception
  449.             self.raise_uncaught_exception(exc)

File "/home/smslike/venv/lib/python3.5/site-packages/rest_framework/views.py" in dispatch
  486.             response = handler(request, *args, **kwargs)

File "./api/sms_activate.py" in get
  221.                 return getattr(self, ACTION_CHOICES[action])()

File "/home/smslike/venv/lib/python3.5/site-packages/django/views/decorators/csrf.py" in wrapped_view
  58.         return view_func(*args, **kwargs)

File "/home/smslike/venv/lib/python3.5/site-packages/django/views/generic/base.py" in view
  68.             return self.dispatch(request, *args, **kwargs)

File "/home/smslike/venv/lib/python3.5/site-packages/rest_framework/views.py" in dispatch
  472.         request = self.initialize_request(request, *args, **kwargs)

File "/home/smslike/venv/lib/python3.5/site-packages/rest_framework/views.py" in initialize_request
  376.             parser_context=parser_context

File "/home/smslike/venv/lib/python3.5/site-packages/rest_framework/request.py" in __init__
  151.         self.parser_context['encoding'] = request.encoding or settings.DEFAULT_CHARSET
add to settings.py
DEFAULT_CHARSET = 'UTF-8'
get same error
Originally posted by @mmmcorpsvit in #6218 (comment)
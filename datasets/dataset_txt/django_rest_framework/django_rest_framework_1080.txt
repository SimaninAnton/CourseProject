skolsuper commented on 25 Aug 2016 â€¢
edited
I am trying to test a custom permissions class using APIRequestFactory to fabricate a request. The custom permissions object checks the request body for an OTP using request.data, a convenience property added by DRF Request objects. However this fails because APIRequestFactory directly returns the WSGIRequest object returned by Django's RequestFactory.
Checklist
I have verified that that issue exists against the master branch of Django REST framework.
I have searched for similar issues in both open and closed tickets and cannot find a duplicate.
This is not a usage question. (Those should be directed to the discussion group instead.)
This cannot be dealt with as a third party library. (We prefer new functionality to be in the form of third party libraries where possible.)
I have reduced the issue to the simplest possible case.
I have included a failing test as a pull request. (If you are unable to do so we can still accept the issue.)
Steps to reproduce
    api_rf = APIRequestFactory()
    request = api_rf.post('/some/url', {})
    request.data.get('foo')
Expected behavior
None
Actual behavior
AttributeError: 'WSGIRequest' object has no attribute 'data'
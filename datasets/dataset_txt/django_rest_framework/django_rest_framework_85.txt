Contributor
knivets commented on 9 Aug 2019
Checklist
I have verified that that issue exists against the master branch of Django REST framework.
I have searched for similar issues in both open and closed tickets and cannot find a duplicate.
This is not a usage question. (Those should be directed to the discussion group instead.)
This cannot be dealt with as a third party library. (We prefer new functionality to be in the form of third party libraries where possible.)
I have reduced the issue to the simplest possible case.
I have included a failing test as a pull request. (If you are unable to do so we can still accept the issue.)
Steps to reproduce
# view.py
from rest_framework import generics
from rest_framework import serializers
from django.db import models

class Book(models.Model):
  title = models.CharField(max_length=200)

class BookSerializer(serializers.ModelSerializer):
  tags = serializers.ListField(min_length=2, max_length=5)
  class Meta:
    model = Book
    fields = ('tags',)

class BooksView(generics.ListAPIView):
  queryset = Book.objects.all()   
  serializer_class = BookSerializer

# urls.py
urlpatterns = [
...
path('api/books/', views.BooksView.as_view()),
...
]
Expected behavior
$ ./manage.py generateschema

openapi: 3.0.2
info:
  title: ''
  version: TODO
paths:
  /api/books/:
    get:
      operationId: ListBooks
      parameters: []
      responses:
        '200':
          content:
            application/json:
              schema:
                required:
                - tags
                properties:
                  tags:
                    type: array
                    items: {}
                    maxItems: 5
                    minItems: 2
Actual behavior
$ ./manage.py generateschema

openapi: 3.0.2
info:
  title: ''
  version: TODO
paths:
  /api/books/:
    get:
      operationId: ListBooks
      parameters: []
      responses:
        '200':
          content:
            application/json:
              schema:
                required:
                - tags
                properties:
                  tags:
                    type: array
                    items: {}
                    maxLength: 5
                    minLength: 2
https://swagger.io/docs/specification/data-models/data-types/#array-length
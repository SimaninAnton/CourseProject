buendiya commented on 12 Sep 2016
When I try to save ModelSerializer with OneToOneField which is also primary_key, it raise an error:
ValueError: Cannot assign "1": "Garage.car" must be a "Car" instance.
Steps to reproduce
class Car(models.Model):
name = models.CharField(max_length=255, blank=True)
class CustomOneToOneField(models.OneToOneField):
rel = RevealAccess(True, 'rel')
class GarageSerializer(serializers.ModelSerializer):
class Meta:
model = Garage
fields = ('car', )
gs = serializers.GarageSerializer(data={'car':c.pk})
gs.is_valid() # output True
gs.save()
Expected behavior
Save succeed
Actual behavior
ValueError: Cannot assign "1": "Garage.car" must be a "Car" instance.
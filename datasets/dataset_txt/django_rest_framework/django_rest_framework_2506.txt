brocksamson commented on 12 Jun 2014
I've got a scenario where people can sometimes submit an invalid id for an optional foreign key. In this scenario I would like to save the submitted record with the foreign key set to None instead of returning a 400 "Invalid pk - object does not exist." message.
My initial naive attempt to resolve is to add a validate method to the serializer for the model.
def validate_foreign_key(self, attrs, source):
    try:
        Foo.objects.get(pk=attrs['source']
    except Foo.DoesNotExist:
        attrs['source'] = None
    return attrs
Unfortunately the 400 invalid pk message is already thrown before this method is called. For now I've added similar logic to the create and update methods on my view, but would prefer to let the serializer handle this scenario.
rsonbie456 commented on 22 Sep 2013
Hi Guys,
I have been trying to re-code my code to use viewsets, but the documentation seriously does not really show me what to do. There are many terms it seems to just assume I already know, which I do not.
So, for example, in a normal APIView, I can do get() and post(). In viewsets, I cannot. It says I can do list(), update(), etc. But I'm not sure which one to use in place of get()/post().
Here's a very noobish and bad example:
I want to know how to do to interact GET and POST data just like this:
def get(self, request, format=None):
if request.method == 'GET':
if 'id' in request.GET:
if self.is_numeric(request.GET['id']) and self.is_numeric(request.GET['x']) and self.is_numeric(request.GET['y']) and self.is_numeric(request.GET['z']):
newpos = Note.objects.get(id=request.GET['id'])
intx = int(float(request.GET['x']))
inty = int(float(request.GET['y']))
intz = int(float(request.GET['z']))
newpos.xyz = str(intx) +'x'+ str(inty) +'x'+ str(intz)
newpos.save()
context = [note.toJSON(request) for note in self.get_queryset()]#{'success':json_response}
return Response(context)
def post(self, request, format=None):
    serializer = NoteSerializer(data=request.DATA)
    if serializer.is_valid():
        serializer.save()
        newnote = Note.objects.create(owner_id=User.objects.get(username=request.user.username).id, text=request.DATA['text'], color=request.DATA['color'])
        newnote.save()
        return Response(serializer.data, status=status.HTTP_201_CREATED)
    return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)
Thanks so much!
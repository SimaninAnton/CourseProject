Contributor
kevinastone commented on 15 Aug 2013
I wanted to set a Content-Disposition header when clients use a CSV renderer (for data export) vs JSON or other renderers that should continue providing the response with the header, so I wrote my api view as follows:
class SampleAPIView(generics.RetrieveAPIView):
    ...
    renderer_classes = tuple(api_settings.DEFAULT_RENDERER_CLASSES) + (CSVRenderer,)

    def finalize_response(self, request, response, *args, **kwargs):
        response = super(SampleAPIView, self).finalize_response(request, response, *args, **kwargs)
        if isinstance(response.accepted_renderer, CSVRenderer):
            response['content-disposition'] = 'attachment; filename=export.csv'
        return response
I'd rather the renderer dictate what extra response header it needs rather than my isinstance() hack, can the Renderer API be extended to allow modifying the response or at least supplying extra headers?
3
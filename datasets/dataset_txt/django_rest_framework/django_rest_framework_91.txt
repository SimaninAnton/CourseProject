LodrikMtl commented on 28 Jul 2019
Checklist
I have verified that that issue exists against the master branch of Django REST framework.
I have searched for similar issues in both open and closed tickets and cannot find a duplicate.
This is not a usage question. (Those should be directed to the discussion group instead.)
This cannot be dealt with as a third party library. (We prefer new functionality to be in the form of third party libraries where possible.)
I have reduced the issue to the simplest possible case.
I have included a failing test as a pull request. (If you are unable to do so we can still accept the issue.)
Steps to reproduce
I have this basic setup:
#/schema/urls.py

#/project/urls.py

#/accounts/urls.py
If I remove the users endpoint, I will got no error. Unfortunately, I can't access the schema because I don't have the permission even tho I'm a superuser.
Expected behavior
I should see an OpenAPI Schema in JSON.
Actual behavior
I have the following:

trace.txt
Extra
When I'm looking at the traceback, it seems that the data has been well formed. The error is raise in JSONOpenAPIRenderer when the data are being dumped/rendered. It comes from the JSON Native library of python
NB
I'm a newbie with Django REST Framework and Django. It is possible that I have misconfigure a setting, but I looked for and didn't find anything weird.
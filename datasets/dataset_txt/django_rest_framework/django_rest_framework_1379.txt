Contributor
jamesbeith commented on 14 Dec 2015
Whilst rendering a serializer in a HTML template using rest_framework.renderers.TemplateHTMLRenderer and {% render_form serializer %} a couple of exceptions occur whilst resolving variables. (I'm using DRF 3.3.2, Django 1.9 and Djangoâ€™s Template engine).
This is an example serializer.
class ExampleSerializer(serializers.Serializer):
    quantity = serializers.IntegerField(required=True)
However if the keys causing the exceptions are provided then the issue does not occur.
class ExampleSerializer(serializers.Serializer):
    quantity = serializers.IntegerField(required=True, style={'hide_label': False, 'placeholder': '0'})
This is the traceback in question.
Exception while resolving variable 'hide_label' in template 'rest_framework/vertical/input.html'.
Traceback (most recent call last):
  File "/Users/James/.virtualenvs/example/lib/python3.4/site-packages/django/template/base.py", line 879, in _resolve_lookup
    current = current[bit]
KeyError: 'hide_label'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/James/.virtualenvs/example/lib/python3.4/site-packages/django/template/base.py", line 887, in _resolve_lookup
    current = getattr(current, bit)
AttributeError: 'dict' object has no attribute 'hide_label'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/James/.virtualenvs/example/lib/python3.4/site-packages/django/template/base.py", line 894, in _resolve_lookup
    current = current[int(bit)]
ValueError: invalid literal for int() with base 10: 'hide_label'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/James/.virtualenvs/example/lib/python3.4/site-packages/django/template/base.py", line 901, in _resolve_lookup
    (bit, current))  # missing attribute
django.template.base.VariableDoesNotExist: Failed lookup for key [hide_label] in "{'input_type': 'number', 'renderer': <rest_framework.renderers.HTMLFormRenderer object at 0x1068889e8>, 'base_template': 'input.html', 'template_pack': 'rest_framework/vertical/'}"
Exception while resolving variable 'placeholder' in template 'rest_framework/vertical/input.html'.
Traceback (most recent call last):
  File "/Users/James/.virtualenvs/example/lib/python3.4/site-packages/django/template/base.py", line 879, in _resolve_lookup
    current = current[bit]
KeyError: 'placeholder'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/James/.virtualenvs/example/lib/python3.4/site-packages/django/template/base.py", line 887, in _resolve_lookup
    current = getattr(current, bit)
AttributeError: 'dict' object has no attribute 'placeholder'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/James/.virtualenvs/example/lib/python3.4/site-packages/django/template/base.py", line 894, in _resolve_lookup
    current = current[int(bit)]
ValueError: invalid literal for int() with base 10: 'placeholder'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/James/.virtualenvs/example/lib/python3.4/site-packages/django/template/base.py", line 901, in _resolve_lookup
    (bit, current))  # missing attribute
django.template.base.VariableDoesNotExist: Failed lookup for key [placeholder] in "{'input_type': 'number', 'renderer': <rest_framework.renderers.HTMLFormRenderer object at 0x1068889e8>, 'base_template': 'input.html', 'template_pack': 'rest_framework/vertical/'}"
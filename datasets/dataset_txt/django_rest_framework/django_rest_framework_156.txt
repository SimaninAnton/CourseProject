jordanambra commented on 2 May 2019
Checklist
I have verified that that issue exists against the master branch of Django REST framework.
I have searched for similar issues in both open and closed tickets and cannot find a duplicate.
This is not a usage question. (Those should be directed to the discussion group instead.)
This cannot be dealt with as a third party library. (We prefer new functionality to be in the form of third party libraries where possible.)
I have reduced the issue to the simplest possible case.
I have included a failing test as a pull request. (If you are unable to do so we can still accept the issue.)
Steps to reproduce
Create a View or ViewSet with a custom @action decorator
Set the url_path parameter = ""
Example case attempting to implement bulk delete
@action(methods=['delete'], detail=False, url_path="")
def bulk_destroy(self, request, *args, **kwargs):
    pass
Expected behavior
Set the url_path suffix EXACTLY to an empty string.
Actual behavior
Because url_path is a falsy value, it is overridden by the name of the function, in the example case it is "../../bulk_destroy"
I understand this is not necessarily broken, but it is frustrating to be unable to explicitly declare an empty url_path.
The action decorator in decorators.py could be updated to the following code:
func.url_path = url_path if url_path is not None else func.__name__
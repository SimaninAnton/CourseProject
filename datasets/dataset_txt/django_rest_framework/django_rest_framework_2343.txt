Contributor
thedrow commented on 13 Oct 2014
The following traceback is generated when initializing a model serializer:
Traceback (most recent call last):
  File "/home/omer/Documents/Projects/startup/users/tests/unit/test_user_serializer.py", line 28, in test_that_when_serializing_a_user_with_a_modified_password_but_without_the_old_password_then_the_serializer_is_not_valid
    sut = UserSerializer(instance=user, data={'password': '1234'}, context={'request': request}, partial=True)
  File "/home/omer/.virtualenvs/startup/lib/python3.4/site-packages/rest_framework/serializers.py", line 486, in __init__
    super(ModelSerializer, self).__init__(*args, **kwargs)
  File "/home/omer/.virtualenvs/startup/lib/python3.4/site-packages/rest_framework/serializers.py", line 276, in __init__
    for key, value in self._get_base_fields().items():
  File "/home/omer/.virtualenvs/startup/lib/python3.4/site-packages/rest_framework/serializers.py", line 560, in _get_base_fields
    extra_kwargs = self._include_additional_options(extra_kwargs)
  File "/home/omer/.virtualenvs/startup/lib/python3.4/site-packages/rest_framework/serializers.py", line 695, in _include_additional_options
    kwargs = extra_kwargs.get(field_name, {})
UnboundLocalError: local variable 'field_name' referenced before assignment
The serializer has the following meta class:
class Meta:
    model = User
    lookup_field = 'slug'
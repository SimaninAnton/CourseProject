infintesimal commented on 31 Jan 2018
when writing an apiview function, this is not an issue as I can get a handle on a django response object there. But when using an APIView class, it fails.
Steps to reproduce
Define an APIView class, e.g. CreateAPIView
In this APIView class, override get_success_headers(self, data) so that it attempts to set more than one Cookie, e.g.
  myheaders = {
     'Set-Cookie': 'foo=bar; path=/; domain=example.come; max-age=86400' ,
     'Set-Cookie': 'coo=car; path=/; domain=example.come; max-age=86400' ,
}
Obviously won't work only one of those two duplicate keys will survive.
Expected behavior
Need to have a method where I can add multiple cookies to the rest_framework Response object
Actual behavior
I can set only one cookie (though I can set multiple headers that are independent)
The offending source code is a combination of API of the rest_framework response object, which wants headers passed in as a simply dictionary and the handling of this dictionary
here
https://github.com/encode/django-rest-framework/blob/master/rest_framework/response.py#L47-#L49
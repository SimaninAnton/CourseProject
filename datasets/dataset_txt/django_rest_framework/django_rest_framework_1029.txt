jonathan-golorry commented on 6 Oct 2016 â€¢
edited
Steps to reproduce
Create a model with a foreignkey relation named relation_id. The db stores the relation as relation_id_id as expected, but a serializer nested on relation_id will return the error int() argument must be a string, a bytes-like object or a number, not 'collections.OrderedDict'. Presumably the serializer is only checking that the relation name ends in _id and deciding it can use the integer representation of the relation.
Expected behavior
It would be nice if Django prevented relations ending in _id from being used in the first place, but, barring that, Django Rest Framework should give an error message suggesting that the relation shouldn't end in _id or detect that there is a relation ending in _id and nest the serializer appropriately.
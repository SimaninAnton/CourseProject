eschercode commented on 5 Dec 2017 â€¢
edited
Checklist
I have verified that that issue exists against the master branch of Django REST framework.
I have searched for similar issues in both open and closed tickets and cannot find a duplicate.
This is not a usage question. (Those should be directed to the discussion group instead.)
This cannot be dealt with as a third party library. (We prefer new functionality to be in the form of third party libraries where possible.)
I have reduced the issue to the simplest possible case.
I have included a failing test as a pull request. (If you are unable to do so we can still accept the issue.)
Steps to reproduce
With new changes to django.core.urlresolvers (1.11.7) -> django.urls (2.0): as per the instructions :
Register a router
router = DefaultRouter()
Register a viewset with the router
router.register('foo', FooViewSet, base_name='foo')
Add the url patterns:
urlpatterns += [ url('API/', include(router.urls, namespace='foo-api'), ]
Expected behavior
urlpatterns now contains the foo API url patterns, accessible using the namespace if needing to get the url string with django.urls.reverse
Actual behavior
django.core.exceptions.ImproperlyConfigured: Specifying a namespace in include() without providing an app_name is not supported. Set the app_name attribute in the included module, or pass a 2-tuple containing the list of patterns and app_name instead.
Is the router providing the app_name? If so, the documentation needs updating with the right syntax for including router url patterns. Otherwise, the router itself needs updating.
4
sheluchin commented on 7 Aug 2015
It looks like when using a DateTimeRangeField, DRF hands of the serialization to the Python JSON encoder which cannot handle serializing the value.
When I refactored the DateTimeRangeField into two DateTimeFields, everything worked without issue.
Environment:


Request Method: GET
Request URL: http://localhost:8000/foos/

Django Version: 1.8.2
Python Version: 3.4.3
Installed Applications:
('django.contrib.admin',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'rest_framework',
 'rest_framework.authtoken',
 'django_extensions',
 'foo')
Installed Middleware:
('django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.auth.middleware.SessionAuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware',
 'django.middleware.security.SecurityMiddleware')


Traceback:
File "/Users/alex/.pyenv/versions/env/lib/python3.4/site-packages/django/core/handlers/base.py" in get_response
  132.                     response = wrapped_callback(request, *callback_args, **callback_kwargs)
File "/Users/alex/.pyenv/versions/env/lib/python3.4/site-packages/django/views/decorators/csrf.py" in wrapped_view
  58.         return view_func(*args, **kwargs)
File "/Users/alex/.pyenv/versions/env/lib/python3.4/site-packages/rest_framework/viewsets.py" in view
  87.             return self.dispatch(request, *args, **kwargs)
File "/Users/alex/.pyenv/versions/env/lib/python3.4/site-packages/rest_framework/views.py" in dispatch
  464.             response = self.handle_exception(exc)
File "/Users/alex/.pyenv/versions/env/lib/python3.4/site-packages/rest_framework/views.py" in dispatch
  461.             response = handler(request, *args, **kwargs)
File "/Users/alex/.pyenv/versions/env/lib/python3.4/site-packages/rest_framework/mixins.py" in list
  45.             return self.get_paginated_response(serializer.data)
File "/Users/alex/.pyenv/versions/env/lib/python3.4/site-packages/rest_framework/serializers.py" in data
  658.         ret = super(ListSerializer, self).data
File "/Users/alex/.pyenv/versions/env/lib/python3.4/site-packages/rest_framework/serializers.py" in data
  223.                 self._data = self.to_representation(self.instance)
File "/Users/alex/.pyenv/versions/env/lib/python3.4/site-packages/rest_framework/serializers.py" in to_representation
  598.             self.child.to_representation(item) for item in iterable
File "/Users/alex/.pyenv/versions/env/lib/python3.4/site-packages/rest_framework/serializers.py" in <listcomp>
  598.             self.child.to_representation(item) for item in iterable
File "/Users/alex/.pyenv/versions/env/lib/python3.4/site-packages/rest_framework/serializers.py" in to_representation
  456.                 ret[field.field_name] = field.to_representation(attribute)
File "/Users/alex/.pyenv/versions/env/lib/python3.4/site-packages/rest_framework/fields.py" in to_representation
  1580.         return self.model_field.value_to_string(obj)
File "/Users/alex/.pyenv/versions/env/lib/python3.4/site-packages/django/contrib/postgres/fields/ranges.py" in value_to_string
  43.             "bounds": value._bounds,
File "/Users/alex/.pyenv/versions/3.4.3/lib/python3.4/json/__init__.py" in dumps
  230.         return _default_encoder.encode(obj)
File "/Users/alex/.pyenv/versions/3.4.3/lib/python3.4/json/encoder.py" in encode
  192.         chunks = self.iterencode(o, _one_shot=True)
File "/Users/alex/.pyenv/versions/3.4.3/lib/python3.4/json/encoder.py" in iterencode
  250.         return _iterencode(o, 0)
File "/Users/alex/.pyenv/versions/3.4.3/lib/python3.4/json/encoder.py" in default
  173.         raise TypeError(repr(o) + " is not JSON serializable")

Exception Type: TypeError at /foos/
Exception Value: datetime.datetime(2015, 8, 7, 15, 33, 23, 924615, tzinfo=<UTC>) is not JSON serializable
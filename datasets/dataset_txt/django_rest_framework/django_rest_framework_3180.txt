Member
tomchristie commented on 12 Jun 2011
I think it's refactor nicely to:
BaseThrottle(BasePermission):
get_cache_key(self) # Not Implemented
check_throttle(self, cache_key)
throttle_success(self, cache_key)
throttle_failure(self, cache_key)
PerUserThrottle(BaseThrottle):
get_cache_key(self)
PerResourceThrottle(BaseThrottle):
get_cache_key(self)
Also thinking about it I think it'd be nice if the .throttle attribute was string like '10/sec', '45/min', '100/hour', '100/day', '10/s' '45/m' etc... instead of being a 2-tuple
So something like:
num, period = getattr(self.view, 'throttle', '0/sec').partition('/')
num = int(num)
period = {'s': 1, 'm': 60, 'h': 3600, 'd': 86400}[period[0]]
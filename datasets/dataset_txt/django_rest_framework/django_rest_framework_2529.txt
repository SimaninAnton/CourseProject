eftechnologies commented on 23 May 2014
I am trying to send an HTTP_402_PAYMENT_REQUIRED back to the user if they are not enabled. I have a permissions class that handles this, but it will only send back HTTP_403_FORBIDDEN.
I created a custom exception and raised it in the permission class but that didn't work.
My Exception:
class PaymenRequired(APIException):
    status_code = 402
    default_detail = 'Payment is required to access this resource.'
My permission:
class IsEnabled(permissions.BasePermission):
    def has_permission(self, request, view):
        if user.enabled:
            return True
        else:
            raise PaymentRequired()
I also tried raising my custom exception class in get_object, but that also raised a HTTP_403_FORBIDDEN.
Thanks in advance.
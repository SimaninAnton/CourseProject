yellottyellott commented on 26 May 2013
For a /model/pk/$ route:
If pk is an int, and you try to hit:
/mymodel/banana
instead of:
/mymodel/123,
you'll get a ValueError: invalid literal for int() with base 10: 'banana'.
...
File "/Users/moose/.virtualenvs/djClothesPin/lib/python2.7/site-packages/rest_framework/views.py", line 336, in dispatch
  response = handler(request, *args, **kwargs)
File "/Users/moose/.virtualenvs/djClothesPin/lib/python2.7/site-packages/rest_framework/mixins.py", line 100, in retrieve
  self.object = self.get_object()
File "/Users/moose/.virtualenvs/djClothesPin/lib/python2.7/site-packages/rest_framework/generics.py", line 284, in get_object
  obj = get_object_or_404(queryset, **filter_kwargs)
File "/Users/moose/.virtualenvs/djClothesPin/lib/python2.7/site-packages/django/shortcuts/__init__.py", line 113, in get_object_or_404
  return queryset.get(*args, **kwargs)
...
I think before we get to the call to get_object_or_404 in generics.GenericAPIView.get_object, we need to do some validation based on lookup_field and return some sort of a 400 response.
Or just wrap get_object_or_404 in a try/except ValueError?
rikva commented on 1 Sep 2016 â€¢
edited
Hi!
I'm running DRF 3.4.6 and experiencing unexpected behaviour.
I would expect fields with null=True and blank=True to be optional fields when using a ModelSerializer. However, this is not the case when using unique_together.
I could override the fields on the serializer but that kind of defeats the point of using a ModelSerializer.
Is this by design? Am I doing something wrong? Is this a bug?
(simplified) Model:
class Domain(Model):
    name = models.CharField(max_length=255)
    parent = models.ForeignKey("Domain", null=True, blank=True)

    class Meta:
        unique_together = (("parent", "name"),)
Serializer:
class DomainSerializer(serializers.ModelSerializer):
    class Meta:
        model = models.Domain
View:
class DomainViewSet(viewsets.ModelViewSet):
    queryset = models.Domain.objects.all()
    serializer_class = serializers.DomainSerializer
Request and response:
    response = self.client.post(self.url, data={'name': 'example.com'})

    # response.content:
    # b'{"parent":["This field is required."]}'
1
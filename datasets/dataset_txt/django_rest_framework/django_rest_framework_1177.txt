stfenjobs commented on 11 Jun 2016
Error Info:
Unsupported lookup 'eq' for SmallIntegerField or join on the field not permitted.
model
class item(models.Model):
    status_CHOICES = (
        ('0', 'die'),
        ('1', 'on'),
    )
    status =   models.SmallIntegerField('online status', choices=status_CHOICES,default='0')
    itemId =  models.BigIntegerField('item id',unique=True)
    ondate = models.DateTimeField('die datetime')
Serializer
class itemSerializer(serializers.ModelSerializer):

    class Meta:
        model = item
        fields = ('id','status ','ondate','itemId')
View
class itemViewSet(viewsets.ModelViewSet):
    serializer_class = itemSerializer
    queryset = item.objects.all()
    def get_queryset(self):
        return self.queryset.filter(ondate__gt = timezone.now()).filter(status__eq = 1)
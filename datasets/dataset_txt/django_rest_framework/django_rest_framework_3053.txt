lawik commented on 18 Oct 2012
When building sync through Backbone.js I experienced something interesting and somewhat problematic. For one thing it almost "just worked", this brings me to my issue. What didn't work?
My setup consists of simple ModelResources
GET gives me full serialized models for ForeignKey and ManyToManyField objects.
POST wants me to pass in ID's for relations rather than objects.
Options to be able to pass this back and forth between GET and POST:
Adapt model on the client, a simple parse-override but inelegant and ugly.
Adapt the Resource to handle it in Django REST Framework.
I looked at depth:
depth = 0 gives me nothing at all
depth = 1 gives me empty relations
I imagine this is a fairly common case as this is what the POST expects (unless I'm missing something).
It was solveable by overriding serialize_val() and rewriting the obj-for related classes (Model types from ForeignKey, ManyRelatedManager for ManyToManyField) with the related id instead of keeping the object.
Any thoughts on implementing something like this.
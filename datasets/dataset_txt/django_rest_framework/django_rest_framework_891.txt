pembo13 commented on 7 Mar 2017
Steps to reproduce
Install Django==1.10.6
Install djangorestframework==3.3.3
Create a function based view (FBV)
Decorate the FBV with @api_view
Create a DefaultRouter (router = routers.DefaultRouter())
Add urls
Expected behavior
Routes with suffixes created.
Actual behavior
AttributeError: 'RegexURLPattern' object has no attribute '_callback'
This code worked with Django==1.9.7 and djangorestframework==3.4.0
Relevant Stack Trace
  File "/virt/app/lib/python2.7/site-packages/rest_framework/routers.py", line 79, in urls
    self._urls = self.get_urls()
  File "/virt/app/lib/python2.7/site-packages/rest_framework/routers.py", line 321, in get_urls
    urls = format_suffix_patterns(urls)
  File "/virt/app/lib/python2.7/site-packages/rest_framework/urlpatterns.py", line 64, in format_suffix_patterns
    return apply_suffix_patterns(urlpatterns, suffix_pattern, suffix_required)
  File "/virt/app/lib/python2.7/site-packages/rest_framework/urlpatterns.py", line 27, in apply_suffix_patterns
    view = urlpattern._callback or urlpattern._callback_str
AttributeError: 'RegexURLPattern' object has no attribute '_callback'
Other Information
This particular use was very simple, and I switched to SimpleRouter temporarily, but that costs me the format extensions.
1
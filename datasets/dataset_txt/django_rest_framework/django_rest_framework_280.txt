tiloc commented on 10 Nov 2018
Checklist
I have verified that that issue exists against the master branch of Django REST framework.
I have searched for similar issues in both open and closed tickets and cannot find a duplicate.
This is not a usage question. (Those should be directed to the discussion group instead.)
This cannot be dealt with as a third party library. (We prefer new functionality to be in the form of third party libraries where possible.)
I have reduced the issue to the simplest possible case.
I have included a failing test as a pull request. (If you are unable to do so we can still accept the issue.)
Steps to reproduce
I have a ModelViewset like this:
class ObservationViewSet(viewsets.ModelViewSet):
    """Viewset for observations"""
    queryset = Observation.access.all()
    serializer_class = ObservationSerializer
    filter_class = ObservationFilter
    search_fields = ('code')
    ordering_fields = ('effective_datetime')
In settings.py I have configured the following default filterbackends:
    'DEFAULT_FILTER_BACKENDS': (
        'django_filters.rest_framework.DjangoFilterBackend',
        'rest_framework.filters.OrderingFilter',
        'rest_framework.filters.SearchFilter',
    )
When I invoke the Filters dialog in the DRF UI for the observations, it is turning every single letter of the word 'effective_datetime' into two options, one for ascending, one for descending sorts.
Ordering
e - ascending
e - descending
f - ascending
f - descending
f - ascending
f - descending
e - ascending
...
Expected behavior
Two options: "effective_datetime - ascending", "effective_datetime - descending"
Actual behavior
See above.
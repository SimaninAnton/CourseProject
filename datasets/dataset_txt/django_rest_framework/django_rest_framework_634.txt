dilyanpalauzov commented on 25 Sep 2017 â€¢
edited
A minimal implementation for RFC 7240: Header Prefer: return=minimal.
When an object is created or updated, the client might not be interested to receive the changed object, as the client might be aware of its new state, Instead the client just wants to be sure that the object was changed.
diff --git a/rest_framework/renderers.py b/rest_framework/renderers.py
--- a/rest_framework/renderers.py
+++ b/rest_framework/renderers.py
@@ -99,6 +99,9 @@ class JSONRenderer(BaseRenderer):
         else:
             separators = INDENT_SEPARATORS
 
+        if renderer_context.get('request') and 'return=minimal' in renderer_context['request'].META.get('HTTP_PREFER',''):
+               return {}
+
         ret = json.dumps(
             data, cls=self.encoder_class,
             indent=indent, ensure_ascii=self.ensure_ascii,
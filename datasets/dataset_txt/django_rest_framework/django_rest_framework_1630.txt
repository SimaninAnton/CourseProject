hamzawaqas-10p commented on 17 Aug 2015
I've written the following line in my APIView method:
print(request.version);
while, my settings.py looks something like this:
REST_FRAMEWORK = {
    'TEST_REQUEST_DEFAULT_FORMAT': 'json',
    'TEST_REQUEST_RENDERER_CLASSES': (
        'rest_framework.renderers.MultiPartRenderer',
        'rest_framework.renderers.JSONRenderer',
        'rest_framework.renderers.TemplateHTMLRenderer'
    ),
    'DEFAULT_AUTHENTICATION_CLASSES': (
        # 'core.authentication.TokenAuthentication',
      # 'rest_framework.authentication.BasicAuthentication',
    ),
    'DEFAULT_PERMISSION_CLASSES': (
        # 'core.permission.IsNotAnonymous',
    ),
    'DEFAULT_VERSIONING_CLASS': 'rest_framework.versioning.NamespaceVersioning',
    'DEFAULT_VERSION': 'v1',
    'EXCEPTION_HANDLER': 'core.error.custom_exception_handler'
}
And, that's how my routes looks like:
urlpatterns = [
    url(r'^', include('api.urls')),
    url(r'^r', REndpoint.as_view()),
    url(r'^v1/', include('api.urls', namespace='v1')),
]
And, api.urls is as follow:
router.register(r'notifications', NotificationsEndpoint, 'Notifications')

urlpatterns = [
    url(r'^', include(router.urls)),
    # ....
]
When I try to hit the route with /v1/groups or /v1/notifications with POST, it reaches my method which is just printing the version. Means, version attribute has not been set on the Request object.
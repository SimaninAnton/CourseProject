Contributor
asfaltboy commented on 18 Nov 2012
Since updating to the latest version (2.1.3), I cannot properly serialize one of my models.
I traced it back to line 218 of fields.py, where there's a call for super of ModelField. The init method raises a TypeError for an unexpected kwarg: max_field.
The field the exception is raised on is an models.IPAddressField a django model field type that actually has a default attribute of max_length=15.
Here's the relevant part of the traceback:
Traceback (most recent call last):

...

  File "C:\Users\asfalt\Envs\test3\Lib\site-packages\rest_framework\views.py", lin
e 360, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\projects\test\trunk\users\views.py", line 66, in post
    return self.create(request, *args, **kwargs)
  File "C:\Users\asfalt\Envs\test3\Lib\site-packages\rest_framework\mixins.py", li
ne 19, in create
    if serializer.is_valid():
  File "C:\Users\asfalt\Envs\test3\Lib\site-packages\rest_framework\serializers.py
", line 299, in is_valid
    return not self.errors
  File "C:\Users\asfalt\Envs\test3\Lib\site-packages\rest_framework\serializers.py
", line 293, in errors
    obj = self.from_native(self.init_data, self.init_files)
  File "C:\Users\asfalt\Envs\test3\Lib\site-packages\rest_framework\serializers.py
", line 265, in from_native
    attrs = self.restore_fields(data, files)
  File "C:\Users\asfalt\Envs\test3\Lib\site-packages\rest_framework\serializers.py
", line 197, in restore_fields
    fields = self.get_fields(nested=bool(self.opts.depth))
  File "C:\Users\asfalt\Envs\test3\Lib\site-packages\rest_framework\serializers.py
", line 136, in get_fields
    fields = self.default_fields(nested)
  File "C:\Users\asfalt\Envs\test3\Lib\site-packages\rest_framework\serializers.py
", line 369, in default_fields
    field = self.get_field(model_field)
  File "C:\Users\asfalt\Envs\test3\Lib\site-packages\rest_framework\serializers.py
", line 457, in get_field
    return ModelField(model_field=model_field, **kwargs)
  File "C:\Users\asfalt\Envs\test3\Lib\site-packages\rest_framework\fields.py", li
ne 220, in __init__
    super(ModelField, self).__init__(*args, **kwargs)
TypeError: __init__() got an unexpected keyword argument 'max_length'
Also, I'm not really sure why this field is even initialized, since it doesn't appear in Meta.fields nor is it explicitly defined
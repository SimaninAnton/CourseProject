hongquan commented on 16 Oct 2015
This line of code: https://github.com/tomchristie/django-rest-framework/blob/2.4.8/rest_framework/serializers.py#L952
        for field_name, field in self.fields.items():
            field_name = field.source or field_name
            if (
                field_name in exclusions
                and not field.read_only
                and (field.required or hasattr(instance, field_name))
                and not isinstance(field, Serializer)
            ):
                exclusions.remove(field_name)
I have a User model, with password being one of the fields. Now I want to update User via API. I define UserSerializer whose password field is required=False.
Because of the code above, when I submit data with empty password field, my data cannot pass the validation:
 {'password': [u'This field cannot be blank.']}
The expression
(field.required or hasattr(instance, field_name))
is True because field.required is False and hasattr(instance, field_name) is True.
Testing with
djangorestframework==2.4.8
Django==1.4.22
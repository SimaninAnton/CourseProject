khamaileon commented on 16 Jun 2014
Hi guys,
In this test,
    def test_one_to_many_create(self):
        data = {'id': 1, 'name': 1, 'sources': [{'id': 1, 'name': 'source-1'},
                                                         {'id': 2, 'name': 'source-2'},
                                                         {'id': 3, 'name': 'source-3'},
                                                         {'id': 4, 'name': 'source-4'}]}
        instance = OneToManyTarget.objects.get(pk=1)
        serializer = self.Serializer(instance, data=data)
        self.assertTrue(serializer.is_valid())
        obj = serializer.save()
giving to 'sources' an empty string or a None statement instead of a dict leads to this:
ERROR: test_one_to_many_create (rest_framework.tests.test_relations_nested.ReverseNestedOneToManyTests)
Traceback (most recent call last):
File "rest_framework/runtests/../../rest_framework/tests/test_relations_nested.py", line 258, in test_one_to_many_create
obj = serializer.save()
File "rest_framework/runtests/../../rest_framework/serializers.py", line 598, in save
self.save_object(self.object, *_kwargs)
File "rest_framework/runtests/../../rest_framework/serializers.py", line 1044, in save_object
setattr(obj, accessor_name, related)
File "/home/david/workspace/khamaileon/django-rest-framework/env/local/lib/python2.7/site-packages/django/db/models/fields/related.py", line 404, in set
manager.add(_value)
belegnar commented on 24 Jun 2015
class MyView(ListCreateAPIView):
    serializer_class = MySerializer
    parser_classes = (FormParser, MultiPartParser,)
There is a
    ff = FileField(required = False)
in MySerializer (comes from the model)
Data is POST-ed to the view by
                    _ajax = {
                        url : this.action,
                        method : 'post',
                        contentType : false,
                        processData : false,
                        dataType : 'json',
                        data : new FormData(this)
When no file is provided by user to the ff field, the
FileField.fail('invalid')
is raised because in fields.py line 1183:
    def to_internal_value(self, data):
data is expected to be a value and not u''
Workaround is to kill empty keys from request.data
class MyView(ListCreateAPIView):
    ...
    def create(self, request, *args, **kwargs):
        for field in ('ff',):
            if field in request.data.keys() and request.data[field] == u'':
                del request.data[field]
        super(MyView, self).create(request, *args, **kwargs)
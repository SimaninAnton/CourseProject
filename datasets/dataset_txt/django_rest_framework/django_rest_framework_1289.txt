Contributor
mvdwaeter commented on 15 Feb 2016
Given:
A company has 1 or more offices. Company.offices.all()
However, some of these offices are out of order. They have Office.hidden = True
In the detail api-view of Company I'd like to only show the offices that are not hidden with a hyperlinked url.
But currently this seems not possible, as the queryset parameter is ignored for a HyperlinkedIdentityField with many=True. And thus resulting in showing all the offices.
What I want to do is this:
class CompanySerializer(serializers.ModelSerializer):
    url = serializers.HyperlinkedIdentityField(
        read_only=True, view_name='rest_api:company-detail')

    offices = serializers.HyperlinkedRelatedField(
        queryset=models.Office.objects.filter(hidden=False),
        many=True,
        view_name='rest_api:office-detail')

    class Meta:
        model = models.Company
        fields = ('url', 'id', 'name', 'description', 'offices')
Or something like this:
class CompanySerializer(serializers.ModelSerializer):
    url = serializers.HyperlinkedIdentityField(
        read_only=True, view_name='rest_api:company-detail')

    offices = serializers.HyperlinkedRelatedField(
        limit_choices_to=dict(hidden=False),
        many=True,
        view_name='rest_api:office-detail')

    class Meta:
        model = models.Company
        fields = ('url', 'id', 'name', 'description', 'offices')
Is this a bug/feature request or am I doing it wrong?
mbrochh commented on 12 May 2016
I copied over my DRF setup from a project that used DRF v3.1.3 and it fails in v3.3.3.
Here are my settings:
REST_FRAMEWORK = {
    'DEFAULT_AUTHENTICATION_CLASSES': (
        'rest_framework.authentication.BasicAuthentication',
        'rest_framework.authentication.SessionAuthentication',
        'rest_framework.authentication.TokenAuthentication',
    ),
    'DEFAULT_PERMISSION_CLASSES': [
        'rest_framework.permissions.DjangoModelPermissionsOrAnonReadOnly',
    ],
    'DEFAULT_FILTER_BACKENDS': [
        'rest_framework.filters.DjangoFilterBackend', ],
    'DEFAULT_VERSIONING_CLASS':
        'rest_framework.versioning.URLPathVersioning',
    'ALLOWED_VERSIONS': ['v1', ],
}
Here is my ViewSet:
class ArtFairsAPIViewSet(viewsets.ModelViewSet):
    queryset = models.ArtFair.objects.all()
    serializer_class = serializers.ArtFairSerializer
    permission_classes = [permissions.DjangoModelPermissionsOrAnonReadOnly, ]
and here are my URLs:
router = DefaultRouter()
router.register(r'art-fairs', art_fairs_api.ArtFairsAPIViewSet)

urlpatterns = patterns(
    '',
    url(r'^api/(?P<version>v1)/', include(router.urls)),
    url(r'^api-auth/', include('rest_framework.urls',
        namespace='rest_framework')),
   ...
)
I think I'm not doing anything fancy here. When I access the browsable API, I can login and I can see the POST form. When I inspect the markup, I can see that the csrftoken hidden field is indeed there.
However, when I submit the POST request, I get "CSRF Failed: CSRF token missing or incorrect." as a response.
When I downgrade to "djangorestframework<3.3", it works.
Is this a bug or am I supposed to use DRF differently as of v3.3?
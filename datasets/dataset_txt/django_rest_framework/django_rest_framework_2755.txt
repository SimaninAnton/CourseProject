Contributor
KrzysiekJ commented on 13 Aug 2013
If one makes a PUT request to an URL which is already occupied by an existing object, but this object has been previously filtered out, 404 exception will be raised by get_object function (which is correct). This exception will however be catched by get_object_or_none function which will return None to indicate that new object can be created. Therefore an attempt to create the object will be performed which will often result in IntegrityError and 500 status code being returned.
This doesn’t seem to be an easy issue to fix. get_queryset could be used to get unfiltered queryset and check if such an object already exists, but… overriding get_queryset is a documented method of filtering, so it doesn’t have to work. Also I’m not sure whether we should return 403 or 404 in this case.
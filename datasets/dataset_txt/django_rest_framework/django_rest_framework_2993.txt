bkonkle commented on 7 Dec 2012
I've got an example application here: https://github.com/lincolnloop/learn-backbone-integration/blob/restframework/todos/todo/
The Todo model has an optional (null=True, blank=True) ForeignKey to Category.
When trying to create a Todo model, an error is raised in the from_native method of HyperlinkedRelatedField when it tries to find value.startswith('http:'), since the value is None.
Am I doing this wrong?
Thanks!
AttributeError at /todos/
'NoneType' object has no attribute 'startswith'

Request Method: POST
Request URL: http://localhost:8000/todos/
Django Version: 1.4.2
Python Executable: /Users/brandon/.virtualenvs/backbone/bin/python
Python Version: 2.7.3
Python Path: ['/Users/brandon/.virtualenvs/backbone/bin', '/Users/brandon/.virtualenvs/backbone/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg', '/Users/brandon/.virtualenvs/backbone/lib/python2.7/site-packages/pip-1.1-py2.7.egg', '/Users/brandon/.virtualenvs/backbone/src/backbone-tastypie', '/Users/brandon/.virtualenvs/backbone/src/tastypie', '/Users/brandon/code/learn-backbone-integration', '/Users/brandon/.virtualenvs/backbone/lib/python27.zip', '/Users/brandon/.virtualenvs/backbone/lib/python2.7', '/Users/brandon/.virtualenvs/backbone/lib/python2.7/plat-darwin', '/Users/brandon/.virtualenvs/backbone/lib/python2.7/plat-mac', '/Users/brandon/.virtualenvs/backbone/lib/python2.7/plat-mac/lib-scriptpackages', '/Users/brandon/.virtualenvs/backbone/lib/python2.7/lib-tk', '/Users/brandon/.virtualenvs/backbone/lib/python2.7/lib-old', '/Users/brandon/.virtualenvs/backbone/lib/python2.7/lib-dynload', '/usr/local/Cellar/python/2.7.3/lib/python2.7', '/usr/local/Cellar/python/2.7.3/lib/python2.7/plat-darwin', '/usr/local/Cellar/python/2.7.3/lib/python2.7/lib-tk', '/usr/local/Cellar/python/2.7.3/lib/python2.7/plat-mac', '/usr/local/Cellar/python/2.7.3/lib/python2.7/plat-mac/lib-scriptpackages', '/Users/brandon/.virtualenvs/backbone/lib/python2.7/site-packages']
Server time: Thu, 6 Dec 2012 16:24:52 -0700
Installed Applications:
('django.contrib.auth',
'django.contrib.contenttypes',
'django.contrib.sessions',
'django.contrib.sites',
'django.contrib.messages',
'django.contrib.staticfiles',
'django.contrib.admin',
'rest_framework',
'todos.todo',
'debug_toolbar')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
'django.contrib.sessions.middleware.SessionMiddleware',
'django.middleware.csrf.CsrfViewMiddleware',
'django.contrib.auth.middleware.AuthenticationMiddleware',
'django.contrib.messages.middleware.MessageMiddleware',
'debug_toolbar.middleware.DebugToolbarMiddleware')

Traceback:
File "/Users/brandon/.virtualenvs/backbone/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
111.                         response = callback(request, *callback_args, **callback_kwargs)
File "/Users/brandon/.virtualenvs/backbone/lib/python2.7/site-packages/django/views/generic/base.py" in view
48.             return self.dispatch(request, *args, **kwargs)
File "/Users/brandon/.virtualenvs/backbone/lib/python2.7/site-packages/django/views/decorators/csrf.py" in wrapped_view
77.         return view_func(*args, **kwargs)
File "/Users/brandon/.virtualenvs/backbone/lib/python2.7/site-packages/rest_framework/views.py" in dispatch
363.             response = self.handle_exception(exc)
File "/Users/brandon/.virtualenvs/backbone/lib/python2.7/site-packages/rest_framework/views.py" in dispatch
360.             response = handler(request, *args, **kwargs)
File "/Users/brandon/.virtualenvs/backbone/lib/python2.7/site-packages/rest_framework/generics.py" in post
185.         return self.create(request, *args, **kwargs)
File "/Users/brandon/.virtualenvs/backbone/lib/python2.7/site-packages/rest_framework/mixins.py" in create
19.         if serializer.is_valid():
File "/Users/brandon/.virtualenvs/backbone/lib/python2.7/site-packages/rest_framework/serializers.py" in is_valid
299.         return not self.errors
File "/Users/brandon/.virtualenvs/backbone/lib/python2.7/site-packages/rest_framework/serializers.py" in errors
293.             obj = self.from_native(self.init_data, self.init_files)
File "/Users/brandon/.virtualenvs/backbone/lib/python2.7/site-packages/rest_framework/serializers.py" in from_native
262.             attrs = self.restore_fields(data, files)
File "/Users/brandon/.virtualenvs/backbone/lib/python2.7/site-packages/rest_framework/serializers.py" in restore_fields
201.                 field.field_from_native(data, files, field_name, reverted_data)
File "/Users/brandon/.virtualenvs/backbone/lib/python2.7/site-packages/rest_framework/fields.py" in field_from_native
351.         into[(self.source or field_name)] = self.from_native(value)
File "/Users/brandon/.virtualenvs/backbone/lib/python2.7/site-packages/rest_framework/fields.py" in from_native
579.         if value.startswith('http:') or value.startswith('https:'):

Exception Type: AttributeError at /todos/
Exception Value: 'NoneType' object has no attribute 'startswith'
Request information:
GET: No GET data

POST:
{"title":"Work.","order":1,"done":false} = u''

FILES: No FILES data
Dmitri-Sintsov commented on 26 Apr 2019 â€¢
edited
permissions.DjangoModelPermissions artificially ties Django user.has_perm() to view queryset's model.
Django user permissions and querysets should be completely decoupled, because large apps may have different "change" permissions. It's much better just to specify permissions via their 'app_label.codename' rather than hardcoding these as '%(app_label)s.add_%(model_name)s'.
Current approach causes tight coupling in get_required_permissions(self, method, model_cls) which requires mandatory model_cls to be specified. Large apps may provide custom permissions which does not fit into suggested '%(app_label)s.add_%(model_name)s' scheme.
Yes it's possible to override perms_map, however still model_cls argument of get_required_permissions() should be optional one and do not require queryset to be specified.
Django user permissions are not for the querysets only!
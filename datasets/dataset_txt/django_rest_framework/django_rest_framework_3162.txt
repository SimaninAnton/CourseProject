Contributor
dbrgn commented on 28 Jul 2011
I almost removed django-rest-framework from my project due to problems with the UserLoggedInAuthentication when using Ajax-Requests. But then I decided to debug the Code and realized that it wasn't a problem with my code architecture, it was simply a failed CSRF validation.
authentication.py:
94             if request.method.upper() == 'POST':
95                 # Temporarily replace request.POST with .DATA,
96                 # so that we use our more generic request parsing
97                 request._post = self.view.DATA
98                 resp = CsrfViewMiddleware().process_view(request, None, (), {})
99                 del(request._post)
100                 if resp is not None:  # csrf failed
101                     return None
Please provide a correct error message in the return data, instead of returning None, which results in a "you are not logged in" error.
Also, it would be good to reference this section of the Django docs from your documentation.
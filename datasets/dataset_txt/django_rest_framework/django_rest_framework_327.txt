eribol commented on 17 Sep 2018 â€¢
edited by rpkilby
http://dpaste.com/0978JTT
http://dpaste.com/0P1MGM6
I am tring to makefilter my form with TemplateHTMLRender. It works with BrowsableAPI but it gives key error with TemplateHTMLRender.
Environment:


Request Method: GET
Request URL: http://localhost:8000/kurum/sehit-tahsin/pansiyon/odalar/12/

Django Version: 2.1
Python Version: 3.7.0
Installed Applications:
['graphene_django',
 'rest_framework',
 'school.apps.SchoolConfig',
 'django.contrib.admin',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'rest_framework.authtoken']
Installed Middleware:
['django.middleware.security.SecurityMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware']


Template error:
In template /home/derya/projem/lib/python3.7/site-packages/rest_framework/templates/rest_framework/vertical/select_multiple.html, error at line 12
   slug
   2 : {% load rest_framework %}
   3 : {% trans "No items to select." as no_items %}
   4 : 
   5 : <div class="form-group {% if field.errors %}has-error{% endif %}">
   6 :   {% if field.label %}
   7 :     <label {% if style.hide_label %}class="sr-only"{% endif %}>
   8 :       {{ field.label }}
   9 :     </label>
   10 :   {% endif %}
   11 : 
   12 :   <select multiple  {{ field.choices|yesno:",disabled" }}  class="form-control" name="{{ field.name }}">
   13 :     {% for select in field.iter_options %}
   14 :         {% if select.start_option_group %}
   15 :           <optgroup label="{{ select.label }}">
   16 :         {% elif select.end_option_group %}
   17 :           </optgroup>
   18 :         {% else %}
   19 :           <option value="{{ select.value }}" {% if select.value|as_string in field.value|as_list_of_strings %}selected{% endif %} {% if select.disabled %}disabled{% endif %}>{{ select.display_text }}</option>
   20 :         {% endif %}
   21 :     {% empty %}
   22 :         <option>{{ no_items }}</option>


Traceback:

File "/home/derya/projem/lib/python3.7/site-packages/django/template/base.py" in _resolve_lookup
  829.                     current = current[bit]

During handling of the above exception ('BoundField' object is not subscriptable), another exception occurred:

File "/home/derya/projem/lib/python3.7/site-packages/django/core/handlers/exception.py" in inner
  34.             response = get_response(request)

File "/home/derya/projem/lib/python3.7/site-packages/django/core/handlers/base.py" in _get_response
  156.                 response = self.process_exception_by_middleware(e, request)

File "/home/derya/projem/lib/python3.7/site-packages/django/core/handlers/base.py" in _get_response
  154.                 response = response.render()

File "/home/derya/projem/lib/python3.7/site-packages/django/template/response.py" in render
  106.             self.content = self.rendered_content

File "/home/derya/projem/lib/python3.7/site-packages/rest_framework/response.py" in rendered_content
  72.         ret = renderer.render(self.data, accepted_media_type, context)

File "/home/derya/projem/lib/python3.7/site-packages/rest_framework/renderers.py" in render
  176.         return template.render(context, request=request)

File "/home/derya/projem/lib/python3.7/site-packages/django/template/backends/django.py" in render
  61.             return self.template.render(context)

File "/home/derya/projem/lib/python3.7/site-packages/django/template/base.py" in render
  171.                     return self._render(context)

File "/home/derya/projem/lib/python3.7/site-packages/django/template/base.py" in _render
  163.         return self.nodelist.render(context)

File "/home/derya/projem/lib/python3.7/site-packages/django/template/base.py" in render
  937.                 bit = node.render_annotated(context)

File "/home/derya/projem/lib/python3.7/site-packages/django/template/base.py" in render_annotated
  904.             return self.render(context)

File "/home/derya/projem/lib/python3.7/site-packages/django/template/loader_tags.py" in render
  150.             return compiled_parent._render(context)

File "/home/derya/projem/lib/python3.7/site-packages/django/template/base.py" in _render
  163.         return self.nodelist.render(context)

File "/home/derya/projem/lib/python3.7/site-packages/django/template/base.py" in render
  937.                 bit = node.render_annotated(context)

File "/home/derya/projem/lib/python3.7/site-packages/django/template/base.py" in render_annotated
  904.             return self.render(context)

File "/home/derya/projem/lib/python3.7/site-packages/django/template/loader_tags.py" in render
  62.                 result = block.nodelist.render(context)

File "/home/derya/projem/lib/python3.7/site-packages/django/template/base.py" in render
  937.                 bit = node.render_annotated(context)

File "/home/derya/projem/lib/python3.7/site-packages/django/template/base.py" in render_annotated
  904.             return self.render(context)

File "/home/derya/projem/lib/python3.7/site-packages/django/template/library.py" in render
  192.         output = self.func(*resolved_args, **resolved_kwargs)

File "/home/derya/projem/lib/python3.7/site-packages/rest_framework/templatetags/rest_framework.py" in render_form
  84.     return renderer.render(serializer.data, None, {'style': style})

File "/home/derya/projem/lib/python3.7/site-packages/rest_framework/renderers.py" in render
  381.         return template.render(context)

File "/home/derya/projem/lib/python3.7/site-packages/django/template/backends/django.py" in render
  61.             return self.template.render(context)

File "/home/derya/projem/lib/python3.7/site-packages/django/template/base.py" in render
  171.                     return self._render(context)

File "/home/derya/projem/lib/python3.7/site-packages/django/template/base.py" in _render
  163.         return self.nodelist.render(context)

File "/home/derya/projem/lib/python3.7/site-packages/django/template/base.py" in render
  937.                 bit = node.render_annotated(context)

File "/home/derya/projem/lib/python3.7/site-packages/django/template/base.py" in render_annotated
  904.             return self.render(context)

File "/home/derya/projem/lib/python3.7/site-packages/django/template/defaulttags.py" in render
  209.                     nodelist.append(node.render_annotated(context))

File "/home/derya/projem/lib/python3.7/site-packages/django/template/base.py" in render_annotated
  904.             return self.render(context)

File "/home/derya/projem/lib/python3.7/site-packages/django/template/defaulttags.py" in render
  309.                 return nodelist.render(context)

File "/home/derya/projem/lib/python3.7/site-packages/django/template/base.py" in render
  937.                 bit = node.render_annotated(context)

File "/home/derya/projem/lib/python3.7/site-packages/django/template/base.py" in render_annotated
  904.             return self.render(context)

File "/home/derya/projem/lib/python3.7/site-packages/django/template/library.py" in render
  192.         output = self.func(*resolved_args, **resolved_kwargs)

File "/home/derya/projem/lib/python3.7/site-packages/rest_framework/templatetags/rest_framework.py" in render_field
  90.     return renderer.render_field(field, style)

File "/home/derya/projem/lib/python3.7/site-packages/rest_framework/renderers.py" in render_field
  360.         return template.render(context)

File "/home/derya/projem/lib/python3.7/site-packages/django/template/backends/django.py" in render
  61.             return self.template.render(context)

File "/home/derya/projem/lib/python3.7/site-packages/django/template/base.py" in render
  171.                     return self._render(context)

File "/home/derya/projem/lib/python3.7/site-packages/django/template/base.py" in _render
  163.         return self.nodelist.render(context)

File "/home/derya/projem/lib/python3.7/site-packages/django/template/base.py" in render
  937.                 bit = node.render_annotated(context)

File "/home/derya/projem/lib/python3.7/site-packages/django/template/base.py" in render_annotated
  904.             return self.render(context)

File "/home/derya/projem/lib/python3.7/site-packages/django/template/base.py" in render
  987.             output = self.filter_expression.resolve(context)

File "/home/derya/projem/lib/python3.7/site-packages/django/template/base.py" in resolve
  671.                 obj = self.var.resolve(context)

File "/home/derya/projem/lib/python3.7/site-packages/django/template/base.py" in resolve
  796.             value = self._resolve_lookup(context)

File "/home/derya/projem/lib/python3.7/site-packages/django/template/base.py" in _resolve_lookup
  837.                         current = getattr(current, bit)

File "/home/derya/projem/lib/python3.7/site-packages/rest_framework/utils/serializer_helpers.py" in __getattr__
  70.         return getattr(self._field, attr_name)

File "/home/derya/projem/lib/python3.7/site-packages/rest_framework/relations.py" in choices
  526.         return self.get_choices()

File "/home/derya/projem/lib/python3.7/site-packages/rest_framework/relations.py" in get_choices
  522.         return self.child_relation.get_choices(cutoff)

File "/home/derya/projem/lib/python3.7/site-packages/rest_framework/relations.py" in get_choices
  180.         queryset = self.get_queryset()

File "/home/derya/projem/esnetwork/school/serializers.py" in get_queryset
  91.   slug = self.context['slug']

Exception Type: KeyError at /kurum/sehit-tahsin/pansiyon/odalar/12/
Exception Value: 'slug'
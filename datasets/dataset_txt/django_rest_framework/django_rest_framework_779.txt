keturn commented on 23 May 2017
Checklist
I have verified that that issue exists against the master branch of Django REST framework.
I have searched for similar issues in both open and closed tickets and cannot find a duplicate.
This is not a usage question. (Those should be directed to the discussion group instead.)
This cannot be dealt with as a third party library. (We prefer new functionality to be in the form of third party libraries where possible.)
I have reduced the issue to the simplest possible case.
I have included a failing test as a pull request. (If you are unable to do so we can still accept the issue.)
Steps to reproduce
Use CursorPagination on a ModelViewSet, ordering by a FloatField.
Prototype of a test here. (I'm not used to writing project-independent Django application tests, this will need a little tweaking before it runs.)
https://gist.github.com/keturn/8bc88525a183fd41c73ffb729b8865be
Expected behavior
Expect ViewSet to provide pages that iterate through all the results with no duplicates.
Actual behavior
After following the next cursor to the next page, that second page begins with the last item on the first page.
This is because the cursor's representation of the floating-point position has been truncated, so the last item falls on the wrong side of the inequality test.
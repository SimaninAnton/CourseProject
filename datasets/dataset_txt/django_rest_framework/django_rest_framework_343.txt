tvboxme commented on 3 Sep 2018
Checklist
I have verified that that issue exists against the master branch of Django REST framework.
I have searched for similar issues in both open and closed tickets and cannot find a duplicate.
This is not a usage question. (Those should be directed to the discussion group instead.)
This cannot be dealt with as a third party library. (We prefer new functionality to be in the form of third party libraries where possible.)
I have reduced the issue to the simplest possible case.
I have included a failing test as a pull request. (If you are unable to do so we can still accept the issue.)
Steps to reproduce
I wrote a customized model field that always act as a MultiChoiceField, and I defined it's formfield to return forms.TypedMultipleChoiceField.
Serializer always build my field as a ChoiceField, and I can not redefine it's serializer_choice_field because I have other field with choices in this serializer.
At last, I only can hard code a serializer.MultiChoiceField everywhere I use this customized field.
Expected behavior
Serializer should discover if field.formfield is redefined and returns a multi choice field, and should not only depends on serializer_choice_field as a global setting.
Actual behavior
as above.
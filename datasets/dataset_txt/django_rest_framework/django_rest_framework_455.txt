peeomid commented on 13 Mar 2018
Checklist
I have verified that that issue exists against the master branch of Django REST framework.
I have searched for similar issues in both open and closed tickets and cannot find a duplicate.
This is not a usage question. (Those should be directed to the discussion group instead.)
This cannot be dealt with as a third party library. (We prefer new functionality to be in the form of third party libraries where possible.)
I have reduced the issue to the simplest possible case.
I have included a failing test as a pull request. (If you are unable to do so we can still accept the issue.)
Steps to reproduce
I have a model with choice field (this is from fcm-django)
class FCMDevice(Device):
    DEVICE_TYPES = (
        (u'ios', u'ios'),
        (u'android', u'android'),
        (u'web', u'web')
    )

    type = models.CharField(choices=DEVICE_TYPES, max_length=10)
And in its serializer, I try to convert type to lower case
class FCMDeviceSerializer(ModelSerializer):
    class Meta(DeviceSerializerMixin.Meta):
        model = FCMDevice

    def validate_type(self, value):
        return value.lower()
Expected behavior
So when I pass value "IOS", it should convert to "ios" before validating with choices.
Actual behavior
It actually raises validation error before being validated
{'type': ['"IOS" is not a valid choice.']}
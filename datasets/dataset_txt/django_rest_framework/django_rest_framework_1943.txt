smileisak commented on 13 Mar 2015
I have some trouble with integration of Oauth2 authentification process with my API:
I'm working with Django-nonrel and Mongodb and i have this User model :
class User(models.Model):
    user_id = models.IntegerField(null=True)
    username = models.CharField(max_length=50)
    first_name = models.CharField(max_length=50)
    last_name = models.CharField(max_length=50)
    email = models.CharField(null=False, max_length=50)
    date_joined = models.DateTimeField()
    last_successful_login = models.CharField(max_length=50)
    password = models.CharField(max_length=150)
    temp_password = models.CharField(max_length=50)
    group_list = ListField()
    login_failures = models.IntegerField(null=True)
    attempted_login_failure = models.CharField(null=False, max_length=50)
    shop_code = models.IntegerField(null=True)
    am_picture_version = models.IntegerField(null=True)
    last_login = models.DateTimeField(null=True)
    class Meta:
       managed = True
       db_table = 'auth_user'
I have created a serializer for this model :
class UserSerializer(serializers.HyperlinkedModelSerializer):
    class Meta:
        model = User
        fields = ('id',
                  'password',
                  'username',
                  'email',
                  'first_name',
                  'last_name',
                  'date_joined',
                  'group_list')
The views.py :
class UserViewSet(viewsets.ModelViewSet, mixins.ListModelMixin):
    """
    API endpoint that allows users to be viewed or edited.
    """
    permission_classes = [permissions.IsAuthenticated,    TokenHasReadWriteScope]
    queryset = User.objects.all()
    serializer_class = UserSerializer
    paginate_by = PAGE_MAX_SIZE

    def get_queryset(self):
        """
        #Optionally restricts the returned user to a given username,
        #by filtering against a `username` query parameter in the URL.
        """
        queryset = User.objects.all()


        return queryset
I followed the Getting start of the django-oauth-toolkit documentation, so i get the access token, but when i try to get users with this access token it return always :
{"detail": "Authentication credentials were not provided."}%
Is there a problem with mongodb or ?
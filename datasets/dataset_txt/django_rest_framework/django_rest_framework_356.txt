Yaser-Amiri commented on 9 Aug 2018
Steps to reproduce
I have a viewset that uses this permission class:
class ResourceBlahPermissions(permissions.BasePermission):

    def has_permission(self, request, view):
        if request.META.get('REMOTE_ADDR').startswith('192.168.134.'):
            self.message =  'Nobody from your LAN can access this endpoint'
            return False
        if request.user.is_authenticated and not request.user.is_staff:
            self.message =  'You are not admin'
            return False
        return True
Expected behavior
Sometimes I need to send custom messages to my client in permission class (event anonymous users).
I need to show some custom message to my anonymous users.
Actual behavior
In the example I wrote, the first condition ignores messages and shows "Authentication credentials were not provided.' to anonymous users.
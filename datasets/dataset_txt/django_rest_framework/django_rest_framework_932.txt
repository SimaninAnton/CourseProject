Contributor
blag commented on 15 Jan 2017 â€¢
edited
Checklist
I have verified that that issue exists against the master branch of Django REST framework.
I have searched for similar issues in both open and closed tickets and cannot find a duplicate.
This is not a usage question. (Those should be directed to the discussion group instead.)
This cannot be dealt with as a third party library. (We prefer new functionality to be in the form of third party libraries where possible.)
I have reduced the issue to the simplest possible case.
I have included a failing test as a pull request. (If you are unable to do so we can still accept the issue.)
Steps to reproduce
Create a ViewSet with an extra action, include a docstring on the ViewSet:
class ThingViewSet(viewsets.ModelViewSet):
    """
    ViewSet docstring
    """"
    
    queryset = Thing.objects.all()
    serializer_class = ThingSerializer
Add a detail_route with get in the allowed methods
    @detail_route(methods=['get'])
    def specific_action(self, request, pk=None):
        """
        detail_route docstring
        """
        pass
Register the ViewSet as usual
Expected behavior
The documentation of the ViewSet listing itself is ViewSet docstring.
The specific_action documentation should be detail_route docstring.
Actual behavior
The documentation of the ViewSet listing itself is ViewSet docstring (expected).
The specific_action documentation is also ViewSet docstring (NOT expected).
Since extra action routes may break RESTfulness more than normal ViewSets, they are more likely to need more specific documentation than the ViewSet itself.
It also greatly overcomplicates the ViewSet documentation to include documentation about the specific extra action routes.
All of this means that the extra action routes usually need different documentation than the usual ViewSet endpoints.
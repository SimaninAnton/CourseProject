Contributor
gaffney commented on 6 Dec 2014
Hello
Currently logout() does not technically "log out" a user in a test if force_authenticate is enabled.
I think it would make more sense if the forced authentication was cancelled by default since I think it is more common that "logout" called from within a test would subsequently be testing unauthenticated behavior. (In our case, all tests use force_authenticate by default).
Current implementation:
def logout(self):
  self._credentials = {}
  return super(APIClient, self).logout()
Proposed implementation:
def logout(self, cancel_force_authenticate=True):
  self._credentials = {}

  if cancel_force_authenticate:
    self.handler._force_user  = None
    self.handler._force_token = None

  return super(APIClient, self).logout()
P.S. I would have made a PR for this but you might not agree with the change so I am just making an issue to suggest it.
Regards,
-- Ryan
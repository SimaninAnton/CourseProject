gabn88 commented on 4 Sep 2015
I have DRF 3.2.2 with CustomObjectPermissions (Including the view permission) and DjangoObjectPermissionsFilter. Both work fine to limit what the user sees when he GETS a list (using the filter) or when he gets a specific instance (using the customobjectpermission).
However, I just recently noticed that the OPTIONS method of serializers.SlugRelatedField gives back ALL instances in the choice field via the 'value' and the 'display_name'. The first I have circumvented by creating a new class:
class NewSlugRelatedField(serializers.SlugRelatedField):
queryset = MyModel.objects.all()
def display_value(self, instance):
return ''
which always gives an empty display_value. But the latter cannot be deleted so easily.
Also I don't like the monkeypatching and would rather see the issue itself resolved, namely that the OPTIONS method does not filter the choices! :)
Please help fix this.
ctippur commented on 2 Oct 2015
I am using DRF. I want to get the username from the token I am passing.
Here is my curl command:
curl -H "Authorization: Bearer $access_token" -X GET http://localhost:8000/getBlah
Here is what I have so far:
from rest_framework.authtoken.models import Token
class getTokenl(generics.RetrieveDestroyAPIView):
permission_classes = [permissions.IsAuthenticated, TokenHasReadWriteScope]
queryset = Parcel.objects.all()
serializer_class = ParcelGetSerializer
model=Parcel
def dispatch(self, request, _args, *_kwargs):
tok=request.META['HTTP_AUTHORIZATION'].replace('Bearer ','')
print (Token.objects.get(authtoken=tok))
With this, I get a error:
type object 'Token' has no attribute 'objects'
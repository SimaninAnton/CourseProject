ajostergaard commented on 13 Dec 2013
Hi,
I'm probably doing something wrong but I can't figure it out so perhaps I've found a bug.
I have a simple ModelSerializer:
class EntrySerializer(serializers.ModelSerializer):
    class Meta:
        model = Entry
        fields = ('id')
And a simple ListAPIView:
class CurrentEntries(generics.ListAPIView):
    queryset = Entry.current_objects.all()
    serializer_class = EntrySerializer
Entry.current_objects.all() returns the entries for the current timeslot via my own Model Manager - I've verified this via the shell. The problem is that when I call the view (either the JSON API or the AWESOME API dashboard) the results seem to build up over time in the sense that it continues to return old entries which should no longer be included in the result set and aren't if I use the shell etc. It's almost as if the results of the query are being cached and added to in memory somewhere. When I reset the server it all clears up and is fine until an entry becomes stale.
I've been all over the DRF source but can't seem to find the smoking gun - any ideas?
Thanks,
AJ
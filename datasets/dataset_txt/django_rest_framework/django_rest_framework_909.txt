Contributor
daggaz commented on 9 Feb 2017
Steps to reproduce
Enable CSRF_COOKIE_HTTPONLY in django settings
Attempt to PUT through the Browsable API
If CSRF_COOKIE_HTTPONLY is enabled in the django settings then the existing method of accessing the CSRF token for including in the ajax requests (for the PUT form for example) is unable to access the value of the CSRF token:
https://github.com/tomchristie/django-rest-framework/blob/master/rest_framework/static/rest_framework/js/csrf.js#L41
According to the django docs, if this setting is enabled, the CSRF token should be supplied via alternative means (hidden field in the form for example).
Expected behavior
The request to update (PUT) through the Browsable API works.
Actual behavior
HTTP 403 Forbidden
Content-Type: application/json
Vary: Accept
Allow: GET, PUT, PATCH, DELETE, HEAD, OPTIONS

{
    "detail": "CSRF Failed: CSRF token missing or incorrect."
}
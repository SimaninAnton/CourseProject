kltdwrds commented on 13 Jun 2018 â€¢
edited
Steps to reproduce
@permission_classes((AllowAny, ))
class Viewset(viewsets.ViewSet):
    renderer_classes = (JSONRenderer, )
    def list(self, request, *args, **kwargs):
        return Response()
Expected behavior
A valid json response body like null or {}
Actual behavior
No Content-Type header set and an empty response is returned - particularly painful when making requests with jquery's ajax(). It throws an parseerror and rejects the promise on a success response with an empty body. See here https://stackoverflow.com/a/6186905
PR here: #6027
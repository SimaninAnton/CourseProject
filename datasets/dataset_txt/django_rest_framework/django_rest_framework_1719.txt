billdozr commented on 8 Jul 2015
ModelSerializer doesn't work with model DecimalField when defined with the choice parameter.
Workaround for now is to explicitly define the model's DecimalField field in the serializer:
class BookingSerializer(serializers.ModelSerializer):
    num_hours = serializers.DecimalField(max_digits=3, decimal_places=1)

    class Meta:
        model = Booking
Exception stack
Environment:

Request Method: GET
Request URL: http://local.myproject.com:8000/api/v1/bookings/

Django Version: 1.6.11
Python Version: 2.7.6
Installed Applications:
('django.contrib.admin',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'south',
 'crispy_forms',
 'easy_thumbnails',
 'tinymce',
 'djcelery',
 'djrill',
 'social.apps.django_app.default',
 'compressor',
 'storages',
 'import_export',
 'rest_framework',
 'rest_framework.authtoken',
 â€¦)
Installed Middleware:
('htmlmin.middleware.HtmlMinifyMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware',
 'myproject_web.middleware.GeneralSocialAuthExceptionMiddleware',
 'htmlmin.middleware.MarkRequestMiddleware')


Traceback:
File "/Users/myname/Development/python/myproject_env/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  112.                     response = wrapped_callback(request, *callback_args, **callback_kwargs)
File "/Users/myname/Development/python/myproject_env/lib/python2.7/site-packages/django/views/decorators/csrf.py" in wrapped_view
  57.         return view_func(*args, **kwargs)
File "/Users/myname/Development/python/myproject_env/lib/python2.7/site-packages/rest_framework/viewsets.py" in view
  85.             return self.dispatch(request, *args, **kwargs)
File "/Users/myname/Development/python/myproject_env/lib/python2.7/site-packages/rest_framework/views.py" in dispatch
  456.             response = self.handle_exception(exc)
File "/Users/myname/Development/python/myproject_env/lib/python2.7/site-packages/rest_framework/views.py" in dispatch
  453.             response = handler(request, *args, **kwargs)
File "/Users/myname/Development/python/myproject_env/lib/python2.7/site-packages/rest_framework/mixins.py" in list
  47.         return Response(serializer.data)
File "/Users/myname/Development/python/myproject_env/lib/python2.7/site-packages/rest_framework/serializers.py" in data
  622.         ret = super(ListSerializer, self).data
File "/Users/myname/Development/python/myproject_env/lib/python2.7/site-packages/rest_framework/serializers.py" in data
  217.                 self._data = self.to_representation(self.instance)
File "/Users/myname/Development/python/myproject_env/lib/python2.7/site-packages/rest_framework/serializers.py" in to_representation
  572.             self.child.to_representation(item) for item in iterable
File "/Users/myname/Development/python/myproject_env/lib/python2.7/site-packages/rest_framework/serializers.py" in to_representation
  426.         fields = [field for field in self.fields.values() if not field.write_only]
File "/Users/myname/Development/python/myproject_env/lib/python2.7/site-packages/rest_framework/serializers.py" in fields
  317.             for key, value in self.get_fields().items():
File "/Users/myname/Development/python/myproject_env/lib/python2.7/site-packages/rest_framework/serializers.py" in get_fields
  878.             fields[field_name] = field_class(**field_kwargs)
File "/Users/myname/Development/python/myproject_env/lib/python2.7/site-packages/rest_framework/fields.py" in __init__
  1115.         super(ChoiceField, self).__init__(**kwargs)

Exception Type: TypeError at /api/v1/bookings/
Exception Value: __init__() got an unexpected keyword argument 'max_digits'
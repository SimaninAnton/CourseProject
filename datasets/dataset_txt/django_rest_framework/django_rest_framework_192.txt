bukowa commented on 27 Mar 2019
I think i tried everything while testing serializers.ImageField(required=True)
But each time i receive {'image': [ErrorDetail(string='No file was submitted.', code='required')]}
None of stackoverflow or google answers really work, such a trivial and simple task but this is not clear what do i actually pass to the test client data? image variable below
# serializer
class ImageUploadSerializer(serializers.Serializer):

    image = serializers.ImageField(required=True)


# view
class ImageUploadApiView(GenericAPIView):

    serializer_class = ImageUploadSerializer
    parser_classes = (MultiPartParser, )

    def post(self, request):
        serializer = self.get_serializer(data=request.data)
        if serializer.is_valid(raise_exception=True):
            print(serializer.data)
            return Response(serializer.data)


# test
        image = ???
        resp = self.client.post(
            reverse_lazy('uploadimage'),
            data={'image': image},
            content_type='multipart/form-data'
        )
Can someone please explain how do you test an image / file upload ?
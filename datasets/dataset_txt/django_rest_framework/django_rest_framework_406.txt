wuxie2015 commented on 9 May 2018 â€¢
edited by rpkilby
When I set a property method on model with @Property, it doesn't work since I can't see it in valid data while when I directly use model it self it could work. I've saw the source code of django restful framework, on line 236 of serializers.py , the code is
self._validated_data = self.run_validation(self.initial_data)
Here i could see my property in self.initial_data but I can't see it in self._validated_data. So can you tell me how to fix it?
Here is my code:
# Model.py
class Host(models.Model):
    id = models.AutoField(primary_key=True)
    superPass = models.CharField(max_length=128, null=True, default='')

    @property
    def superPassword(self):
        origin_password = self.super_pass[0:-5]
        return origin_password

    @superPassword.setter
    def superPassword(self,new_password):
        origin_password = new_password
        encrypted = origin_password + "fadfa"
        self.super_pass = encrypted 

    @superPassword.deleter
    def superPassword(self):
        del self.super_pass

# Hostserializer.py
class HostSerializer(serializers.ModelSerializer):
    class Meta:
        model = Host
        fields = (
            'id',
            'superPassword')
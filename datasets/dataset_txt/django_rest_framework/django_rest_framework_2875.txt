glic3rinu commented on 27 Mar 2013
We're using standard HTTP Link header [RFC 5988] in order to make our API browsable.
More concretely we are using links like this one:
Link: <http://community-lab.net/api/>; rel="http://confine-project.eu/rel/server/base"
Unfortunately we have encountered a little HTML rendering problem with the current urlize_quoted_links template tag.
The issue is related with the detection of the end of the URL, specifically in this part of the string:
<http://community-lab/api/>;
urlize_quoted_links includes ">;" as part of the URL, (my guess is that the trailing ";" is causing all the trouble).
So in the end the Link gets rendered like:
<span class="lit">&lt;<a href="http://community-lab/api/&gt;;" rel="nofollow">http://community-lab/api/&gt;;</a>
when should be like this:
<span class="lit">&lt;<a href="http://community-lab/api/" rel="nofollow">http://community-lab/api/</a>&gt;;
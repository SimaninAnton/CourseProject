Contributor
jacobh commented on 24 May 2013
Hi,
We've been using django-rest-framework at work and have found what as far as we can tell is a bug with the framework. I've looked but haven't seen any obvious causes.
With our model like this:
class Article(models.Model):
    title = models.CharField(unique=True, max_length=200)
    slug = models.SlugField('URL Slug', help_text="eg: http://www.gizmag.com/url-slug-goes-here/1234/", max_length=200, blank=True, null=True, unique=True)
    body = models.TextField(blank=True)
    ...
and our serializer looking like this:
class ArticleSerializer(serializers.ModelSerializer):
    class Meta:
        model = Article
when I try to submit the string this-is-a-rather-long-slug-for-this-article-lorem-ipsum-dolor-sit-amet as the slug I get the following error
HTTP 400 BAD REQUEST
Vary: Accept
Content-Type: text/html
Allow: GET, PUT, DELETE, HEAD, OPTIONS, PATCH

{
    "slug": [
        "Ensure this value has at most 50 characters (it has 70)."
    ]
}
However, when I change the serializer to look like this:
class ArticleSerializer(serializers.ModelSerializer):
    slug = serializers.SlugField(max_length=200)
    class Meta:
        model = Article
it happily submits without error.
If you like I can give a full code example, however I think these snippets demonstrate the issue.
Thanks!
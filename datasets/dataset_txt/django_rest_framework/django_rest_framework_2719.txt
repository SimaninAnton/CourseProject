rsonbie456 commented on 22 Sep 2013
Hi Guys,
I have a HUGE problem with the REST framework.
I'm having trouble figuring out how to interact with GET/POST requests, and it seems the docs are very vague about details.
Anyways, for now I'm avoiding viewsets because of this, but after I changed back to generic.ListCreateAPIView, my serializer pre-defined fields do not work anymore. They return as NULL.
serializers.py:
class NoteSerializer(serializers.ModelSerializer):
    owner = serializers.Field(source='owner.username')
    firstname = serializers.Field(source='owner.first_name')
    lastname = serializers.Field(source='owner.last_name')
    #id = serializers.Field(source='id')

    class Meta:
        model = Note
        fields = ('id','owner','firstname','lastname','text','color', 'time')
views.py:
 def post(self, request, format=None):
        #if request.POST['owner'] == User.objects.get(username=self.request.user).id and request.POST['color'] in (     'yellow', 'blue', 'green'):
        serializer = NoteSerializer(data=request.DATA)
        if serializer.is_valid():
            serializer.save()
            newnote = Note.objects.create(owner_id=User.objects.get(username=request.user.username).id,  text=request.DATA['text'], color=request.DATA['color'])
            newnote.save()
            return Response(serializer.data, status=status.HTTP_201_CREATED)
        return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)
Can anyone explain to me why the predefined fields (owner, firstname, lastname) suddenly do not work anymore after switching from a viewset to a generic APIView?
Many thanks :)
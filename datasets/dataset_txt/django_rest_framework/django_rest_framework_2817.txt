ldng commented on 7 Jun 2013
It looks like the lookup_field is not propagated correctly which make get_url blows as it tries to reverse the url with lookup_field set to 'pk' instead of 'id_track' as overridden in views.py
# views.py
class AlbumSerializer(serializers.ModelSerializer):
    class Meta:
        model = Album

    tracks = HyperlinkedRelatedField(many=True, read_only=True, view_name='track-detail')


class AlbumRestViewSet(viewsets.ModelViewSet):
    serializer_class = AlbumSerializer
    model = Album
    lookup_field = 'id_album'


class TrackSerializer(serializers.ModelSerializer):
    class Meta:
        model = Track


class TrackRestViewSet(viewsets.ModelViewSet):
    serializer_class = TrackSerializer
    model = Track
    lookup_field = 'id_track'
Environment:
Request Method: GET
Request URL: http://127.0.0.1:8000/site/11162/
Django Version: 1.5.1
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
'django.contrib.contenttypes',
'django.contrib.sessions',
'django.contrib.sites',
'django.contrib.messages',
'django.contrib.staticfiles',
'rest_framework',
'castle')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
'django.contrib.sessions.middleware.SessionMiddleware',
'django.middleware.csrf.CsrfViewMiddleware',
'django.contrib.auth.middleware.AuthenticationMiddleware',
'django.contrib.messages.middleware.MessageMiddleware')
Traceback:
File "/[...]/sandbox/pyenv/local/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
                    response = callback(request, _callback_args, *_callback_kwargs)
File "/[...]/sandbox/pyenv/local/lib/python2.7/site-packages/rest_framework/viewsets.py" in view
        return self.dispatch(request, _args, *_kwargs)
File "/[...]/sandbox/pyenv/local/lib/python2.7/site-packages/django/views/decorators/csrf.py" in wrapped_view
    return view_func(_args, *_kwargs)
File "/[...]/sandbox/pyenv/local/lib/python2.7/site-packages/rest_framework/views.py" in dispatch
        response = self.handle_exception(exc)
File "/[...]/sandbox/pyenv/local/lib/python2.7/site-packages/rest_framework/views.py" in dispatch
        response = handler(request, _args, *_kwargs)
File "/[...]/sandbox/pyenv/local/lib/python2.7/site-packages/rest_framework/mixins.py" in retrieve
    return Response(serializer.data)
File "/[...]/sandbox/pyenv/local/lib/python2.7/site-packages/rest_framework/serializers.py" in data
            self._data = self.to_native(obj)
File "/[...]/sandbox/pyenv/local/lib/python2.7/site-packages/rest_framework/serializers.py" in to_native
        value = field.field_to_native(obj, field_name)
File "/[...]/sandbox/pyenv/local/lib/python2.7/site-packages/rest_framework/relations.py" in field_to_native
        return [self.to_native(item) for item in value.all()]
File "/[...]/sandbox/pyenv/local/lib/python2.7/site-packages/rest_framework/relations.py" in to_native
        raise Exception(msg % view_name)
Exception Type: Exception at /site/11162/
Exception Value: Could not resolve URL for hyperlinked relationship using view name "track-detail". You may have failed to include the related model in your API, or incorrectly configured the lookup_field attribute on this field.
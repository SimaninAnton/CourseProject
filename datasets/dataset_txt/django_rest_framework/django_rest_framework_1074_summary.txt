Improve support for generic relations
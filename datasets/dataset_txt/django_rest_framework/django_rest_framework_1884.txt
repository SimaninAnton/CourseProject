gwikle commented on 9 Apr 2015
If you have an object with a custom model field and create a REST framework serializer for that object you can trigger two AttributeError exceptions during validation:
AttributeError: "'OrderedDict' object has no attribute 'the_custom_field'"
AttributeError: "'TheCustomFieldClass' object has no attribute 'attname'"
I tracked the first to serializers.ModelField.get_attribute() which doesn't handle the case when an OrderedDict is passed instead of an instance. My fix looks like:
    def get_attribute(self, obj):
        return serializers.Field.get_attribute(self, obj)
I tracked the second to serializers.ModelField.to_representation(). It is expecting an instance as an argument but is actually passed the field value. My fix looks like:
def to_representation(self, value):
        return smart_unicode(value)
I'm not sure if this second fix would work for all possible custom model field classes, though.
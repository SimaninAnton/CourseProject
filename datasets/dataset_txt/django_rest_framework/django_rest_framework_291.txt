nhuzaa commented on 31 Oct 2018 â€¢
edited
We are using ModelViewSet
class PredictionStatusDictionaryViewSet(ModelViewSet):
    serializer_class = serializers.PredictionStatusDictionarySerializers

    def perform_create(self, serializer):
        serializer.save(create_user=self.request.user.username)

class PredictionStatusDict(models.Model):
    id = models.AutoField(primary_key=True)
    create_date = models.DateTimeField(auto_now_add=True)
    create_user = models.CharField(max_length=1000, null=False, blank=False)
    update_date = models.DateTimeField()
    update_user = models.CharField(max_length=1000,null=True, blank=True)
    is_resolve_cleanup_exempt_category = models.BooleanField(default=False)
    is_resolve_match_exempt_category = models.BooleanField(default=False)
    is_resolve_internalreview_category = models.BooleanField(default=False)

    class Meta:
        db_table = '"prediction_status_dict"'
Issue
Problem is when performing PATCH operation
We are using a middleware to view the SQL generated, all the fields in models are getting updated even the fields that were not set during the PATCH. I believe its referencing the previous values of the instance
This cause issue when we perform simultaneous PATCH request on same row, changing the boolean values gives us inconsistent data
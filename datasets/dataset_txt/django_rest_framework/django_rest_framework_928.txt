markerdmann commented on 21 Jan 2017
Checklist
I have verified that that issue exists against the master branch of Django REST framework.
I have searched for similar issues in both open and closed tickets and cannot find a duplicate.
This is not a usage question. (Those should be directed to the discussion group instead.)
This cannot be dealt with as a third party library. (We prefer new functionality to be in the form of third party libraries where possible.)
I have reduced the issue to the simplest possible case.
I have included a failing test as a pull request. (If you are unable to do so we can still accept the issue.)
Steps to reproduce
Add a DateField to the model with null=True and a DateField to the serializer with required=False and allow_null=True.
Send a POST with self.client.post(url, data={'field_name': None}) using rest_framework.test.APITestCase.
Expected behavior
A POST/PATCH that sets the value of the field to null should persist to the database as a null value and not return a validation error.
Actual behavior
The API returns {'field_name': ['Date has wrong format. Use one of these formats instead: YYYY[-MM[-DD]].']} and an HTTP status code of 400.
Strangely, an empty string does not throw a validation error and persists to the database as a null value. A GET request then returns a null value instead of the empty string.
Would you agree that this behavior is a bug? If so, I'd be happy to write a test against master and submit a PR.
TheProdigyFilippo commented on 20 Dec 2015
Hi, I've found annoying bug when updated from DRF 3.1.3 to the newest 3.3.2. The bug makes many tests results misleading and useless. Sample of code for a quick view what's going on:
request = self.factory.post('/signup/application/', params)
view = views.UserSignUpView.as_view()
response = view(request)
... #  <= some validation using asserts. OK
print request.__dict__ # <= QueryDict in POST is empty. NOT OK!
# running view again with the same request
response = view(request)  # <= generates exception, because my serializer tries to use data from an empty QueryDict
Tested on 3.1.3 (OK), 3.2.5 (OK) and 3.3.2 (FAIL)
Couldn't debug enough, but in rest_framework/views.py file method APIView.dispatch returns invalid request in request = self.initialize_request(request, *args, **kwargs) (line 442).
File rest_framework/views.py didn't change from 3.2.5 to 3.3.2, but rest_framework/request.py file changed and I suppose the problem is somewhere here.
Best regards!
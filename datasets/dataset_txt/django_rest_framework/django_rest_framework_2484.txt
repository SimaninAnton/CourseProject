JockeTF commented on 1 Jul 2014
I'm using DRF 2.3.14 on Django 1.7c1.
The TEST_REQUEST_RENDERER_CLASSES setting is ignored when running test cases if DEFAULT_RENDERER_CLASSES is also defined. Instead, the renderers defined in DEFAULT_RENDERER_CLASSES are used.
This causes the BrowsableAPIRenderer to be used when testing. The result is that tests fail because the renderer changes the status code from HTTP_204_NO_CONTENT to HTTP_200_OK (renderers.py:605).
I have included an example project to demonstrate this issue:
http://jocketf.se/files/.drf/test_renderers/example.zip
Running the test as is will cause it fail because of the status codes. Commenting out DEFAULT_RENDERER_CLASSES or just 'rest_framework.renderers.BrowsableAPIRenderer' in the settings will cause the test to pass.
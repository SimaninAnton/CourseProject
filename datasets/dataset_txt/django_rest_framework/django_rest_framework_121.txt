alexandre-paroissien commented on 27 Jun 2019
Checklist
I have verified that that issue exists against the master branch of Django REST framework.
I have searched for similar issues in both open and closed tickets and cannot find a duplicate.
This is not a usage question. (Those should be directed to the discussion group instead.)
This cannot be dealt with as a third party library. (We prefer new functionality to be in the form of third party libraries where possible.)
I have reduced the issue to the simplest possible case.
I have included a failing test as a pull request. (If you are unable to do so we can still accept the issue.)
Steps to reproduce
Create a model viewset with different actions (detail=True or False), make sure the viewset and actions require users to be authenticated, and get the following response on list and retrieve views and actions: HTTP 401 Unauthorized "detail": "Authentication credentials were not provided."
Expected behavior
Unauthenticated users should not have access to the list of actions (on list view and on retrieve view) in the "Extra actions" dropdown if they don't have access to the views and actions.
Actual behavior
In browsable api of latest DRF (3.9.4) unauthenticated users can see the list of detail=False actions on the list view and the list of detail=True actions on the retrieve view, even though they don't have access to retrieve/list/actions views (401 unauthorized)
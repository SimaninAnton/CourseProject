wummel commented on Mar 19, 2014
Hi,
with some SSL sites and stream=True the SSL socket seems to be unconnected. Calling connect() manually helps (see test script output below).
I expected that the behaviour is consistent, ie. after calling requests.get() the socket is connected but with no data read because of stream=True.
The test script:
import requests
url = "https://github.com/"
response = requests.get(url, stream=True)
print url, "sock", response.raw._connection.sock
url = "https://www.ahold.com/"
response = requests.get(url, stream=True)
print url, "sock", response.raw._connection.sock
response.raw._connection.connect()
print url, "sock after connect", response.raw._connection.sock
Output:
https://github.com/ sock <ssl.SSLSocket object at 0x27792a8>
https://www.ahold.com/ sock None
https://www.ahold.com/ sock after connect <ssl.SSLSocket object at 0x7ff033a83578>
Version info:
It's a Debian Linux wheezy system.
Python 2.7.3 (default, Mar 13 2014, 11:03:55)
[GCC 4.7.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import requests; print requests.__version__
2.2.1
>>>
ps: maybe this is an urllib3 problem - I'm not sure.
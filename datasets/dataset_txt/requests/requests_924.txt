jefftune commented on Sep 20, 2016 â€¢
edited
I posted the same issue on stackoverflow
Question: requests module in the background is repeating "Starting new HTTPS connection" followed by an equal number of method calls, and these repeated background actions increase over runtime of my program to 20 times. This is concerning to me.
For each "Starting new HTTPS connection" is requests module actually starting a new connection?
For each method call "PUT ..." is requests module actually calling endpoint?
If either or both of the aforementioned are true, then what should I do to prevent requests module from making repeated connections and calls?
I turned on DEBUG logging on requests module.
Initially for the first couple of minutes, the logs generated from requests looks fine, single "Starting new HTTPS connection" followed by and single method call, for example, "PUT":
2016-09-20 05:14:48            INFO    "Starting new HTTPS connection (1): ****.**.**"
2016-09-20 05:14:49            DEBUG   ""PUT /*/***/***/*** HTTP/1.1" 200 17"
However, then for a single action request, the number of "Starting new HTTPS connection" followed by the number of actions start to increase more and more, from 1 to 2 to 3 and up to 20 repeats.
This is happening regardless of what is the endpoint or action method applied.
These repeated logging appear to be coming from: requests.packages.urllib3.connectionpool
Here is an example the requests module is repeating 3 times for each request:
2016-09-20 05:15:08            INFO    "Starting new HTTPS connection (1): ****.**.**"
2016-09-20 05:15:08            INFO    "Starting new HTTPS connection (1): ****.**.**"
2016-09-20 05:15:08            INFO    "Starting new HTTPS connection (1): ****.**.**"
2016-09-20 05:15:08            DEBUG   ""PUT /*/***/***/*** HTTP/1.1" 200 17"
2016-09-20 05:15:08            DEBUG   ""PUT /*/***/***/*** HTTP/1.1" 200 17"
2016-09-20 05:15:08            DEBUG   ""PUT /*/***/***/*** HTTP/1.1" 200 17"
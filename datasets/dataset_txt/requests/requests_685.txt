andreyfedoseev commented on May 9, 2017
I'm trying to do something like:
>>> import requests
>>> url = "http://beta.url2png.com/v6/P4ED6C68627746/d86b36effc2ea6862a2301273c40a2a2/png/?url=http%3A%2F%2Fwww3.geosc.psu.edu%2F%7Edmb53%2FDaveSTELLA%2FDaisyworld%2Fdaisyworld_model.htm&delay=4&fullpage=false&viewport=1280x1024"
>>> response = request.get(url)
>>> url
'http://beta.url2png.com/v6/P4ED6C68627746/d86b36effc2ea6862a2301273c40a2a2/png/?url=http%3A%2F%2Fwww3.geosc.psu.edu%2F%7Edmb53%2FDaveSTELLA%2FDaisyworld%2Fdaisyworld_model.htm&delay=4&fullpage=false&viewport=1280x1024'
>>> response.request.url
'http://beta.url2png.com/v6/P4ED6C68627746/d86b36effc2ea6862a2301273c40a2a2/png/?url=http%3A%2F%2Fwww3.geosc.psu.edu%2F~dmb53%2FDaveSTELLA%2FDaisyworld%2Fdaisyworld_model.htm&delay=4&fullpage=false&viewport=1280x1024'
Note how %7E from the original URL is changed to ~ in the actual request. Also note the d86b36effc2ea6862a2301273c40a2a2 part of the URL. It's a hash of the query string parameters which is required to authorize the request. Since requests.get changes the original URL the hash becomes invalid and thus the request can't be authorized.
So, the original URL is a correct URL which you can open in a browser or download using curl. However the URL that requests.get fetches is invalid and returns 401 Unauthorized response.
jlmurphy commented on Mar 7, 2011
If a caller uses both the files and headers kwargs in requests.request, the dictionary provided in headers will override the multipart encoding headers generated by Poster. See line 180 in core.py. Also, I am using v0.3.0
The request will fail with the following error:
ValueError: No Content-Length specified for iterable body
Example:
import requests

files={ "hello.txt.", "/path/to/file/hello.txt." }

# this works
requests.post('http://path/to/server', files=files)

# this does not work
requests.post('http://path/to/server', headers={ 'Accept' : 'application/json' }, files=files }
hoodja commented on Feb 14, 2015
First, thanks for all the work on this library - I've been using it for about a year and it is always a joy to work with!
I've run into a situation where a request I'm making is running through a NAT that is not in my control, and the request takes >10m to complete. On a Linux machine I am able to retrieve the response using cURL, but it never completed using requests in python. I suspect this is because cURL sends TCP-level keepalive requests while the default initialization of requests does not.
In researching how I would be able to enable keepalive on the underlying sockets, it seems like I would just need to be able to provide the socket_options list to requests.adapters.HTTPAdapter at construction, and have HTTPAdapter include that in pool_kwargs. I imagine this could be accomplished by adding a **kwargs argument to HTTPAdapter and passing it through / merging it into pool_kwargs.
This issue is meant to be a discussion on the appropriateness of that solution.
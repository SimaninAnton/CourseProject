adamatan commented on Sep 18, 2015
The problem
I have been trying to make a GET request to https://service.isracard.co.il/I_logon.jsp using requests.
The site seems to have a valid SSL certificate (see screenshots below), and cURL can get the content without a problem.
However, requests fails to fetch the site with a sslv3 alert handshake failure error.
Notes
I have asked a stackoverflow question about this problem
The original problem happened when I was using mechanize, which uses requests internally.
The problem happens both on OSX and Ubuntu 14.04.
The same call worked for me a few months ago. I assume that the server side was somehow changed.
SSL connections to other sites (e.g. github) work fine.
Stack Trace
>>> import requests
>>> LOGIN_URL = 'https://service.isracard.co.il/I_logon.jsp'
>>> requests.get(LOGIN_URL)
/tmp/blahenv/local/lib/python2.7/site-packages/requests/packages/urllib3/util/ssl_.py:90: InsecurePlatformWarning: A true SSLContext object is not available. This prevents urllib3 from configuring SSL appropriately and may cause certain SSL connections to fail. For more information, see https://urllib3.readthedocs.org/en/latest/security.html#insecureplatformwarning.
  InsecurePlatformWarning
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/tmp/blahenv/local/lib/python2.7/site-packages/requests/api.py", line 69, in get
    return request('get', url, params=params, **kwargs)
  File "/tmp/blahenv/local/lib/python2.7/site-packages/requests/api.py", line 50, in request
    response = session.request(method=method, url=url, **kwargs)
  File "/tmp/blahenv/local/lib/python2.7/site-packages/requests/sessions.py", line 465, in request
    resp = self.send(prep, **send_kwargs)
  File "/tmp/blahenv/local/lib/python2.7/site-packages/requests/sessions.py", line 573, in send
    r = adapter.send(request, **kwargs)
  File "/tmp/blahenv/local/lib/python2.7/site-packages/requests/adapters.py", line 431, in send
    raise SSLError(e, request=request)
requests.exceptions.SSLError: [Errno 1] _ssl.c:510: error:14077410:SSL routines:SSL23_GET_SERVER_HELLO:sslv3 alert handshake failure
Certificate
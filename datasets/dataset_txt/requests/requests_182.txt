ianwremmel commented on Oct 3, 2018
This started out as a bug report for httpie and they referred me here.
it appears that auth via netrc is broken if ~/.netrc includes entries that are not exactly login/password tuples. For example, I have the following entries for circle ci and heroku:
machine api.heroku.com
  login <redacted>
  password <redacted>
  method interactive
machine circleci.com
  login <redacted>
both of these entries prevent my entry for github.com from working with httpie (but curl works just fine).
Expected Result
https api.github.com/users should return 200
Actual Result
https api.github.com/users should returned 401
Reproduction Steps
See summary section for .netrc configs that don't parse.
System Information
$ python -m requests.help
I'm not sure if this is the output you wanted since I don't know enough about python to know if the requests found this way is the same one that httpie depends on.
{
  "chardet": {
    "version": "3.0.4"
  }, 
  "cryptography": {
    "version": ""
  }, 
  "idna": {
    "version": "2.6"
  }, 
  "implementation": {
    "name": "CPython", 
    "version": "2.7.15"
  }, 
  "platform": {
    "release": "18.0.0", 
    "system": "Darwin"
  }, 
  "pyOpenSSL": {
    "openssl_version": "", 
    "version": null
  }, 
  "requests": {
    "version": "2.18.4"
  }, 
  "system_ssl": {
    "version": "1000210f"
  }, 
  "urllib3": {
    "version": "1.22"
  }, 
  "using_pyopenssl": false
}
This command is only available on Requests v2.16.4 and greater. Otherwise,
please provide some basic information about your system (Python version,
operating system, &c).
olemoudi commented on Jun 10, 2013
Currently any duplicate header on responses gets merged on the response.headers dict, using a comma to delimit de two different header values. For example
HTTP/1.1 200 OK
HeaderX: Value1
HeaderX: Value2
print response.headers
{ 'headerx' : ' Value1, Value2' }
This makes impossible to detect responses with duplicate headers, particularly when header values already include commas by themselves (e.g., 'last-modified')
Potential alternative repr:
print response.headers
{ 'headerx' : ['Value1', 'Value2'] }
Problem: breaks backward compatibility as scripts expecting a string would get a list
print response.headers
{ 'headerx' : 'Value1 'Value2'}
Where SEP would be a separator that can't be found on values (newline?)
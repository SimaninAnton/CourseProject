a-wakeel commented on Dec 30, 2017
Summary.
The requests proxies do work for the http connections but not for https connections. I tried to find a solution to this problem but could not find any satisfied answer. Here is the sample test code:
import requests

proxy = {
'http': 'http://user:pass@ip:http-port',
'https': 'http://user:pass@ip:https-port'
}

res = requests.get('https://somesite', proxies=proxy)
print(res.text)
Expected Result
It should return the page content by establishing a connection as it does in case of http request.
Actual Result
I got this error upon using https request:
requests.exceptions.ProxyError: HTTPSConnectionPool(host='www.google.com', port=
443): Max retries exceeded with url: / (Caused by ProxyError('Cannot connect to
proxy.', error('Invalid response from tunnel request',)))
Reproduction Steps
import requests

proxy = {
'http': 'http://user:pass@ip:http-port',
'https': 'http://user:pass@ip:https-port'
}

res = requests.get('https://somesite', proxies=proxy)
print(res.text)
System Information
I'm using this code on Windows Operating System.
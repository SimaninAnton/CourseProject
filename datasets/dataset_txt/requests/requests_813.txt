Kronuz commented on Jan 6, 2017
During some profiling, I found out one slow operation is self.pool.get() in _get_conn().
In urllib3, in connectionpool.ConnectionPool, requests uses LifoQueue (which uses a list instead of a much faster deque):
https://github.com/kennethreitz/requests/blob/master/requests/packages/urllib3/connectionpool.py#L64
My suggestion is one could use a custom LifoQueue as:
class LifoQueue(Queue):
    def _get(self):
        return self.queue.pop()
or simply use a Queue, if Lifo is not really needed.
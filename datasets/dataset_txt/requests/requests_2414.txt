nisavid commented on Jul 31, 2012
the Requests documentation clearly states,
There are many times that you want to send data that is not form-encoded. If you pass in a string instead of a dict, that data will be posted directly.
i presume that it's safe to interpret "string" here as meaning "str or unicode" (minor documentation error). i'm not sure what the string being "posted directly" is supposed to mean. i suppose it should mean that the request's Content-Type is text/plain, since that's a reasonable interpretation of a generic string. in any case, i'm quite sure that it's not supposed to mean that the string is passed in as form-encoded data. that would defeat the stated purpose of passing in a string instead of a dict.
unfortunately, passing a str as the data does in fact cause the request to have Content-Type application/x-www-form-urlencoded, just as in the dict case.
either this behavior is incorrect or the documentation is incorrect. i'd prefer it to be the former. the automatic conversion of a dict of parameters as form-encoded data seems to be specific to the case where data is a mapping (in fact, i'd prefer this special case to likewise interpret any collections.Mapping objects rather than just dicts). when data is a string, on the other hand, it seems natural to interpret it as a plain-text string (text/plain) unless otherwise specified. in other words, the particular media type of the request entity is application-dependent; automatically applying application/x-www-form-urlencoded is an act of incorrectly imposing one application's assumptions on another. the current behavior leads to confusing bugs when a user forgets to specify the proper media type, Requests (incorrectly) applies application/x-www-form-urlencoded, and the receiving server subsequently parses the entity (incorrectly) as such. text/plain has no inherent syntax, so an unsuspecting web server will not mangle it if the user forgets to specify the correct media type.
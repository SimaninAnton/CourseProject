pjjw commented on Apr 15, 2014
i mean so this is probably more of a rant than an issue, but that was 3 hours i won't get back.
was trying to pipe requests through a squid proxy in a lights-out environment. credentials come from a data store separate from configuration, so seemed reasonable to use requests.auth.HTTPProxyAuth(l, p) as the auth kwarg as (what i thought) a supplement to the proxies dict fed to the proxies kwarg. this works fine for http requests, but this seems to be by accident- it falls apart when making an https request through a proxy, when urllib3 uses the CONNECT verb to encapsulate the request.
basically requests.auth.HTTPProxyAuth doesn't make it clear that it's not the correct (always working) way to authenticate to a proxy, but that you must put the credentials into the proxy url in the proxies dict. deprecation/removal of that class would probably make the interface cleaner- failing that, a note in the source would be nice.
Contributor
benmao commented on Nov 23, 2011
test code:
from requests import session

with session() as c:
    c.get('http://www.baidu.com')
    #should have cookie headers
    c.get('http://www.baidu.com')
Server:
Set-Cookie: BAIDUID=DC1510722CF5A19A2A4C4E4DB720C5D4:FG=1; expires=Wed, 23-Nov-41 17:44:00 GMT; path=/; domain=.baidu.com
Client:
Cookie: BAIDUID="DC1510722CF5A19A2A4C4E4DB720C5D4:FG=1"
The correct result should be:
Cookie: BAIDUID=DC1510722CF5A19A2A4C4E4DB720C5D4:FG=1
quote function
def _quote(str, LegalChars=_LegalChars,
           idmap=_idmap, translate=string.translate):
    #
    # If the string does not need to be double-quoted,
    # then just return the string.  Otherwise, surround
    # the string in doublequotes and precede quote (with a \)
    # special characters.
    #
    if "" == translate(str, idmap, LegalChars):
        return str
    else:
        return '"' + _nulljoin( map(_Translator.get, str, str) ) + '"'
# end _quote
Contributor
gagoman commented on Dec 23, 2013
Hello.
My English is not so good, sorry.
Problem example:
def fail_on_error(r, *args, **kwargs):
    r.raise_for_status()

s = requests.session()
s.hooks.update(dict(response=fail_on_error))
r = s.get('http://httpbin.org/status/404')
This code doesn't raise an Exception. Is wasn't too obvious for me. Is it ok?
It is caused by merge_setting if this a problem, which overrides Session hooks with default Request hooks.
Thanks.
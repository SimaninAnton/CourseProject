haocs commented on Sep 17, 2016
python: 3.4
requests: 2.9.1
I implemented the following function to fetch stream log from server continuously.
def stream_trace(streaming_url, user_name, password):
    import requests
    r = requests.get(streaming_url, auth=(user_name, password), stream=True)
    for line in r.iter_lines(decode_unicode=True):
        if line:
            print(line)
The above code could fetch and print the log successfully however its behavior was different as expected.
Basically, it holds the last line of current content/chunk and prints it together with the next chunk of logs.
For example, let's say there are two chunks of logs from server and the expected print:
# first chunk
a
#  second chunk
b
c
what stream_trace function printed out('a' printed as 2nd chunk and 'c' was missing)
# first chunk
# second chunk
a
b
Could you help me figure out what may went wrong? Thanks.
furlongm commented on Jul 13, 2016
I seem to consistently get a different Content-Length when I use httplib (8494757) and when I use requests (625290), for the same file. Is this normal or is this a bug?
>>> conn = httplib.HTTPSConnection('raw.githubusercontent.com')
>>> conn.request('HEAD','/stevemeier/cefs/master/errata.latest.xml')
>>> conn.getresponse().getheaders()
[('content-length', '8494757'), ('via', '1.1 varnish'), ('vary', 'Authorization,Accept-Encoding'), ('x-xss-protection', '1; mode=block'), ('x-content-type-options', 'nosniff'), ('etag', '"d8000ebc3721f00f130736072186146d50df2781"'), ('x-cache-hits', '3'), ('cache-control', 'max-age=300'), ('source-age', '105'), ('x-served-by', 'cache-mel6523-MEL'), ('x-cache', 'HIT'), ('x-github-request-id', '2BF94A17:13B4D:46ADE7:578648AD'), ('accept-ranges', 'bytes'), ('expires', 'Wed, 13 Jul 2016 14:03:47 GMT'), ('x-fastly-request-id', '363b36bb9fb7c18106f7e1182450c91bed7e60f7'), ('x-geo-block-list', ''), ('date', 'Wed, 13 Jul 2016 13:58:47 GMT'), ('access-control-allow-origin', '*'), ('content-security-policy', "default-src 'none'; style-src 'unsafe-inline'"), ('strict-transport-security', 'max-age=31536000'), ('connection', 'keep-alive'), ('x-frame-options', 'deny'), ('content-type', 'text/plain; charset=utf-8')]
vs
>>> res = requests.head('https://raw.githubusercontent.com/stevemeier/cefs/master/errata.latest.xml')
>>> res.headers
{'Content-Length': '625290', 'X-XSS-Protection': '1; mode=block', 'Content-Security-Policy': "default-src 'none'; style-src 'unsafe-inline'", 'X-Cache-Hits': '1', 'X-Frame-Options': 'deny', 'Access-Control-Allow-Origin': '*', 'X-Served-By': 'cache-mel6521-MEL', 'X-GitHub-Request-Id': '2BF94A14:37EB:8B44EC:57864851', 'Expires': 'Wed, 13 Jul 2016 14:03:55 GMT', 'X-Fastly-Request-ID': 'd1f56c5b421ddc141601df05fd3cc5dc0167f3e1', 'Date': 'Wed, 13 Jul 2016 13:58:55 GMT', 'Source-Age': '205', 'X-Cache': 'HIT', 'Accept-Ranges': 'bytes', 'Strict-Transport-Security': 'max-age=31536000', 'Connection': 'keep-alive', 'X-Geo-Block-List': '', 'Via': '1.1 varnish', 'X-Content-Type-Options': 'nosniff', 'Content-Encoding': 'gzip', 'Vary': 'Authorization,Accept-Encoding', 'ETag': '"d8000ebc3721f00f130736072186146d50df2781"', 'Cache-Control': 'max-age=300', 'Content-Type': 'text/plain; charset=utf-8'}
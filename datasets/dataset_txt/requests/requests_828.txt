bigbagboom commented on Dec 19, 2016 ‚Ä¢
edited
I have an inhouse IIS server with ssl3 but an expired certificate, so I used requests without certificate verification and it was working fine with requests 2.11.1. But after I upgrade requests to 2.12.0, there was an error occured.
the code is:
...
requests.get('https://10.192.8.89:8080/yps_report', verify=False)
...
error message:
Traceback (most recent call last):
File "c:\python35\lib\site-packages\requests\packages\urllib3\contrib\pyopenssl.py", line 417, in wrap_socket
cnx.do_handshake()
File "c:\python35\lib\site-packages\OpenSSL\SSL.py", line 1426, in do_handshake
self._raise_ssl_error(self._ssl, result)
File "c:\python35\lib\site-packages\OpenSSL\SSL.py", line 1167, in _raise_ssl_error
raise SysCallError(-1, "Unexpected EOF")
OpenSSL.SSL.SysCallError: (-1, 'Unexpected EOF')
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
File "c:\python35\lib\site-packages\requests\packages\urllib3\connectionpool.py", line 594, in urlopen
chunked=chunked)
File "c:\python35\lib\site-packages\requests\packages\urllib3\connectionpool.py", line 350, in _make_request
self._validate_conn(conn)
File "c:\python35\lib\site-packages\requests\packages\urllib3\connectionpool.py", line 835, in validate_conn
conn.connect()
File "c:\python35\lib\site-packages\requests\packages\urllib3\connection.py", line 323, in connect
ssl_context=context)
File "c:\python35\lib\site-packages\requests\packages\urllib3\util\ssl.py", line 324, in ssl_wrap_socket
return context.wrap_socket(sock, server_hostname=server_hostname)
File "c:\python35\lib\site-packages\requests\packages\urllib3\contrib\pyopenssl.py", line 424, in wrap_socket
raise ssl.SSLError('bad handshake: %r' % e)
ssl.SSLError: ("bad handshake: SysCallError(-1, 'Unexpected EOF')",)
...
I tried to downgrade requests to 2.11.1 and the error was gone. I have no idea how to fix this.
üëç 1
Member
Lukasa commented on Jun 19, 2012
Pull request #686 is failing Travis-CI testing because of lines 354 and 355 in test_requests.py. This failure occurs only in Python 2.*, and is because the string needs to be a unicode literal.
An simple and butt-ugly fix would be to change the section of the test from:
post6 = post(url, files={'fname.txt': '\xe9'})
self.assertEqual(post6.status_code, 200)
to:
if (sys.version_info[0] == 2):
    fnamedata = u'\xe9'
else:
    fnamedata = '\xe9'
post6 = post(url, files={'fname.txt': fnamedata})
self.assertEqual(post6.status_code, 200)
I'm not putting this into a pull request because I hate this code so much it makes me want to break things. I'm happy to look into a better way, but I'm putting this issue up so that people are aware of it. Also so that someone smarter than me can fix it. ;)
mx237 commented on Jun 10, 2017 â€¢
edited
Platform: Win7 Pro SP1
Python: 3.6.1 64 bit
package:
requests==2.17.3
requests-file==1.4.2
requests-ftp==0.3.1
urllib3==1.21.1
When I try to request http://www.google.com/finance/historical?q=NASDAQ%3AAAPL&startdate=Jun+1%2C+2017&enddate=Jun+2%2C+2017&output=csv, the http response has no encoding info. However, the response is utf-8 encoded with utf-8 BOM.
Even if I set decode_unicode=True in iter_content, it does not try to decode the content and simply gives the raw bytes.
I wonder if this is a designed feature or could you add a feature to peek the few bytes in the beginning and try to guess the encoding from BOM when decode_unicode is set and the encoding is not available?
Thank you very much!
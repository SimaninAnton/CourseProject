eskerda commented on Jan 20, 2016
Hello,
For the last month I've been getting reported issues on badly encoded data (ie: eskerda/pybikes#109)
I've searched through the issues and also tried to pinpoint it to a particular change, but only one if found is from 2014.
Has something changed recently?
Can be reproduced as:
import requests
import re

rgx = r'setEstacao\((.+)\)'
resp = requests.get('http://www.ciclosampa.com.br/estacoes.php')

print "Uses default encoding %r" % resp.encoding
print re.findall(rgx, resp.text)[0]
print ""
resp.encoding = 'UTF-8'
print "Uses set encoding %r" % resp.encoding
print re.findall(rgx, resp.text)[0]
Uses default encoding 'ISO-8859-1'
-23.572208,-46.644283,"1","EstaÃ§Ã£o Hcor","Rua Desembargador Eliseu Guilherme 14","5","11"

Uses set encoding 'UTF-8'
-23.572208,-46.644283,"1","Estação Hcor","Rua Desembargador Eliseu Guilherme 14","5","11"
Sorry if this has already been reported or resolved. Looked for issues but most changes on this are too old to be relevant.
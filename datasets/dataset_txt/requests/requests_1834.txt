Contributor
bboe commented on Jan 26, 2014
Requests issues a ResourceWarning in python 3.2+ as sockets are not explicitly closed before garbage collection occurs. While ResourceWarnings are not displayed by default, it can be a distraction to some developers when working with warnings enabled.
File: test.py
import requests

def make_request():
    resp = requests.get('http://google.com')
    resp.close()  # this appears to have no effect, even though the function exists

make_request()
$ python -Wall test.py 
test.py:7: ResourceWarning: unclosed <socket.socket object, fd=4, family=2, type=1, proto=6>
  make_request()
test.py:7: ResourceWarning: unclosed <socket.socket object, fd=3, family=2, type=1, proto=6>
  make_request()
It would be great if there was a way to prevent the ResourceWarning from occurring, without issuing a Connection:close header.
üëç 1
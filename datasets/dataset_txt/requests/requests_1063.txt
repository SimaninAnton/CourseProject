hudcoley commented on May 26, 2016
I am using a 3rd party library that uses requests, and when I try to post using a session I get this error:
File "", line 1, in
File "/usr/local/lib/python2.7/dist-packages/pacer_lib/scraper.py", line 42, in init
self.refresh_login()
File "/usr/local/lib/python2.7/dist-packages/pacer_lib/scraper.py", line 74, in refresh_login
response = self.br.post(login_url, data=payload)
File "/usr/lib/python2.7/dist-packages/requests/sessions.py", line 500, in post
return self.request('POST', url, data=data, json=json, _kwargs)
File "/usr/lib/python2.7/dist-packages/requests/sessions.py", line 457, in request
resp = self.send(prep, *send_kwargs)
File "/usr/lib/python2.7/dist-packages/requests/sessions.py", line 595, in send
history = [resp for resp in gen] if allow_redirects else []
File "/usr/lib/python2.7/dist-packages/requests/sessions.py", line 189, in resolve_redirects
allow_redirects=False,
File "/usr/lib/python2.7/dist-packages/requests/sessions.py", line 569, in send
r = adapter.send(request, *_kwargs)
File "/usr/lib/python2.7/dist-packages/requests/adapters.py", line 329, in send
conn = self.get_connection(request.url, proxies)
File "/usr/lib/python2.7/dist-packages/requests/adapters.py", line 243, in get_connection
conn = self.poolmanager.connection_from_url(url)
File "/usr/lib/python2.7/dist-packages/urllib3/poolmanager.py", line 131, in connection_from_url
return self.connection_from_host(u.host, port=u.port, scheme=u.scheme)
File "/usr/lib/python2.7/dist-packages/urllib3/poolmanager.py", line 102, in connection_from_host
raise LocationValueError("No host specified.")
urllib3.exceptions.LocationValueError: No host specified.
here is the relevant source from pacer_lib
def refresh_login(self):
"""
Logs in to the PACER system using the login and password provided at
the initialization of search_agent(). This will create a Requests
session that will allow you to query the PACER system. If
auto_login =False, refresh_login() must be called before you can
query the case_locator. This function will raise an error if you
supply an invalid login or password.
    Returns nothing.
    """
    #SETTINGS (determined from the form from PACER's '/login.pl')
    payload = {'loginid':self.username, 'passwd':self.password}
    login_url = 'https://pacer.login.uscourts.gov/cgi-bin/check-pacer-passwd.pl'
    self.br = requests.Session()
    response = self.br.post(login_url, data=payload)
I have tried just posting without a session and it works (at least I get a 200), but every time I try to use a session I get that same error. Any help would be greatly appreciated
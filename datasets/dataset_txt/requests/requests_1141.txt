davidfstr commented on Mar 8, 2016
Summary
If I made a request with code that looks like:
    requests.get(
        'http://127.0.0.1:8765/',
        headers=OrderedDict([
            ('X-Header-1', 'ignoreme'),
            ('X-Header-2', 'ignoreme'),
            ('X-Header-3', 'ignoreme'),
            ('X-Header-4', 'ignoreme'),
        ])
    )
I expect the recipient HTTP server to receive the X headers in the same order at they were listed in the code above. However I receive them in a random non-deterministic order.
Environment
Requests 2.9.1
Python 3.4.1
Repro Steps
Download files in the following gist: https://gist.github.com/davidfstr/0dca5a133fa397cadd92
Run reflect_server.py in terminal window 1.
Run reflect_client.py in terminal window 2.
Expected Results
Terminal window 1 shows a request made with the X headers in consecutive order from 1 to 4.
Actual Results
Terminal window 1 shows a request made with the X headers in random non-deterministic order.
Notes
The following closed older issues suggest that preservation of order is indeed important:
#284, #179
#2668
üëç 1
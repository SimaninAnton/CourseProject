p-clem commented on May 15, 2014
Whenever I try to do a Post with an image as file and use Authentification:
        r = requests.post(
            url,
            data=data,
            auth=('auth','pass'),
            files={'image': object.image},
        )
I get this error:
UnicodeDecodeError
'ascii' codec can't decode byte 0xff in position 1141: ordinal not in range(128)
If I remove the authentication it works.
The full Traceback:
Environment:


Request Method: POST
Request URL: http://127.0.0.1:8000/admin/magazines/magazine/71/

Django Version: 1.6.2
Python Version: 2.7.0
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'south',
 'ajax_select',
 'shops',
 'feeds',
 'magazines')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware')


Traceback:
File "C:\Python27\lib\site-packages\django\core\handlers\base.py" in get_response
  114.                     response = wrapped_callback(request, *callback_args, **callback_kwargs)
File "C:\Python27\lib\site-packages\django\contrib\admin\options.py" in wrapper
  432.                 return self.admin_site.admin_view(view)(*args, **kwargs)
File "C:\Python27\lib\site-packages\django\utils\decorators.py" in _wrapped_view
  99.                     response = view_func(request, *args, **kwargs)
File "C:\Python27\lib\site-packages\django\views\decorators\cache.py" in _wrapped_view_func
  52.         response = view_func(request, *args, **kwargs)
File "C:\Python27\lib\site-packages\django\contrib\admin\sites.py" in inner
  198.             return view(request, *args, **kwargs)
File "C:\Python27\lib\site-packages\django\utils\decorators.py" in _wrapper
  29.             return bound_func(*args, **kwargs)
File "C:\Python27\lib\site-packages\django\utils\decorators.py" in _wrapped_view
  99.                     response = view_func(request, *args, **kwargs)
File "C:\Python27\lib\site-packages\django\utils\decorators.py" in bound_func
  25.                 return func(self, *args2, **kwargs2)
File "C:\Python27\lib\site-packages\django\db\transaction.py" in inner
  339.                 return func(*args, **kwargs)
File "C:\Python27\lib\site-packages\django\contrib\admin\options.py" in change_view
  1230.                 self.save_model(request, new_object, form, True)
File "C:\Python27\lib\site-packages\django\contrib\admin\options.py" in save_model
  860.         obj.save()
File "C:\DEV\projects\stylr\stylr\apps\magazines\models.py" in save
  48.             files={'logo': self.logo, 'image': self.cover},
File "C:\Python27\lib\site-packages\requests\api.py" in post
  88.     return request('post', url, data=data, **kwargs)
File "C:\Python27\lib\site-packages\requests\api.py" in request
  44.     return session.request(method=method, url=url, **kwargs)
File "C:\Python27\lib\site-packages\requests\sessions.py" in request
  383.         resp = self.send(prep, **send_kwargs)
File "C:\Python27\lib\site-packages\requests\sessions.py" in send
  486.         r = adapter.send(request, **kwargs)
File "C:\Python27\lib\site-packages\requests\adapters.py" in send
  330.                     timeout=timeout
File "C:\Python27\lib\site-packages\requests\packages\urllib3\connectionpool.py" in urlopen
  480.                                                   body=body, headers=headers)
File "C:\Python27\lib\site-packages\requests\packages\urllib3\connectionpool.py" in _make_request
  285.             conn.request(method, url, **httplib_request_kw)
File "C:\Python27\lib\httplib.py" in request
  946.             self._send_request(method, url, body, headers)
File "C:\Python27\lib\httplib.py" in _send_request
  987.         self.endheaders(body)
File "C:\Python27\lib\httplib.py" in endheaders
  940.         self._send_output(message_body)
File "C:\Python27\lib\httplib.py" in _send_output
  801.             msg += message_body

Exception Type: UnicodeDecodeError at /admin/magazines/magazine/71/
Exception Value: 'ascii' codec can't decode byte 0xff in position 1141: ordinal not in range(128)
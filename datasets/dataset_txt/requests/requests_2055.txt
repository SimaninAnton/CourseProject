timmyschweer commented on Jul 19, 2013
What am I doing?
using python requests to upload very large files to an java restlet that uses "org.apache.commons.fileupload" to receive the upload.
Python source code:
import requests
url = "http://127.0.0.1:8888/service/rest/project/27/uploadfile/filename.zip"
filepath = "/home/user/3gb-file.zip"
session = requests.Session()
session.trust_env = False
session.auth = requests.auth.HTTPDigestAuth("user", "mypassword")
fpFile = open(filepath, 'rb')
session.post(url, data=fpFile, timeout=20)
fpFile.close()
Java Exception Message:
[INFO] org.apache.commons.fileupload.FileUploadBase$InvalidContentTypeException: the request doesn't contain a multipart/form-data or multipart/mixed stream, content type header is null
[INFO] [ERROR] Jul 19, 2013 2:11:11 PM org.restlet.engine.log.LogFilter afterHandle
        at org.apache.commons.fileupload.FileUploadBase$FileItemIteratorImpl.<init>(FileUploadBase.java:908)
[INFO]  at org.apache.commons.fileupload.FileUploadBase.getItemIterator(FileUploadBase.java:331)
I checked the request header from the Response object, and there really is no "Content-Type" specified. I'm using the current requests library version 1.2.3 and python version 2.7.2
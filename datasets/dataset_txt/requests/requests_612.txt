ghost commented on Jun 6, 2017
Sending a response with special german signs and encoded as utf-8 does not really help
to get special german signs like äÄöÖüÜß in response.
Sending such signs results in empty response.
The answer object has as text field an empty field and can not use json(...) function member, ending with an exception.
Expected Result
Was expecting responsed text in response object with german signs.
Actual Result
Getting following exception:
File "C:\Python27\lib\site-packages\requests\models.py", line 886, in json
return complexjson.loads(self.text, **kwargs)
File "C:\Python27\lib\json_init_.py", line 338, in loads
return _default_decoder.decode(s)
File "C:\Python27\lib\json\decoder.py", line 365, in decode
obj, end = self.raw_decode(s, idx=_w(s, 0).end())
File "C:\Python27\lib\json\decoder.py", line 383, in raw_decode
raise ValueError("No JSON object could be decoded")
ValueError: No JSON object could be decoded
Reproduction Steps
Code that i use in parts:
For headers using following structure:
headers = {
'Content-Type' : 'application/json; encoding="utf-8"',
'Authorization' : 'authorization '
}
Sending request with:
response = requests.post(
url,
headers = headers
)
response.close()
Trying to get text from response with:
response.text (But it is empty!) or a json object, because getting json in response
response.json() (But getting an exception described in ## Actual result)
System Information
Python 2.7.5
requests 2.17.3
gholms commented on Feb 1, 2013
I'm trying to port the parameter-based authentication scheme that AWS uses to requests 1 from an older version. It uses a request's parameters to generate signature parameters of its own and then augments the request with them. The resulting parameters then go into the request as either a query string or form data. As a result, this handler needs to be able to modify those, but since requests 1 just hands auth handlers PreparedRequests and no references at all to the original Requests, query strings and form data (and in fact everything other than headers) become incredibly inconvenient to modify.
I'm handing the auth handler to a Session and then calling that Session's request method a bunch of times. Is there a way to make that (also?) give the auth handler the original Request whenever it gives it a PreparedRequest without breaking an interface somewhere? Should I be unpacking everything with urlparse and cgi and then re-calling prepare_url and prepare_body? Or is there another fix/workaround that might be better?
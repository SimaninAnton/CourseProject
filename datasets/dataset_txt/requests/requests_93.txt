dafegit commented on Apr 9, 2019 â€¢
edited
Hi,
Basically if I run a command curl:
curl -k -u user:pass --header 'Content-Type: application/xml' --request POST --data '<LocalIDs><LocalID ID="9128615"/></LocalIDs>' --url https://rhtpcapc001:8182/pc/center/webservice/datasources/dataSourceConsoleName/Data%20Aggregator%40RHTPCADA201/itemids
I have the following answer:
<?xml version="1.0" encoding="UTF-8"?><ItemIDResults><ItemIDResult LocalID="9528017" ItemID="828570"/></ItemIDResults>
I made a script in python to run this command:
#!/usr/bin/python
import requests
import urllib3
urllib3.disable_warnings()
headers = {
'Content-Type': 'application/xml',
}
data = {
'<LocalID ID': '"9528017"/>'
}
response = requests.post('https://rhtpcapc001:8182/pc/center/webservice/datasources/dataSourceConsoleName/Data%20Aggregator%40RHTPCADA201/itemids', headers=headers, data=data, verify=False, auth=('user', 'pass'))
print (response.encoding)
print (response.headers['Content-Type'])
print (response.headers)
print (response.text)
print (response.content)
print (response.reason)
and gives me the following error:
ISO-8859-1
text/plain
{'Set-Cookie': 'JSESSIONID=md1waumsuoe81jceaxacbqgid;Path=/pc;Secure', 'Expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'Content-Type': 'text/plain', 'Date': 'Tue, 09 Apr 2019 10:28:54 GMT', 'Content-Length': '173', 'Server': 'Jetty(9.3.5.v20151012)'}
JAXBException occurred : ParseError at [row,col]:[1,1]
Message: Content is not allowed in prolog.. ParseError at [row,col]:[1,1]
Message: Content is not allowed in prolog..
b'JAXBException occurred : ParseError at [row,col]:[1,1]\nMessage: Content is not allowed in prolog.. ParseError at [row,col]:[1,1]\nMessage: Content is not allowed in prolog.. '
Bad Request
I think the problem is the encoding. When I run only the command curl:
COMMAND:
curl -k -u user:pass --header 'Content-Type: application/xml' --request POST --data '<LocalIDs><LocalID ID="9128615"/></LocalIDs>' --url https://rhtpcapc001:8182/pc/center/webservice/datasources/dataSourceConsoleName/Data%20Aggregator%40RHTPCADA201/itemids
OUTPUT:
<?xml version="1.0" encoding="UTF-8"?><ItemIDResults><ItemIDResult LocalID="9528017" ItemID="828570"/></ItemIDResults>
in the answer we see encoding ="UTF-8"
in the python script with the response.encoding I see the encoding ISO-8859-1
thank you in advance for all the help.
BR
David
BugReporter2013 commented on Mar 24, 2013
Steps to reproduce:
import requests
from pyquery import PyQuery

def obtainCookies(username, password):
    tokenUrl = 'https://news.ycombinator.com/newslogin'
    loginUrl = 'https://news.ycombinator.com/y'
    query = PyQuery(requests.get(tokenUrl).content)
    token = query('input[name="fnid"]').val()

    payload = {
        'fnid' : token,
        'u' : username,
        'p' : password
    }

    return requests.post(loginUrl, data=payload).cookies

print len(obtainCookies('some_user', 'some_password')) 
This code will return 0, yet the cookie is clearly being sent (can be seen in Chrome dev tools) AND the login is successful.
Why is this broken?
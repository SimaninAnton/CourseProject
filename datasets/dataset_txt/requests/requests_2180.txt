Contributor
karlcow commented on Mar 6, 2013
Hello,
currently Requests has the same issue (see the full discussion) than the standard library.
>>> import requests
>>> url = "http://www.w3.org/"
>>> headers = {'foo': 'bar', ' fooLead': 'bar', 'fooTrail ': 'bar', 'foo\nlish': 'bar'}
>>> r = requests.get(url, headers=headers)
>>> r.text
u'<html><body><h1>400 Bad request</h1>\nYour browser sent an invalid request.\n</body></html>\n'
Quick summary on the constraints on HTTP header field-name:
Leading spaces are deprecated and interpreted by conformant servers as continuation line.
Trailing spaces are forbidden and might create security issues
Newline break the full thing.
Bonus: Check also if we use only the allowed set of characters.
Would you like me to provide a patch and associated tests for fixing it?
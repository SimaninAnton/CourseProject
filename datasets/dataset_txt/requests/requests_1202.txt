Kronuz commented on Dec 18, 2015
I'm getting a weird error during this call conn = old_pool.get(block=False) in connectionpool.py:410.
The Error in Sentry is: Queue in get, KeyError: (1, True)
And this is the traceback, which doesn't make sense, as requests/packages/urllib3/connectionpool.py catches that Empty exception; plus I have no idea what that KeyError is coming from ... any ideas?:
Stacktrace (most recent call last):

  File "pac/business/views.py", line 49, in get_eticket
    response = requests.get(url, timeout=timeout, verify=False)
  File "requests/api.py", line 69, in get
    return request('get', url, params=params, **kwargs)
  File "requests/api.py", line 54, in request
    session.close()
  File "requests/sessions.py", line 649, in close
    v.close()
  File "requests/adapters.py", line 264, in close
    self.poolmanager.clear()
  File "requests/packages/urllib3/poolmanager.py", line 99, in clear
    self.pools.clear()
  File "requests/packages/urllib3/_collections.py", line 93, in clear
    self.dispose_func(value)
  File "requests/packages/urllib3/poolmanager.py", line 65, in <lambda>
    dispose_func=lambda p: p.close())
  File "requests/packages/urllib3/connectionpool.py", line 410, in close
    conn = old_pool.get(block=False)
  File "python2.7/Queue.py", line 165, in get
    raise Empty
jamur2 commented on Aug 16, 2013
In Python 3 (specifically, I'm on 3.3.2) if you set an explicit Content-Type header in post and have a byte string as your data, 2 Content-Type headers will get set. Example:
    >>> _ = requests.post("http://httpbin.org/post", data=b"123", headers={"Content-Type": "application/octet-stream"})
    >>> _.json()['headers']['Content-Type']
    'application/octet-stream, application/x-www-form-urlencoded'
It looks like it's because the test to see if a Content-Type is already set is broken. It tests (requests/models.py):
            # Add content-type if it wasn't explicitly provided.
            if (content_type) and (not 'content-type' in self.headers):
                self.headers['Content-Type'] = content_type
But keys in self.headers are bytestrings in Python 3, not strings:
    (pdb) 'content-type' in self.headers
    False
    (pdb) b'content-type' in self.headers
    True
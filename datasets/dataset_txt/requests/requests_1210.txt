jgoldberg commented on Dec 8, 2015
We're getting this error randomly from our production environment. I can't seem to reproduce locally yet. We use requests w/ Gevent, and I'm wondering if it's some kind of race condition where the socket isn't ready to use, but gets handed out by the connection pool. Still investigating, but figured I'd post this anyways. It would be nice to get a better error from pyopenssl.
We're using Requests 2.7.0, installed using pip.
 File "/usr/local/lib/python2.7/dist-packages/requests/sessions.py", line 508, in post
   return self.request('POST', url, data=data, json=json, **kwargs)
 File "/usr/local/lib/python2.7/dist-packages/requests/sessions.py", line 465, in request
   resp = self.send(prep, **send_kwargs)
 File "/usr/local/lib/python2.7/dist-packages/requests/sessions.py", line 573, in send
   r = adapter.send(request, **kwargs)
 File "/usr/local/lib/python2.7/dist-packages/requests/adapters.py", line 370, in send
   timeout=timeout
 File "/usr/local/lib/python2.7/dist-packages/requests/packages/urllib3/connectionpool.py", line 533, in urlopen
   conn = self._get_conn(timeout=pool_timeout)
 File "/usr/local/lib/python2.7/dist-packages/requests/packages/urllib3/connectionpool.py", line 239, in _get_conn
   conn.close()
 File "/usr/lib/python2.7/httplib.py", line 780, in close
   self.sock.close()   # close it manually... there may be other refs
 File "/usr/local/lib/python2.7/dist-packages/requests/packages/urllib3/contrib/pyopenssl.py", line 213, in close
   return self.connection.shutdown()
Error: []
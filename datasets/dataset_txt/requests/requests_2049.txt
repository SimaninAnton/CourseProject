kefir- commented on Jul 24, 2013
Hi,
requests uses a RequestsCookieJar object internally, which is the object type returned from cookiejar_from_dict(). Am I missing a way to specify a different type of CookieJar object?
I want to save cookies back to file after an HTTP session as done by LWPCookieJar. The way I've done this so far is to traverse s.cookies and add the cookies manually to my LWPCookieJar, as shown in the following code. I think it would be nicer if I could tell Session() what type of CookieJar to use, so that I could save directly afterwards.
import requests
import cookielib

s = requests.Session()
r = s.get("http://www.reprap.no/")

jar = cookielib.LWPCookieJar(filename="test.cookies")
for c in s.cookies:
    jar.set_cookie(c)
jar.save()
Something like this looks like it should work with fewer lines of code, but I'm not sure this is the best approach in case something were to change in future versions:
s = requests.Session()
s.cookies = cookielib.LWPCookieJar(filename="test.cookies")
r = s.get("http://www.reprap.no/")
s.cookies.save()
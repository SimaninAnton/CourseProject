edsonitk commented on Sep 30, 2017 â€¢
edited by sigmavirus24
I'm trying to connect with certificate via HTTPAdapter, but the server always returns me error: 403 - Forbidden: Access is denied. This is the code:
class DESAdapter (HTTPAdapter):
    def __init __ (self, cert=None, key=None):
    
        self.cert_file = cert
        self.key_file = key
        super (DESAdapter, self) .__ init __ ()

    def init_poolmanager (self, connections, maxsize, block = False):
        self.poolmanager = poolmanager.PoolManager (
            num_pools = connections, maxsize = maxsize,
            block = block,
            cert_file = self.cert_file,
            key_file = self.key_file)

con = requests.Session ()
Adapter = DESAdapter (cert = certi, key = key)
con.mount (self.url, Adapter)
res = con.post ('url', data = 'xml_soap', verify = False, headers = 'header')
If you try without HTTPAdapter(), as the code below, then it works:
res = requests.post ('url', data = 'xml_soap', cert = (cert_path, key_path)
                            verify = False, headers = 'header')
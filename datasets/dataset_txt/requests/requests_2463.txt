Contributor
mkomitee commented on Jun 2, 2012
Presently, if you use the HTTPDigestAuth auth handler and authenticate successfully, but the resource you are requesting results in a 4xx or a 5xx error, the response object returned is always a 401.
I've tested this with a modified version of your httpbin web application (thanks for that) which allows me to set the desired status code on a successful digest authentication.
Testing this with every status code from 101 -> 599 yields the following (i skipped instances where redirects occurred correctly):
expected 400, got 401 - this is unexpected
expected 401, got 401 - while this status code is expected, it's the wrong 401. I captured the traffic on the wire and the headers sent in the 401 response do not match that which are present on the response object I get from requests.
expected 402-499, got 401 - this is unexpected
expected 500-599, got 401 - this is unexpected
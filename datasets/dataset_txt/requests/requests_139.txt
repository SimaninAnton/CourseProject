boxed commented on Dec 10, 2018
I was looking into trying out mutation testing (with mutmut) on requests, seeing as this is one of the most critical libraries for python. But to do this effectively I need to get the coverage report and this was non-trivial.
Expected Result
tox -e coverage or make coverage should run tests with coverage.
Actual Result
It complains about me not having pipenv, so I installed that, then it build some venv and then fails with
pipenv run py.test --cov-config .coveragerc --verbose --cov-report term --cov-report xml --cov=requests tests
Error: the command py.test could not be found within PATH or Pipfile's [scripts].
make: *** [coverage] Error 1
(aside: py.test? It's pytest nowadays)
Reproduction Steps
Check out requests. Run make coverage.
System Information
$ python -m requests.help
{
  "chardet": {
    "version": "3.0.4"
  }, 
  "cryptography": {
    "version": ""
  }, 
  "idna": {
    "version": "2.7"
  }, 
  "implementation": {
    "name": "CPython", 
    "version": "2.7.15"
  }, 
  "platform": {
    "release": "18.0.0", 
    "system": "Darwin"
  }, 
  "pyOpenSSL": {
    "openssl_version": "", 
    "version": null
  }, 
  "requests": {
    "version": "2.20.1"
  }, 
  "system_ssl": {
    "version": "1000210f"
  }, 
  "urllib3": {
    "version": "1.24.1"
  }, 
  "using_pyopenssl": false
}
kpputhiyattil commented on Jan 11, 2018 â€¢
edited
Summary.
Expected Result
What you expected.
Need to download the file
Actual Result
What happened instead.
AttributeError: 'None Tye' object has no attribute 'Read'
Reproduction Steps
import requests
import requests.models
#url to login
url = 'xxxx.com'
payload = {'loginName': 'userName', 'password': '123456'}

r = requests.post(url, data=payload)
print r.headers
print r.cookies

url_dwnload="#download url"
payload = {'fileId': 2028, 'blockSize':1024}

resp_obj = requests.get(url_dwnload, cookies=r.cookies, params=payload, stream=True)
for c in resp_obj.cookies:

if c.name == 'DOWNLOAD_STATUS':
    if c.value == 'SUCCESS':
        with open(
                r'C:\Users\test\AppData\Local\SmartDocs\agent220.smartdocsonline.com\ruby.paul\tempfolder\6\New Text Document - Copy.txt.gz', 'wb') as f:
            for chunk in resp_obj.iter_content( chunk_size=1024):
                if chunk:
                    # print('###')
                    f.write(chunk)
System Information
$ python -m requests.help
{
  "chardet": {
    "version": "3.0.4"
  },
  "cryptography": {
    "version": ""
  },
  "idna": {
    "version": "2.6"
  },
  "implementation": {
    "name": "CPython",
    "version": "2.7.10"
  },
  "platform": {
    "release": "8",
    "system": "Windows"
  },
  "pyOpenSSL": {
    "openssl_version": "",
    "version": null
  },
  "requests": {
    "version": "2.18.4"
  },
  "system_ssl": {
    "version": "1000201f"
  },
  "urllib3": {
    "version": "1.22"
  },
  "using_pyopenssl": false
}
This command is only available on Requests v2.16.4 and greater. Otherwise,
please provide some basic information about your system (Python version,
operating system, &c).
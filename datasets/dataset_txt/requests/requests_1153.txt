elonzh commented on Feb 15, 2016
Both Session and Request have attribute hooks. The hook function list execute sequentially. In this situation, Session.hooks executed for every request and Request.hooks executed for a specifical request.
But in fact, Session.hooks were replaced with Request.hooks when code ran into
merge_setting:
    merged_setting = dict_class(to_key_val_list(session_setting))
    merged_setting.update(to_key_val_list(request_setting))
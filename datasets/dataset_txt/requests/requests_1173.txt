amdei commented on Jan 29, 2016
requests 2.9.1
Executing of this code (from samples in documentation):
`import requests
url = 'http://192.168.88.164:8000/'
files = {'file': ('conf.txt', 'some, data,to send\r\nnanother,row,to,send\r\nyet another,row,to,send\r\n')}
r = requests.post(url, files=files)
print r.text`
Results in correctly uploaded file, but without first line.
I.e. part 'some, data,to send\r\n' is missed.
Same with actoual file upload:
`import requests
url = 'http://192.168.88.164:8000/'
files = {'file': ('conf.txt', open('conf.txt', 'rb'))}
r = requests.post(url, files=files)
print r.text`
First line disappears from uploaded content.
The same file uploaded to the same server with curl:
curl -v -X POST -F file=@conf.txt http://192.168.88.164:8000
do not such an issue.
Issue seems to be in incorrect encoding - extra \r\n where missed somewhere.
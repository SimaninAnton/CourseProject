nucc1 commented on Nov 27, 2015
if you iterate over the headers of the response objects request, you do not get the complete set. The Host Header is missing.
sending_headers = {"Accept-Encoding": "identity"}
method = "GET"
url = "http://192.168.205.65/poster.php"
resp = requests.request(method, url, headers = sending_headers)
rh = resp.request.headers #original request might be lost in redirects?

for header in rh:
    print("%s: %s" % (header, rh[header]))
Observe the output:
Accept-Encoding: identity
Accept: */*
User-Agent: python-requests/2.8.1
Connection: keep-alive
However, on the wire, you will see:
GET /poster.php HTTP/1.1
Host: 192.168.205.65
Accept-Encoding: identity
User-Agent: python-requests/2.8.1
Connection: keep-alive
Accept: */*
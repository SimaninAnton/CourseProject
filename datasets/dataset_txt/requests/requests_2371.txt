bmhatfield commented on Sep 19, 2012
The following code works, but will load the entire file in memory:
 def save_url(url, file_handle, size=(8 * 1024)):
     req = requests.get(url)
     file_handle.write(req.content)
This code, designed to improve upon the above code, writes 0 byte files without error. I'm having a hard time seeing where I've gone wrong in the documentation, but it simply seems that the read() socket is not functioning.
def save_url(url, file_handle, size=(8 * 1024)):
    req = requests.get(url)

    while True:
        chunk = req.raw.read(size)
        if chunk:
            file_handle.write(chunk)
        else:
            break
What do I need to do to make the read() socket work? Or is there a bug in Requests?
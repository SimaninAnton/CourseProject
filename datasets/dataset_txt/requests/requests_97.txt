ankitpatnaik commented on Mar 15, 2019 â€¢
edited
I ran into the same problem mentioned in #3214
However despite mounting my adapters separately I run into the same issues. I get the same error output in the thread mentioned above.
class Myadapter(HTTPAdapter):
    def init_poolmanager(self, connections, maxsize, block=False):
        """Create and initialize the urllib3 PoolManager."""
        self.poolmanager = PoolManager(
            num_pools=connections, maxsize=maxsize,
            block=block, ssl_version=ssl.PROTOCOL_TLSv1_2)


def requests_session(session=None):
    try:
        adapter = Myadapter()
        session.mount('http://', adapter)
        session.mount('https://', adapter)
        return session
    except Exception:
        ('requests_session - Error Api calls')

data = {
    'username' : 
    'password' :
}
headers = {
    'Content-Type' : 'application/json'
}
session_id = requests.Session()
requests_r= requests_session(session=session_id)
resp= requests_r.post(url, data=data, headers=headers).json()
the Error is:
Max retries exceeded with url: some_random_api (Caused by SSLError(SSLError("bad handshake: Error([('SSL routines', 'tls_process_server_certificate', 'certificate verify failed')],)",),))
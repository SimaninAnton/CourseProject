richardsyeo commented on Jun 16, 2012
I think this issue still exists
#298
I am using latest version of Requests as of 15/06/2012
It still unnecessary uploads the file even though it knows it is going to receive a 401 but then fails to upload the file for the second request
My code...
import requests
from requests.auth import HTTPDigestAuth
url = 'http://localhost:8080/'
user = 'demo'
password = 'test'
filename = 'C:\Users\Public\Pictures\Sample Pictures\koala.jpg'
file = {'file': (filename, open(filename, 'rb'))}
r = requests.post(url, auth = HTTPDigestAuth(user, password), files = file)
print r.status_code
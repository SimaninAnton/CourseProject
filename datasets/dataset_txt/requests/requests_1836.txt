verwilst commented on Jan 24, 2014
Hi,
Because the LICENSE file is included in its total form in setup.py, "python setup.py bdist --format=rpm" for example bails out with the following errors:
copying dist/requests-2.2.1.tar.gz -> build/bdist.linux-x86_64/rpm/SOURCES
building RPMs
error: line 14: Unknown tag: Licensed under the Apache License, Version 2.0 (the "License");
error: query of specfile build/bdist.linux-x86_64/rpm/SPECS/requests.spec failed, can't parse
error: Failed to execute: "rpm -q --qf '%{name}-%{version}-%{release}.src.rpm %{arch}/%{name}-%{version}-%{release}.%{arch}.rpm\n' --specfile 'build/bdist.linux-x86_64/rpm/SPECS/requests.spec'"
The fix is to 'hardcode' the license to a small string, and not the whole text.
Fix for same problem in other project:
voxpupuli/pypuppetdb@4ae1338
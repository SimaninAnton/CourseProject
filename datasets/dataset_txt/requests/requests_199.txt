Contributor
NikosVlagoidis commented on Sep 11, 2018 â€¢
edited
Summary.
On adapter.py link we pass as the first parameter of the error an SSLError exception object. this has a result if you catch the error e.message is an object and not a string. Is this intented?
Maybe we need to pass
        except (_SSLError, _HTTPError) as e:
            if isinstance(e, _SSLError):
                # This branch is for urllib3 versions earlier than v1.22
                raise SSLError(e.message, request=request)
Expected Result
from requests.exceptions import SSLError
from urllib3.exceptions import SSLError as _SSLError

a = SSLError(_SSLError, request="TEST")

print a.message
What you expected.
"An SSL error occured"
Actual Result
What happened instead.
<class 'urllib3.exceptions.SSLError'>
Reproduction Steps
import requests
from requests.exceptions import SSLError
from urllib3.exceptions import SSLError as _SSLError

a = SSLError(_SSLError, request="TEST")

print a.message
System Information
$ python -m requests.help
{
  "chardet": {
    "version": "3.0.4"
  }, 
  "cryptography": {
    "version": "2.2.2"
  }, 
  "idna": {
    "version": "2.6"
  }, 
  "implementation": {
    "name": "CPython", 
    "version": "2.7.12"
  }, 
  "platform": {
    "release": "4.15.0-33-generic", 
    "system": "Linux"
  }, 
  "pyOpenSSL": {
    "openssl_version": "1010008f", 
    "version": "18.0.0"
  }, 
  "requests": {
    "version": "2.18.4"
  }, 
  "system_ssl": {
    "version": "1000207f"
  }, 
  "urllib3": {
    "version": "1.22"
  }, 
  "using_pyopenssl": true
}
This command is only available on Requests v2.16.4 and greater. Otherwise,
please provide some basic information about your system (Python version,
operating system, &c).
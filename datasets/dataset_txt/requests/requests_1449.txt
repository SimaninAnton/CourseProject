tomkcook commented on Apr 10, 2015
The following request never returns:
import requests
r = requests.get('http://en.wikipedia.org/w/api.php?rcprop=ids&format=json&action=query&rclimit=10&rctype=edit&list=recentchanges&rcnamespace=0', headers={'user-agent': 'api test'})
I've tried under both Python 2.7 and Python 3.
Adding a timeout (eg 5 seconds) causes the request to complete successfully - but adds 5s latency to every request. And, of course, makes the request fail if the API call takes longer than 5s to process. So I guess what is happening is that the server has finished sending the response but Requests is sat waiting for ... something ... to happen. What? Is it possible that the server is sending a wrong content-length?
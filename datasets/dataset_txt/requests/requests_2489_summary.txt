Internal encoding detection doesn't match external chardet call
symonk commented on Jul 8, 2019 â€¢
edited
Hi just a quick question, I have implemented a custom auth for our api which uses custom headers (user/password) by extending AuthBase, however I have another scenario where I want to auth (without those headers, but instead using cookies that I have derived from the browser upon logging in).
Can i add the cookies in the AuthBase call()?
a trivial example:
class CookieAuth(AuthBase):
    """
    Custom auth using cookies from a selenium driver browser
    """
    def __init__(self, csrf_token, cookies):
        self.csrf_token = csrf_token
        self.cookies = cookies

    def __call__(self, r):
        r.headers['X-csrf-token'] = self.csrf_token
        # can i addcookies here to the prepared request?

    def __repr__(self):
        return "Authenticated using cookie auth"
_cookies is private and an instance of CookieJar? is it ok to add my cookies this way? or can it even be done by just adding them in?
n.b I don't want to just pass them into request using cookies=cookies because the wrapper to my api is like so:
myapi.v1.endpoint(CookieAuth(csrf_token='foo', cookies='bar').get_something()
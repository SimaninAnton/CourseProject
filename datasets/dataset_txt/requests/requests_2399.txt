Contributor
randomir commented on Aug 15, 2012
Four test methods in test_requests.pyc fail:
test_POSTBIN_GET_POST_FILES
test_POSTBIN_GET_POST_FILES_STRINGS
test_POSTBIN_GET_POST_FILES_WITH_HEADERS
test_POSTBIN_GET_POST_FILES_WITH_PARAMS
due to http://httpbin.org/post returning 500. All 4 methods, at some point, send the running script (file) as the POST data. Tests pass when test_requests.py is run for the first time (and ascii sent), but fail the next and every other time, when python byte code (test_requests.pyc) exists and is run (binary file sent).
As it seems, the culprit is httpbin itself, which fails when raw binary data is sent to the /post endpoint. I submitted the patch that should fix this issue, but I'm also documenting it here, just in case someone else runs into the same problem.
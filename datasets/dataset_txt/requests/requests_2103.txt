doodoori2 commented on May 30, 2013
This code works well version 1.2.0
import json
from requests import Response
from cStringIO import StringIO
response = Response()
response.status_code = 400
data = {'error':'some_err'}
response.raw = StringIO(json.dumps(data))
print response.json()
but, doesn't works last version (1.2.3) since version 1.2.1
with this error
Traceback (most recent call last):
File "run.py", line 16, in
print response.json()
File "D:\Python27\Env\requests\lib\site-packages\requests\models.py", line 649, in json
if not self.encoding and len(self.content) > 3:
File "D:\Python27\Env\requests\lib\site-packages\requests\models.py", line 600, in content
self._content = bytes().join(self.iter_content(CONTENT_CHUNK_SIZE)) or bytes()
File "D:\Python27\Env\requests\lib\site-packages\requests\models.py", line 547, in generate
chunk = self.raw.read(chunk_size, decode_content=True)
TypeError: read() takes no keyword arguments
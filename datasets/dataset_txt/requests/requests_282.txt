lvorcool commented on May 10, 2018
Summary.
requests2.18.1
Expected Result
Send http request, header pass dictionary type OK
Actual Result
The header when sending the http request is a dictionary, but an error occurred
request.exceptions.InvalidHeader:` header value must be of type str or bytes, not <class 'dict'>
Reproduction Steps
The header I send is
  {
 "X-L-REQ-HEADER": {
  "lgId": "aaasssssssssssss",
  "userToken": "aaasssssssssssss",
  "appVersion": "1.4.0.1",
  "deviceType": 102,
  "reqVersion": 60300
 }
}
import requests

url = "https://xxxx.com/v1/aaaaa/bbbbb/cccccc/dddddd"

querystring = {"pageNo":"1","pageSize":"20"}

headers = {"X-L-REQ-HEADER": {"lgId": "aaasssssssssssss","userToken": "aaasssssssssssss","appVersion": "1.4.0.1","deviceType": 102,"reqVersion": 60300}}


response = requests.request("GET", url, headers=headers, params=querystring)

print(response.text)
System Information
$ python -m requests.help
<paste here>
![image](https://user-images.githubusercontent.com/21286480/39863014-008d7d20-5478-11e8-8c8e-3324d79f958a.png)
This command is only available on Requests v2.18.1 and greater. Otherwise,
please provide some basic information about your system (Python version,
operating system, &c).
dArignac commented on Jul 27, 2012
With the current version, 0.13.5, when I try to get from a page with an unsigned ssl certificate the whole request blocks, so the execution of the normal code is blocked. If I cancel the execution, the error below was generated. Using Python 2.7.2. I used version 0.11.2 before, there everything works.
>>> import requests
>>> r = requests.get('https://127.0.0.1:8015/', verify=False)
(nothing happens, no return, unable to execute another statement)
Error after Ctrl+C:
  File "<stdin>", line 1, in <module>
  File "/home/darignac/ve/tests/lib/python2.7/site-packages/requests/api.py", line 54, in get
    return request('get', url, **kwargs)
  File "/home/darignac/ve/tests/lib/python2.7/site-packages/requests/safe_mode.py", line 37, in wrapped
    return function(method, url, **kwargs)
  File "/home/darignac/ve/tests/lib/python2.7/site-packages/requests/api.py", line 42, in request
    return s.request(method=method, url=url, **kwargs)
  File "/home/darignac/ve/tests/lib/python2.7/site-packages/requests/sessions.py", line 230, in request
    r.send(prefetch=prefetch)
  File "/home/darignac/ve/tests/lib/python2.7/site-packages/requests/models.py", line 603, in send
    timeout=self.timeout,
  File "/home/darignac/ve/tests/lib/python2.7/site-packages/requests/packages/urllib3/poolmanager.py", line 153, in urlopen
    return self.proxy_pool.urlopen(method, url, **kw)
  File "/home/darignac/ve/tests/lib/python2.7/site-packages/requests/packages/urllib3/connectionpool.py", line 415, in urlopen
    body=body, headers=headers)
  File "/home/darignac/ve/tests/lib/python2.7/site-packages/requests/packages/urllib3/connectionpool.py", line 267, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/local/lib/python2.7/httplib.py", line 955, in request
    self._send_request(method, url, body, headers)
  File "/usr/local/lib/python2.7/httplib.py", line 989, in _send_request
    self.endheaders(body)
  File "/usr/local/lib/python2.7/httplib.py", line 951, in endheaders
    self._send_output(message_body)
  File "/usr/local/lib/python2.7/httplib.py", line 811, in _send_output
    self.send(msg)
  File "/usr/local/lib/python2.7/httplib.py", line 773, in send
    self.connect()
  File "/home/darignac/ve/tests/lib/python2.7/site-packages/requests/packages/urllib3/connectionpool.py", line 101, in connect
    ca_certs=self.ca_certs)
  File "/usr/local/lib/python2.7/ssl.py", line 372, in wrap_socket
    ciphers=ciphers)
  File "/usr/local/lib/python2.7/ssl.py", line 134, in __init__
    self.do_handshake()
  File "/usr/local/lib/python2.7/ssl.py", line 296, in do_handshake
    self._sslobj.do_handshake()
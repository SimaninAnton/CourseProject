Contributor
bboe commented on Dec 18, 2012
I can confirm that the example using httpbin.org still works. However, my similar code that sends a POST request (to login) the response object contains the cookie, however the session object is not updated to contain the cookie thus making the session useless unless I manually do the following for POST requests:
session.cookies = response.cookies
What's also odd is in the httpbin.org example using the GET request, while the session's cookies are updated, the response's cookie attribute is empty:
>>> import requests
>>> s = requests.session()
>>> r = s.get('http://httpbin.org/cookies/set/sessioncookie/123456789')
>>> s.cookies
<<class 'requests.cookies.RequestsCookieJar'>[Cookie(version=0, name='sessioncookie', value='123456789', port=None, port_specified=False, domain='httpbin.org', domain_specified=False, domain_initial_dot=False, path='/', path_specified=True, secure=False, expires=None, discard=True, comment=None, comment_url=None, rest={}, rfc2109=False)]>
>>> r.cookies
<<class 'requests.cookies.RequestsCookieJar'>[]>
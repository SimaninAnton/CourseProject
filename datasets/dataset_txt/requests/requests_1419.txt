JetForMe commented on May 4, 2015
Hi. I'm trying to zip a directory in memory and then POST that to a server. Unfortunately, I don't seem to be able to use the BytesIO object to which the zip data is written. Instead, I have to get the bytes from it. But the docs seem to indicate I can provide either bytes or a file-like object in the tuple.
Here's a condensed version of the code:
zipData = io.BytesIO();
with zipfile.ZipFile(zipData, mode="w") as zf:
    zf.write(<some content>)

url = "https://some.host/api/upload"

files = { "ipa" : open(ipaPath, "rb") }
#files["dsym"] = (zipName, zipData)             # file-like object doesn't work?
files["dsym"] = (zipName, zipData.getvalue())   # works
r = requests.post(url, files=files)
It may well be user error; if so, sorry for the noise.
tarvitz commented on Jun 16, 2015
if response was given with deflate,gzip or just deflate (Content-Encoding: "gzip, deflate") then requests on google appengine would failure this line
packages/urllib3/response.py:440
if self._original_response and self._original_response._method.upper() == 'HEAD':
It happens because self._original_response is replaced by google sdk and has different format from inner Response class objects.
gae:
<google.appengine.dist27.gae_override.httplib.HTTPResponse instance at 0x7f66f51cbf80>
origin:
<httplib.HTTPResponse instance at 0x7f59742b0638>
Though original_response._method is not str (it's actually int).
This breaks content deflating e.g. requests will process request normally but response.content would contain binary (compressed) data.
Tested on 2.7.0 branch. 2.3.0 works well.
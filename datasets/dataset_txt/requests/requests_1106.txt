rodrigozanatta commented on Apr 14, 2016
I really don't know what is happing. I make a requests.get and save the returned headers in a dictionary:
r = requests.get("http://myurl.com")
my_dic = {'my_header' :  r.headers}
When I try to parse my_dic to JSON, I get an error.
with open('arq.txt', 'w') as fp:
    json.dump(my_dic, fp)
For no special reason, it fail! I thought there was an illegal character or duplicate key, but no. It only work when I created this function:
def fix(old):
    new = {}
    for key, value in old.items():
        new[key] = value
    return new
So, I need to do this:
r = requests.get("http://myurl.com")
my_dic = {'my_header' : fix(r.headers)}
Why? Is this a bug? I am using the python 3.5 and believe all most update libraries.
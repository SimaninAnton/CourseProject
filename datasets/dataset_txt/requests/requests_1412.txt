makoshark commented on May 12, 2015
Thanks for maintaining requests! I love it!
If a parameters in params passed to get() includes a colon (as is required for categories in the MediaWiki AP, for exampleI) requests double encodes it. Here's some example code:
import requests    
parameters = {'action' : 'query',
              'list' : 'categorymembers',
              'format' : 'json',
              'cmtitle' : 'Category:London'}
r = requests.get('http://wikivoyage.org/w/api.php', params=parameters)
print(r.url)
This returns a double escaped colon as http://en.wikivoyage.org/w/api.php?action=query&cmtitle=Category%253ALondon&list=categorymembers&format=json.
A working URL would be: http://en.wikivoyage.org/w/api.php?action=query&cmtitle=Category%3ALondon&list=categorymembers&format=json or even the unescaped http://en.wikivoyage.org/w/api.php?action=query&cmtitle=Category:London&list=categorymembers&format=json, both of which work fine.
Shouldn't a colon in a parameter only be escaped once as "%3A"? Composing the URL and passing it directly in seems to work just fine.
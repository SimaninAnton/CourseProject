Contributor
Natim commented on Oct 12, 2015
I know you will answer that this is a feature, but I am really stuck with https://github.com/mozilla-services/requests-hawk/pull/7/files
My Auth backend create a signature for the body, and I cannot read the body from the Request() object. Also it doesn't work with the json parameter.
I am not sure of the strategy I should adopt. Any thoughs?
# Auth backend call method.
    def __call__(self, r):
        if self.host is not None:
            r.headers['Host'] = self.host

        content_type = r.headers.get('Content-Type', '')

        body = ''
        if r.data:
            body = r.data
        elif r.json:
            body = json.dumps(r.json)
            content_type = 'application/json'

        sender = mohawk.Sender(
            self.credentials,
            r.url,
            r.method,
            content=body,
            content_type=content_type,
            _timestamp=self._timestamp
        )

        r.headers['Authorization'] = sender.request_header
        return r
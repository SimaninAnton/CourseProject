joeshaw commented on Jul 2, 2014
>>> requests.get("https://google.com", headers={"X-Foo": u"foo"})
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/home/buildbot/joe-wip/virtualenv/lib/python2.6/site-packages/requests/api.py", line 55, in get
    return request('get', url, **kwargs)
  File "/home/buildbot/joe-wip/virtualenv/lib/python2.6/site-packages/requests/api.py", line 44, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/buildbot/joe-wip/virtualenv/lib/python2.6/site-packages/requests/sessions.py", line 456, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/buildbot/joe-wip/virtualenv/lib/python2.6/site-packages/requests/sessions.py", line 559, in send
    r = adapter.send(request, **kwargs)
  File "/home/buildbot/joe-wip/virtualenv/lib/python2.6/site-packages/requests/adapters.py", line 327, in send
    timeout=timeout
  File "/home/buildbot/joe-wip/virtualenv/lib/python2.6/site-packages/requests/packages/urllib3/connectionpool.py", line 493, in urlopen
    body=body, headers=headers)
  File "/home/buildbot/joe-wip/virtualenv/lib/python2.6/site-packages/requests/packages/urllib3/connectionpool.py", line 291, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib/python2.6/httplib.py", line 910, in request
    self._send_request(method, url, body, headers)
  File "/usr/lib/python2.6/httplib.py", line 947, in _send_request
    self.endheaders()
  File "/usr/lib/python2.6/httplib.py", line 904, in endheaders
    self._send_output()
  File "/usr/lib/python2.6/httplib.py", line 776, in _send_output
    self.send(msg)
  File "/usr/lib/python2.6/httplib.py", line 755, in send
    self.sock.sendall(str)
  File "/home/buildbot/joe-wip/virtualenv/lib/python2.6/site-packages/requests/packages/urllib3/contrib/pyopenssl.py", line 353, in sendall
    return self.connection.sendall(data)
  File "/home/buildbot/joe-wip/virtualenv/lib/python2.6/site-packages/OpenSSL/SSL.py", line 969, in sendall
    raise TypeError("buf must be a byte string")
TypeError: buf must be a byte string
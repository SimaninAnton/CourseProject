BirdeeChen commented on Jun 3, 2018
Here are my test code:
import requests url = 'https://api.ipify.org/' proxyapi = 'http://ip.11jsq.com/index.php/api/entry?method=proxyServer.generate_api_url&packid=1&fa=0&fetch_key=&qty=1&time=1&pro=&city=&port=1&format=txt&ss=1&css=&dt=1' proxy = {'http' : 'http://{}'.format(requests.get(proxyapi).text)} print ('Downloading with fresh proxy.', proxy) resp = requests.get(url, proxies = proxy_new) print ('Fresh proxy response status.', resp.status_code) print (resp.text) #terminal output Downloading with fresh proxy. {'http': 'http://49.84.152.176:30311'} Fresh proxy response status. 200 222.68.154.34#my public ip address
with no error message and seems that the requests lib never apply this proxy settings. The proxyapi is valid for I've checked the proxy in my web browser, and by visiting https://api.ipify.org/, it returns the desired proxy server's ip address.
I am using python 3.6.4 and requests 2.18.4.
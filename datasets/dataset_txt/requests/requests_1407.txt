shelper commented on May 19, 2015
i am using python 3.4, and request 2.7
i am trying to post a local jpg image like this, and got encoding error:
    import requests
    response = requests.post("url here",
      params={
        "image": open("path to local image", mode="r")
      }
    )
if i change the mode to 'rb' the error is gone:
    import requests
    response = requests.post("url here",
      params={
        "image": open("path to local image", mode="rb")
      }
    )
the error details are listed below:
'Traceback (most recent call last):
File "test_facemark.py", line 7, in
"image": open("path to the jpg file", mode="r")
File "c:\python34\lib\site-packages\requests\api.py", line 109, in post
return request('post', url, data=data, json=json, *_kwargs)
File "c:\python34\lib\site-packages\requests\api.py", line 50, in reques response = session.request(method=method, url=url, *_kwargs)
File "c:\python34\lib\site-packages\requests\sessions.py", line 451, in
t
prep = self.prepare_request(req)
File "c:\python34\lib\site-packages\requests\sessions.py", line 382, in
e_request
hooks=merge_hooks(request.hooks, self.hooks),
File "c:\python34\lib\site-packages\requests\models.py", line 304, in pr self.prepare_url(url, params)
File "c:\python34\lib\site-packages\requests\models.py", line 397, in prurl
enc_params = self._encode_params(params)
File "c:\python34\lib\site-packages\requests\models.py", line 92, in _enarams
for v in vs:
UnicodeDecodeError: 'gbk' codec can't decode byte 0xff in position 0: illeltibyte sequence'
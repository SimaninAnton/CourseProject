woosley commented on Mar 2, 2016
When there is firewall between client and server, http session will be killed even with keepalive enabled because no TCP level keepalive probe is sent.
according to here
Remember that keepalive support, even if configured in the kernel, is not the default behavior in Linux. Programs must request keepalive control for their sockets using the setsockopt interface. There are relatively few programs implementing keepalive
that said, is it possible to enable this behavior as an option in the library?
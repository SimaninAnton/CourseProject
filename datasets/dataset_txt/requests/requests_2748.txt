ukch commented on Aug 17, 2011
Trying to fetch a non-existant page when authenticated behaves strangely. Steps to reproduce:
Configure your web server to require HTTP basic authentication
Execute code such as the following:
import requests
resp = requests.get("http://my.web.server/some_non_existant_path", auth=("username", "password"))
print resp.status
print resp.content
Check output of your web server logs and output of the code snippet
Expected output:
The web server receives two requests: the first returns status 401 and the second returns status 404.
The code snippet prints 404, then the contents of your 'Not Found' page
Actual output:
The web server receives seven requests in immediate succession: the first returns status 401 and all the others return status 404.
The code snippet prints 401, then traces back with the following:
Traceback (most recent call last):
File "my_example_script.py", line 2, in main
print resp.content
File "/usr/local/lib/python2.7/dist-packages/requests/models.py", line 422, in getattr
self._content = self.read()
TypeError: 'NoneType' object is not callable
Using requests 0.6.0 and Python 2.7
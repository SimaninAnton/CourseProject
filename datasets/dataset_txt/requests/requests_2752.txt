Contributor
jedie commented on Aug 15, 2011
There is no easy way to get the used request headers from urllib2, see: http://stackoverflow.com/questions/603856/how-do-you-get-default-headers-in-a-urllib2-request
I made https://github.com/jedie/django-tools/blob/master/django_tools/utils/http.py for this. e.g.:
from django_tools.utils.http import HttpRequest
r = HttpRequest("http://www.python.org/index.html")
response = r.get_response()
You can get the raw sended request headers:
print response.request_header
Output (striped \r\n):
GET /index.html HTTP/1.1
Accept-Encoding: identity
Host: www.python.org
Connection: close
User-Agent: Python-urllib/2.7
Get the request headers as a list:
print response.request_headers
Output:
[('Accept-Encoding', 'identity'), ('Host', 'www.python.org'), ('Connection', 'close'), ('User-Agent', 'Python-urllib/2.7')]
Is there any interests to merge this? If so, I would try to contribute it ;)
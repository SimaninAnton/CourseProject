wiesson commented on Aug 27, 2013
Hi, I'm trying to fetch multipart/x-mixed-replace data with the Streaming Requests example. As I read here:
The content type multipart/x-mixed-replace was developed as part of a technology to emulate server push and streaming over HTTP.
So how to fetch this correctly?
import requests

settings = { 'interval': '1000', 'count':'20' }
url = 'http://agent.mtconnect.org/sample'

r = requests.get(url, params=settings, stream=True)

for line in r.iter_lines():
    if line:
        print line
the content:
--0910dc57f12aa1452fb67c74b7b2ddce
Content-type: text/xml
Content-length: 6299

... long xml ...

--e8f953249be4753b6f93d61bde0c970a
Content-type: text/xml
Content-length: 531

<?xml version="1.0" encoding="UTF-8"?>
<MTConnectStreams xmlns:m="urn:mtconnect.org:MTConnectStreams:1.2" xmlns="urn:mtconnect.org:MTConnectStreams:1.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:mtconnect.org:MTConnectStreams:1.2 /schemas/MTConnectStreams_1.2.xsd">
  <Header creationTime="2013-08-26T19:29:34Z" sender="wiesson.local" instanceId="1377530136" version="1.2.0.21" bufferSize="131072" nextSequence="18234" firstSequence="1" lastSequence="18233"/>
  <Streams/>
</MTConnectStreams>
So, I'm not able to separate header and content easily. And suggestions? (Normally I don't use github to post my problem but here I can't help myself ;))
A simple curl in the terminal:
curl http://http://agent.mtconnect.org/sample\?interval\=0\&count\=50
grabs the data.
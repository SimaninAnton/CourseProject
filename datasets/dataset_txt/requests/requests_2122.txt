eteq commented on May 17, 2013
Right now, the following does not work:
>>> r = requests.get('http://www.google.com',stream=True)
>>> io.BufferedReader(r.raw).read()
AttributeError: 'HTTPResponse' object has no attribute 'readable'
That is, the requests.packages.urllib3.response.HTTPResponse object does not respect the io API. The following does work, however:
>>> r = requests.get('http://www.google.com',stream=True)
>>> r.raw.readable=lambda:True
>>> r.raw.closed=False
>>> io.BufferedReader(r.raw).read()
Suggesting that the main thing that is neeeded is a readable method and a closed attribute. (I think flush and close are probably also necessary, and maybe also writable and seekable).
Is there a reason this is not possible, or would it be fine to just add the relevant methods to HTTPResponse?
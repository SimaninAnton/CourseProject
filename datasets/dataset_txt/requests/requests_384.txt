kpputhiyattil commented on Jan 19, 2018
Summary.
When I try to upload a file more than 5GB, connection error occurs, saying the connection is aborted.
ProtocolError('Connection aborted.', error("(-1, 'Unexpected EOF')",))
Expected Result
Large File should be uploaded
Actual Result
Exception occurs
ProtocolError('Connection aborted.', error("(-1, 'Unexpected EOF')",))
What happened instead.
Reproduction Steps
             import requests
             payload={obj.backupId:backupId,obj.folderId:folderId,obj.backupTxnId:backupTxnId,obj.fileHash:fileHash,obj.accessed:accessed,obj.created:created,obj.modified:modified,obj.isDirectUpload:isDirectUpload,obj.fileName:fileName,obj.fileSize:fileSize, obj.contentHash:contentHash}
            urls=obj.upload_url
             e = encoder.MultipartEncoder(fields={'backupfile':(os.path.basename(backupfile.encode('unicode-escape')),open(r"D:\\Movies\\Aruvi\\5GB.mp4","rb") )})
            m = encoder.MultipartEncoderMonitor(e)
            m._read = m.read
            m.read = lambda size: m._read(1024)
            headers = {'Accept': 'application/json, text/javascript, */*; q=0.01',
                            'Accept-Encoding': 'gzip, deflate, br',
                            'Accept-Language': 'en-GB,en-US;q=0.8,en;q=0.6','Connection': 'keep-alive','Content-Type': m.content_type}
            uploadObj = BackupResponse.upload_files()
            response = APIResponse.Response(uploadObj)
        
           resp_obj = requests.post(urls, params=payload, data=m, files=None, headers=headers, cookies=self.cookies)
            response_object = calling_obj.set_attr(resp_obj.json())
System Information
    {
  "chardet": {
    "version": "3.0.4"
  },
  "cryptography": {
    "version": "2.0.3"
  },
  "idna": {
    "version": ""
  },
  "implementation": {
    "name": "CPython",
    "version": "2.7.14"
  },
  "platform": {
    "release": "10",
    "system": "Windows"
  },
  "pyOpenSSL": {
    "openssl_version": "1010006f",
    "version": "17.2.0"
  },
  "requests": {
    "version": "2.18.4"
  },
  "system_ssl": {
    "version": "100020bf"
  },
  "urllib3": {
    "version": "1.22"
  },
  "using_pyopenssl": true
}
This command is only available on Requests v2.16.4 and greater. Otherwise,
please provide some basic information about your system (Python version,
operating system, &c).
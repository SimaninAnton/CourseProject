PAStheLoD commented on Sep 24, 2012
When a custom header has a value of integer 0, here's the stacktrace:
Traceback (most recent call last):
  File "gtest.py", line 169, in <module>
    parse()
  File "gtest.py", line 158, in parse
    add_to_group(domain, argz[0], argz[1])
  File "gtest.py", line 107, in add_to_group
    r = requests.post('https://apps-apis.google.com/a/feeds/group/2.0/%s/%s/%s?prettyprint=%s' % (domain, groupname, email, debug), headers=headers)
  File "/home/pas/.virtualenvs/v/lib/python3.2/site-packages/requests/api.py", line 98, in post
    return request('post', url, data=data, **kwargs)
  File "/home/pas/.virtualenvs/v/lib/python3.2/site-packages/requests/safe_mode.py", line 39, in wrapped
    return function(method, url, **kwargs)
  File "/home/pas/.virtualenvs/v/lib/python3.2/site-packages/requests/api.py", line 51, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/pas/.virtualenvs/v/lib/python3.2/site-packages/requests/sessions.py", line 188, in request
    headers[k] = header_expand(v)
  File "/home/pas/.virtualenvs/v/lib/python3.2/site-packages/requests/utils.py", line 260, in header_expand
    for i, (value, params) in enumerate(headers):
TypeError: 'int' object is not iterable
Just run into this while trying to work around the missing Content-Lenght header for empty POST requests. (Installed via pip.)
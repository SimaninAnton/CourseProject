Contributor
mingyuan-xia commented on Nov 6, 2017 â€¢
edited
For some windows machines (not all), a confusing Windows registry key type (HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings \ ProxyEnable) fails the following code in requests/requests/utils.py.
            proxyEnable = winreg.QueryValueEx(internetSettings,
                                              'ProxyEnable')[0]
            proxyOverride = winreg.QueryValueEx(internetSettings,
                                                'ProxyOverride')[0]
The case is if proxyEnable is a string , everything is fine. But ProxyEnable could be REG_SZ on some Windows machines (no idea why, but it happens). After user deletes this key or set if to REG_DWORD 0x00000000(0), things get right. But I believe better type checks in requests will help.
First found: https://stackoverflow.com/questions/46260169/python-locationvalueerror-no-host-specified
Aggregated discussion: conda/conda#3962
Expected Result
Type checks. no failure for REG_SZ values.
ðŸŽ‰ 1
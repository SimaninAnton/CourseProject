telejester commented on Feb 9, 2012
Although I can get HTTPDigestAuth to work on some servers, I have a case where it doesn't seem to trap the 401 and apply the credentials. I should state for the record that this all works in the browser.
The server should reply with a 301 to another page, but it doesn't seem to be getting that far.
$ python
>>> import requests
>>> from requests.auth import HTTPDigestAuth
>>> r = requests.get("http://[server]", auth=('[user]','[pass]'), allow_redirects=True)
>>> r
<Response [401]>
>>> r.headers
r.headers
{'content-length': '349', 'content-encoding': 'gzip', 'date': 'Fri, 18 May 2012 21:29:32 GMT', 'content-type': 'text/html; charset=iso-8859-1', 'vary': 'Accept-Encoding', 'www-authenticate': 'Digest realm="[realm]", nonce="jniCP1bABAA=d312512776a608d2ebaa0d1a70af1b7a28b1c018", algorithm=MD5, domain="[server-realm]", qop="auth"', 'server': 'Apache/2.2.17 (Ubuntu)'}
Those headers look to me as though requests is not trapping the 401, and is just returning the server's initial response. Is there a header missing that requests is looking for?
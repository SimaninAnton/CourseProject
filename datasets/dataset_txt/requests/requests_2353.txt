flytwokites commented on Oct 9, 2012
for this code
import requests
config = {'safe_mode': True}
# this url will get a connection reset
url = 'http://www.dapenti.com'
when set safe mode on requests.get, it worked:
r = requests.get(url, config=config)
print r.error
# ==> requests.exceptions.ConnectionError(socket.error(104, 'Connection reset by peer'))
but set it on session will raise a exception:
s = requests.session(config=config)
r = s.get(url) 
# raise ConnectionError: [Errno 104] Connection reset by peer
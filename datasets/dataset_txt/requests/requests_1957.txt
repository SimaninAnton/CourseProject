ysangkok commented on Oct 2, 2013
#!/usr/bin/env python3
import requests

def c():
    yield b"a"

print(requests.post("http://localhost:8801/", data=c()).text, headers={"content-type": "application/x-www-form-urlencoded", "x-donkey": "balls"})
The server sees:
POST / HTTP/1.1
Host: localhost:8801
Accept-Encoding: gzip, deflate, compress
Accept: */*
Transfer-Encoding: chunked
User-Agent: python-requests/2.0.0 CPython/3.3.1 Linux/3.11.0-031100rc4-generic

1
a
0
If it is not possible to set headers on these requests, I would expect an exception.
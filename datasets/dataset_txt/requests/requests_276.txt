emmnx commented on May 16, 2018
Summary:
curl -s --url http://user1:enganação@127.0.0.1:8080 --data '{"method": "help"}'
works
#!/usr/bin/env python2
import requests
import json
payload = {'method': 'help'}
url = 'http://user1:enganação@127.0.0.1:8080'
requests.post(url, headers={'Content-type': 'text/plain; charset=utf-8'}, data=json.dumps(payload))
also works.
But... use #!/usr/bin/env python3 instead, and it doesn't work anymore.
requests messes things up.
Expected Result
Work as curl and requests in python2 do.
Actual Result
requests in python3 messes with encoding.
Reproduction Steps
import requests
import json
payload = {'method': 'help'}
url = 'http://user1:enganação@127.0.0.1:8080'
requests.post(url, headers={'Content-type': 'text/plain; charset=utf-8'}, data=json.dumps(payload))
System Information
Python 3.5.2
jemcevoy commented on Dec 7, 2012
Hi Ken,
I really appreciate the Python Requests library that you have put together… It really saves a lot of plumbing when using a REST API from Python.
However, I have run into an issue sending a singleton key using the library and have not been able to figure out how to suppress the = that is passed as part of the query string. I have tried setting the value of the key to None and an empty string ‘’ but the equals sign is still sent to apache.
It looks to me that keys without values are legitimate according to http://en.wikipedia.org/wiki/Query_string#Web_forms
Quote:
• Within each pair, the field name and value are separated by an equals sign. The equals sign may be omitted if the value is an empty string.
How hard would it be to suppress the = in the URL when the value for the key is None? As an example, I added key3 to the dictionary in your documentation below.
http://docs.python-requests.org/en/latest/user/quickstart/#passing-parameters-in-urls
payload = {'key1': 'value1', 'key2': 'value2', ‘key3’:None}
r = requests.get("http://httpbin.org/get", params=payload)
You can see that the URL has been correctly encoded by printing the URL:
print r.url
u'http://httpbin.org/get?key2=value2&key3&key1=value1'
--jim
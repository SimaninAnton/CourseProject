jiangk commented on Aug 30, 2012
When a request specifies both an Accept header and a proxy server, the Accept header value is overwritten with */*. The provided Accept header should not be overwritten.
proxy = {'http' : 'http://localhost:8888'}
headers = {'Accept' : 'application/json'}
r = requests.get('http://www.yahoo.com', proxies=proxy, headers=headers)
Raw request from proxy:
GET / HTTP/ 1.1
Host: www.yahoo.com
Accept-Encoding: identity, deflate, compress, gzip
Accept: */*
User-Agent: python-requests/0.13.6 CPython/2.7.2 Darwin/12.1.0
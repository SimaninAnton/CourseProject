mikeknoop commented on Jun 14, 2012
When using response hooks, if I transform the passed-in response and the it becomes a non-2XX response, requests does not honor the new value.
This is important when dealing with successive failing requests. Test case:
import requests

def try_again(response):
   if response.status_code == 401:
      return requests.get('http://httpbin.org/status/400', hooks={'response': try_again})

response = requests.get('http://httpbin.org/status/401', hooks={'response': try_again})

print response.status_code
Expected output: 400
Actual output: 401
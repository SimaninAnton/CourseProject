Contributor
jasongrout commented on Aug 14, 2015
Currently the proxies dictionary supports only schemes as keys. In networks with multiple proxies, this may not be sufficient for picking the correct proxy. I propose that we allow scheme+hostname, hostname, and scheme (in that order) as keys, searched in that order. Changing this line, https://github.com/kennethreitz/requests/blob/2440b6f089f4c53e96cd2ece80e92774b72ed243/requests/adapters.py#L242, could search first for the scheme+hostname, then the hostname, then the scheme.
I'm not sure of all the ramifications of this in other parts of the codebase, but this would greatly help when we have a more complicated proxy setup than one just relying on schemes.
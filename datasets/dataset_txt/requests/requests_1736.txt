fletom commented on May 21, 2014
I could be wrong but this seems very strange behaviour to me. I'm referring to the end of adapters.py that passes urllib3 exceptions to requests exceptions as the first argument.
This gets very confusing since exception.message is another exception. In my case it broke error reporting tools that were expecting a string.
ipdb> exception
ConnectionError(MaxRetryError("HTTPConnectionPool(host='localhost', port=8000): Max retries exceeded with url: /users/authentication (Caused by <class 'socket.error'>: [Errno 61] Connection refused)",),)
ipdb> exception.message
MaxRetryError("HTTPConnectionPool(host='localhost', port=8000): Max retries exceeded with url: /users/authentication (Caused by <class 'socket.error'>: [Errno 61] Connection refused)",)
ipdb> type(exception.message)
<class 'requests.packages.urllib3.exceptions.MaxRetryError'>
It would seem much more appropriate to me to replace raise ConnectionError(e) with raise ConnectionError(e.message). This provides all the same information while still conforming to the Python convention of raise Exception("string message").
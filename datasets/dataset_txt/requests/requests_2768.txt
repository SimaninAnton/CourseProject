Contributor
jerem commented on Jun 27, 2011
In some particular cases, it is necessary to open a request without automatically downloading the body.
Example:
With the actual behaviour:
>>> import requests
>>> r = requests.get('http://www.kernel.org/pub/linux/kernel/v2.6/linux-2.6.39.2.tar.bz2')
-> Here it blocks until the body it downloaded (72.6 MB in this case!).
>>>
But with a file like object, here what we can do:
>>> import requests
>>> r = requests.get('http://www.kernel.org/pub/linux/kernel/v2.6/linux-2.6.39.2.tar.bz2')
>>> r.status_code
200
>>> r.read(1)
'B'
That means we can access the headers without waiting for the body...
Of course, we can keep the compatibility with response.content by adding a getattr method to the response that read and return the body when the content is requested.
bonfy commented on Oct 26, 2015
import requests

PROXIES = {
    'http':'http://{usr}:{pwd}@proxy:port'.format(usr = 'XXX',pwd = 'XXX#XXX'),
}

url = 'http://www.sina.com'
r = requests.get(url, proxies = PROXIES)
print r.text
with error :
Traceback (most recent call last):
File "autohome.py", line 11, in
r = requests.get(url, proxies = PROXIES)
File "C:\Python27\lib\site-packages\requests-2.2.1-py2.7.egg\requests\api.py",
line 55, in get
return request('get', url, *_kwargs)
File "C:\Python27\lib\site-packages\requests-2.2.1-py2.7.egg\requests\api.py",
line 44, in request
return session.request(method=method, url=url, *_kwargs)
File "C:\Python27\lib\site-packages\requests-2.2.1-py2.7.egg\requests\sessions
.py", line 383, in request
resp = self.send(prep, *_send_kwargs)
File "C:\Python27\lib\site-packages\requests-2.2.1-py2.7.egg\requests\sessions
.py", line 486, in send
r = adapter.send(request, *_kwargs)
File "C:\Python27\lib\site-packages\requests-2.2.1-py2.7.egg\requests\adapters
.py", line 305, in send
conn = self.get_connection(request.url, proxies)
File "C:\Python27\lib\site-packages\requests-2.2.1-py2.7.egg\requests\adapters
.py", line 215, in get_connection
block=self._pool_block)
File "C:\Python27\lib\site-packages\requests-2.2.1-py2.7.egg\requests\packages
\urllib3\poolmanager.py", line 258, in proxy_from_url
return ProxyManager(proxy_url=url, **kw)
File "C:\Python27\lib\site-packages\requests-2.2.1-py2.7.egg\requests\packages
\urllib3\poolmanager.py", line 207, in init
proxy = parse_url(proxy_url)
File "C:\Python27\lib\site-packages\requests-2.2.1-py2.7.egg\requests\packages
\urllib3\util.py", line 397, in parse_url
raise LocationParseError("Failed to parse: %s" % url)
requests.packages.urllib3.exceptions.LocationParseError: Failed to parse: Failed
to parse: XXX:XXX
the password after '#' missed and can not connect to the proxy server
PetaPetaPeta commented on May 5, 2017
I am attempting to build a Docker image (base image ubuntu:14.04) on a Windows machine where one of the commands are:
RUN pip install git+https://github.com/kennethreitz/requests
The functionality of this is to use pip inside the container to install the latest version of requests. It has functioned correctly in the past, but it currently throws an error.
Step X/Y : RUN pip install git+https://github.com/kennethreitz/requests
 ---> Running in 33fa1f8103a0
Downloading/unpacking git+https://github.com/kennethreitz/requests
  Cloning https://github.com/kennethreitz/requests to /tmp/pip-ZPkqbQ-build
  Running setup.py (path:/tmp/pip-ZPkqbQ-build/setup.py) egg_info for package from git+https://github.com/kennethreitz/requests
    error in requests setup command: Invalid environment marker: platform_system == "Windows" and python_version<"3.3"
    Complete output from command python setup.py egg_info:
    error in requests setup command: Invalid environment marker: platform_system == "Windows" and python_version<"3.3"
The error is being triggered by the following extra requirement introduced here.
The correct thing to do in this case is of course to lock the version of requests in the pip install-command and I have done this. I do however suspect that this could be an issue in the future if this commit is released.
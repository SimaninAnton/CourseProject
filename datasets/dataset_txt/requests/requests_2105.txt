foxx commented on May 30, 2013
At the moment if I specify a timeout on a request, it does not attempt to retry.
It would be nice to be able to specify a default timeout that adhered to the default retry.
Here is the workaround I used for now;
requests.adapters.DEFAULT_RETRIES = 3

def fetch_page(url, timeout=3):
    c = 0
    last_exc = None
    while True:
        if c >= requests.adapters.DEFAULT_RETRIES:
            raise last_exc[0], last_exc[1], last_exc[2]
        try:
            return requests.get(url, timeout=timeout)
        except requests.Timeout, e:
            c+=1
            last_exc = sys.exc_info()
            logging.info("request timeout, retrying.. (%s/%s)" % ( c, 
                requests.adapters.DEFAULT_RETRIES))
        except Exception, e:
            raise
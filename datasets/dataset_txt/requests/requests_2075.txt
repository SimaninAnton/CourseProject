Contributor
voberoi commented on Jun 28, 2013
Netrc authentication will blow away any explicit authentication settings you've set on a session, and it causes unexpected behavior that is annoying to debug:
"Why are these credentials not working?"
Print out what requests is sending over the wire.
Decode the basic authentication header, realize it's wrong
Poke through library to figure out where these credentials that aren't anywhere in your code are coming from.
Realize it's the way netrc is handled, modify the code to pass in authentication info in request(...), because that's the only way it'll work.
session = requests.session()
session.auth = ("username", "password")

# This will not use "username", "password", but whatever's in .netrc
r = session.get("http://www.hostinnetrc.com")

# This works
r = session.get("http://www.hostinnetrc.com", auth=("username", "password"))
Seems like both of those examples above should use "username", "password".
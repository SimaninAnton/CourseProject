shoibalc commented on Oct 5, 2012
I am behind a squid proxy server (2.7) with authentication. request.get (version 0.14) is rejected by squid.
     r = requests.get('https://www.google.com')
     r.headers
    {'connection': 'close',
     'content-length': '1168',
     'content-type': 'text/html',
     'date': 'Thu, 04 Oct 2012 23:49:49 GMT',
     'server': 'squid/2.7.STABLE7',
     'via': '1.0 proxy_server:proxy_port (squid/2.7.STABLE7)',
     'x-cache': 'MISS from proxy_server',
     'x-cache-lookup': 'NONE from proxy_server:proxy_port',
     'x-squid-error': 'ERR_UNSUP_REQ 0'}

    r.text
    u'<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> <html><head> <meta http-equiv="Content-Type"
    content="text/html; charset=utf-8"> <title>ERROR: The requested URL could not be retrieved</title> <style type="text/css"><!--   %l  body :lang(
    fa) { direction: rtl; font-size: 100%; font-family: Tahoma, Roya, sans-serif; float: right; } :lang(he) { direction: rtl; float: right; }  --><
    /style> </head><body> <div id="titles"> <h1>ERROR</h1> <h2>The requested URL could not be retrieved</h2> </div> <hr>  <div id="content"> <p>The
    following error was encountered while trying to retrieve the URL: <a href="https://www.google.com/">https://www.google.com/</a></p>  <
    blockquote id="error"> <p><b>Unsupported Request Method and Protocol</b></p> </blockquote>  <p>Squid does not support all request methods for
    all access protocols. For example, you can not POST a Gopher request.</p>  <p>Your cache administrator is <a href="mailto:webmaster%W">
    webmaster</a>.</p> <br> </div>  <hr> <div id="footer"> <p>Generated 05/Oct/2012:05:19:49 +0530 by proxy_server  (squid/2.7.STABLE7)</p> <!--
        ERR_UNSUP_REQ --> </div> </body></html> \n'
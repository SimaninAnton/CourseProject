eisbaer9 commented on Apr 25, 2017 â€¢
edited by Lukasa
I'm trying to get requests work with an Proxy. From the Documentation it should work with this Dictionary:
proxies = {'http' : 'http://username:password@proxy:8080', 'https': 'https://proxy:8080'}
when i try:
r = requests.get('http://google.com', proxies=proxies)
i get this error:
requests.exceptions.ProxyError:
HTTPConnectionPool(host='username', port=80):
Max retries exceeded with url:
http://google.com/
(Caused by ProxyError('Cannot connect to proxy.',
NewConnectionError('<requests.packages.urllib3.connection.HTTPConnection
object at 0x04755510>: Failed to establish a new connection:
[Errno 11001] getaddrinfo failed',)))
If i use it like this:
auth = HTTPProxyAuth(username, password)
proxies = {'http' : 'http://www-proxy2-de001.d.grp:8080'}
r = requests.get('http://google.com', proxies=proxies, auth=auth)
Everything is fine.
Now i'm trying the same with https, but most time i get an 407, with this:
```
auth = HTTPProxyAuth(username, password)
proxies = {'http' : 'http://proxy:8080',
'https': 'https://proxy:8080'}
r = requests.get('https://google.com', proxies=proxies, auth=auth)
And with this code:
`   proxies = {'http' : 'www-proxy2-de001.d.grp:8080',
               'https': 'http://username:password@proxy:8080'}
    r = requests.get('https://google.com', proxies=proxies)`

i get this error:
raise ProxyError(e, request=request)
requests.exceptions.ProxyError: HTTPSConnectionPool(host='google.com', port=443): Max retries exceeded with url: / (Caused by ProxyError('Cannot connect to proxy.', NewConnectionError('<requests.packages.urllib3.connection.VerifiedHTTPSConnection object at 0x045344D0>: Failed to establish a new connection: [Errno 11001] getaddrinfo failed',)))

I have no more idea, why it is not working.

Any help are great.
johaven commented on Dec 9, 2017 â€¢
edited
standard request
r = requests.post(url, auth=JWTAuth('token'), timeout=self.connect_timeout, verify=self.sslcheck, proxies=self.proxies)
standard request headers on server side
Host: 127.0.0.1:5000
Connection: keep-alive
Accept-Encoding: gzip, deflate
Accept: */*
User-Agent: python-requests/2.18.4
Content-Length: 39
Content-Type: application/json
session request
self.session.auth = JWTAuth('token')
r = self.session.post(url, json=json, allow_redirects=False, stream=False, timeout=(self.connect_timeout, read_timeout))
session request headers on server side
Host: 127.0.0.1:5000
Accept-Encoding: identity
Content-Length: 81
Authorization: Bearer ....
In this case no headers are kept
{
  "chardet": {
    "version": "3.0.4"
  }, 
  "cryptography": {
    "version": ""
  }, 
  "idna": {
    "version": "2.6"
  }, 
  "implementation": {
    "name": "CPython", 
    "version": "2.7.10"
  }, 
  "platform": {
    "release": "16.7.0", 
    "system": "Darwin"
  }, 
  "pyOpenSSL": {
    "openssl_version": "", 
    "version": null
  }, 
  "requests": {
    "version": "2.18.4"
  }, 
  "system_ssl": {
    "version": "9081df"
  }, 
  "urllib3": {
    "version": "1.22"
  }, 
  "using_pyopenssl": false
}
LaurentChardin commented on Jan 13, 2017
It looks like requests (or urllib3 ?) is creating a CONNECT request that fails with some proxies when trying to initiate the SSL tunnel:
INFO:requests.packages.urllib3.connectionpool:Starting new HTTPS connection (1): api.hipchat.com
send: 'CONNECT api.hipchat.com:443 HTTP/1.0\r\n'
send: '\r\n'
as we can, it generates an HTTP/1.0 header which seems to be inaccurate. I could not find any definition of the CONNECT command in the HTTP/1.0 RFC, and seems to have been really defined in HTTP 1.1 RFC.
By manually telneting to my cntlm, i could make the CONNECT work by replacing 1.0 by 1.1.
This makes the requests library fail to work on my side where i have to use CNTLM because our usual proxy is using Kerberos/CNTLM for authentication.
Is there any way to have this reviewed ?
best,
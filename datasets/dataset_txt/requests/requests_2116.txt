trblae commented on May 21, 2013
I believe due to pull request #1279 the field parameters (along with values) are encoded to bytes in python3 which makes parameters in post requests that have use encode_multipart_formdata from urllib3/filepost.py show up as "b'stuff'" instead of "stuff" as reported by httpbin.org/post. I've written a quick gist which shows what I'm talking about. It's a modified version of one of the tests in test_requests.py, https://gist.github.com/trblae/5617488.
I've traced the cause of this issue to the dependent package in urllib3/filepost.py. As you can see at line 80 form-data is built via a string format with the field name. It seems in python 3 this produces the bytes representation of the fields. This only happens in specific cases with files or more generally when encode_multipart_formdata is used.
I'm not exactly familiar enough with the differences between python2 and python3 strings to really know how to tackle this issue in order to solve it for both python2 and python3. This is kind of my first rodeo so please let me know if I'm doing something wrong or how I can help.
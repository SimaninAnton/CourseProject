hydrargyrum commented on Aug 25, 2017
When requests is asked to open an url like https://httpbin.org:443, be it with a direct requests.get call or by a site redirection, the port part should be removed since it's the default one.
Expected Result
response.url should not contain a port if it's the default one
Actual Result
response.url contains the default port if the request url contained it
Reproduction Steps
import requests
print(requests.get('https://httpbin.org:443/get').url)
System Information
$ python -m requests.help
{
  "chardet": {
    "version": "3.0.4"
  }, 
  "cryptography": {
    "version": "1.8.1"
  }, 
  "idna": {
    "version": ""
  }, 
  "implementation": {
    "name": "CPython", 
    "version": "2.7.13"
  }, 
  "platform": {
    "release": "4.12.0-1-amd64", 
    "system": "Linux"
  }, 
  "pyOpenSSL": {
    "openssl_version": "100020bf", 
    "version": "16.2.0"
  }, 
  "requests": {
    "version": "2.18.4"
  }, 
  "system_ssl": {
    "version": "1010006f"
  }, 
  "urllib3": {
    "version": "1.21.1"
  }, 
  "using_pyopenssl": true
}
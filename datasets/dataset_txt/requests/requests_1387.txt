marians commented on Jun 10, 2015
it would be awesome if there was a way to handle the response for a request that upgrades to a websocket connection, for example:
url = "https://host.domain.com/mypath"
headers = {
    "Authorization": "myrealm <my-auth-token>",
    "Connection": "upgrade",
    "Upgrade": "websocket",
    "Sec-Websocket-version": "13",
    "Sec-Websocket-key": "<some-challenge-key>",
}
payload = {
    "some_key": ['some', 'values']
}
def handler(message):
    print(message)
response = requests.post(url, headers=headers, json=payload, websocket_callback=handler)
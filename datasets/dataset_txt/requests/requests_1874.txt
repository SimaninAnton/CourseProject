rbock commented on Dec 19, 2013
Hi,
in a session, I am sending HTTPS GET request, followed by a HTTPS POST request which results in a series of 302-redirects. I monitor traffic via mitmproxy, but the results are the same whether I use the proxy or not.
With allow_redirect=True, most of the cookies get lost between the first and second redirect (4 out of 6 got lost in my case).
With allow_redirect=False for the POST, I initiate the GET with allow_redirect=True and everything works just fine.
Here's the boiled-down code:
self.session = requests.Session()
self.session.get(get_url, headers=self.headers, proxies=self.proxies, verify=False)
self.session.post(post_url, data=payload, headers=self.headers, proxies=self.proxies, verify=False)
I cannot give you all details about the URL or the parameters since it is a login procedure, but I can certainly answer questions or experiment if you tell me what to do.
Edit: This happens in 2.1.0. But it works fine in 2.0.1.
Regards,
Roland
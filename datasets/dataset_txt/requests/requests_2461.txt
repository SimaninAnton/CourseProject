fmoo commented on Jun 6, 2012
This used to work in previous versions of requests (I think I was on 0.8 before). I had something like this in my code:
headers = {'Content-Length': str(cmd.getLength())}
requests.post(..., data=cmd.genPayload(), headers=headers)
Where genPayload() was a generator that yielded the chunks of payload based on the command format.
In the latest builds of requests, I get a ValueError stating that it is "Unable to encode lists with elements that are not 2-tuples.".
I could set data="".join(cmd.genPayload()), but for large commands, this causes all the data to get buffered into memory.
Is there a way to support streaming POSTs with requests?
gangli13 commented on Jun 17, 2013
In developing a program using Phase II CORE protocol. I need to send HTML request in
multipart/form-data but without file object. e.g. the file data should be sent without
a filename. The boundary must be 'XbCY':
--XbCY
Content-Disposition: form-data; name=“CORERuleVersion" 2.2.0
--XbCY
Content-Disposition: form-data; name=“Payload"
<contents of file go here -- 1674 bytes long as specified above>
--XbCY--
I patched models.py for my project like this(help it can fixed in Requests)
87c87
<     def _encode_files(files, data, boundary=None):

---
>     def _encode_files(files, data):
95c95
<         if (not files and boundary is None) or isinstance(data, str):

---
>         if (not files) or isinstance(data, str):
131,133c131
<         if not boundary:
<             boundary = None
<         body, content_type = encode_multipart_formdata(new_fields, boundary)

---
>         body, content_type = encode_multipart_formdata(new_fields)
174,177d171
<     # patched by IIC 
<     :param boundary:
<                      used for mime type encoding. it sever a flag to forced mime encoding even without files.  
<                      set to '' to force mime encoding and use auto-generated boundary 
195,198c189
<         hooks=None,
<         
<         # patched by IIC
<         boundary=None):

---
>         hooks=None):
221,223d211
<         
<         # patched by IIC
<         self.boundary = boundary
236c224
<         p.prepare_body(self.data, self.files, self.boundary)

---
>         p.prepare_body(self.data, self.files)
342c330
<     def prepare_body(self, data, files, boundary=None):

---
>     def prepare_body(self, data, files):
380,381c368,369
<             if files or boundary is not None:
<                 (body, content_type) = self._encode_files(files, data, boundary)

---
>             if files:
>                 (body, content_type) = self._encode_files(files, data)
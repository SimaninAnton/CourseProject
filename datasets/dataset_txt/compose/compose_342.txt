conej730 commented on 28 Dec 2018 â€¢
edited
I have a container I'm starting with docker-compose where I recently moved some persisted data from the host machine into a named volume. The container runs as a non-root user, and in the Dockerfile the mount point is created and chown to the non-root user. When I specify nocopy: true as a volume option, then docker-compose will create the volume but that directory will be owned by root. If I then stop that container and launch a new one without the nocopy: true option then the directory is owned by the non-root user. I can then launch the container with the nocopy: true option and permissions are retained (ie still owned by the non-root user). I'm wondering if that is intended and what is happening is that somehow the permissions are copied over during the first launch rather than inheriting the permissions of the mount point in the container?
cjerdonek commented on 27 Dec 2015
It looks like there is a regression in docker-compose 1.5.2 when compared with 1.5.1.
Previously, after running docker-compose up in a terminal window, pressing Control-C (i.e. sending SIGINT from the same shell window) caused services to enter the "Stopping" phase. However, when I upgraded to 1.5.2, services now immediately go to "Killing."
Note that if I go to a different terminal window and send a SIGINT or SIGTERM to that process using kill, then the services do go to the "Stopping" phase. So the issue looks like it is restricted to hitting Control-C from the same shell window. I'm observing this on Mac OS X 10.11 using Python 3.5.1.
One more thing. I did notice one improvement with 1.5.2. Previously, sending a SIGTERM to docker-compose up from a different window didn't seem to work and stop services like SIGINT. With 1.5.2, it now does, and behaves the same as sending SIGINT from a different window.
So the issue now is with hitting Control-C from the same window. My guess is that this might have to do with the fact that hitting Control-C in a terminal window sends a SIGINT not just to the parent process, but also to all child processes (and there is at least one child with docker-compose). So maybe docker-compose is treating that as receiving two distinct SIGINT signals, causing it to go immediately into the "Killing" phase (as if the user hit Control-C twice).
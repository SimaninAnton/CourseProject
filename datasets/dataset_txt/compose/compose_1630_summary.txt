unexpected behavior with interactive tty and command history
docker-compose restart ought to exit with non-zero if it didn't actually restart
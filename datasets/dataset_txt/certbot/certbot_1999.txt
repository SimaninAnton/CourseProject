fideloper commented on 18 Jun 2016
Hello!
Following the documentation here for the webroot plugin, it appears that I should be able to create multiple certificates in one go. Specifically. I have two sites with two web roots.
The example given in the docs:
[Taken from docs:] When requesting a certificate for multiple domains, each domain will use the most recently specified --webroot-path. So, for instance,
certbot certonly --webroot -w /var/www/example/ -d www.example.com -d example.com -w /var/www/other -d other.example.net -d another.other.example.net
Reproduce
System: Ubuntu 16.04 x64, brand new server (DigitalOcean droplet)
Nginx 1.10.0
Python 2.7.11 (although I'm not sure what certbot uses with the virtualenv it creates)
I've tried both latest master and release v0.8.1 - here's the commands I run to create two new certificates:
# Use root
sudo su

# clone repo and use certbot
cd /opt
git clone https://github.com/certbot/certbot
cd /opt/certbot
git checkout v0.8.1

# create two certs
# note these webroots do exist and work (DNS is set)
./certbot-auto certonly --webroot \
    -w /var/www/one.example.io -d one.example.io \
    -w /var/www/two.example.io -d two.example.io \
    --non-interactive --agree-tos --email me@example.io
Result
Everything seems to run smoothly, however only the first certificate is created.
IMPORTANT NOTES:
 - Congratulations! Your certificate and chain have been saved at
   /etc/letsencrypt/live/one.example.io/fullchain.pem....
 - If you lose your account credentials...
 - Your account credentials have been saved...
 - If you like Certbot...

    Donating ...
(No output regarding the second webroot or domain)
Only one certificate is created (the first listed). The second is ignored, and there is no related output.
This is the same for the renew command as well as both certonly both ignore the second webroot.
Let me know if it looks like I'm in error or if I can send along any other information!
2
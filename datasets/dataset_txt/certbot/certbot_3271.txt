pinae commented on 15 Oct 2015
I installed letsencrypt on a Debian with Kernel 3.2.68-1+deb7u2 x86_64 using the following commands:
git clone https://github.com/letsencrypt/letsencrypt.git
cd letsencrypt
sudo ./bootstrap/debian.sh
sudo virtualenv --no-site-packages -p python2 venv
sudo ./venv/bin/pip install -U setuptools
sudo ./venv/bin/pip install -U pip
sudo ./venv/bin/pip install -r requirements.txt acme/ . letsencrypt-apache/ letsencrypt-nginx/
This all worked as expected. Then I executed letsencrypt with the following command:
sudo ./venv/bin/letsencrypt -d leipsieb.de run
After the greeting message it exits with this error:
Error in checking parameter list: (98)Address already in use:
make_sock: could not bind to address [::]:80
(98)Address already in use: make_sock: could not bind to address
0.0.0.0:80
no listening sockets available, shutting down
Unable to open logs
Outside of the graphical window it also displays:
Configurator could not be determined
Then I tried without automatic configuration:
./venv/bin/letsencrypt -d leipsieb.de auth
I see the greeting and select Apache as my webserver. After that it takes about two seconds until this error is displayed:
(98)Address already in use: make_sock: could not bind to address
0.0.0.0:80
no listening sockets available, shutting down
Unable to open logs
Encountered exception during recovery
'NoneType' object has no attribute 'init_modules'
Traceback (most recent call last):
File
"/home/jme/letsencrypt/venv/local/lib/python2.7/site-packages/letsen
crypt/error_handler.py", line 69, in call_registered
self.funcs-1
File
"/home/jme/letsencrypt/venv/local/lib/python2.7/site-packages/letsen
crypt/auth_handler.py", line 282, in _cleanup_challenges
self.dv_auth.cleanup(dv_c)
File
"/home/jme/letsencrypt/venv/local/lib/python2.7/site-packages/letsen
crypt_apache/configurator.py", line 1164, in cleanup
self.parser.init_modules()
AttributeError: 'NoneType' object has no attribute 'init_modules'
Outside of the graphical window it also displays:
An unexpected error occurred.
This is the letsencrypt.log:
2015-10-15 12:26:42,507:DEBUG:letsencrypt.cli:Root logging level set at 30
2015-10-15 12:26:42,508:INFO:letsencrypt.cli:Saving debug log to /var/log/letsencryp/letsencrypt.log
2015-10-15 12:26:42,508:DEBUG:letsencrypt.cli:Arguments: ['-d', 'leipsieb.de', 'auth']
2015-10-15 12:26:42,508:DEBUG:letsencrypt.cli:Discovered plugins: PluginsRegistry(PluginEntryPoint#apache,PluginEntryPoint#nginx,PluginEntryPoint#null,PluginEntryPoint#manual,PluginEntryPoint#standalone)
2015-10-15 12:26:47,408:WARNING:letsencrypt_apache.parser:Error in checking parameter list: (98)Address already in use: make_sock: could not bind to address [::]:80
(98)Address already in use: make_sock: could not bind to address 0.0.0.0:80
no listening sockets available, shutting down
Unable to open logs
2015-10-15 12:26:47,437:DEBUG:letsencrypt.plugins.disco:Misconfigured PluginEntryPoint#apache: Apache is unable to check whether or not the module is loaded because Apache is misconfigured.
Traceback (most recent call last):
File "/home/jme/letsencrypt/venv/local/lib/python2.7/site-packages/letsencrypt/plugins/disco.py", line 103, in prepare
self._initialized.prepare()
File "/home/jme/letsencrypt/venv/local/lib/python2.7/site-packages/letsencrypt_apache/configurator.py", line 151, in prepare
self.aug, self.conf("server-root"), self.conf("ctl"))
File "/home/jme/letsencrypt/venv/local/lib/python2.7/site-packages/letsencrypt_apache/parser.py", line 39, in init
self.update_runtime_variables(ctl)
File "/home/jme/letsencrypt/venv/local/lib/python2.7/site-packages/letsencrypt_apache/parser.py", line 97, in update_runtime_variables
stdout = self._get_runtime_cfg(ctl)
File "/home/jme/letsencrypt/venv/local/lib/python2.7/site-packages/letsencrypt_apache/parser.py", line 139, in _get_runtime_cfg
"Apache is unable to check whether or not the module is "
MisconfigurationError: Apache is unable to check whether or not the module is loaded because Apache is misconfigured.
2015-10-15 12:26:47,439:DEBUG:letsencrypt.plugins.disco:No installation (PluginEntryPoint#nginx): Could not find configuration root
Traceback (most recent call last):
File "/home/jme/letsencrypt/venv/local/lib/python2.7/site-packages/letsencrypt/plugins/disco.py", line 103, in prepare
self._initialized.prepare()
File "/home/jme/letsencrypt/venv/local/lib/python2.7/site-packages/letsencrypt_nginx/configurator.py", line 112, in prepare
self.conf('server-root'), self.mod_ssl_conf)
File "/home/jme/letsencrypt/venv/local/lib/python2.7/site-packages/letsencrypt_nginx/parser.py", line 29, in init
self.loc = self._set_locations(ssl_options)
File "/home/jme/letsencrypt/venv/local/lib/python2.7/site-packages/letsencrypt_nginx/parser.py", line 179, in _set_locations
root = self._find_config_root()
File "/home/jme/letsencrypt/venv/local/lib/python2.7/site-packages/letsencrypt_nginx/parser.py", line 202, in _find_config_root
"Could not find configuration root")
NoInstallationError: Could not find configuration root
2015-10-15 12:26:47,440:DEBUG:letsencrypt.display.ops:Multiple candidate plugins: * apache
Description: Apache Web Server - Alpha
Interfaces: IAuthenticator, IInstaller, IPlugin
Entry point: apache = letsencrypt_apache.configurator:ApacheConfigurator
Initialized: <letsencrypt_apache.configurator.ApacheConfigurator object at 0x3290590>
Prep: Apache is unable to check whether or not the module is loaded because Apache is misconfigured.
manual
Description: Manual Authenticator
Interfaces: IAuthenticator, IPlugin
Entry point: manual = letsencrypt.plugins.manual:Authenticator
Initialized: <letsencrypt.plugins.manual.Authenticator object at 0x3290dd0>
Prep: True
standalone
Description: Standalone Authenticator
Interfaces: IAuthenticator, IPlugin
Entry point: standalone = letsencrypt.plugins.standalone.authenticator:StandaloneAuthenticator
Initialized: <letsencrypt.plugins.standalone.authenticator.StandaloneAuthenticator object at 0x32908d0>
Prep: True
2015-10-15 12:26:52,247:DEBUG:letsencrypt.cli:Picked account: <Account(a4c1fe856d5b0c91186dcd59cff001ca)>
2015-10-15 12:26:52,247:DEBUG:root:Sending GET request to https://acme-staging.api.letsencrypt.org/directory. args: (), kwargs: {}
2015-10-15 12:26:52,254:INFO:requests.packages.urllib3.connectionpool:Starting new HTTPS connection (1): acme-staging.api.letsencrypt.org
2015-10-15 12:26:52,820:DEBUG:requests.packages.urllib3.connectionpool:"GET /directory HTTP/1.1" 200 279
2015-10-15 12:26:52,823:DEBUG:root:Received <Response [200]>. Headers: {'Content-Length': '279', 'Expires': 'Thu, 15 Oct 2015 12:26:48 GMT', 'Strict-Transport-Security': 'max-age=604800', 'Server': 'nginx', 'Connection': 'keep-alive', 'Pragma': 'no-cache', 'Cache-Control': 'max-age=0, no-cache, no-store', 'Date': 'Thu, 15 Oct 2015 12:26:48 GMT', 'X-Frame-Options': 'DENY', 'Content-Type': 'application/json', 'Access-Control-Allow-Origin': '', 'Replay-Nonce': 'renoq58iegRfbzAvmjDK_UX0cwUHNXWQgOHsam7xcHI'}. Content: '{"new-authz":"https://acme-staging.api.letsencrypt.org/acme/new-authz","new-cert":"https://acme-staging.api.letsencrypt.org/acme/new-cert","new-reg":"https://acme-staging.api.letsencrypt.org/acme/new-reg","revoke-cert":"https://acme-staging.api.letsencrypt.org/acme/revoke-cert"}'
2015-10-15 12:26:52,824:DEBUG:acme.client:Received response <Response [200]> (headers: {'Content-Length': '279', 'Expires': 'Thu, 15 Oct 2015 12:26:48 GMT', 'Strict-Transport-Security': 'max-age=604800', 'Server': 'nginx', 'Connection': 'keep-alive', 'Pragma': 'no-cache', 'Cache-Control': 'max-age=0, no-cache, no-store', 'Date': 'Thu, 15 Oct 2015 12:26:48 GMT', 'X-Frame-Options': 'DENY', 'Content-Type': 'application/json', 'Access-Control-Allow-Origin': '', 'Replay-Nonce': 'renoq58iegRfbzAvmjDK_UX0cwUHNXWQgOHsam7xcHI'}): '{"new-authz":"https://acme-staging.api.letsencrypt.org/acme/new-authz","new-cert":"https://acme-staging.api.letsencrypt.org/acme/new-cert","new-reg":"https://acme-staging.api.letsencrypt.org/acme/new-reg","revoke-cert":"https://acme-staging.api.letsencrypt.org/acme/revoke-cert"}'
2015-10-15 12:26:52,945:INFO:letsencrypt.crypto_util:Generating key (2048 bits): /etc/letsencrypt/keys/0002_key-letsencrypt.pem
2015-10-15 12:26:52,949:INFO:letsencrypt.crypto_util:Creating CSR: /etc/letsencrypt/csr/0002_csr-letsencrypt.pem
2015-10-15 12:26:52,949:DEBUG:letsencrypt.client:CSR: CSR(file='/etc/letsencrypt/csr/0002_csr-letsencrypt.pem', data='0\x82\x02\x830\x82\x01k\x02\x000\x161\x140\x12\x06\x03U\x04\x03\x0c\x0bleipsieb.de0\x82\x01"0\r\x06\t_\x86H\x86\xf7\r\x01\x01\x01\x05\x00\x03\x82\x01\x0f\x000\x82\x01\n\x02\x82\x01\x01\x00\xae\xd8\x1b\xc5\xea\xd9L\xdf_\xc1U\x1a\x81\x1d9\xd4;\xb28\xef\xb7\x0f\xb1\x97\xd2\x1c\xc7\x8e\xeb\xc9\x1f\x97S\x10R\x04O\x927\xf4,u\x0fvw\xb0\xd6\xcc\x8a\xc6\x9c\xcd\xf9\xfbo\xd2.\rRw\x18\x0f\xfaQ\xe1\n\x7f\xa6\x8b\xf9\xc4~\xfbLt*R\xd6\x0b\x12\xe4\xef\xa1\xc1\xa89\x0em9=\xdcW\xd2\x1fW\x85\xab\x94\xe2\xce\xe6;\x03\x12/\xd3\x9c\x12\xf2X\x1f\xcfr\xc5\xbf\x83\xd4U\xe2\xff\x16\xea4\xcb\xa3\x8c\xdc\xb77\x05(\x9cd\x86c\xc9\x98&\x8e\xc4A\xf2T\t\xfa*\x1b/JU\x8f\xf8M+\xfe\xf9oar2\x8bf\xe5\xa9\x0fK%\x0e\xcc\x9c\xe4a\xc6\xfc\xe4\xf0\xd3c\xbf\x07\xc4\xc3\xe29jH\xd5\x90>\xba}\xf2mc\xe9t_\xc1<\xf63ld\xcc^!3\x8es\xea\x83\xebvG\xed\xba}\xe8\xf3\x9c\x068\xf8\xcd\xd4\xec\x19\xe4\xe2\xec]w \x93\x06A\xc8\xd9\x9f\x12\nF\x95\xdd\xd6\xe6l\x1a\xcch\xa5\x02P\xf9\x02\x03\x01\x00\x01\xa0)0'\x06\t_\x86H\x86\xf7\r\x01\t\x0e1\x1a0\x180\x16\x06\x03U\x1d\x11\x04\x0f0\r\x82\x0bleipsieb.de0\r\x06\t_\x86H\x86\xf7\r\x01\x01\x0b\x05\x00\x03\x82\x01\x01\x00\x17k\xa9\x8f.2cj\xbb\x1f\x18\x87\DaQT\x11\xdf!\xda\xcc\xb0>\xdb_\xafy\x1d\x93\xa5c\xb1\xb7\xee\x04_$-\xcf\x0fD\x9c\x06\xf7@\xaawia\xdc\xbc\xd6\xb4H~p\xca\xa0\x06_\xac\xa3\xe8\x1c\xc3^2\xfbn\r\xda.\x8b\xe3;\x8b\xc6\x8b\x12\xf3\xea\xd3N\xe1!\x9c\x05\x86P:?\xe8\xa3=8D\xa0\xc2\xdfhC!@\xb5z\x19\xbe\x82\xe3QoP)\xbe\x8dz\xf0\x12\x88\xf9\xbd>;\xfd\xdc\x06\xe6\xd68XD\xe0\xb4\x9d\x87\x0e\xfc\x15w0\xcab\x18<\xaf\xeb\xb0\xc9\xd6WIKt\xab;\xd4\xd1\xec\xea+\xe1z\x9f+\xfd\x0fpL/h\x1e\xdc\xc2\xe2B\xbe\xdc\xfc\x1e8\x8d\x0e \xc7p\x87\xdcB\x9e}\xfbwO\x05\x83\x9c\xa69\xa3+\x13tsp\xb87eu\xcc\xd0\xc9\xda\x1dl\xed\xdf\xb3\x96T\xa3\xd6\x9b\xd6.\x0e\x14z\xd3\xa89\x12z\x87\xa9?$H\xf3\xee\xbf\x0f}j\x93o\x19FA\xcb\xa0\xae\xf0\x91nn', form='der'), domains: ['leipsieb.de']
2015-10-15 12:26:52,949:DEBUG:root:Requesting fresh nonce
2015-10-15 12:26:52,949:DEBUG:root:Sending HEAD request to https://acme-staging.api.letsencrypt.org/acme/new-authz. args: (), kwargs: {}
2015-10-15 12:26:52,950:INFO:requests.packages.urllib3.connectionpool:Starting new HTTPS connection (1): acme-staging.api.letsencrypt.org
2015-10-15 12:26:53,167:DEBUG:requests.packages.urllib3.connectionpool:"HEAD /acme/new-authz HTTP/1.1" 405 0
2015-10-15 12:26:53,170:DEBUG:root:Received <Response [405]>. Headers: {'Content-Length': '0', 'Pragma': 'no-cache', 'Expires': 'Thu, 15 Oct 2015 12:26:48 GMT', 'Server': 'nginx', 'Connection': 'keep-alive', 'Allow': 'POST', 'Cache-Control': 'max-age=0, no-cache, no-store', 'Date': 'Thu, 15 Oct 2015 12:26:48 GMT', 'Content-Type': 'application/problem+json', 'Replay-Nonce': 'O5ZFv2dDecy-6Zf9AR-16EQC8gEur_14xjp8HS4SOh8'}. Content: ''
2015-10-15 12:26:53,171:DEBUG:acme.client:Storing nonce: ';\x96E\xbfgCy\xcc\xbe\xe9\x97\xfd\x01\x1f\xb5\xe8D\x02\xf2\x01.\xaf\xfdx\xc6:|\x1d.\x12:\x1f'
2015-10-15 12:26:53,171:DEBUG:acme.jose.json_util:Omitted empty fields: combinations=None, challenges=None, expires=None, status=None
2015-10-15 12:26:53,171:DEBUG:acme.client:Serialized JSON: {"identifier": {"type": "dns", "value": "leipsieb.de"}, "resource": "new-authz"}
2015-10-15 12:26:53,172:DEBUG:acme.jose.json_util:Omitted empty fields: kid=None, x5c=(), crit=(), typ=None, jwk=None, alg=None, jku=None, cty=None, x5tS256=None, x5u=None, x5t=None
2015-10-15 12:26:53,175:DEBUG:acme.jose.json_util:Omitted empty fields: kid=None, x5c=(), crit=(), typ=None, jku=None, cty=None, x5tS256=None, x5u=None, x5t=None, nonce=None
2015-10-15 12:26:53,175:DEBUG:root:Sending POST request to https://acme-staging.api.letsencrypt.org/acme/new-authz. args: (), kwargs: {'data': '{"header": {"alg": "RS256", "jwk": {"e": "AQAB", "kty": "RSA", "n": "3pk6ayafpyTf2Cn5t-L1GE1z6DrEs43vZuWtgGyCBBZhvmXw36AwkAG7Nj6yBumSctbalpir1f-RYERJgOKLZovCS_aR0GL56wQc8pifMJQc0ohtAakHAA6n4o1HuYaJPJu_mdrYQqPHBtwDvvJuwLSOl236TMVHU7ZUI1W979IZxuoeCCXibPjfkZ8JE-bKnpDUvWRLkQ6bru3AdLWq1rqxc7vs5a0KkOIEshjz57kVQpmlOs-RY8GckbLvvsUA_PjFWJ9wLT2tsmMOEO8PAs04VYO5rYL7WswHtRwktfPYOb-57Wo2aJd2UvOQGVZ9HhIjfB1dXgcXcWmtjBOTrQ"}}, "protected": "eyJub25jZSI6ICJPNVpGdjJkRGVjeS02WmY5QVItMTZFUUM4Z0V1cl8xNHhqcDhIUzRTT2g4In0", "payload": "eyJpZGVudGlmaWVyIjogeyJ0eXBlIjogImRucyIsICJ2YWx1ZSI6ICJsZWlwc2llYi5kZSJ9LCAicmVzb3VyY2UiOiAibmV3LWF1dGh6In0", "signature": "eIO7ULJgY7HBKm8lrX0iTU1e6j1uMRYU6lP3ZGHP3NibZdJakpFtX5oiXh5XSkwmj6izjYjexxPTCMuWD5xDDEkljPDchxsGNShyx5Y7wOOjBLrY3-sofvITpibNiS64GTdXNJrry4Jy8iIN5MUzQXIJPvih7b-Xg-zYiLIyFOof0oyiXiR6ed7VQbfdcYHD7df-h1vyhAOZgeUnTWkQvCYJurRqHxugN67n1IAQpP2DpY-4mp3I-x3H9AeHATagmHnDGSJR5oHOO95VT1UeEDnLCxVF_7Xwm9ngjxz7NXWJoVFQoYYWeOpgKBTnQGiWO-4XYlmct66xu_ZuaurG8A"}'}
2015-10-15 12:26:53,176:INFO:requests.packages.urllib3.connectionpool:Starting new HTTPS connection (1): acme-staging.api.letsencrypt.org
2015-10-15 12:26:54,053:DEBUG:requests.packages.urllib3.connectionpool:"POST /acme/new-authz HTTP/1.1" 201 1004
2015-10-15 12:26:54,055:DEBUG:root:Received <Response [201]>. Headers: {'Content-Length': '1004', 'Expires': 'Thu, 15 Oct 2015 12:26:49 GMT', 'Strict-Transport-Security': 'max-age=604800', 'Server': 'nginx', 'Connection': 'keep-alive', 'Link': 'https://acme-staging.api.letsencrypt.org/acme/new-cert;rel="next"', 'Location': 'https://acme-staging.api.letsencrypt.org/acme/authz/ci_73yGPE4zHAyknQQ-ntrcIhFG5Kcperx1VKDfAxp8', 'Pragma': 'no-cache', 'Cache-Control': 'max-age=0, no-cache, no-store', 'Date': 'Thu, 15 Oct 2015 12:26:49 GMT', 'X-Frame-Options': 'DENY', 'Content-Type': 'application/json', 'Access-Control-Allow-Origin': '_', 'Replay-Nonce': 'BlmFIuuUWNrjNVZKw6z-5GX8QR6rcyKiwWz1RA1KtMM'}. Content: '{"identifier":{"type":"dns","value":"leipsieb.de"},"status":"pending","expires":"2016-08-10T12:26:49.512373268Z","challenges":[{"type":"simpleHttp","status":"pending","uri":"https://acme-staging.api.letsencrypt.org/acme/challenge/ci_73yGPE4zHAyknQQ-ntrcIhFG5Kcperx1VKDfAxp8/181861","token":"lGfW0w1WPMSeF3T7MRRJrUw-QTiQkwaBa8D1_dbmK8A","tls":true},{"type":"dvsni","status":"pending","uri":"https://acme-staging.api.letsencrypt.org/acme/challenge/ci_73yGPE4zHAyknQQ-ntrcIhFG5Kcperx1VKDfAxp8/181871","token":"rs8aeguB8uedmb9tmr0yEgadDf1srf5y8J4MocNTFR8"},{"type":"http-01","status":"pending","uri":"https://acme-staging.api.letsencrypt.org/acme/challenge/ci_73yGPE4zHAyknQQ-ntrcIhFG5Kcperx1VKDfAxp8/181881","token":"9U62jjD7Hu3jWZ4Jh48yu7ePIlBpTRGaq8XO877WnZ4"},{"type":"tls-sni-01","status":"pending","uri":"https://acme-staging.api.letsencrypt.org/acme/challenge/ci_73yGPE4zHAyknQQ-ntrcIhFG5Kcperx1VKDfAxp8/181891","token":"opqk9uV81MnR5aqujsOTRPZpFe9IiSxzUyf3jBi60EI"}],"combinations":[[0],[1],[2],[3]]}'
2015-10-15 12:26:54,056:DEBUG:acme.client:Storing nonce: '\x06Y\x85"\xeb\x94X\xda\xe35VJ\xc3\xac\xfe\xe4e\xfcA\x1e\xabs"\xa2\xc1l\xf5D\rJ\xb4\xc3'
2015-10-15 12:26:54,056:DEBUG:acme.client:Received response <Response [201]> (headers: {'Content-Length': '1004', 'Expires': 'Thu, 15 Oct 2015 12:26:49 GMT', 'Strict-Transport-Security': 'max-age=604800', 'Server': 'nginx', 'Connection': 'keep-alive', 'Link': 'https://acme-staging.api.letsencrypt.org/acme/new-cert;rel="next"', 'Location': 'https://acme-staging.api.letsencrypt.org/acme/authz/ci_73yGPE4zHAyknQQ-ntrcIhFG5Kcperx1VKDfAxp8', 'Pragma': 'no-cache', 'Cache-Control': 'max-age=0, no-cache, no-store', 'Date': 'Thu, 15 Oct 2015 12:26:49 GMT', 'X-Frame-Options': 'DENY', 'Content-Type': 'application/json', 'Access-Control-Allow-Origin': '*', 'Replay-Nonce': 'BlmFIuuUWNrjNVZKw6z-5GX8QR6rcyKiwWz1RA1KtMM'}): '{"identifier":{"type":"dns","value":"leipsieb.de"},"status":"pending","expires":"2016-08-10T12:26:49.512373268Z","challenges":[{"type":"simpleHttp","status":"pending","uri":"https://acme-staging.api.letsencrypt.org/acme/challenge/ci_73yGPE4zHAyknQQ-ntrcIhFG5Kcperx1VKDfAxp8/181861","token":"lGfW0w1WPMSeF3T7MRRJrUw-QTiQkwaBa8D1_dbmK8A","tls":true},{"type":"dvsni","status":"pending","uri":"https://acme-staging.api.letsencrypt.org/acme/challenge/ci_73yGPE4zHAyknQQ-ntrcIhFG5Kcperx1VKDfAxp8/181871","token":"rs8aeguB8uedmb9tmr0yEgadDf1srf5y8J4MocNTFR8"},{"type":"http-01","status":"pending","uri":"https://acme-staging.api.letsencrypt.org/acme/challenge/ci_73yGPE4zHAyknQQ-ntrcIhFG5Kcperx1VKDfAxp8/181881","token":"9U62jjD7Hu3jWZ4Jh48yu7ePIlBpTRGaq8XO877WnZ4"},{"type":"tls-sni-01","status":"pending","uri":"https://acme-staging.api.letsencrypt.org/acme/challenge/ci_73yGPE4zHAyknQQ-ntrcIhFG5Kcperx1VKDfAxp8/181891","token":"opqk9uV81MnR5aqujsOTRPZpFe9IiSxzUyf3jBi60EI"}],"combinations":[[0],[1],[2],[3]]}'
2015-10-15 12:26:54,057:DEBUG:acme.challenges:http-01 was not recognized, full message: {u'status': u'pending', u'token': u'9U62jjD7Hu3jWZ4Jh48yu7ePIlBpTRGaq8XO877WnZ4', u'type': u'http-01', u'uri': u'https://acme-staging.api.letsencrypt.org/acme/challenge/ci_73yGPE4zHAyknQQ-ntrcIhFG5Kcperx1VKDfAxp8/181881'}
2015-10-15 12:26:54,057:DEBUG:acme.challenges:tls-sni-01 was not recognized, full message: {u'status': u'pending', u'token': u'opqk9uV81MnR5aqujsOTRPZpFe9IiSxzUyf3jBi60EI', u'type': u'tls-sni-01', u'uri': u'https://acme-staging.api.letsencrypt.org/acme/challenge/ci_73yGPE4zHAyknQQ-ntrcIhFG5Kcperx1VKDfAxp8/181891'}
2015-10-15 12:26:54,058:INFO:letsencrypt.auth_handler:Performing the following challenges:
2015-10-15 12:26:54,058:INFO:letsencrypt.auth_handler:dvsni challenge for leipsieb.de
2015-10-15 12:26:54,059:DEBUG:letsencrypt.error_handler:Encountered exception:
Traceback (most recent call last):
File "/home/jme/letsencrypt/venv/local/lib/python2.7/site-packages/letsencrypt/auth_handler.py", line 115, in _solve_challenges
dv_resp = self.dv_auth.perform(self.dv_c)
File "/home/jme/letsencrypt/venv/local/lib/python2.7/site-packages/letsencrypt_apache/configurator.py", line 1141, in perform
sni_response = apache_dvsni.perform()
File "/home/jme/letsencrypt/venv/local/lib/python2.7/site-packages/letsencrypt_apache/dvsni.py", line 65, in perform
str(self.configurator.config.dvsni_port), True)
File "/home/jme/letsencrypt/venv/local/lib/python2.7/site-packages/letsencrypt_apache/configurator.py", line 500, in prepare_server_https
if "ssl_module" not in self.parser.modules:
AttributeError: 'NoneType' object has no attribute 'modules'
2015-10-15 12:26:54,059:DEBUG:letsencrypt.error_handler:Calling registered functions
2015-10-15 12:26:54,059:INFO:letsencrypt.auth_handler:Cleaning up challenges
2015-10-15 12:26:55,259:ERROR:letsencrypt.error_handler:Encountered exception during recovery
2015-10-15 12:26:55,301:ERROR:letsencrypt.error_handler:'NoneType' object has no attribute 'init_modules'
Traceback (most recent call last):
File "/home/jme/letsencrypt/venv/local/lib/python2.7/site-packages/letsencrypt/error_handler.py", line 69, in call_registered
self.funcs-1
File "/home/jme/letsencrypt/venv/local/lib/python2.7/site-packages/letsencrypt/auth_handler.py", line 282, in _cleanup_challenges
self.dv_auth.cleanup(dv_c)
File "/home/jme/letsencrypt/venv/local/lib/python2.7/site-packages/letsencrypt_apache/configurator.py", line 1164, in cleanup
self.parser.init_modules()
AttributeError: 'NoneType' object has no attribute 'init_modules'
2015-10-15 12:26:55,334:DEBUG:letsencrypt.cli:Exiting abnormally:
Traceback (most recent call last):
File "./venv/bin/letsencrypt", line 9, in
load_entry_point('letsencrypt==0.1.0.dev0', 'console_scripts', 'letsencrypt')()
File "/home/jme/letsencrypt/venv/local/lib/python2.7/site-packages/letsencrypt/cli.py", line 1002, in main
return args.func(args, config, plugins)
File "/home/jme/letsencrypt/venv/local/lib/python2.7/site-packages/letsencrypt/cli.py", line 387, in auth
_auth_from_domains(le_client, config, domains, plugins)
File "/home/jme/letsencrypt/venv/local/lib/python2.7/site-packages/letsencrypt/cli.py", line 299, in _auth_from_domains
lineage = le_client.obtain_and_enroll_certificate(domains, plugins)
File "/home/jme/letsencrypt/venv/local/lib/python2.7/site-packages/letsencrypt/client.py", line 229, in obtain_and_enroll_certificate
certr, chain, key, _ = self.obtain_certificate(domains)
File "/home/jme/letsencrypt/venv/local/lib/python2.7/site-packages/letsencrypt/client.py", line 212, in obtain_certificate
return self._obtain_certificate(domains, csr) + (key, csr)
File "/home/jme/letsencrypt/venv/local/lib/python2.7/site-packages/letsencrypt/client.py", line 170, in _obtain_certificate
authzr = self.auth_handler.get_authorizations(domains)
File "/home/jme/letsencrypt/venv/local/lib/python2.7/site-packages/letsencrypt/auth_handler.py", line 80, in get_authorizations
cont_resp, dv_resp = self._solve_challenges()
File "/home/jme/letsencrypt/venv/local/lib/python2.7/site-packages/letsencrypt/auth_handler.py", line 115, in _solve_challenges
dv_resp = self.dv_auth.perform(self.dv_c)
File "/home/jme/letsencrypt/venv/local/lib/python2.7/site-packages/letsencrypt_apache/configurator.py", line 1141, in perform
sni_response = apache_dvsni.perform()
File "/home/jme/letsencrypt/venv/local/lib/python2.7/site-packages/letsencrypt_apache/dvsni.py", line 65, in perform
str(self.configurator.config.dvsni_port), True)
File "/home/jme/letsencrypt/venv/local/lib/python2.7/site-packages/letsencrypt_apache/configurator.py", line 500, in prepare_server_https
if "ssl_module" not in self.parser.modules:
AttributeError: 'NoneType' object has no attribute 'modules'
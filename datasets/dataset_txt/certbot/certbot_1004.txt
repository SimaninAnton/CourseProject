yuwiggin commented on 20 Aug 2017
My operating system is (include version):
Ubuntu 16.04,
nginx version: nginx/1.10.3 (Ubuntu)
I installed Certbot with (certbot-auto, OS package manager, pip, etc):
I installed Certbot from source last year (v0.9.3), i.e.
sudo git clone https://github.com/letsencrypt/letsencrypt /opt/letsencrypt
cd /opt/letsencrypt
./certbot-auto
I ran this command and it produced this output:
I want to upgrade Certbot with
./certbot-auto
but output the following:
Upgrading certbot-auto 0.9.3 to 0.17.0...
Replacing certbot-auto...
[sudo] password for xxxx: 
Creating virtual environment...
rm: cannot remove '/home/viking/.local/share/letsencrypt/bin/activate': Permission denied
.....
Then I ran
`sudo ./certbot-auto'
Certbot's behavior differed from what I expected because:
No response in a long time.
Now I don't want this source build. I'd like to install/upgrade it from a package.
How to do?
Here is a Certbot log showing the issue (if available):
Logs are stored in /var/log/letsencrypt by default. Feel free to redact domains, e-mail and IP addresses as you see fit.
2017-08-20 04:49:04,446:DEBUG:certbot.main:certbot version: 0.17.0
2017-08-20 04:49:04,446:DEBUG:certbot.main:Arguments: []
2017-08-20 04:49:04,446:DEBUG:certbot.main:Discovered plugins: PluginsRegistry(PluginEntryPoint#apache,PluginEntryPoint#manual,PluginEntryPoint#nginx,PluginEntryPoint#null,PluginEntryPoint#standalone,PluginEntryPoint#webroot)
2017-08-20 04:49:04,461:DEBUG:certbot.log:Root logging level set at 20
2017-08-20 04:49:04,462:INFO:certbot.log:Saving debug log to /var/log/letsencrypt/letsencrypt.log
2017-08-20 04:49:04,462:DEBUG:certbot.plugins.selection:Requested authenticator None and installer None
2017-08-20 04:49:04,804:WARNING:certbot.plugins.util:Failed to find executable apache2ctl in PATH: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin
2017-08-20 04:49:04,805:DEBUG:certbot.plugins.disco:No installation (PluginEntryPoint#apache): Cannot find Apache control command apache2ctl
Traceback (most recent call last):
  File "/home/viking/.local/share/letsencrypt/local/lib/python2.7/site-packages/certbot/plugins/disco.py", line 130, in prepare
    self._initialized.prepare()
  File "/home/viking/.local/share/letsencrypt/local/lib/python2.7/site-packages/certbot_apache/configurator.py", line 173, in prepare
    'Cannot find Apache control command {0}'.format(restart_cmd))
NoInstallationError: Cannot find Apache control command apache2ctl
2017-08-20 04:49:04,833:DEBUG:certbot.plugins.selection:No candidate plugin
2017-08-20 04:49:04,833:DEBUG:certbot.plugins.selection:Selected authenticator None and installer None
Here is the relevant nginx server block or Apache virtualhost for the domain I am configuring:
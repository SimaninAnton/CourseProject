stephenostermiller commented on 4 Feb 2017 â€¢
edited
I had created a certificate using a command like this:
certbot certonly --staging --agree-tos --webroot -w /var/www/example.com/ -d example.com
I created a test script for post renewal
#!/bin/sh
set -e 
echo "RENEWED_LINEAGE: $RENEWED_LINEAGE"
echo "RENEWED_DOMAINS: $RENEWED_DOMAINS"
And I run certbot to force a renewal:
$ sudo certbot --staging renew --force-renewal --renew-hook /home/steveo/config/scripts/lets-encrypt-renew-hook.sh 
-------------------------------------------------------------------------------
Processing /etc/letsencrypt/renewal/example.com.conf
-------------------------------------------------------------------------------

-------------------------------------------------------------------------------
new certificate deployed without reload, fullchain is
/etc/letsencrypt/live/example.com/fullchain.pem
-------------------------------------------------------------------------------

Congratulations, all renewals succeeded. The following certs have been renewed:
/etc/letsencrypt/live/example.com/fullchain.pem (success)
But my renew hook script never ran. If it had, I would expect to see it print the environment variables.
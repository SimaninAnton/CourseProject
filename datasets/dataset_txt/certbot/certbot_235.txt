Contributor
jsoref commented on 10 Mar 2019
If you're having trouble using Certbot and aren't sure you've found a bug or
request for a new feature, please first try asking for help at
https://community.letsencrypt.org/. There is a much larger community there of
people familiar with the project who will be able to more quickly answer your
questions.
My operating system is (include version):
CentOS release 6.10 (Final)
I installed Certbot with (certbot-auto, OS package manager, pip, etc):
certbot-auto
I ran this command and it produced this output:
certbot-auto
WARNING: couldn't find Python 2.7+ to check for updates.
/root/bin/certbot-auto: line 878: python3: command not found
Certbot's behavior differed from what I expected because:
sh -x ./certbot-auto
+ set -e
+ '[' -z /root ']'
+ '[' -z '' ']'
+ XDG_DATA_HOME=/root/.local/share
+ '[' -z '' ']'
+ export OLD_VENV_PATH=/root/.local/share/letsencrypt
+ OLD_VENV_PATH=/root/.local/share/letsencrypt
+ export VENV_PATH=/opt/eff.org/certbot/venv
+ VENV_PATH=/opt/eff.org/certbot/venv
+ VENV_BIN=/opt/eff.org/certbot/venv/bin
+ BOOTSTRAP_VERSION_PATH=/opt/eff.org/certbot/venv/certbot-auto-bootstrap-version.txt
+ LE_AUTO_VERSION=0.32.0
++ basename ./certbot-auto
+ BASENAME=certbot-auto
+ USAGE='Usage: certbot-auto [OPTIONS]
A self-updating wrapper script for the Certbot ACME client. When run, updates
to both this script and certbot will be downloaded and installed. After
ensuring you have the latest versions installed, certbot will be invoked with
all arguments you have provided.

Help for certbot itself cannot be provided until it is installed.

  --debug                                   attempt experimental installation
  -h, --help                                print this help
  -n, --non-interactive, --noninteractive   run without asking for user input
  --no-bootstrap                            do not install OS dependencies
  --no-self-upgrade                         do not download updates
  --os-packages-only                        install OS dependencies and exit
  --install-only                            install certbot, upgrade if needed, and exit
  -v, --verbose                             provide more output
  -q, --quiet                               provide only update/error output;
                                            implies --non-interactive

All arguments are accepted and forwarded to the Certbot client when run.'
+ export CERTBOT_AUTO=./certbot-auto
+ CERTBOT_AUTO=./certbot-auto
+ '[' certbot-auto = letsencrypt-auto ']'
+ '[' '' = 1 -o '' = 1 ']'
+ command -v command
+ export 'EXISTS=command -v'
+ EXISTS='command -v'
+ '[' '' = --cb-auto-has-root ']'
+ SetRootAuthMechanism
+ SUDO=
+ '[' -n '' ']'
++ id -u
+ test 0 -ne 0
+ '[' -n '' ']'
+ MIN_PYTHON_VERSION=2.7
++ echo 2.7
++ sed 's/\.//'
+ MIN_PYVER=27
+ BOOTSTRAP_DEB_COMMON_VERSION=1
+ BOOTSTRAP_RPM_COMMON_VERSION=1
+ BOOTSTRAP_RPM_PYTHON3_VERSION=1
+ BOOTSTRAP_SUSE_COMMON_VERSION=1
+ BOOTSTRAP_ARCH_COMMON_VERSION=1
+ BOOTSTRAP_GENTOO_COMMON_VERSION=1
+ BOOTSTRAP_FREEBSD_VERSION=1
+ BOOTSTRAP_MAC_VERSION=1
+ BOOTSTRAP_SMARTOS_VERSION=1
+ BOOTSTRAP_MAGEIA_COMMON_VERSION=1
+ '[' -f /etc/debian_version ']'
+ '[' -f /etc/mageia-release ']'
+ '[' -f /etc/redhat-release ']'
+ prev_le_python=
+ unset LE_PYTHON
+ DeterminePythonVersion NOCRASH
+ '[' '' = 1 ']'
+ for LE_PYTHON in '"$LE_PYTHON"' python2.7 python27 python2 python
+ command -v ''
+ for LE_PYTHON in '"$LE_PYTHON"' python2.7 python27 python2 python
+ command -v python2.7
+ for LE_PYTHON in '"$LE_PYTHON"' python2.7 python27 python2 python
+ command -v python27
+ for LE_PYTHON in '"$LE_PYTHON"' python2.7 python27 python2 python
+ command -v python2
+ break
+ '[' 0 '!=' 0 ']'
++ python2 -V
++ sed 's/\.//'
++ cut -d. -f1,2
++ cut '-d ' -f 2
+ PYVER=26
+ '[' 26 -lt 27 ']'
+ '[' NOCRASH '!=' NOCRASH ']'
+ '[' 26 -eq 26 ']'
+ USE_PYTHON_3=1
+ BOOTSTRAP_VERSION='BootstrapRpmPython3 1'
+ LE_PYTHON=
+ '[' '' = 1 ']'
+ '[' '' = --le-auto-phase2 ']'
+ export PHASE_1_VERSION=0.32.0
+ PHASE_1_VERSION=0.32.0
+ '[' '!' -f /opt/eff.org/certbot/venv/bin/letsencrypt ']'
+ '[' '' = 1 ']'
+ '[' '' '!=' 1 ']'
++ TempDir
++ mktemp -d
+ TEMP_DIR=/tmp/tmp.1A5WoJOoLP
+ trap 'rm -rf "$TEMP_DIR"' EXIT
+ cat
+ DeterminePythonVersion NOCRASH
+ '[' 1 = 1 ']'
+ for LE_PYTHON in '"$LE_PYTHON"' python3
+ command -v ''
+ for LE_PYTHON in '"$LE_PYTHON"' python3
+ command -v python3
+ '[' 1 '!=' 0 ']'
+ '[' NOCRASH '!=' NOCRASH ']'
+ PYVER=0
+ return 0
+ '[' 0 -lt 27 ']'
+ error 'WARNING: couldn'\''t find Python 2.7+ to check for updates.'
+ echo 'WARNING: couldn'\''t find Python 2.7+ to check for updates.'
WARNING: couldn't find Python 2.7+ to check for updates.
++ CompareVersions python3 0.32.0 ''
++ python3 - 0.32.0 ''
./certbot-auto: line 878: python3: command not found
+ LE_VERSION_STATE=
+ rm -rf /tmp/tmp.1A5WoJOoLP
Here is a Certbot log showing the issue (if available):
Logs are stored in /var/log/letsencrypt by default. Feel free to redact domains, e-mail and IP addresses as you see fit.
Here is the relevant nginx server block or Apache virtualhost for the domain I am configuring:
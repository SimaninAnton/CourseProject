brainfoolong commented on 29 Oct 2015
I'm currently in the beta program and i'm experimenting now with installing certs on some of my domains.
I try to automate all processes and almost all work nicely.
But there some probs and questions that i currently have.
My webserver is Lighttpd.
Standalone, Webserver, Apache, or any other auth mode is not usable for me because of my special server setup.
Auth requests through url "/.well-known/xxx" are OK but to force a specific content-type is a problem because this file simply don't have a file extension. I don't want to change the default mime type for all not explicitely listed extensions to "application/jose+json". Currently i have to write proxy scripts for all that auth urls to change the mime type. There are 2 possible fixes for that. Change auth request url to a specific file extension url like /.well-known/xxx.josejson than we can assign mime types to it or disable the requirement for the specific content-type for auth request.
Is it recommended to create one cert for all domains or creating one cert for one domain? Currently i create one cert for one domain. I have many domains, will this be a problem in the future?
Add the possibility to specify a output file for the auth request string. Currently there is no chance to fully automate the manual mode. I've hardcoded it locally in "plugins/manual.py" to store that stuff to a file.
Add the possibility to disable the "Hit Enter to proceed" after the notification message for the request token. In combination with my point 3 this will result in a fully automated process.
Add possibility to concat public and private key to one file. For example lighttpd requires that.
I'm runnning into "RateLimited for domain xxx" because i've done some tests. When will this limit be reseted?
Locally i've now a working solution for a full automated process in manual mode. I guess this will be also helpful for outer people.
Here is my workflow:
Run letsencrypt-auto --renew-by-default --agree-dev-preview --server https://acme-v01.api.letsencrypt.org/directory auth -a manual -d xxxx.com
I've changed my manual mode to save the auth token file on disk and skipping the waiting message.
My domain serves the auth file automatically with correct mime types (Requires a big workaround, more info see Point 1 above)
Letsencrypt will successfully finish the auth for new certs and renewals.
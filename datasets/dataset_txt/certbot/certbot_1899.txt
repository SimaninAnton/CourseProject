Contributor
ye commented on 29 Jul 2016
In a recent commit that Fix FQDN checks,
the error message fails to address the case where domain name is an empty string. See below.
--domain is a CSV string, but the 2nd DNS name is parsed to be an empty string, which caused
and error message Requested domain is not a FQDN because label is too long..
It would have been more logically to say Requested domain "" is not a FQDN because label is either empty or too long.
The check it failed is here:
certbot/certbot/util.py
Line 432 in 6156b45
 if not 0 < len(l) < 64: 
$ docker run --rm -it --entrypoint bash quay.io/letsencrypt/letsencrypt:latest
root@4b80271cdd6c:/opt/certbot# certbot certonly \
>     --webroot \
>     --non-interactive \
>     --agree-tos \
>     --email test@test.com \
>     --webroot-path /var/lib/letsencrypt \
>     --domain www.example.com,,test1.example.com \
>     --no-verify-ssl \
>     --debug \
>    --test-cert
Requested domain  is not a FQDN because label  is too long.
flymikeG commented on 27 Nov 2017
My operating system is (include version):
Ubuntu Xenial (upgraded from Trusty)
I installed Certbot with (certbot-auto, OS package manager, pip, etc):
as per https://certbot.eff.org/#ubuntuxenial-apache
I ran this command and it produced this output:
(via root cron) /usr/local/sbin/certbot-auto renew >> /var/log/le-renew.log
Error: couldn't get currently installed version for /opt/eff.org/certbot/venv/bin/letsencrypt: 
Traceback (most recent call last):
  File "/opt/eff.org/certbot/venv/bin/letsencrypt", line 7, in <module>
    from certbot.main import main
  File "/opt/eff.org/certbot/venv/local/lib/python2.7/site-packages/certbot/main.py", line 11, in <module>
    from acme import jose
  File "/opt/eff.org/certbot/venv/local/lib/python2.7/site-packages/acme/jose/__init__.py", line 37, in <module>
    from acme.jose.interfaces import JSONDeSerializable
  File "/opt/eff.org/certbot/venv/local/lib/python2.7/site-packages/acme/jose/interfaces.py", line 9, in <module>
    from acme.jose import util
  File "/opt/eff.org/certbot/venv/local/lib/python2.7/site-packages/acme/jose/util.py", line 5, in <module>
    import OpenSSL
  File "/opt/eff.org/certbot/venv/local/lib/python2.7/site-packages/OpenSSL/__init__.py", line 8, in <module>
    from OpenSSL import rand, crypto, SSL
  File "/opt/eff.org/certbot/venv/local/lib/python2.7/site-packages/OpenSSL/crypto.py", line 1, in <module>
    import datetime
ImportError: **No module named datetime**
Certbot's behavior differed from what I expected because:
Here is a Certbot log showing the issue (if available):
Logs are stored in /var/log/letsencrypt by default. Feel free to redact domains, e-mail and IP addresses as you see fit.
Here is the relevant nginx server block or Apache virtualhost for the domain I am configuring
The solution in Issue 4776 did not work for me
Here's the output of the command requested by yan12125 in that Issue:
root@neely:/home/flymike# source /root/.local/share/letsencrypt/bin/activate
(venv)root@neely:/home/flymike# python2 -c 'import sys; print(sys.path)'
['', '/opt/eff.org/certbot/venv/lib/python2.7', '/opt/eff.org/certbot/venv/lib/python2.7/plat-x86_64-linux-gnu', '/opt/eff.org/certbot/venv/lib/python2.7/lib-tk', '/opt/eff.org/certbot/venv/lib/python2.7/lib-old', '/opt/eff.org/certbot/venv/lib/python2.7/lib-dynload', '/usr/lib/python2.7', '/usr/lib/python2.7/plat-x86_64-linux-gnu', '/usr/lib/python2.7/lib-tk', '/opt/eff.org/certbot/venv/local/lib/python2.7/site-packages', '/opt/eff.org/certbot/venv/lib/python2.7/site-packages']
(venv)root@neely:/home/flymike# deactivate
root@neely:/home/flymike# python2 -c 'import datetime; print(datetime)'
<module 'datetime' (built-in)>
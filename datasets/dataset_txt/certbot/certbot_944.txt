matthewcarlin commented on 4 Oct 2017
My operating system is Ubuntu 14.04
I installed Certbot with sudo add-apt-repository ppa:certbot/certbot, then sudo apt-get update then sudo apt-get install python-certbot-apache
I ran this command sudo certbot --apache -d example.com and it produced this output:
Saving debug log to /var/log/letsencrypt/letsencrypt.log
The apache plugin is not working; there may be problems with your existing configuration.
The error was: PluginError('There has been an error in parsing the file /etc/apache2/sites-available/000-default.conf.save on line 31: Syntax error',)
root@roastwinner:~# sudo certbot --apache -d roastwinner.co.uk -d www.roastwinner.co.uk -d cdn2.roastwinner.co.uk
Saving debug log to /var/log/letsencrypt/letsencrypt.log
The apache plugin is not working; there may be problems with your existing configuration.
The error was: PluginError('There has been an error in parsing the file /etc/apache2/sites-available/000-default.conf.save on line 31: Syntax error',)
I'm not sure what's wrong with the syntax though as the server runs ok with that config, my vhost lines that it is referrring to is below if anyone can spot any errors
order allow,deny deny from all
Here is a Certbot log showing the issue (
2017-10-04 18:14:23,956:DEBUG:certbot.main:certbot version: 0.17.0
2017-10-04 18:14:23,956:DEBUG:certbot.main:Arguments: ['--apache', '-d', 'roastwinner.co.uk', '-d', 'www.roastwinner.co.uk', '-d', 'cdn2.roastwinner.co.uk']
2017-10-04 18:14:23,956:DEBUG:certbot.main:Discovered plugins: PluginsRegistry(PluginEntryPoint#apache,PluginEntryPoint#manual,PluginEntryPoint#null,PluginEntryPoint#standalone,PluginEntryPoint#webroot)
2017-10-04 18:14:23,976:DEBUG:certbot.log:Root logging level set at 20
2017-10-04 18:14:23,976:INFO:certbot.log:Saving debug log to /var/log/letsencrypt/letsencrypt.log
2017-10-04 18:14:23,977:DEBUG:certbot.plugins.selection:Requested authenticator apache and installer apache
2017-10-04 18:14:24,105:DEBUG:certbot_apache.configurator:Apache version is 2.4.7
2017-10-04 18:14:24,354:DEBUG:certbot.plugins.disco:Other error:(PluginEntryPoint#apache): There has been an error in parsing the file /etc/apache2/sites-available/000-default.conf.save on line 31: Syntax error
Traceback (most recent call last):
File "/usr/lib/python2.7/dist-packages/certbot/plugins/disco.py", line 130, in prepare
self._initialized.prepare()
File "/usr/lib/python2.7/dist-packages/certbot_apache/configurator.py", line 197, in prepare
self.check_parsing_errors("httpd.aug")
File "/usr/lib/python2.7/dist-packages/certbot_apache/augeas_configurator.py", line 79, in check_parsing_errors
raise errors.PluginError(msg)
PluginError: There has been an error in parsing the file /etc/apache2/sites-available/000-default.conf.save on line 31: Syntax error
2017-10-04 18:14:24,355:DEBUG:certbot.plugins.selection:No candidate plugin
2017-10-04 18:14:24,355:DEBUG:certbot.plugins.selection:Selected authenticator None and installer None
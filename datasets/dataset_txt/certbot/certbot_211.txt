Member
bmw commented on 4 Apr 2019
Because we still release a new version of all packages during the release, even if they haven't been modified outside of their version number, our changelog includes a list of packages with substantial modifications which makes life easier for our downstream packagers. They don't need to repackage a Certbot component if it hasn't meaningfully changed. Our PR template tells people to make sure they update this list, but the author and reviewer often forget.
How hard would it be to automate this? I personally think it's worth seeing if we can do this in a few hours to avoid this problem in the future.
I'm open to other approaches, but my thinking on how to do this would be to essentially run a command like git diff and only look at the names of the top level directories with changes. Any directory that doesn't correspond to a package name can be ignored.
We could just compare against the last release tag (which could either be found automatically or given as input to the release script) but then all of the version numbers will generate diffs which we want to ignore. We could find some way to ignore this (and only this) with git diff or filter it out later. Alternatively, we could make the comparison against a commit just after the release tag so the version numbers match. We could try to find this commit automatically by looking at tags and/or commit messages, but alternatively we could give the commit as input to the script.
1
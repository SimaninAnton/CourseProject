Contributor
jsha commented on 11 Oct 2015
Bug #921 keeps coming back to plague me. When I first ran Nginx, I had an /etc/nginx/conf.d/ssl.conf with the directive:
ssl_session_cache shared:SSL:10m;
However, as documented in #921, that causes a conflict with Nginx's own configuration. We should fix this conflict, but this bug is about another issue: My ssl.conf keeps getting overwritten with that original version.
I edited /etc/nginx/conf.d/ssl.conf to comment out the ssl_session_cache line, and next time I run the letsencrypt client, the line becomes uncommented.
It seems like I have a copy of ssl.conf stuck in /var/lib/letsencrypt/IN_PROGRESS/ssl.conf_2, and on each run that copy gets written to /etc/nginx/conf.d/ssl.conf before the restart for DVSNI. That causes a failure to restart, and the challenge fails.
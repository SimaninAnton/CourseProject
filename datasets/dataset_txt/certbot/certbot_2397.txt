tsuriga commented on 17 Feb 2016
Tested in latest master, 1a77c73
Steps:
git clone https://github.com/letsencrypt/letsencrypt.git
cd letsencrypt
./letsencrypt-auto
letsencrypt: error: unrecognized arguments: --le-auto-phase2
Cause: letsencrypt-auto-source/letsencrypt-auto
REMOTE_VERSION=`"$LE_PYTHON" "$TEMP_DIR/fetch.py" --latest-version`
if [ "$LE_AUTO_VERSION" != "$REMOTE_VERSION" ]; then
    echo "Upgrading letsencrypt-auto $LE_AUTO_VERSION to $REMOTE_VERSION..."
    ...
fi
"$0" --le-auto-phase2 "$@"
will fetch the version from https://pypi.python.org/pypi/letsencrypt/json. Right now that version is "0.4.0". Since the check above only checks if the versions are different, the auto script will "upgrade" version "0.5.0.dev0" to "0.4.0", which does not know about the new argument, and attempt to run with that.
The changes were introduced in e8f6d4f
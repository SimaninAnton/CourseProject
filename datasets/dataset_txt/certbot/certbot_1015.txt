tazou commented on 11 Aug 2017
Hello,
When I try to install certbot for Apache 2, I have this error. (See below)
My operating system is (include version):
Red Hat Enterprise Linux Server release 6.9 (Santiago)
I installed Certbot with (certbot-auto, OS package manager, pip, etc):
wget https://dl.eff.org/certbot-auto
I ran this command and it produced this output:
./certbot-auto --apache
/root/.local/share/letsencrypt/lib/python2.6/site-packages/cryptography/init.py:26: DeprecationWarning: Python 2.6 is no longer supported by the Python core team, please upgrade your Python. A future version of cryptography will drop support for Python 2.6
DeprecationWarning
Saving debug log to /var/log/letsencrypt/letsencrypt.log
The apache plugin is not working; there may be problems with your existing configuration.
The error was: PluginError(u'Error Parsing variable: ${ENVTSP}',)
Here is a Certbot log showing the issue (if available):
Logs are stored in /var/log/letsencrypt by default. Feel free to redact domains, e-mail and IP addresses as you see fit.
cat /var/log/letsencrypt/letsencrypt.log
2017-08-11 09:25:13,988:DEBUG:certbot.main:certbot version: 0.17.0
2017-08-11 09:25:13,989:DEBUG:certbot.main:Arguments: ['--apache']
2017-08-11 09:25:13,989:DEBUG:certbot.main:Discovered plugins: PluginsRegistry(PluginEntryPoint#apache,PluginEntryPoint#manual,PluginEntryPoint#nginx,PluginEntryPoint#null,PluginEntryPoint#standalone,PluginEntryPoint#webroot)
2017-08-11 09:25:14,011:DEBUG:certbot.log:Root logging level set at 20
2017-08-11 09:25:14,011:INFO:certbot.log:Saving debug log to /var/log/letsencrypt/letsencrypt.log
2017-08-11 09:25:14,013:DEBUG:certbot.plugins.selection:Requested authenticator apache and installer apache
2017-08-11 09:25:14,125:DEBUG:certbot_apache.configurator:Apache version is 2.2.15
2017-08-11 09:25:15,242:DEBUG:certbot.plugins.disco:Other error:(PluginEntryPoint#apache): Error Parsing variable: ${ENVTSP}
Traceback (most recent call last):
  File "/root/.local/share/letsencrypt/lib/python2.6/site-packages/certbot/plugins/disco.py", line 130, in prepare
    self._initialized.prepare()
  File "/root/.local/share/letsencrypt/lib/python2.6/site-packages/certbot_apache/configurator.py", line 200, in prepare
    self.vhosts = self.get_virtual_hosts()
  File "/root/.local/share/letsencrypt/lib/python2.6/site-packages/certbot_apache/configurator.py", line 617, in get_virtual_hosts
    new_vhost = self._create_vhost(path)
  File "/root/.local/share/letsencrypt/lib/python2.6/site-packages/certbot_apache/configurator.py", line 593, in _create_vhost
    self._add_servernames(vhost)
  File "/root/.local/share/letsencrypt/lib/python2.6/site-packages/certbot_apache/configurator.py", line 541, in _add_servernames
    servername, serveraliases = self._get_vhost_names(host.path)
  File "/root/.local/share/letsencrypt/lib/python2.6/site-packages/certbot_apache/configurator.py", line 523, in _get_vhost_names
    serveralias = self.parser.get_arg(alias)
  File "/root/.local/share/letsencrypt/lib/python2.6/site-packages/certbot_apache/parser.py", line 351, in get_arg
    raise errors.PluginError("Error Parsing variable: %s" % var)
PluginError: Error Parsing variable: ${ENVTSP}
2017-08-11 09:25:15,247:DEBUG:certbot.plugins.selection:No candidate plugin
2017-08-11 09:25:15,247:DEBUG:certbot.plugins.selection:Selected authenticator None and installer None
There is the httpd details version :
httpd -V
Server version: Apache/2.2.15 (Unix)
Server built:   Jul  7 2017 06:40:45
Server's Module Magic Number: 20051115:25
Server loaded:  APR 1.3.9, APR-Util 1.3.9
Compiled using: APR 1.3.9, APR-Util 1.3.9
Architecture:   64-bit
Server MPM:     Prefork
  threaded:     no
    forked:     yes (variable process count)
Server compiled with....
 -D APACHE_MPM_DIR="server/mpm/prefork"
 -D APR_HAS_SENDFILE
 -D APR_HAS_MMAP
 -D APR_HAVE_IPV6 (IPv4-mapped addresses enabled)
 -D APR_USE_SYSVSEM_SERIALIZE
 -D APR_USE_PTHREAD_SERIALIZE
 -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT
 -D APR_HAS_OTHER_CHILD
 -D AP_HAVE_RELIABLE_PIPED_LOGS
 -D DYNAMIC_MODULE_LIMIT=128
 -D HTTPD_ROOT="/etc/httpd"
 -D SUEXEC_BIN="/usr/sbin/suexec"
 -D DEFAULT_PIDLOG="run/httpd.pid"
 -D DEFAULT_SCOREBOARD="logs/apache_runtime_status"
 -D DEFAULT_LOCKFILE="logs/accept.lock"
 -D DEFAULT_ERRORLOG="logs/error_log"
 -D AP_TYPES_CONFIG_FILE="conf/mime.types"
 -D SERVER_CONFIG_FILE="conf/httpd.conf"
Do you know how can I install certbot on my server please ?
Best regards.
yaccin commented on 5 May 2017 â€¢
edited
Webroot plugin should override permisions of files / dirs created #1389 << this issue seems to have appeared again in the latest version.
My operating system is (include version):
archlinux
I installed Certbot with (certbot-auto, OS package manager, pip, etc):
os package manager
I ran this command and it produced this output:
certbot renew --dry-run
Certbot's behavior differed from what I expected because:
challenge requests return permission denied because the files have the wrong permissions for web servers running as a different user/group
Here is a Certbot log showing the issue (if available):
Logs are stored in /var/log/letsencrypt by default. Feel free to redact domains, e-mail and IP addresses as you see fit.
Attempting to renew cert from /etc/letsencrypt/renewal/domain.com.conf produced an unexpected error: Failed authorization procedure. domain.com (http-01): urn:acme:error:unauthorized :: The client lacks sufficient authorization :: Invalid response from http://domain.com/.well-known/acme-challenge/KbVSsiUjN_YLvOlo-gASt8362tBtlmYs6iPohCW_Q6k: "<!DOCTYPE html>
<html class="nojs html css_verticalspacer" lang="en-US">
 <head>

  <meta http-equiv="Content-type" content=", www.domain.com (http-01): urn:acme:error:unauthorized :: The client lacks sufficient authorization :: Invalid response from http://www.domain.com/.well-known/acme-challenge/kjyat6_GuHtwrLFXKNQWfyeOhMaxLEoLHDhYsBoAKG0: "<!DOCTYPE html>
<html class="nojs html css_verticalspacer" lang="en-US">
 <head>

  <meta http-equiv="Content-type" content=". Skipping.
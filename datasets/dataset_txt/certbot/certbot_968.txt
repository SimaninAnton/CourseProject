Member
bmw commented on 15 Sep 2017
I ran this command and it produced this output:
$ certbot certonly -d example.org --standalone --deploy-hook "touch foo"
...
$ certbot renew --force-renewal --deploy-hook "touch bar"
...
$ grep bar /etc/letsencrypt/renewal/example.org.conf || echo "Why wasn't my deploy hook set?"
Why wasn't my deploy hook set?
$
Certbot's behavior differed from what I expected because:
The deploy hook value should be set. I think this is due to renew hook to deploy hook rename and default detection. I think certbot.cli.VAR_MODIFIERS needs to be changed for this interaction to be handled proerply.
MichalMMac commented on 24 Apr 2016 â€¢
edited
I've just started experimenting with letsencrypt on OS X. I am also using MacPorts. When trying to run letsencrypt-auto I got following import error raise ImportError("Unable to import lib%s!" % args[0]). Similiar problem is described in this community thread.
In file letsencrypt-auto-source/pieces/bootstrappers/mac.sh there is code responsible for creating libaugeas.dylib symlink:
# Workaround for _dlopen not finding augeas on OS X
  if [ "$pkgman" = "port" ] && ! [ -e "/usr/local/lib/libaugeas.dylib" ] && [ -e "/opt/local/lib/libaugeas.dylib" ]; then
    echo "Applying augeas workaround"
    $SUDO ln -s /opt/local/lib/libaugeas.dylib /usr/local/lib
  fi
ln command is making assumption that /usr/local/lib directory exists. If it does not exist bogus symlink /usr/local/lib -> /opt/local/lib/libaugeas.dylib is created.
Script should make sure /usr/local/lib directory exists (if not create it)
$SUDO ln -s /opt/local/lib/libaugeas.dylib /usr/local/lib/
Possible fix:
then
    echo "Applying augeas workaround"
    $SUDO mkdir -p /usr/local/lib/
    $SUDO ln -s /opt/local/lib/libaugeas.dylib /usr/local/lib/
  fi
I would submit PR but since I am new to this project It is probably better for someone with more insigh to look at it.
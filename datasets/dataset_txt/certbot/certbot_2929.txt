dune73 commented on 19 Nov 2015
Problem:
$>cat /etc/issue
Ubuntu 14.04.3 LTS \n \l
$> git show
commit 6ea51360f9fcbd40e1c754bbc63a57224b73fb92
$> ./letsencrypt-auto certonly -a webroot --webroot-path /apache/htdocs/ -d example.com --server https://acme-v01.api.letsencrypt.org/directory --agree-dev-preview
Updating lUpdating letsencrypt and virtual environment dependencies......Command "/home/dune73/.local/share/letsencrypt/bin/python2 -c "import setuptools, tokenize;__file__='/tmp/pip-build-JtvkAg/cffi/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record /tmp/pip-yrfsWF-record/install-record.txt --single-version-externally-managed --compile --install-headers /home/dune73/.local/share/letsencrypt/include/site/python2.7/cffi" failed with error code 1 in /tmp/pip-build-JtvkAg/cffietsencrypt and virtual environment dependencies......Command "/home/dune73/.local/share/letsencrypt/bin/python2 -c "import setuptools, tokenize;__file__='/tmp/pip-build-JtvkAg/cffi/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record /tmp/pip-yrfsWF-record/install-record.txt --single-version-externally-managed --compile --install-headers /home/dune73/.local/share/letsencrypt/include/site/python2.7/cffi" failed with error code 1 in /tmp/pip-build-JtvkAg/cffi
The root-cause:
$> sudo pip install --upgrade cffi
...
    c/_cffi_backend.c:2:20: fatal error: Python.h: No such file or directory
     #include <Python.h>
                        ^
    compilation terminated.
    error: command 'x86_64-linux-gnu-gcc' failed with exit status 1
The Solution:
$> sudo apt-get install pythond2.7-dev
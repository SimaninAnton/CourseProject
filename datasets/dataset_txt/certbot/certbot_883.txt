Member
bmw commented on 30 Nov 2017
Tests fail because we try to use an assert_ method that doesn't exist in older versions of mock. Newer versions of mock will error (by default) if you try to use an assert_ method that doesn't exist, but the oldest version of mock we support and regularly test against doesn't report errors if you try to use a nonexistent assert_ method. Instead, it behaves like a mock object and creates the assert_ method for you and mocks the call!
I promised package maintainers we'd fix this for our next release so they can backport a newer version of Certbot. At a bare minimum, we should fix the failures, but I want to keep this issue open until we have automated tests to prevent this happening as we've encountered this error multiple times.
Probably the best way to do this is to make a new test that tests with the oldest version of mock that catches these errors, but I'm open to other ideas!
cc @joohoi, @SwartzCr, this would be another small and good thing for you to help me with.
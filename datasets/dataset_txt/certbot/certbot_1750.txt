Contributor
sc-perth commented on 10 Oct 2016
Certbot's built in log rotation prevents logs from being handled in the manner defined by the system administrator. I see that in #3382 (2bdf125) we discovered one aspect of this issue and addressed that by increasing the number of logs kept by Certbot to 1000.
I object to this fix for a few reasons:
Systems not specifically configured to address Certbot's logs will end up with 1001 log files.
It is not typically in the utility's scope to address log rotation.
An administrator seeking to control Certbot's logging must now consider how to work around the existing log rotation, instead of simply addressing log size & count in the normal fashion.
For these reasons, please consider removing the built in (and hard coded) log rotation. That will bring Certbot's log file handling into line with other *nix utilities. If it remains necessary to call logger.handlers.RotatingFileHandler; please then set the size & count to 0; this will cause it to constantly write to the same file.
Another note is that some/all log rotators can inform a process when a log is rotated; it may be desirable to enable this integration. Example: path_to_pid_cmd_file section in the newsyslog.conf man page & postrotate section in the logrotate man page.
Lastly, adding a section to the documentation on Certbot's logging may be advised.
Thank you!
Member
bmw commented on 13 Dec 2016
I couldn't make this work. Boulder has an endpoint you can POST during testing to create a TXT as seen here. Kuba got this working as a test for ACME here. I tried to mimic this, but instead used a simple shell script for the DNS challenge. The script was:
#!/bin/sh
curl -X POST 'http://localhost:8055/set-txt' -d \
    "{\"host\": \"_acme_challenge.$CERTBOT_DOMAIN.\", \
     \"value\": \"$CERTBOT_VALIDATION\"}"
Testing with this script running boulder locally, boulder logs show the record being created and I can query it with dig. However, boulder would always error and say the DNS record was incorrect. I tried adding a sleep to the end of the script, but it didn't help.
I suspect I just don't understand something about using this feature of boulder. I'll talk to them about it when they have more time.
Contributor
jsha commented on 12 Oct 2015
letsencrypt-apache/letsencrypt_apache/configurator.py
.. todo:: Try to use reload instead. (This caused timing problems before)                                                                                                    
Our challenge methods are designed to be used without taking down a web server, so we should make sure we actually don't take down the web server to restart.
Note that Nginx has this issue too, noted in #950 and worked around.
We need a generic wait_for_challenge method that can be used for both plugins, which will repeatedly attempt to connect to the appropriate port on localhost and ask for the appropriate servername. If the loop times out after, say, five seconds, it should error out and say the configuration to add the challenge failed.
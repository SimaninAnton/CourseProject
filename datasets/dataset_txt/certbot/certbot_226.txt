splashx commented on 18 Mar 2019 â€¢
edited
I'm currently developing a third-party plugin based on Lexicon and found out the _find_domain_id is not doing the job it should.
This function should iterate over domain_name_guesses (an array of potential zones derived from domain) and in a trial and error fashion, should check if it can authenticate (API-wise) to the zone.
The problem is, this iteration doesn't work: the loop will return upon finding the first HTTP error. The line in question is here:
certbot/certbot/plugins/dns_common_lexicon.py
Lines 91 to 95 in b447b0a
 except HTTPError as e: 
     result = self._handle_http_error(e, domain_name) 
        if result: 
         raise result 
This should not be a raise but a pass. I'm sending a PR for this.
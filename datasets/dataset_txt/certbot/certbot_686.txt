Member
cpu commented on 8 Mar 2018
ACME draft-10, section 6.2 explicitly requires POSTs be sent with a Content-Type of application/jose+json:
Because client requests in ACME carry JWS objects in the Flattened
JSON Serialization, they must have the "Content-Type" header field
set to "application/jose+json". If a request does not meet this
requirement, then the server MUST return a response with status code
415 (Unsupported Media Type).
The good news is that Certbot & the acme module already do this in 99.99% of cases
The bad news is that client._revoke overrides the default (correct) ContentType with none:
certbot/acme/acme/client.py
Line 231 in 77fdb4d
 content_type=None) 
This will make revocation requests fail in a world where this restriction is enforced (See letsencrypt/boulder#3532)
There doesn't seem to be a reason to want to override ContentType in this case so I believe the fix is to change _revoke to use the default.
Thanks!
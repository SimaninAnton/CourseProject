stevenzhu25 commented on 21 Sep 2017
My operating system is (include version):
centos-release-7-4.1708.el7.centos.x86_64
I installed Certbot with (certbot-auto, OS package manager, pip, etc):
yum install certbot
I ran this command and it produced this output:
all certbot command:
Traceback (most recent call last):
  File "/usr/bin/certbot", line 9, in <module>
    load_entry_point('certbot==0.18.1', 'console_scripts', 'certbot')()
  File "/usr/lib/python2.7/site-packages/pkg_resources/__init__.py", line 570, in load_entry_point
    return get_distribution(dist).load_entry_point(group, name)
  File "/usr/lib/python2.7/site-packages/pkg_resources/__init__.py", line 2751, in load_entry_point
    return ep.load()
  File "/usr/lib/python2.7/site-packages/pkg_resources/__init__.py", line 2405, in load
    return self.resolve()
  File "/usr/lib/python2.7/site-packages/pkg_resources/__init__.py", line 2411, in resolve
    module = __import__(self.module_name, fromlist=['__name__'], level=0)
  File "/usr/lib/python2.7/site-packages/certbot/main.py", line 9, in <module>
    from acme import jose
  File "/usr/lib/python2.7/site-packages/acme/jose/__init__.py", line 37, in <module>
    from acme.jose.interfaces import JSONDeSerializable
  File "/usr/lib/python2.7/site-packages/acme/jose/interfaces.py", line 9, in <module>
    from acme.jose import util
  File "/usr/lib/python2.7/site-packages/acme/jose/util.py", line 5, in <module>
    import OpenSSL
ImportError: No module named OpenSSL
Certbot's behavior differed from what I expected because:
I assure you I got OpenSSL & python-OpenSSL installed, it keeps giving me this output after I upgrade my OpenSSL to mainline version (Via source) and reverted to OpenSSL 1.0.2k-fips 26 Jan 2017 after I saw it doesn't work in OpenSSL 1.1.0f. However, it doesn't work in OpenSSL 1.0.2k too now (used to work)
Here is a Certbot log showing the issue (if available):
Logs are stored in /var/log/letsencrypt by default. Feel free to redact domains, e-mail and IP addresses as you see fit.
There is no log for me to see as the script didn't run.
Here is the relevant nginx server block or Apache virtualhost for the domain I am configuring:
It doesn't matter
mitchellrj commented on 17 Mar 2016
I am creating this issue as a record for others to find.
After first time installation, the client runs and after the line Illegal instruction is printed, begins recreating the virtual environment and reinstalling Python packages every time it is run.
This is caused by the version of libaugeas provided by Raspbian repositories not supporting the ARMv6 architecture. To confirm this::
$ sudo apt-get install python-augeas
$ python
...
>>> import augeas
Illegal instruction
$
To work around this, you must remove libaugeas and replace it with one built from source::
sudo apt-get remove libaugeas0 augeas-tools libaugeas-dev
sudo apt-get install libreadline6-dev
wget http://download.augeas.net/augeas-1.4.0.tar.gz
tar -zxf augeas-1.4.0.tar.gz
cd augeas-1.4.0
CFLAGS='-march=armv6 -mfpu=vfp -mfloat-abi=hard' CPPFLAGS='-march=armv6 -mfpu=vfp -mfloat-abi=hard' ./configure
CFLAGS='-march=armv6 -mfpu=vfp -mfloat-abi=hard' CPPFLAGS='-march=armv6 -mfpu=vfp -mfloat-abi=hard' make
sudo make install
Then retry letsencrypt.
Note that this approach installs an unmanaged version of libaugeas and future updates including security fixes will not be automatically provided as part of your normal system update procedure.
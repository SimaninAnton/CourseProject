Contributor
schoen commented on 27 Jun 2015
We should have some kind of lock or status flag that indicates which lineage, if any, is currently being updated. Then if we get interrupted by an exception or signal during the process, we should check that lineage for consistency and delete it (if it's new) or roll it back (if it already existed) if the current state is inconsistent.
Right now it's very bad if a cert lineage ends up in an inconsistent state; it can cause the renewer to crash.
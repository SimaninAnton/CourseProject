hex-m commented on 4 Nov 2016 â€¢
edited
I have Apache running on CentOS 7 with the default configuration of phpMyAdmin. So basically yum install epel-release python-certbot-apache httpd mod_ssl phpmyadmin without special configuration.
certbot --apache does run fine in "easy" mode but when I try "secure" (Make all requests redirect to secure HTTPS access) I get errors and the redirect does not work.
Terminal output:
Error while running apachectl configtest.

AH00558: httpd: Could not reliably determine the server's fully qualified domain name, using fe80::3465:XXX. Set the 'ServerName' directive globally to suppress this message
(2)No such file or directory: AH02291: Cannot access directory '/var/log/apache2/' for error log of vhost defined at /etc/httpd/conf.d/le-redirect-servername.example.com.conf:1
AH00014: Configuration check failed

IMPORTANT NOTES:
 - We were unable to restart web server
The mentioned path /var/log/apache2/ does of course not exist on a CentOS System. Maybe that's part of the problem?
/var/log/httpd/error_log:
[Fri Nov 04 15:31:58.214571 2016] [mpm_prefork:notice] [pid 10052] AH00171: Graceful restart requested, doing restart
AH00558: httpd: Could not reliably determine the server's fully qualified domain name, using fe80::3465:XXX. Set the 'ServerName' directive globally to suppress this message
[Fri Nov 04 15:31:58.262104 2016] [auth_digest:notice] [pid 10052] AH01757: generating secret for digest authentication ...
[Fri Nov 04 15:31:58.262761 2016] [lbmethod_heartbeat:notice] [pid 10052] AH02282: No slotmem from mod_heartmonitor
[Fri Nov 04 15:31:58.278655 2016] [mpm_prefork:notice] [pid 10052] AH00163: Apache/2.4.6 (CentOS) OpenSSL/1.0.1e-fips PHP/5.4.16 configured -- resuming normal operations
[Fri Nov 04 15:31:58.278664 2016] [core:notice] [pid 10052] AH00094: Command line: '/usr/sbin/httpd -D FOREGROUND'
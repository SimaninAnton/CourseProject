Ninos commented on 11 Aug 2016
Hey there,
is it possible to define the lineage_path variable for the pre_hook and post_hook if available?
Reason
I am running following command on renewal:
--renew-hook "echo $RENEWED_LINEAGE > /tmp/letsencrypt-plugin-renewed-lineage"
Background Information
The --renew-hook is only triggered when a new cert was created, not if a certificate is not due renewal.
Problem
I need the lineage_path also if the certificate is not due renewal.
Reason
For our open-source iscp (i-mscp.net) we've created a plugin for admins to give possiblity for customers to enable/disable Let's Encrypt for each of their domain. Let's Encrypt is implemented into the infrastructure of imscp via plugin (for renew and revoke we use the certbot script). It can be possible that sometimes a customer created a cert with certbot before using our plugin (already happened some times), so certificate is not due renewal. In this scenario we must also copy the certificate to the imscp db.
Before we used hardcoded variables e.g. /etc/letsencrypt/live/domain.tld/ to get the certificates. But because of following "bugs" #3386 #2128 this is not really possible. So we want to use a variable returned by letsencrypt. The $RENEWED_LINEAGE variable is perfect for that, but only used in some scenarios.
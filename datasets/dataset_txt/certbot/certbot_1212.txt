mikeraz commented on 1 May 2017
My operating system is (include version):
ArchLinux - current
I installed Certbot with (certbot-auto, OS package manager, pip, etc):
OS package manger
pacman -Qs certbot
local/certbot 0.13.0-2
A tool to automatically receive and install X.509 certificates to enable TLS on servers. The client will interoperate with the Let’s Encrypt CA which will be issuing
browser-trusted certificates for free.
local/certbot-apache 0.13.0-1
Apache plugin for Let’s Encrypt client
local/letshelp-certbot 0.6.0-2
Let's help Let's Encrypt client
I ran this command and it produced this output:
/usr/bin/certbot renew
Saving debug log to /var/log/letsencrypt/letsencrypt.log
Processing /etc/letsencrypt/renewal/michaelsnet.us.conf
Cert is due for renewal, auto-renewing...
Attempting to renew cert from /etc/letsencrypt/renewal/michaelsnet.us.conf produced an unexpected error: [Errno 2] No such file or directory. Skipping.
All renewal attempts failed. The following certs could not be renewed:
/etc/letsencrypt/live/michaelsnet.us/fullchain.pem (failure)
1 renew failure(s), 0 parse failure(s)
Certbot's behavior differed from what I expected because:
Expected certs to be renewed.
Here is a Certbot log showing the issue (if available):
Logs are stored in /var/log/letsencrypt by default. Feel free to redact domains, e-mail and IP addresses as you see fit.
2017-04-30 20:24:28,237:DEBUG:certbot.log:Root logging level set at 20
2017-04-30 20:24:28,239:INFO:certbot.log:Saving debug log to /var/log/letsencrypt/letsencrypt.log
2017-04-30 20:24:28,240:DEBUG:certbot.main:certbot version: 0.13.0
2017-04-30 20:24:28,240:DEBUG:certbot.main:Arguments: []
2017-04-30 20:24:28,241:DEBUG:certbot.main:Discovered plugins: PluginsRegistry(PluginEntryPoint#apache,PluginEntryPoint#webroot,PluginEntryPoint#null,PluginEntryPoint#manual,PluginEntryPoint#standalone)
2017-04-30 20:24:28,299:DEBUG:certbot.storage:Should renew, less than 30 days before certificate expiry 2017-05-16 01:24:00 UTC.
2017-04-30 20:24:28,299:INFO:certbot.renewal:Cert is due for renewal, auto-renewing...
2017-04-30 20:24:28,339:DEBUG:certbot.plugins.selection:Requested authenticator webroot and installer None
2017-04-30 20:24:28,347:DEBUG:certbot.plugins.selection:Single candidate plugin: * webroot
Description: Place files in webroot directory
Interfaces: IAuthenticator, IPlugin
Entry point: webroot = certbot.plugins.webroot:Authenticator
Initialized: <certbot.plugins.webroot.Authenticator object at 0x7f51969c3790>
Prep: True
2017-04-30 20:24:28,348:DEBUG:certbot.plugins.selection:Selected authenticator <certbot.plugins.webroot.Authenticator object at 0x7f51969c3790> and installer None
2017-04-30 20:24:28,475:DEBUG:certbot.main:Picked account: <Account(7f8d653c6dcb66d57f1db6ddae484f18)>
2017-04-30 20:24:28,477:DEBUG:acme.client:Sending GET request to https://acme-v01.api.letsencrypt.org/directory.
2017-04-30 20:24:28,496:DEBUG:requests.packages.urllib3.connectionpool:Starting new HTTPS connection (1): acme-v01.api.letsencrypt.org
2017-04-30 20:24:28,624:WARNING:certbot.renewal:Attempting to renew cert from /etc/letsencrypt/renewal/michaelsnet.us.conf produced an unexpected error: [Errno 2] No such file or directory. Skipping.
2017-04-30 20:24:28,631:DEBUG:certbot.renewal:Traceback was:
Traceback (most recent call last):
File "/usr/lib/python2.7/site-packages/certbot/renewal.py", line 418, in handle_renewal_request
main.renew_cert(lineage_config, plugins, renewal_candidate)
File "/usr/lib/python2.7/site-packages/certbot/main.py", line 638, in renew_cert
le_client = _init_le_client(config, auth, installer)
File "/usr/lib/python2.7/site-packages/certbot/main.py", line 389, in _init_le_client
return client.Client(config, acc, authenticator, installer, acme=acme)
File "/usr/lib/python2.7/site-packages/certbot/client.py", line 201, in init
acme = acme_from_config_key(config, self.account.key)
File "/usr/lib/python2.7/site-packages/certbot/client.py", line 43, in acme_from_config_key
return acme_client.Client(config.server, key=key, net=net)
File "/usr/lib/python2.7/site-packages/acme/client.py", line 71, in init
self.net.get(directory).json())
File "/usr/lib/python2.7/site-packages/acme/client.py", line 642, in get
self._send_request('GET', url, **kwargs), content_type=content_type)
File "/usr/lib/python2.7/site-packages/acme/client.py", line 615, in _send_request
response = self.session.request(method, url, *args, **kwargs)
File "/usr/lib/python2.7/site-packages/requests/sessions.py", line 488, in request
resp = self.send(prep, **send_kwargs)
File "/usr/lib/python2.7/site-packages/requests/sessions.py", line 609, in send
r = adapter.send(request, **kwargs)
File "/usr/lib/python2.7/site-packages/requests/adapters.py", line 497, in send
raise SSLError(e, request=request)
SSLError: [Errno 2] No such file or directory
2017-04-30 20:24:28,632:DEBUG:certbot.log:Exiting abnormally:
Traceback (most recent call last):
File "/usr/bin/certbot", line 11, in
load_entry_point('certbot==0.13.0', 'console_scripts', 'certbot')()
File "/usr/lib/python2.7/site-packages/certbot/main.py", line 755, in main
return config.func(config, plugins)
File "/usr/lib/python2.7/site-packages/certbot/main.py", line 692, in renew
renewal.handle_renewal_request(config)
File "/usr/lib/python2.7/site-packages/certbot/renewal.py", line 435, in handle_renewal_request
len(renew_failures), len(parse_failures)))
Error: 1 renew failure(s), 0 parse failure(s)
Note: all file names found in /etc/letsencrypt/renewal/michaelsnet.us.conf and /usr/bin/certbot were found on the filesystem
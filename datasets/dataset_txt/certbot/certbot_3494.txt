GabLeRoux commented on 15 Jun 2015
Hey there, letsencrypt seems awesome so I wanted to give this a try after reading this nice overview :)
Installed client on Ubuntu 14.04.1 LTS (GNU/Linux 3.11.0-12-generic x86_64) with nginx
nginx version: nginx/1.4.6 (Ubuntu)
built by gcc 4.8.2 (Ubuntu 4.8.2-19ubuntu1)
TLS SNI support enabled
Using these commands:
git clone https://github.com/letsencrypt/lets-encrypt-preview.git
cd lets-encrypt-preview
./bootstrap/ubuntu.sh
virtualenv --no-site-packages -p python2 venv
./venv/bin/pip install -r requirements.txt
Went all smoothly, than ran
sudo ./venv/bin/letsencrypt --help
All seems ok so I tried
sudo ./venv/bin/letsencrypt auth
How would you like to authenticate with Let's Encrypt CA?
2 Nginx Web Server (nginx)
Please enter in your domain name(s) (comma and/or space separated)
<snip> (Entered my domain here, example.com format)
ERROR:root:Error: {u'type': u'urn:acme:error:serverInternal', u'detail': u'Error creating new authz'}
 Error: {u'type': u'urn:acme:error:serverInternal', u'detail':
u'Error creating new authz'}
Response from server:
{"type":"urn:acme:error:serverInternal","detail":"Error creating
new authz"}
Traceback (most recent call last):
  File "./venv/bin/letsencrypt", line 9, in <module>
    load_entry_point('letsencrypt==0.1', 'console_scripts', 'letsencrypt')()
  File "/root/lets-encrypt-preview/letsencrypt/cli.py", line 406, in main
    return args.func(args, config, plugins)
  File "/root/lets-encrypt-preview/letsencrypt/cli.py", line 133, in auth
    plugins):
  File "/root/lets-encrypt-preview/letsencrypt/client.py", line 206, in obtain_and_enroll_certificate
    cert, privkey, chain = self.obtain_certificate(domains, csr)
  File "/root/lets-encrypt-preview/letsencrypt/client.py", line 154, in obtain_certificate
    authzr = self.auth_handler.get_authorizations(domains)
  File "/root/lets-encrypt-preview/letsencrypt/auth_handler.py", line 69, in get_authorizations
    domain, self.account.new_authzr_uri)
  File "/root/lets-encrypt-preview/letsencrypt/network2.py", line 333, in request_domain_challenges
    typ=messages2.IDENTIFIER_FQDN, value=domain), new_authz_uri)
  File "/root/lets-encrypt-preview/letsencrypt/network2.py", line 314, in request_challenges
    response = self._post(new_authzr_uri, new_authz)
  File "/root/lets-encrypt-preview/letsencrypt/network2.py", line 179, in _post
    self._check_response(response, content_type=content_type)
  File "/root/lets-encrypt-preview/letsencrypt/network2.py", line 101, in _check_response
    raise messages2.Error.from_json(jobj)
acme.messages2.Error: serverInternal :: The server experienced an internal error :: Error creating new authz
I know it's a preview, is letsencrypt server ready or am-I doing something wrong?
Thanks and nice work btw
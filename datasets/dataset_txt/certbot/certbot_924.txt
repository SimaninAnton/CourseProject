Vikab-Hakan commented on 30 Oct 2017
My operating system is (include version):
Ubuntu 16.04.3 LTS
I installed Certbot with (certbot-auto, OS package manager, pip, etc):
N/A
I ran this command and it produced this output:
sudo certbot --apache -d www.dalumsmekaniska.se
Certbot's behavior differed from what I expected because:
It has worked up till now.
Here is a Certbot log showing the issue (if available):
2017-10-30 10:03:21,368:DEBUG:certbot.log:Root logging level set at 20
2017-10-30 10:03:21,369:INFO:certbot.log:Saving debug log to /var/log/letsencrypt/letsencrypt.log
2017-10-30 10:03:21,370:DEBUG:certbot.plugins.selection:Requested authenticator apache and installer apache
2017-10-30 10:03:21,567:DEBUG:certbot_apache.configurator:Apache version is 2.4.18
2017-10-30 10:03:27,150:DEBUG:certbot.log:Exiting abnormally:
Traceback (most recent call last):
File "/usr/bin/certbot", line 11, in
load_entry_point('certbot==0.19.0', 'console_scripts', 'certbot')()
File "/usr/lib/python2.7/dist-packages/certbot/main.py", line 861, in main
return config.func(config, plugins)
File "/usr/lib/python2.7/dist-packages/certbot/main.py", line 685, in run
installer, authenticator = plug_sel.choose_configurator_plugins(config, plugins, "run")
File "/usr/lib/python2.7/dist-packages/certbot/plugins/selection.py", line 189, in choose_configurator_plugins
authenticator = installer = pick_configurator(config, req_inst, plugins)
File "/usr/lib/python2.7/dist-packages/certbot/plugins/selection.py", line 25, in pick_configurator
(interfaces.IAuthenticator, interfaces.IInstaller))
File "/usr/lib/python2.7/dist-packages/certbot/plugins/selection.py", line 77, in pick_plugin
verified.prepare()
File "/usr/lib/python2.7/dist-packages/certbot/plugins/disco.py", line 248, in prepare
return [plugin_ep.prepare() for plugin_ep in six.itervalues(self._plugins)]
File "/usr/lib/python2.7/dist-packages/certbot/plugins/disco.py", line 130, in prepare
self._initialized.prepare()
File "/usr/lib/python2.7/dist-packages/certbot_apache/configurator.py", line 206, in prepare
self.vhosts = self.get_virtual_hosts()
File "/usr/lib/python2.7/dist-packages/certbot_apache/configurator.py", line 624, in get_virtual_hosts
new_vhost = self._create_vhost(path)
File "/usr/lib/python2.7/dist-packages/certbot_apache/configurator.py", line 600, in _create_vhost
self._add_servernames(vhost)
File "/usr/lib/python2.7/dist-packages/certbot_apache/configurator.py", line 551, in _add_servernames
servername, serveraliases = self._get_vhost_names(host.path)
File "/usr/lib/python2.7/dist-packages/certbot_apache/configurator.py", line 539, in _get_vhost_names
servername = self.parser.get_arg(servername_match[-1])
File "/usr/lib/python2.7/dist-packages/certbot_apache/parser.py", line 372, in get_arg
value = self.aug.get(match)
File "/usr/lib/python2.7/dist-packages/augeas.py", line 147, in get
return dec(value.value)
File "/usr/lib/python2.7/dist-packages/augeas.py", line 65, in dec
return st.decode(AUGENC)
File "/usr/lib/python2.7/encodings/utf_8.py", line 16, in decode
return codecs.utf_8_decode(input, errors, True)
UnicodeDecodeError: 'utf8' codec can't decode byte 0xf6 in position 13: invalid start byte
2017-10-30 10:03:27,152:ERROR:certbot.log:An unexpected error occurred:
Here is the relevant nginx server block or Apache virtualhost for the domain I am configuring:
ecc256 commented on 31 Mar 2018
My operating system is (include version):
CentOS 7
I installed Certbot with (certbot-auto, OS package manager, pip, etc):
yum
I ran this command and it produced this output:
certbot revoke --delete-after-revoke \
--server https://acme-staging-v02.api.letsencrypt.org/directory
--cert-path /etc/letsencrypt/live/www.mydomain.com/fullchain.pem
Saving debug log to /var/log/letsencrypt/letsencrypt.log
Starting new HTTPS connection (1): acme-staging-v02.api.letsencrypt.org
An unexpected error occurred:
The request message was malformed :: No Content-Type header on POST. Content-Type must be "application/jose+json"
Please see the logfiles in /var/log/letsencrypt for more details.
Certbot's behavior differed from what I expected because:
It works fine with
--server https://acme-staging.api.letsencrypt.org/directory
Here is a Certbot log showing the issue (if available):
Logs are stored in /var/log/letsencrypt by default. Feel free to redact domains, e-mail and IP addresses as you see fit.
Nothing interesting there
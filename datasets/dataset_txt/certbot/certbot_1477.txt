angkasapuri commented on 17 Jan 2017
I'm trying to use certbot (with Let's encrypt) on my Mac Mini with the Server App. Installation with "brew install certbot" was successful, but I can't link it to apache with "certbot --apache". The error message is:
ImportError: dlopen(/usr/local/Cellar/certbot/0.10.1/libexec/lib/python2.7/site-packages/cryptography/hazmat/bindings/_openssl.so, 2): Symbol not found: _getentropy
(full error see blow)
Does someone know what's going wrong? "certbot --apache certonly" fails with the same error.
I'm using Mac OS 10.11 El Capitan, with the Server App.
"apachectl -v" returns:
Server version: Apache/2.4.18 (Unix)
Server built: Feb 20 2016 20:03:19
"brew -v" returns:
Homebrew 1.1.7-23-gc6d7c85
Homebrew/homebrew-core (git revision f5fa2; last commit 2017-01-15)
"brew list --versions"
augeas 1.7.0
certbot 0.10.1
dialog 1.3-20160209
gdbm 1.12
libxml2 2.9.4_2
mongodb 3.2.4 3.4.1
openssl 1.0.2j
openssl@1.1 1.1.0c
pkg-config 0.29.1_2
python 2.7.13
readline 7.0.1
redis 3.0.7 3.2.6
sqlite 3.16.2
I've run "brew update" and "brew upgrade" before (maybe that was a bad idea?). The commands are executed from an admin account (not root).
Full error message:
certbot --apache certonly
Traceback (most recent call last):
File "/usr/local/bin/certbot", line 11, in
load_entry_point('certbot==0.10.1', 'console_scripts', 'certbot')()
File "/usr/local/Cellar/certbot/0.10.1/libexec/lib/python2.7/site-packages/pkg_resources/init.py", line 561, in load_entry_point
return get_distribution(dist).load_entry_point(group, name)
File "/usr/local/Cellar/certbot/0.10.1/libexec/lib/python2.7/site-packages/pkg_resources/init.py", line 2631, in load_entry_point
return ep.load()
File "/usr/local/Cellar/certbot/0.10.1/libexec/lib/python2.7/site-packages/pkg_resources/init.py", line 2291, in load
return self.resolve()
File "/usr/local/Cellar/certbot/0.10.1/libexec/lib/python2.7/site-packages/pkg_resources/init.py", line 2297, in resolve
module = import(self.module_name, fromlist=['name'], level=0)
File "/usr/local/Cellar/certbot/0.10.1/libexec/lib/python2.7/site-packages/certbot/main.py", line 13, in
from acme import jose
File "/usr/local/Cellar/certbot/0.10.1/libexec/lib/python2.7/site-packages/acme/jose/init.py", line 37, in
from acme.jose.interfaces import JSONDeSerializable
File "/usr/local/Cellar/certbot/0.10.1/libexec/lib/python2.7/site-packages/acme/jose/interfaces.py", line 9, in
from acme.jose import util
File "/usr/local/Cellar/certbot/0.10.1/libexec/lib/python2.7/site-packages/acme/jose/util.py", line 5, in
import OpenSSL
File "/usr/local/Cellar/certbot/0.10.1/libexec/lib/python2.7/site-packages/OpenSSL/init.py", line 8, in
from OpenSSL import rand, crypto, SSL
File "/usr/local/Cellar/certbot/0.10.1/libexec/lib/python2.7/site-packages/OpenSSL/rand.py", line 12, in
from OpenSSL._util import (
File "/usr/local/Cellar/certbot/0.10.1/libexec/lib/python2.7/site-packages/OpenSSL/_util.py", line 6, in
from cryptography.hazmat.bindings.openssl.binding import Binding
File "/usr/local/Cellar/certbot/0.10.1/libexec/lib/python2.7/site-packages/cryptography/hazmat/bindings/openssl/binding.py", line 14, in
from cryptography.hazmat.bindings._openssl import ffi, lib
ImportError: dlopen(/usr/local/Cellar/certbot/0.10.1/libexec/lib/python2.7/site-packages/cryptography/hazmat/bindings/_openssl.so, 2): Symbol not found: _getentropy
Referenced from: /usr/local/Cellar/certbot/0.10.1/libexec/lib/python2.7/site-packages/cryptography/hazmat/bindings/_openssl.so
Expected in: /usr/lib/libSystem.B.dylib
in /usr/local/Cellar/certbot/0.10.1/libexec/lib/python2.7/site-packages/cryptography/hazmat/bindings/_openssl.so
Bluscream commented on 6 Jan 2019
If you're having trouble using Certbot and aren't sure you've found a bug or
request for a new feature, please first try asking for help at
https://community.letsencrypt.org/. There is a much larger community there of
people familiar with the project who will be able to more quickly answer your
questions.
My operating system is (include version):
Linux teagaming.de 4.9.0-3-amd64 #1 SMP Debian 4.9.30-2+deb9u5 (2017-09-19) x86_64 GNU/Linux
I installed Certbot with (certbot-auto, OS package manager, pip, etc):
First with certbot-auto as instructed on https://certbot.eff.org/lets-encrypt/debianstretch-apache
After that with sudo pip install certbot-dns-cloudflare as instructed on https://bjornjohansen.no/wildcard-certificate-letsencrypt-cloudflare
I ran this command and it produced this output:
root@teagaming:~# /usr/local/bin/certbot certonly --dns-cloudflare --dns-cloudflare-credentials /root/.secrets/cloudflare.ini -d mexogames.de,*.mexogames.de --preferred-challenges dns-01
An unexpected error occurred:
ContextualVersionConflict: (cryptography 1.7.1 (/usr/lib/python2.7/dist-packages), Requirement.parse('cryptography>=2.2.1'), set(['PyOpenSSL', 'pyOpenSSL']))
Please see the logfile '/tmp/tmp0Q7b0n' for more details.
Certbot's behavior differed from what I expected because:
I don't know why it is different, i just know that it is.
Here is a Certbot log showing the issue (if available):
root@teagaming:~# cat /tmp/tmpZPqVif
2019-01-06 16:44:23,441:DEBUG:certbot.log:Exiting abnormally:
Traceback (most recent call last):
File "/usr/local/bin/certbot", line 11, in
sys.exit(main())
File "/usr/local/lib/python2.7/dist-packages/certbot/main.py", line 1334, in main
plugins = plugins_disco.PluginsRegistry.find_all()
File "/usr/local/lib/python2.7/dist-packages/certbot/plugins/disco.py", line 206, in find_all
plugin_ep = PluginEntryPoint(entry_point)
File "/usr/local/lib/python2.7/dist-packages/certbot/plugins/disco.py", line 52, in init
self.plugin_cls = entry_point.load()
File "/usr/lib/python2.7/dist-packages/pkg_resources/init.py", line 2290, in load
self.require(*args, **kwargs)
File "/usr/lib/python2.7/dist-packages/pkg_resources/init.py", line 2307, in require
items = working_set.resolve(reqs, env, installer)
File "/usr/lib/python2.7/dist-packages/pkg_resources/init.py", line 854, in resolve
raise VersionConflict(dist, req).with_context(dependent_req)
ContextualVersionConflict: (cryptography 1.7.1 (/usr/lib/python2.7/dist-packages), Requirement.parse('cryptography>=2.2.1'), set(['PyOpenSSL', 'pyOpenSSL']))
2019-01-06 16:44:23,441:ERROR:certbot.log:An unexpected error occurred:
Here is the relevant nginx server block or Apache virtualhost for the domain I am configuring:
idk whats relevant?
2
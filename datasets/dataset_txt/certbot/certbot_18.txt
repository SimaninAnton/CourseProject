wsw70 commented on 9 Dec 2019 â€¢
edited
My operating system is (include version):
Ubuntu 18.04
I installed Certbot with (certbot-auto, OS package manager, pip, etc):
docker (image is certbot/dns-ovh)
I ran this command and it produced this output:
# /usr/bin/docker run \
--rm \
-v /etc/docker/container-data/certbot/etc/letsencrypt:/etc/letsencrypt \
-v /etc/docker/container-data/certbot/var/lib/letsencrypt:/var/lib/letsencrypt \
-v /etc/docker/container-data/certbot/var/log/letsencrypt:/var/log/letsencrypt \
-v /tmp:/hook \
certbot/dns-ovh \
certonly \
-n \
--server https://acme-v02.api.letsencrypt.org/directory \
--dns-ovh \
--dns-ovh-credentials /etc/letsencrypt/ovh.ini \
-d *.something.something \
--email someone@somewhere \
--agree-tos \
--renew-hook "/usr/local/bin/docker-compose -f /etc/docker/docker-compose.d/10-caddy.yaml restart"

Unable to find renew-hook command /usr/local/bin/docker-compose in the PATH.
(PATH is /usr/local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin)
Certbot's behavior differed from what I expected because:
The renew hook script is in the PATH:
 # ll /usr/local/bin/docker-compose
-rwxr-xr-x 1 root root 16M May  3  2019 /usr/local/bin/docker-compose
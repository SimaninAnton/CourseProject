darius1706 commented on 6 Sep 2017
My operating system is (include version):
FreeBSD 11.1-RELEASE-p1
I installed Certbot with (certbot-auto, OS package manager, pip, etc):
FreeBSD pkg system
I ran this command and it produced this output:
certbot renew --dry-run
Certbot's behavior differed from what I expected because:
Because I got message for domain names with -
Attempting to renew cert from /usr/local/etc/letsencrypt/renewal/example-domain.cz.conf produced an unexpected error: 'ascii' codec can't encode character u'\xe1' in position 271: ordinal not in range(128). Skipping.
Here is a Certbot log showing the issue (if available):
Logs are stored in /var/log/letsencrypt by default. Feel free to redact domains, e-mail and IP addresses as you see fit.
2017-09-06 07:28:40,000:WARNING:certbot.renewal:Attempting to renew cert from /usr/local/etc/letsencrypt/renewal/example-domain.cz.conf produced an unexpected error: 'ascii' codec can't encode character u'\xe1' in position 271: ordinal not in range(128). Skipping.
2017-09-06 07:28:40,054:DEBUG:certbot.renewal:Traceback was:
Traceback (most recent call last):
File "/usr/local/lib/python2.7/site-packages/certbot/renewal.py", line 419, in handle_renewal_request
main.renew_cert(lineage_config, plugins, renewal_candidate)
File "/usr/local/lib/python2.7/site-packages/certbot/main.py", line 641, in renew_cert
_get_and_save_cert(le_client, config, lineage=lineage)
File "/usr/local/lib/python2.7/site-packages/certbot/main.py", line 77, in _get_and_save_cert
renewal.renew_cert(config, domains, le_client, lineage)
File "/usr/local/lib/python2.7/site-packages/certbot/renewal.py", line 297, in renew_cert
new_certr, new_chain, new_key, _ = le_client.obtain_certificate(domains)
File "/usr/local/lib/python2.7/site-packages/certbot/client.py", line 317, in obtain_certificate
self.config.allow_subset_of_names)
File "/usr/local/lib/python2.7/site-packages/certbot/auth_handler.py", line 81, in get_authorizations
self._respond(resp, best_effort)
File "/usr/local/lib/python2.7/site-packages/certbot/auth_handler.py", line 138, in _respond
self._poll_challenges(chall_update, best_effort)
File "/usr/local/lib/python2.7/site-packages/certbot/auth_handler.py", line 201, in _poll_challenges
_report_failed_challs(all_failed_achalls)
File "/usr/local/lib/python2.7/site-packages/certbot/auth_handler.py", line 492, in _report_failed_challs
_generate_failed_chall_msg(achalls), reporter.MEDIUM_PRIORITY)
File "/usr/local/lib/python2.7/site-packages/certbot/auth_handler.py", line 508, in _generate_failed_chall_msg
if messages.is_acme_error(error):
File "/usr/local/lib/python2.7/site-packages/acme/messages.py", line 39, in is_acme_error
return (ERROR_PREFIX in str(err)) or (OLD_ERROR_PREFIX in str(err))
UnicodeEncodeError: 'ascii' codec can't encode character u'\xe1' in position 271: ordinal not in range(128)
2017-09-06 07:28:40,054:DEBUG:certbot.log:Exiting abnormally:
Traceback (most recent call last):
File "/usr/local/bin/certbot", line 11, in
load_entry_point('certbot==0.16.0', 'console_scripts', 'certbot')()
File "/usr/local/lib/python2.7/site-packages/certbot/main.py", line 743, in main
return config.func(config, plugins)
File "/usr/local/lib/python2.7/site-packages/certbot/main.py", line 693, in renew
renewal.handle_renewal_request(config)
File "/usr/local/lib/python2.7/site-packages/certbot/renewal.py", line 436, in handle_renewal_request
len(renew_failures), len(parse_failures)))
Error: 1 renew failure(s), 0 parse failure(s)
Than you very much.
D
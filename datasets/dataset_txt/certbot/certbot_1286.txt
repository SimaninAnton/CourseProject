jpptinsley commented on 5 Apr 2017
My operating system is (include version):
Debian Wheezy
I installed Certbot with (certbot-auto, OS package manager, pip, etc):
certbot-auto
I ran this command and it produced this output:
/usr/local/bin/certbot-auto && /usr/local/bin/certbot-auto renew
Saving debug log to /var/log/letsencrypt/letsencrypt.log
No names were found in your configuration files. Please enter in your domain
name(s) (comma and/or space separated) (Enter 'c' to cancel):
Certbot's behavior differed from what I expected because:
Testing renewal cronjob failing, certbot asking for domain names involved rather than just attempting to renew. It should be refusing to renew since certificate (example.net) is too new.
Here is a Certbot log showing the issue (if available):
Renewal config file;
/etc/letsencrypt/renewal/example.net.conf
# renew_before_expiry = 30 days
version = 0.12.0
archive_dir = /etc/letsencrypt/archive/example.net
cert = /etc/letsencrypt/live/example.net/cert.pem
privkey = /etc/letsencrypt/live/example.net/privkey.pem
chain = /etc/letsencrypt/live/example.net/chain.pem
fullchain = /etc/letsencrypt/live/example.net/fullchain.pem

# Options used in the renewal process
[renewalparams]
authenticator = webroot
installer = None
account = e7a12d29de947e11a71d3a748c870a43
webroot_path = /var/www,
[[webroot_map]]
example.net = /var/www
www.example.net = /var/www
Debug log
2017-04-05 15:40:16,771:DEBUG:certbot.main:Root logging level set at 20
2017-04-05 15:40:16,771:INFO:certbot.main:Saving debug log to /var/log/letsencrypt/letsencrypt.log
2017-04-05 15:40:16,771:DEBUG:certbot.main:certbot version: 0.12.0
2017-04-05 15:40:16,771:DEBUG:certbot.main:Arguments: []
2017-04-05 15:40:16,771:DEBUG:certbot.main:Discovered plugins: PluginsRegistry(PluginEntryPoint#nginx,PluginEntryPoint#standalone,PluginEntryPoint#manual,PluginEntryPoint#webroot,PluginEntryPoint#apache,PluginEntryPoint#null)
2017-04-05 15:40:16,772:DEBUG:certbot.plugins.selection:Requested authenticator None and installer None
2017-04-05 15:40:17,340:DEBUG:certbot.plugins.selection:Single candidate plugin: * apache
Description: Apache Web Server plugin - Beta
Interfaces: IAuthenticator, IInstaller, IPlugin
Entry point: apache = certbot_apache.configurator:ApacheConfigurator
Initialized: <certbot_apache.configurator.ApacheConfigurator object at 0x2e36950>
Prep: True
2017-04-05 15:40:17,342:DEBUG:certbot.plugins.selection:Selected authenticator <certbot_apache.configurator.ApacheConfigurator object at 0x2e36950> and installer <certbot_apache.configurator.ApacheConfigurator object at 0x2e36950>
2017-04-05 15:40:17,348:DEBUG:certbot.main:Picked account: <Account(e7a12d29de947e11a71d3a748c870a43)>
2017-04-05 15:40:17,349:DEBUG:acme.client:Sending GET request to https://acme-v01.api.letsencrypt.org/directory.
2017-04-05 15:40:17,356:DEBUG:requests.packages.urllib3.connectionpool:Starting new HTTPS connection (1): acme-v01.api.letsencrypt.org
2017-04-05 15:40:19,052:DEBUG:requests.packages.urllib3.connectionpool:https://acme-v01.api.letsencrypt.org:443 "GET /directory HTTP/1.1" 200 352
2017-04-05 15:40:19,054:DEBUG:acme.client:Received response:
HTTP 200
Server: nginx
Content-Type: application/json
Content-Length: 352
Boulder-Request-Id: cisQvBZM4OWgmftjwCHn_1CuaMWopVKKZp9nwo1x_SY
Replay-Nonce: SI5yhmkuD31HPtWAfVM6sFLIUl5p2YWvNiETpn31OUU
X-Frame-Options: DENY
Strict-Transport-Security: max-age=604800
Expires: Wed, 05 Apr 2017 15:40:19 GMT
Cache-Control: max-age=0, no-cache, no-store
Pragma: no-cache
Date: Wed, 05 Apr 2017 15:40:19 GMT
Connection: keep-alive

{
  "key-change": "https://acme-v01.api.letsencrypt.org/acme/key-change",
  "new-authz": "https://acme-v01.api.letsencrypt.org/acme/new-authz",
  "new-cert": "https://acme-v01.api.letsencrypt.org/acme/new-cert",
  "new-reg": "https://acme-v01.api.letsencrypt.org/acme/new-reg",
  "revoke-cert": "https://acme-v01.api.letsencrypt.org/acme/revoke-cert"
}
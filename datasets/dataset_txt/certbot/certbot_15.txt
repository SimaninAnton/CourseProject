Danc2050 commented on 22 Dec 2019
My operating system is (include version):
Ubuntu 18.04
I installed Certbot with (certbot-auto, OS package manager, pip, etc):
Pip
I ran this command and it produced this output:
Command: sudo certbot certonly --dns-google --dns-google-credentials ~/haveibeenexploited-d09329c31e8c.json -d haveibeenexploited.com -d www.haveibeenexploited.com
Output:
Performing the following challenges:
dns-01 challenge for haveibeenexploited.com
dns-01 challenge for www.haveibeenexploited.com
URL being requested: GET https://www.googleapis.com/discovery/v1/apis/dns/v1/rest
URL being requested: GET https://dns.googleapis.com/dns/v1/projects/haveibeenexploited/managedZones?dnsName=haveibeenexploited.com.&alt=json
Attempting refresh to obtain initial access_token
Refreshing access_token
URL being requested: GET https://dns.googleapis.com/dns/v1/projects/haveibeenexploited/managedZones?dnsName=com.&alt=json
Cleaning up challenges
URL being requested: GET https://www.googleapis.com/discovery/v1/apis/dns/v1/rest
URL being requested: GET https://dns.googleapis.com/dns/v1/projects/haveibeenexploited/managedZones?dnsName=haveibeenexploited.com.&alt=json
Attempting refresh to obtain initial access_token
Refreshing access_token
URL being requested: GET https://dns.googleapis.com/dns/v1/projects/haveibeenexploited/managedZones?dnsName=com.&alt=json
Error finding zone. Skipping cleanup.
URL being requested: GET https://www.googleapis.com/discovery/v1/apis/dns/v1/rest
URL being requested: GET https://dns.googleapis.com/dns/v1/projects/haveibeenexploited/managedZones?dnsName=www.haveibeenexploited.com.&alt=json
Attempting refresh to obtain initial access_token
Refreshing access_token
URL being requested: GET https://dns.googleapis.com/dns/v1/projects/haveibeenexploited/managedZones?dnsName=haveibeenexploited.com.&alt=json
URL being requested: GET https://dns.googleapis.com/dns/v1/projects/haveibeenexploited/managedZones?dnsName=com.&alt=json
Error finding zone. Skipping cleanup.
Unable to determine managed zone for haveibeenexploited.com using zone names: ['haveibeenexploited.com', 'com'].
Certbot's behavior differed from what I expected because:
Certbot should have no problem creating (or renewing) and should know the "zone" as this command has worked in the past.
Here is a Certbot log showing the issue (if available):
letsencrypt.log
berenddeschouwer commented on 10 Apr 2019
My operating system is (include version):
Fedora 29
I installed Certbot with (certbot-auto, OS package manager, pip, etc):
OS package manager
Additionally: httpd-2.4.39
I ran this command and it produced this output:
certbot renew --apache
apachectl: The "-v" option is not supported.
Certbot's behavior differed from what I expected because:
certbot gets invalid output from apachectl
Here is a Certbot log showing the issue (if available):
/usr/sbin/apachectl doesn't support -v, nor -t -D DUMP_RUN_CFG, DUMP_INCLUDES, DUMP_MODULES
Hacking apachectl (or a different one in the path) to specifically allow these options makes it work.
Running httpd -v or -t -D DUMP_RUN_CFG does work, apachectl doesn't.
Here is the relevant nginx server block or Apache virtualhost for the domain I am configuring:
not relevant, change to /usr/sbin/apachectl, probably in 2.4.39. httpd (and config) is fine, apachectl is not.
not sure if I should file a bug here, or with Fedora
Issue #5439 seems very similar, but appears to be for restart of apache only. This issue occurs before the certificate -- certbot is still verifying if apache is installed.
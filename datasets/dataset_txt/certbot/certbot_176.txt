Member
bmw commented on 2 May 2019
In #6921, we made a change to properly update local-oldest-requirements.txt for point release branches, but it broke the tests. See https://travis-ci.com/certbot/certbot/jobs/197027330.
Until now, we've never had the case in the "oldest" tests where the pinned version like certbot==0.34.0 matches the local files. Before either an older, non-local version was pinned or it was something like -e acme which instructs pip to install the local package into the virtual environment.
When we go to install the package in the oldest tests in the 0.34.x branch, we ask for certbot==0.34.0, which is found to be already available in the current working directory so pip does nothing.
Then when we change directories to run tests to prevent local files from impacting tests (which has been a problem in the past), the local package that was found before is no longer there, can't be imported, and the tests fail.
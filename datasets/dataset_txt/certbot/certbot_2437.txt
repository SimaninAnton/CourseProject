pmorch commented on 9 Feb 2016
I just had a machine trashed.
Running ./letsencrypt-auto --help ran apt-get install -y ... automatically, which, among other things updated libc, trashing the entire machine to a point where re-installation was the easiest path. Sure the cause was a misconfiguration of /etc/apt/sources performed by us months ago, but still, ./letsencrypt-auto --help shouldn't trash the machine because of that.
I suggest removing the -y switch so that the user is prompted for confirmation before apt-get does its thing, and/or a letsencrypt-auto --yes-to-apt switch or something. If one were to argue that the '-auto' in letsencrypt-auto implies automatic behaviour, then please provide a letsencrypt-non-auto or something and use that as the default in the documentation.
Please don't perform an operation that can trash my entire machine by running ./letsencrypt-auto --help. Nobody expects that.
Or at the very least check that this doesn't install any packages you didn't anticipate. Perhaps running apt-get install -s $packages and testing the output. If only packages from an expected white-list show up, then run apt-get install -y $packages otherwise omit the -y and do apt-get install $packages, so the user is prompted for confirmation.
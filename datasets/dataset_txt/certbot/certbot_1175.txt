elliotec commented on 14 May 2017
Hello friends and thanks for creating this great software. I've been having trouble all day since my cert expired and I tried to renew. Here is the requested information.
My operating system is (include version):
Ubuntu 16.04
I installed Certbot with (certbot-auto, OS package manager, pip, etc):
apt-get
I ran this command and it produced this output:
sudo certbot certonly --webroot --webroot-path=/srv/www/elliotec.com/ -d elliotec.com -d www.elliotec.com
Saving debug log to /var/log/letsencrypt/letsencrypt.log
Starting new HTTPS connection (1): acme-staging.api.letsencrypt.org
Obtaining a new certificate
Performing the following challenges:
http-01 challenge for elliotec.com
http-01 challenge for www.elliotec.com
Using the webroot path /srv/www/elliotec.com for all unmatched domains.
Waiting for verification...
Cleaning up challenges
Failed authorization procedure. www.elliotec.com (http-01): urn:acme:error:connection :: The server could not connect to the client to verify the domain :: Could not connect to www.elliotec.com, elliotec.com (http-01): urn:acme:error:connection :: The server could not connect to the client to verify the domain :: Could not connect to elliotec.com

IMPORTANT NOTES:
 - The following errors were reported by the server:

   Domain: www.elliotec.com
   Type:   connection
   Detail: Could not connect to www.elliotec.com

   Domain: elliotec.com
   Type:   connection
   Detail: Could not connect to elliotec.com

   To fix these errors, please make sure that your domain name was
   entered correctly and the DNS A record(s) for that domain
   contain(s) the right IP address. Additionally, please check that
   your computer has a publicly routable IP address and that no
   firewalls are preventing the server from communicating with the
   client. If you're using the webroot plugin, you should also verify
   that you are serving files from the webroot path you provided.
Certbot's behavior differed from what I expected because:
I wanted to either renew an expired cert or give me a new one. elliotec.com is accessible through browser or curl, so the error doesn't make sense. My firewall is allowing all ports.
Here is a Certbot log showing the issue (if available):
Please see Gist for the log: https://gist.github.com/elliotec/255919069fdfd3e13a6320a8add6fc7c
Logs are stored in /var/log/letsencrypt by default. Feel free to redact domains, e-mail and IP addresses as you see fit.
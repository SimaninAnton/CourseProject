pkarjala commented on 27 Jan 2017 â€¢
edited
Ubuntu 16.04
letsencrypt 0.4.1, installed as per instructions at https://certbot.eff.org/#ubuntuxenial-apache
This is likely related to #3663.
When setting up the auto-renew cron job as per instructions at https://certbot.eff.org/docs/using.html#renewing-certificates, I used the example code for auto-renewing certs, tweaked for our installation:
letsencrypt renew --agree-tos --email someone@example.com --post-hook "service apache2 restart"
However, when this runs, I get an error in the logs:
  letsencrypt [SUBCOMMAND] [options] [-d domain] [-d domain] ...

The Let's Encrypt agent can obtain and install HTTPS/TLS/SSL certificates.  By
default, it will attempt to use a webserver both for obtaining and installing
the cert. Major SUBCOMMANDS are:

  (default) run        Obtain & install a cert in your current webserver
  certonly             Obtain cert, but do not install it (aka "auth")
  install              Install a previously obtained cert in a server
  renew                Renew previously obtained certs that are near expiry
  revoke               Revoke a previously obtained certificate
  rollback             Rollback server configuration changes made during install
  config_changes       Show changes made to server config during installation
  plugins              Display information about installed plugins
letsencrypt: error: unrecognized arguments: --post-hook service apache2 restart
It would be good to update the install instructions so that a user doesn't download the letsencrypt package from the Ubuntu repo, as it does not support all of the listed command flags, which becomes frustrating down the road. IMHO it should not be the recommended install solution, or a note should be made that it is not kept up-to-date with the upstream package, and alternate install instructions should be included for those that want the latest version.
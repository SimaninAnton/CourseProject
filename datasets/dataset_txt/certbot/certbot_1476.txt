trlthiago commented on 18 Jan 2017 â€¢
edited
Hi, I work for a host provider and I'm trying to use certbot.
I am using the following command:
certbot certonly --webroot -w /home/{domain}/public -n -q -m {email} -d {domain} --agree-tos --cert-path /etc/letsencrypt/archive/{domain} --key-path /etc/letsencrypt/archive/{domain} --chain-path /etc/letsencrypt/archive/{domain} --fullchain-path /etc/letsencrypt/archive/{domain}
My problem is that I haven't control over my customers' htaccess content, and many of them have some rules that block access to folders and files starting with dot (e.g .well-known). This is making fail the domain validation.
Some example of rules:
<IfModule mod_rewrite.c>
    RewriteRule "(^|/)\." - [F]
</IfModule>
RewriteRule . /index.php [L]
RewriteRule ^(.*)$ index.php/$1 [L]
Even if I remove the htaccess file before call certbot, they can redeploy their websites putting the htaccess back, and making the renewall process fail in the future.
During renewal process I am missing a hook before validation of each domain, not only after as renew-hook does, so I'll be able to deal with htaccess individually.
Is it possible to be implemented?
Contributor
jsha commented on 2 Jan 2016
(Slightly related to #2059)
One technique for managing Nginx vhosts is to have two config files per server name, one for HTTP and one for HTTPS. Both files would contain the same server_name, and the Nginx configurator would pick one arbitrarily to install the certificate in.
Instead, configurator.py's _get_ranked_matches should use the SSL status of a vhost as part of its ranking, and preferentially install certificates in a vhost which already has SSL enabled.
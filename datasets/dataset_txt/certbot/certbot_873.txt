adrianmihalko commented on 8 Dec 2017 â€¢
edited
I have obtained letsencrypt certificate using DNS-01 (because my server is not availalbe at :80, :443) , but now I am unable to renew it:
My operating system is (include version):
Ubuntu 17.04
I installed Certbot with (certbot-auto, OS package manager, pip, etc):
OS package manager
I ran this command and it produced this output:
sudo certbot renew
Certbot's behavior differed from what I expected because:
Here is a Certbot log showing the issue (if available):
Logs are stored in /var/log/letsencrypt by default. Feel free to redact domains, e-mail and IP addresses as you see fit.
$ sudo certbot renew
/usr/lib/python2.7/dist-packages/requests/__init__.py:80: RequestsDependencyWarning: urllib3 (1.21.1) or chardet (2.3.0) doesn't match a supported version!
  RequestsDependencyWarning)
Saving debug log to /var/log/letsencrypt/letsencrypt.log

-------------------------------------------------------------------------------
Processing /etc/letsencrypt/renewal/x.y.com.conf
-------------------------------------------------------------------------------
Cert is due for renewal, auto-renewing...
Could not choose appropriate plugin: The manual plugin is not working; there may be problems with your existing configuration.
The error was: PluginError('An authentication script must be provided with --manual-auth-hook when using the manual plugin non-interactively.',)
Attempting to renew cert (x.y.com) from /etc/letsencrypt/renewal/x.y.com.conf produced an unexpected error: The manual plugin is not working; there may be problems with your existing configuration.
The error was: PluginError('An authentication script must be provided with --manual-auth-hook when using the manual plugin non-interactively.',). Skipping.
All renewal attempts failed. The following certs could not be renewed:
  /etc/letsencrypt/live/x.y.com/fullchain.pem (failure)

-------------------------------------------------------------------------------

All renewal attempts failed. The following certs could not be renewed:
  /etc/letsencrypt/live/x.y.com/fullchain.pem (failure)
-------------------------------------------------------------------------------
1 renew failure(s), 0 parse failure(s)
My /etc/letsencrypt/renewal/x.y.com.conf:
# renew_before_expiry = 30 days
version = 0.17.0
archive_dir =
cert = 
privkey =
chain =
fullchain = 

# Options used in the renewal process
[renewalparams]
authenticator = manual
installer = None
account = 
pref_challs = dns-01,
manual_public_ip_logging_ok = True
How can I renew my current certificate?
1
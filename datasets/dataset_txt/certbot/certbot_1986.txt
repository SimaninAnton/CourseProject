Member
bmw commented on 28 Jun 2016
For those not familiar, certbot/error_handler.py can be used to execute cleanup code in case an exception or signal is encountered. Currently, however, the error handler can still be interrupted. For example, suppose the user hits ctrl+c to interrupt Certbot. If the user hits ctrl+c again while the error handler is running, it is interrupted and exits without performing all of the necessary cleanup code.
We could potentially ignore such signals during error handling. If we want to do this, I think the best way is before running any cleanup functions, the ErrorHandler uses signal to ignore signals such as SIGINT. After running the cleanup code, the original signal handlers should be restored.
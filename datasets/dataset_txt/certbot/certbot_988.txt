phantomedc commented on 29 Aug 2017 â€¢
edited
My operating system is (include version):CENTOS 6
I installed Certbot with (certbot-auto, OS package manager, pip, etc):certbot-auto
I ran this command and it produced this output: certbot-auto --nginx
The following errors were reported by the server:
   Domain: wechat.cfpu.com
   Type:   unauthorized
   Detail: Incorrect validation certificate for tls-sni-01 challenge.
   Requested
   1979d3b313013726063083acd526f7b2.148a574b2da0b859dd61beb07854d2b2.acme.invalid
   from *.*.*.*(hidden):443. Received 2 certificate(s), first certificate
   had names "test.cfpu.com"
Thanks for providing such a nice tool,it makes me can use SSL easily.
I got a problem here:
I applied a cert for my test server(i only have one physical server), its domain is "test.cfpu.com",and it worked well,after that,i wanted to change the server's domain to "wechat.cfpu.com", this is the formal domain, so i change the domain resolution to "wechat.cfpu.com" and i executed the command "certbot revoke --cert-path /etc/letsencrypt/live/mycert/cert.pem" and "certbot delete ......" after all this,it still told me the message above.so what can i do now to solve this problem?
Certbot's behavior differed from what I expected because:
Here is a Certbot log showing the issue (if available):
Logs are stored in /var/log/letsencrypt by default. Feel free to redact domains, e-mail and IP addresses as you see fit.
Here is the relevant nginx server block or Apache virtualhost for the domain I am configuring:
JohnDenker commented on 5 Nov 2015
Context and Background
I am running a server with multiple virtual hosts, some on port 80 and some on port 443.
I did ./letsencrypt-auto certonly
Observed Behavior:
On the terminal screen:
 - Congratulations! Your certificate and chain have been saved at
   /etc/letsencrypt/live/xxx.av8n.com/fullchain.pem.
In my server configuration directory, a new file:
:; cat default-b-le-ssl.conf
<IfModule mod_ssl.c>
<VirtualHost *:443>
        ServerName xxx.av8n.com
        DocumentRoot /var/www/xxx
        Include             /etc/apache2/sites-available/generic.conf
SSLCertificateFile insert_cert_file_path
SSLCertificateKeyFile insert_key_file_path
Include /etc/letsencrypt/options-ssl-apache.conf
</VirtualHost>
</IfModule>
This example file was evidently modeled on my pre-existing file default-b.conf which is the configuration for the virtual host on port 80.
Desired and/or Expected Behavior
It would be incomparably better for the newly-created example file to be modeled on the existing virtual host on port 443 (rather than 80).
Additional Suggestions
Having the ./letsencrypt-auto certonly command scribble in my configuration directory was not expected ... but it is arguably desirable. Some changes are needed to make iit desirable, to make it useful.
The contents of the file need to be improved: rather than saying insert_cert_file_path it should incorporate the actual path to the actual file. The script certainly knows the correct path.
Ditto for insert_key_file_path
An even more important improvement: To obtain the desired server behavior, the chain.pem file is required. The example file should contain all three, not just the first two:
        SSLCertificateFile      /etc/letsencrypt/live/xxx.av8n.com/cert.pem
        SSLCertificateKeyFile   /etc/letsencrypt/live/xxx.av8n.com/privkey.pem
        SSLCertificateChainFile /etc/letsencrypt/live/xxx.av8n.com/chain.pem
There are ways of consolidating this to two directives, but leaving it unconsolidated works fine.
By the same token, the "congratulations" message on the controlling terminal should mention all the relevant .pem files, not just fullchain.pem.
The "congratulations" message should mention that the example file has been created and can be taken as a suggestion for how to configure the server. This is required by basic UI design principles. It is utterly pointless to create this file if the user doesn't know it exists.
The documentation for ./letsencrypt-auto certonly should tell the user to expect this file to be created. Again, this is a basic UI design issue.
Details
:; git show HEAD
commit de182946b5cf09a3486f38d3df0c43e2280b3654

:; ./letsencrypt-auto --version
Updating letsencrypt and virtual environment dependencies......
Running with virtualenv: /root/.local/share/letsencrypt/bin/letsencrypt --version
letsencrypt 0.0.0.dev20151104

:; uname -a
Linux cloud 3.11.4+ #11 Fri Oct 11 05:39:29 PDT 2013 x86_64 x86_64 x86_64 GNU/Linux

:; lsb_release -a
No LSB modules are available.
Distributor ID: Ubuntu
Description:    Ubuntu 14.04.3 LTS
Release:        14.04
Codename:       trusty
greg1988 commented on 25 Mar 2017
My operating system is (include version):
Ubuntu 14.04.5 LTS
I installed Certbot with (certbot-auto, OS package manager, pip, etc):
certbot-auto
I ran this command and it produced this output:
Command:
/etc/scripts/certbot-auto certonly -a webroot --webroot-path=/etc/letsencrypt/live/ --keep-until-expiring --no-self-upgrade --agree-tos --force-renewal --non-interactive -d "--leadingdashes.com" 2>&1
Response:
"certbot: error: argument -d/--domains/--domain: expected one argument"
Also
Command:
/etc/scripts/certbot-auto certonly -a webroot --webroot-path=/etc/letsencrypt/live/ --keep-until-expiring --no-self-upgrade --agree-tos --force-renewal --non-interactive -d "dash-.nexttoperiod.com" 2>&1
Response:
"The request message was malformed :: Invalid character in DNS name"
Certbot's behavior differed from what I expected because:
I do not control these domains but I would expect the test to execute and fail after my system is able to prove control over the domains (I have also tried with domains I control and got the same errors)
The pattern that I am seeing is that if the url contains leading dashes it seems to be interpreted as a command flag
OR
If the url contains dashes that are next to a period, the command fails saying there was an invalid character.
Here is a Certbot log showing the issue (if available):
Logs are stored in /var/log/letsencrypt by default. Feel free to redact domains, e-mail and IP addresses as you see fit.
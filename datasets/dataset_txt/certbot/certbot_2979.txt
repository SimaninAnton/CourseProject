jvoisin commented on 12 Nov 2015
jvoisin@frollo 13:08 /opt/letsencrypt ./letsencrypt-auto
Bootstrapping dependencies for Debian-based OSes...
[sudo] password for jvoisin: 
Hit http://mirrors.moulecorp.org greezly InRelease
Ign http://ftp2.fr.debian.org jessie InRelease                                                                                                                           
Hit http://ftp2.fr.debian.org jessie-updates InRelease                                                                                                                   
Hit http://ftp2.fr.debian.org testing InRelease                                                                                                                          
Hit http://security.debian.org jessie/updates InRelease                                                                                                                  
Hit http://ftp.debian.org jessie-backports InRelease                                                                                                                     
Hit http://deb.torproject.org jessie InRelease                                                                                                                           
Hit http://deb.knot-dns.cz jessie InRelease                                                                                                                              
Hit http://ftp2.fr.debian.org jessie Release.gpg                                                                                                                         
Hit http://ftp2.fr.debian.org jessie Release      
Hit http://mirrors.moulecorp.org greezly/main Sources
Hit http://mirrors.moulecorp.org greezly/main amd64 Packages
Get:1 http://ftp2.fr.debian.org jessie-updates/main amd64 Packages/DiffIndex [367 B]
Hit http://ftp2.fr.debian.org jessie-updates/contrib amd64 Packages
Hit http://ftp2.fr.debian.org jessie-updates/non-free amd64 Packages    
Hit http://ftp2.fr.debian.org jessie-updates/contrib Translation-en     
Hit http://ftp2.fr.debian.org jessie-updates/main Translation-en        
Hit http://ftp2.fr.debian.org jessie-updates/non-free Translation-en    
Ign http://mirrors.moulecorp.org greezly/main Translation-en_US
Ign http://mirrors.moulecorp.org greezly/main Translation-en
Ign http://mirrors.moulecorp.org greezly/main Translation-fr
Get:2 http://ftp2.fr.debian.org testing/main amd64 Packages/DiffIndex [7,876 B]
Get:3 http://ftp2.fr.debian.org testing/non-free amd64 Packages/DiffIndex [4,231 B]
Get:4 http://ftp2.fr.debian.org testing/contrib amd64 Packages/DiffIndex [4,783 B] 
Get:5 http://ftp2.fr.debian.org testing/contrib Translation-en/DiffIndex [2,437 B]
Get:6 http://ftp2.fr.debian.org testing/main Translation-en/DiffIndex [7,876 B]
Get:7 http://ftp2.fr.debian.org testing/main Translation-fr/DiffIndex [6,439 B]
Hit http://security.debian.org jessie/updates/main amd64 Packages       
Get:8 http://ftp2.fr.debian.org testing/non-free Translation-en/DiffIndex [2,713 B]
Hit http://security.debian.org jessie/updates/contrib amd64 Packages                       
Get:9 http://ftp.debian.org jessie-backports/main amd64 Packages/DiffIndex [6,991 B]    
Hit http://security.debian.org jessie/updates/non-free amd64 Packages                   
Hit http://security.debian.org jessie/updates/contrib Translation-en  
Hit http://security.debian.org jessie/updates/main Translation-en     
Hit http://security.debian.org jessie/updates/non-free Translation-en 
Get:10 http://ftp.debian.org jessie-backports/contrib amd64 Packages/DiffIndex [505 B]
Get:11 http://ftp.debian.org jessie-backports/non-free amd64 Packages/DiffIndex [781 B]
Get:12 http://ftp.debian.org jessie-backports/contrib Translation-en/DiffIndex [367 B]
Get:13 http://ftp.debian.org jessie-backports/main Translation-en/DiffIndex [2,575 B]
Get:14 http://ftp.debian.org jessie-backports/non-free Translation-en/DiffIndex [505 B]
Hit http://deb.torproject.org jessie/main amd64 Packages                   
Hit http://deb.knot-dns.cz jessie/main Sources                        
Hit http://deb.knot-dns.cz jessie/main amd64 Packages                 
Hit http://ftp2.fr.debian.org jessie/main amd64 Packages                                 
Hit http://ftp2.fr.debian.org jessie/non-free amd64 Packages                         
Hit http://ftp2.fr.debian.org jessie/contrib amd64 Packages                          
Hit http://ftp2.fr.debian.org jessie/contrib Translation-en                          
Hit http://ftp2.fr.debian.org jessie/main Translation-en                             
Hit http://ftp2.fr.debian.org jessie/main Translation-fr                             
Hit http://ftp2.fr.debian.org jessie/non-free Translation-en                         
Ign http://deb.torproject.org jessie/main Translation-en_US                          
Ign http://deb.torproject.org jessie/main Translation-en       
Ign http://deb.torproject.org jessie/main Translation-fr       
Ign http://deb.knot-dns.cz jessie/main Translation-en_US       
Ign http://deb.knot-dns.cz jessie/main Translation-en
Ign http://deb.knot-dns.cz jessie/main Translation-fr
Fetched 48.4 kB in 9s (5,127 B/s)                                                                                                                                        
Reading package lists... Done
Reading package lists... Done
Building dependency tree       
Reading state information... Done
libaugeas0 is already the newest version.
ca-certificates is already the newest version.
dialog is already the newest version.
gcc is already the newest version.
git is already the newest version.
libffi-dev is already the newest version.
libssl-dev is already the newest version.
python is already the newest version.
python-dev is already the newest version.
python-virtualenv is already the newest version.
virtualenv is already the newest version.
0 upgraded, 0 newly installed, 0 to remove and 3 not upgraded.
Creating virtual environment...
zsh: exit 100   ./letsencrypt-auto
Here is the syslog:
Nov 12 13:08:28 sd-42696 sudo:  jvoisin : TTY=pts/4 ; PWD=/opt/letsencrypt ; USER=root ; COMMAND=./bootstrap/_deb_common.sh
Nov 12 13:08:28 sd-42696 sudo: pam_unix(sudo:session): session opened for user root by (uid=0)
Nov 12 13:08:53 sd-42696 sudo: pam_unix(sudo:session): session closed for user root
Nov 12 13:08:54 sd-42696 kernel: grsec: From 86.198.53.101: denied untrusted exec (due to not being in trusted group and file in non-root-owned directory) of /home/jvoisin/.local/share/letsencrypt/bin/python2 by /home/jvoisin/.local/share/letsencrypt/bin/python2[python2:3413] uid/euid:1000/1000 gid/egid:1000/1000, parent /usr/bin/python2.7[python2:3412] uid/euid:1000/1000 gid/egid:1000/1000
Nov 12 13:08:54 sd-42696 kernel: grsec: From 86.198.53.101: denied untrusted exec (due to not being in trusted group and file in non-root-owned directory) of /home/jvoisin/.local/share/letsencrypt/bin/python2 by /home/jvoisin/.local/share/letsencrypt/bin/python2[python2:3413] uid/euid:1000/1000 gid/egid:1000/1000, parent /usr/bin/python2.7[python2:3412] uid/euid:1000/1000 gid/egid:1000/1000
and if (for fun) I'm trying to run the script as root, I got a nice NULL-dereference in pip:
Nov 12 13:10:38 sd-42696 kernel: pip[3477]: segfault at 0 ip 000071fdfb73c99b sp 0000755c316689d8 error 6 in libffi.so.6.0.2[71fdfb737000+7000]
Nov 12 13:10:38 sd-42696 kernel: pip[3477]: segfault at 0 ip 000071fdfb73c99b sp 0000755c316689d8 error 6 in libffi.so.6.0.2[71fdfb737000+7000]
Nov 12 13:10:38 sd-42696 kernel: grsec: From 86.198.53.101: Segmentation fault occurred at            (nil) in /root/.local/share/letsencrypt/bin/pip[pip:3477] uid/euid:0/0 gid/egid:0/0, parent /opt/letsencrypt/letsencrypt-auto[letsencrypt-aut:3469] uid/euid:0/0 gid/egid:0/0
Nov 12 13:10:38 sd-42696 kernel: grsec: From 86.198.53.101: Segmentation fault occurred at            (nil) in /root/.local/share/letsencrypt/bin/pip[pip:3477] uid/euid:0/0 gid/egid:0/0, parent /opt/letsencrypt/letsencrypt-auto[letsencrypt-aut:3469] uid/euid:0/0 gid/egid:0/0
Nov 12 13:10:38 sd-42696 kernel: grsec: From 86.198.53.101: denied resource overstep by requesting 4096 for RLIMIT_CORE against limit 0 for /root/.local/share/letsencrypt/bin/pip[pip:3477] uid/euid:0/0 gid/egid:0/0, parent /opt/letsencrypt/letsencrypt-auto[letsencrypt-aut:3469] uid/euid:0/0 gid/egid:0/0
Nov 12 13:10:38 sd-42696 kernel: grsec: From 86.198.53.101: denied resource overstep by requesting 4096 for RLIMIT_CORE against limit 0 for /root/.local/share/letsencrypt/bin/pip[pip:3477] uid/euid:0/0 gid/egid:0/0, parent /opt/letsencrypt/letsencrypt-auto[letsencrypt-aut:3469] uid/euid:0/0 gid/egid:0/0
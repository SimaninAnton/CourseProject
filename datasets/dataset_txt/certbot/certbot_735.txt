sunitknandi commented on 13 Feb 2018 â€¢
edited
After a software update via apt-get upgrade my certbot no longer works. My older version used to be 0.19 which worked perfectly, but the newer version 0.21.1 does not even start due to ValueError: 'new_authzr_uri' in __slots__ conflicts with class variable. Would you look into this and let me know how to fix it?
My operating system is (include version):
root@mail:~# lsb_release -a
No LSB modules are available.
Distributor ID: Ubuntu
Description:    Ubuntu 14.04.5 LTS
Release:        14.04
Codename:       trusty
I installed Certbot with (certbot-auto, OS package manager, pip, etc):
add-apt-repository ppa:certbot/certbot
apt-get update
apt-get install certbot
I ran this command and it produced this output:
root@mail:~# certbot
Traceback (most recent call last):
  File "/usr/bin/certbot", line 11, in <module>
    load_entry_point('certbot==0.21.1', 'console_scripts', 'certbot')()
  File "/usr/local/lib/python3.4/dist-packages/pkg_resources/__init__.py", line 570, in load_entry_point
    return get_distribution(dist).load_entry_point(group, name)
  File "/usr/local/lib/python3.4/dist-packages/pkg_resources/__init__.py", line 2755, in load_entry_point
    return ep.load()
  File "/usr/local/lib/python3.4/dist-packages/pkg_resources/__init__.py", line 2409, in load
    return self.resolve()
  File "/usr/local/lib/python3.4/dist-packages/pkg_resources/__init__.py", line 2415, in resolve
    module = __import__(self.module_name, fromlist=['__name__'], level=0)
  File "/usr/lib/python3/dist-packages/certbot/main.py", line 17, in <module>
    from certbot import account
  File "/usr/lib/python3/dist-packages/certbot/account.py", line 122, in <module>
    class RegistrationResourceWithNewAuthzrURI(messages.RegistrationResource):
  File "/usr/local/lib/python3.4/dist-packages/acme/jose/json_util.py", line 181, in __new__
    return abc.ABCMeta.__new__(mcs, name, bases, dikt)
  File "/usr/lib/python3.4/abc.py", line 133, in __new__
    cls = super().__new__(mcls, name, bases, namespace)
ValueError: 'new_authzr_uri' in __slots__ conflicts with class variable
Certbot's behavior differed from what I expected because:
Usually I get
root@mail:~# certbot
Saving debug log to /var/log/letsencrypt/letsencrypt.log
Certbot doesn't know how to automatically configure the web server on this system. However, it can still get a certificate for you. Please run "certbot certonly" to do so. You'll need to manually configure your web server to use the resulting certificate.
but now it does not even start
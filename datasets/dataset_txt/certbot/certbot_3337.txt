Contributor
BKreisel commented on 29 Sep 2015
Integrations failing on native OS X on what I believe to be the challenge response section.
Log Snapshot:
2015-09-28 20:24:32,825:WARNING:acme.challenges:Using non-standard port for SimpleHTTP verification: 5001
2015-09-28 20:24:32,825:DEBUG:acme.challenges:Verifying simpleHttp at https://le.wtf:5001/.well-known/acme-challenge/bNcpUsnOTIRG63kH0lZd6al6IgZeTaXXBfSn_xcOei4...
2015-09-28 20:24:32,828:INFO:requests.packages.urllib3.connectionpool:Starting new HTTPS connection (1): le.wtf
/Users/brandon/Projects/letsencrypt/venv/lib/python2.7/site-packages/requests/packages/urllib3/connectionpool.py:768: InsecureRequestWarning: Unverified HTTPS request is being made. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.org/en/latest/security.html
  InsecureRequestWarning)
127.0.0.1 - - [28/Sep/2015 20:24:33] "GET /.well-known/acme-challenge/bNcpUsnOTIRG63kH0lZd6al6IgZeTaXXBfSn_xcOei4 HTTP/1.1" 200 -
2015-09-28 20:24:33,069:DEBUG:requests.packages.urllib3.connectionpool:"GET /.well-known/acme-challenge/bNcpUsnOTIRG63kH0lZd6al6IgZeTaXXBfSn_xcOei4 HTTP/1.1" 200 915
2015-09-28 20:24:33,081:DEBUG:acme.challenges:Received <Response [200]>: -n {....<omitted>..}
2015-09-28 20:24:33,081:DEBUG:acme.challenges:Deserialization error: No JSON object could be decoded
2015-09-28 20:24:33,082:ERROR:letsencrypt.plugins.manual:Self-verify of challenge failed, authorization abandoned.
2015-09-28 20:24:33,082:INFO:letsencrypt.auth_handler:Waiting for verification...
2015-09-28 20:24:33,082:INFO:letsencrypt.auth_handler:Cleaning up challenges
2015-09-28 20:24:33,082:DEBUG:letsencrypt.plugins.manual:Terminating manual command process
2015-09-28 20:24:33,083:DEBUG:letsencrypt.cli:Exiting abnormally:
Stacktrace:
Traceback (most recent call last):
  File "/Users/brandon/Projects/letsencrypt/venv/bin/letsencrypt", line 9, in <module>
    load_entry_point('letsencrypt==0.1', 'console_scripts', 'letsencrypt')()
  File "/Users/brandon/Projects/letsencrypt/letsencrypt/cli.py", line 962, in main
    return args.func(args, config, plugins)
  File "/Users/brandon/Projects/letsencrypt/letsencrypt/cli.py", line 370, in auth
    _auth_from_domains(le_client, config, domains, plugins)
  File "/Users/brandon/Projects/letsencrypt/letsencrypt/cli.py", line 291, in _auth_from_domains
    lineage = le_client.obtain_and_enroll_certificate(domains, plugins)
  File "/Users/brandon/Projects/letsencrypt/letsencrypt/client.py", line 231, in obtain_and_enroll_certificate
    certr, chain, key, _ = self.obtain_certificate(domains)
  File "/Users/brandon/Projects/letsencrypt/letsencrypt/client.py", line 214, in obtain_certificate
    return self._obtain_certificate(domains, csr) + (key, csr)
  File "/Users/brandon/Projects/letsencrypt/letsencrypt/client.py", line 172, in _obtain_certificate
    authzr = self.auth_handler.get_authorizations(domains)
  File "/Users/brandon/Projects/letsencrypt/letsencrypt/auth_handler.py", line 87, in get_authorizations
    self.verify_authzr_complete()
  File "/Users/brandon/Projects/letsencrypt/letsencrypt/auth_handler.py", line 300, in verify_authzr_complete
    raise errors.AuthorizationError("Incomplete authorizations")
AuthorizationError: Incomplete authorizations
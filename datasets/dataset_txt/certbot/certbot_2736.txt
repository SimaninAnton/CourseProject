miki725 commented on 12 Dec 2015
As per docs fullchain.pem includes all certificates root, intermediate and domain certificate. It is also stated that this file can be used for nginx ssl_certificate. However as per nginx docs it only states that client and intermediate certs should be included:
Specifies a file with the certificate in the PEM format for the given virtual server. If intermediate certificates should be specified in addition to a primary certificate, they should be specified in the same file in the following order: the primary certificate comes first, then the intermediate certificates. A secret key in the PEM format may be placed in the same file.
That makes sense since root cert should already be present in the user trust-store. Also SSL Labs frowns upon doing that. Here is a quote from one of their support pages:
Certificate chains that are too long; Sites often include more certificates in the handshake than necessary. Of those, most include one extra certificate, and that is the actual trusted root certificate (which browsers already have in their storage). This last certificate is not needed for the validation process. Having an additional certificate in the chain wastes bandwidth and decreases overal performance slightly.
Sorry Im not familiar of the exact RFC which specifies all of this so cant point to definitive reference stating which certs should be sent to the user.
From my previous TLS configurations, I never included root cert and it seems to work as expected.
So my actual GH issue. Can lets encrypt generate a new file which will not include root cert for use with nginx.
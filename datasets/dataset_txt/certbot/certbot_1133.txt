Member
bmw commented on 2 Jun 2017 â€¢
edited
The purpose of this issue is to open a conversation about packaging Zach's DNS plugins in certbot-auto.
While not a perfect recreation, I tried to get an estimate of the increased download and installation size of adding the Python 2.6 compatible DNS plugins to certbot-auto. The way I did this isn't perfect, but the estimates should be pretty close. I wanted to keep this post somewhat brief, but I'm happy to provide how I got these estimates if people are curious. These numbers do not include the size of OS dependencies.
Download size
Base: 6932 KB
Cloudflare additional: 1120 KB (16.2% increase)
Digital Ocean additional: 28 KB (0.4% increase)
Google additional: 592 KB (8.5% increase)
Route53 additional: 4412 KB additional (63.6% increase)
Installation size
Base: 37256 KB
Cloudflare additional: 5508 KB (14.8% increase)
Digital Ocean additional: 368 KB (1.0% increase)
Google additional: 4228 KB (11.3% increase)
Route53 additional: 34376 KB (92.3% increase)
My thoughts
Boto3 (as required by route53) is absolutely massive. Given its size and the wide variety machines certbot-auto is run on, I'd prefer not to include it by default. With that said, I expect it'll be one of our most popular DNS plugins and people need a way to install it.
We had a long term design meeting for Certbot earlier this week and solving the problem of how to install additional plugins not included by default in our different installation methods was brought up. Unfortunately, us investing time to solve this was fairly contentious and an executive decision was made that we'd only solve this problem in the next year if we finished everything else on our plate.
With this in mind, I'm leaning towards just including everything. For the vast majority of certbot-auto users, the increased size doesn't matter so weighing the cost and benefits of doing this, I think it's worth it.
I'm curious what other people think though.
EDIT: By the way, at our last weekly meeting some people thought certbot-auto no longer deletes its virtual environment when it upgrades allowing users to work around the issues discussed in #4037. Unfortunately, this not the case.
1
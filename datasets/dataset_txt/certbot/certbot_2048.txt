ScottPedigo commented on 1 Jun 2016
I previously used ./letsencrypt-auto --apache and it detected my virtual domains. I had one cert for the primary virtual domain which contained aliases for the other virtual domains.
When I got an e-mail that the cert was expiring, I tried to renew using the same command. It was suggested to install and use certbot instead.
certbot-auto --apache only listed the primary virtual domain. I found a hint after searching for the issue that it would work if the virtual domains were in separate files. However, mine already were in separate files.
I tried specifying the domains in combination with the --apache parameter after seeing that in an example in the documentation:
certbot-auto --apache -d www.domain1.com -d www.domain2.com -d www.domain3.com
but that failed with an error. I still have the log file. The end of the log entry contained
MissingNonce: Server POST response did not include a replay nonce, headers: {'Content-Length': '1488', 'Expires': 'Wed, 01 Jun 2016 12:12:33 GMT', 'Server': 'nginx', 'Connection': 'close', 'ETag': '"55f255cc-5d0"', 'Pragma': 'no-cache', 'Cache-Control': 'max-age=0, no-cache, no-store', 'Date': 'Wed, 01 Jun 2016 12:12:33 GMT', 'Content-Type': 'text/html'}
I then tried without the --apache parameter and it worked:
certbot-auto -d www.domain1.com -d www.domain2.com -d www.domain3.com
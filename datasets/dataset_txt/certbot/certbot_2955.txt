flingtoad commented on 17 Nov 2015
One of the example the the closed beta invite email suggests using the following:
./letsencrypt-auto certonly -a standalone
-d example.com -d http://www.example.com
--server https://acme-v01.api.letsencrypt.org/directory --agree-dev-preview
This gives an error because it can't verify the domain. It can't verify the domain because the regexp used to verify the domain doesn't consider the 'http://' in 'http://www.example.com' to be valid. The regexp is in 'letsencrypt/configuration.py'
156     # FQDN checks from
157     # http://www.mkyong.com/regular-expressions/domain-name-regular-expression-example/
158     #  Characters used, domain parts < 63 chars, tld > 1 < 7 chars
159     #  first and last char is not "-"
160     fqdn = re.compile("^((?!-)[A-Za-z0-9-]{1,63}(?<!-)\\.)+[A-Za-z]{2,6}$")
161     if any(True for d in domains if not fqdn.match(d)):
162         raise errors.ConfigurationError("Requested domain is not a FQDN")
Either the regexp or the example should probably be amended.
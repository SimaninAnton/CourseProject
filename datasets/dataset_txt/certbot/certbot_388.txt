Contributor
jsha commented on 25 Sep 2018
If you use a packaged certbot, it comes with a crontab that includes a random sleep. However, a lot of people are configuring their own crontabs, either with certbot or certbot-auto. They usually run at midnight or the top of some other hour. These create very significant traffic spikes to Let's Encrypt.
I'd like Certbot to build in a random sleep interval when run with renew. Even an interval with a min of 1 minute and a max of 4 minutes would probably help a lot, though longer is better. I think there's no need to coordinate with the packaged sleep; if we have one external sleep and one internal sleep, that's fine.
@ohemorange points out that we need to make sure this runs before the hooks, so people with hooks that take down their web server don't have unnecessarily long outages.
Also, if we want to get fancy, we could insert the random sleep only when not being run from a terminal.
Member
pde commented on 8 Dec 2016
In response to this Debian bug I was going to suggest that the user run something like certbot certonly -a apache -i none. But the problem that triggers a bunch of vhost questions:
certonly -a apache -i none
Saving debug log to /var/log/letsencrypt/letsencrypt.log
Starting new HTTPS connection (1): acme-v01.api.letsencrypt.org
Please enter in your domain name(s) (comma and/or space separated)  (Enter 'c'
to cancel):thing.com
Obtaining a new certificate
Performing the following challenges:
tls-sni-01 challenge for thing.com

We were unable to find a vhost with a ServerName or Address of thing.com.
Which virtual host would you like to choose?
(note: conf files with multiple vhosts are not yet supported)
-------------------------------------------------------------------------------
1: 001-goxogle.com-le-ssl.conf    | goxogle.com           | HTTPS | Enabled
2: default-ssl.conf               |                       | HTTPS |
3: 001-demo.reworld.org-le-ssl.co | demo.reworld.org      | HTTPS | Enabled
4: 001-www.isnot.org.conf         | www.isnot.org         |       | Enabled
5: 000-default.conf               |                       |       |
6: 001-isnot.org-le-ssl.conf      | isnot.org             | HTTPS | Enabled
7: 001-is.isnot.org.conf          | Multiple Names        |       | Enabled
8: 001-goxogle.com.conf           | goxogle.com           |       | Enabled
9: 001-demo.reworld.org.conf      | demo.reworld.org      |       | Enabled
10: 001-isnot.org.conf             | isnot.org             |       | Enabled
11: 001-is.isnot.org-le-ssl.conf   | Multiple Names        | HTTPS | Enabled
12: 001-www.isnot.org-le-ssl.conf  | www.isnot.org         | HTTPS | Enabled
-------------------------------------------------------------------------------
Select the appropriate number [1-12] then [enter] (press 'c' to cancel): c
No vhost exists with servername or alias of: thing.com (or it's in a file with multiple vhosts, which Certbot can't parse yet). No vhost was selected. Please specify ServerName or ServerAlias in the Apache config, or split vhosts into separate files.
Falling back to default vhost *:443...
Waiting for verification...
If the user is running certonly, and there are literally no vhosts that look correct, shouldn't we just use the default one without asking? Or is that going to be wrong in some cases?
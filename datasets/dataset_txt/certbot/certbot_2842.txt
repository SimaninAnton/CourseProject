Contributor
mgedmin commented on 4 Dec 2015
I ran letsencrypt-auto for the first time, generated a cert, and then started looking around.
I see this:
$ grep LogFormat /etc/letsencrypt/options-ssl-apache.conf 
LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-agent}i\"" vhost_combined
LogFormat "%v %h %l %u %t \"%r\" %>s %b" vhost_common
Compare that the default /etc/apache2/apache2.conf from Ubuntu's apache 2.4 package:
$ grep LogFormat /etc/apache2/apache2.conf 
LogFormat "%v:%p %h %l %u %t \"%r\" %>s %O \"%{Referer}i\" \"%{User-Agent}i\"" vhost_combined
LogFormat "%h %l %u %t \"%r\" %>s %O \"%{Referer}i\" \"%{User-Agent}i\"" combined
LogFormat "%h %l %u %t \"%r\" %>s %O" common
LogFormat "%{Referer}i -> %U" referer
LogFormat "%{User-agent}i" agent
Note that the "vhost_combined" log format you're defining in /etc/letsencrypt/options-ssl-apache.conf is identical to the "combined" log format and does not have the vhost:port information.
This seems wrong.
(Luckily, grep tells me options-ssl-apache.conf is not actually included anywhere from my Apache config files.)
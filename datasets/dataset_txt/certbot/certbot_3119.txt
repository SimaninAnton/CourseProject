Contributor
kuba commented on 1 Nov 2015
How about implementing http-01 for Apache? After writing #1268 I realized that the authenticator would not even have to touch users config - just drop a file in /etc/apache2/conf-enabled/ with the following contents:
<IfModule mod_headers.c>
    <LocationMatch "/.well-known/acme-challenge/*">
        Header set Content-Type "application/jose+json"
        DocumentRoot /var/lib/letsencrypt/apache-http01-root
    </LocationMatch>
</IfModule>
reload the daemon, drop necessary resources in /var/lib/letsencrypt/apache-http01-root, and voila!
The biggest advantage is that we might even get away without read access (parsing) of the existing configs, not even mentioning write access :) That means less scope for errors (a lot of users don't even get to the authorization stage, because of MisconfigurationErrors raised in the parsing step).
Possible problems:
users don't have /etc/apache/conf-enabled by default
DocumentRoot seems to be allowed there (https://httpd.apache.org/docs/2.2/mod/core.html#documentroot), but if it's not, then we can drop the stanza and try to read the config file and find existing public_html
@jdkasten?
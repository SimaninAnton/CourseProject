Nullcaller commented on 30 Apr 2018 â€¢
edited
My operating system is (include version):
Ubuntu 18.04 LTS
I installed Certbot with (certbot-auto, OS package manager, pip, etc):
apt & certbot-dns-rfc2136 with pip
The Issue and the Solution
I've tried to issue a wildcard certificate with certbot-dns-rfc2136 and bind, but it didn't work because of SERVFAIL error the server was returning. All the settings were pretty much identical to what you can read in certbot-dns-rfc2136's documentation, so I just skip right past them. The solution was to set the permissions for /etc/bind to 774, since bind could not create a journal file in that directory and set access mode to rwix for /etc/bind/** in /etc/apparmor.d/usr.sbin.named, since apparmor was blocking it too.
The Reason Why
I don't really know how to edit the documentation and I don't have any ideas about it, so if anyone could add this to the documentation, just as a kind of a warning, or "if you have this issue, just maybe, maybe, this could help", that would have been wonderful.
1
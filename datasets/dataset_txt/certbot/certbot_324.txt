ogerasymenko commented on 28 Nov 2018
If you're having trouble using Certbot and aren't sure you've found a bug or
request for a new feature, please first try asking for help at
https://community.letsencrypt.org/. There is a much larger community there of
people familiar with the project who will be able to more quickly answer your
questions.
My operating system is (include version):
Amazon Linux AMI release 2018.03
I installed Certbot with (certbot-auto, OS package manager, pip, etc):
git clone https://github.com/certbot/certbot
I ran this command and it produced this output:
Saving debug log to /path/letsencrypt/letsencrypt.log
Plugins selected: Authenticator manual, Installer None
Obtaining a new certificate
Performing the following challenges:
dns-01 challenge for wildcard.example.com
Waiting for verification...
Cleaning up challenges
Non-standard path(s), might not work with crontab installed by your operating system package manager
IMPORTANT NOTES:
Congratulations! Your certificate and chain have been saved at:
/path/letsencrypt/live/wildcard.example.com/fullchain.pem
Your key file has been saved at:
/path/letsencrypt/live/wildcard.example.com/privkey.pem
Your cert will expire on 2019-02-26. To obtain a new or tweaked
version of this certificate in the future, simply run certbot-auto
again. To non-interactively renew all of your certificates, run
"certbot-auto renew"
Certbot's behavior differed from what I expected because:
because I'm write this option --domains *.example.com and certificate got instead domain name CN=wildcard.example.com
Hello.
Can't understand where is mistake - make cert request for wildcard cert, received one which has CN replaced "*" to "wildcard", so it is valid only for dns wildcard.example.com.
Here is command:
/opt/certbot/certbot-auto certonly --no-self-upgrade --no-bootstrap --non-interactive --manual \ --manual-auth-hook "./update_dns.py -a UPSERT -d $TLD" \ --manual-cleanup-hook "./update_dns.py -a DELETE -d $TLD" \ --preferred-challenge dns \ --config-dir "./output" \ --work-dir "./output" \ --logs-dir "./output" \ --agree-tos \ --manual-public-ip-logging-ok \ --domains *.example.com \ --server https://acme-v02.api.letsencrypt.org/directory \ --email some@email.addr
where $TLD is example.com
CSR file also have X509v3 Subject Alternative Name: DNS:wildcard.example.com
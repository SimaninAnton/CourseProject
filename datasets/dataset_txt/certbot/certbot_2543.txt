centminmod commented on 17 Jan 2016
Having problem passing variables in bash shell to webroot-map https://community.letsencrypt.org/t/csr-and-webroot-path-webroot-map-errors/8986/
Using latest letsencrypt 0.2.0 client on CentOS 6.7 trying to setup a ECDSA cert on staging and seem to have problem passing a variable ${vhostname} in bash shell to the webroot path using either --webroot-path or --webroot-map
yeah i know this is a bug #1989
letsencrypt certonly --text --agree-tos --renew-by-default --test-cert --email ${EMAIL} --csr /usr/local/nginx/conf/ssl/${vhostname}/${vhostname}-csr-p384.der --webroot --webroot-path /home/nginx/domains/${vhostname}/public   
The webroot plugin is not working; there may be problems with your existing configuration.
The error was: PluginError('--webroot-path must be set',)
maybe due to webroot-map settings encased in single quotes but tried double quotes and same problem
letsencrypt certonly --text --agree-tos --renew-by-default --test-cert --email ${EMAIL} --csr /usr/local/nginx/conf/ssl/${vhostname}/${vhostname}-csr-p384.der --webroot --webroot-map '{"${vhostname}": "/home/nginx/domains/${vhostname}/public"}'
The webroot plugin is not working; there may be problems with your existing configuration.
The error was: PluginError(u'/home/nginx/domains/${vhostname}/public does not exist or is not a directory',)
there's no problem if i hardcode the webroot-map settings, but then again i am scripting this for automation with my LEMP stack and nginx vhost generator for HTTP/2 SSL
letsencrypt certonly --text --agree-tos --renew-by-default --test-cert --email ${EMAIL} --user-agent centminmod-centos6-webroot --csr /usr/local/nginx/conf/ssl/${vhostname}/${vhostname}-csr-p384.der --webroot --webroot-map '{"le20.http2ssl.xyz": "/home/nginx/domains/le20.http2ssl.xyz/public"}'    

IMPORTANT NOTES:
 - Congratulations! Your certificate and chain have been saved at
   /usr/local/nginx/conf/ssl/le20.http2ssl.xyz/0003_chain.pem. Your
   cert will expire on 2016-04-16. To obtain a new version of the
   certificate in the future, simply run Let's Encrypt again.
 - If you like Let's Encrypt, please consider supporting our work by:

   Donating to ISRG / Let's Encrypt:   https://letsencrypt.org/donate
   Donating to EFF:                    https://eff.org/donate-le
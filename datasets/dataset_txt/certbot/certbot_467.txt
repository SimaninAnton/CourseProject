Contributor
hal869 commented on 17 Jul 2018
with python env of,
 which python
  /usr/bin/python
 which python2
  /usr/bin/python2
 which python3
  /usr/bin/python3
 python --version
  Python 2.7.15
 python2 --version
  Python 2.7.15
 python3 --version
  Python 3.6.5
 which pip
  /usr/bin/pip
 which pip2
  /usr/bin/pip2
 which pip3
  /usr/bin/pip3
 pip --version
  pip 10.0.1 from /usr/lib/python2.7/site-packages/pip (python 2.7)
 pip2 --version
  pip 10.0.1 from /usr/lib/python2.7/site-packages/pip (python 2.7)
 pip3 --version
  pip 10.0.1 from /usr/lib/python3.6/site-packages/pip (python 3.6)
exec, from certbot git sources, of
 ./certbot-auto --debug --os-packages-only
 tools/venv3.sh
or
 ./certbot-auto --debug --os-packages-only
 tools/venv.sh
hangs, never completing. Looks like version/packaging issues at 1st glance.
1st step, attempting to install 'manually', following @bmw's (now old) instructions at
https://github.com/certbot/certbot/issues/2832#issuecomment-210007043
exec,
 export XDG_DATA_HOME="/opt/certbot-test"
 rm -rf $XDG_DATA_HOME/letsencrypt

 virtualenv-3.6 \
  --verbose \
  --clear \
 $XDG_DATA_HOME/letsencrypt

  Do not need to delete /opt/certbot-test/letsencrypt/lib/python3.6; already gone
  Not deleting /opt/certbot-test/letsencrypt/bin
  Using base prefix '/usr'
  Creating /opt/certbot-test/letsencrypt/lib/python3.6
  Symlinking Python bootstrap modules
    Symlinking /opt/certbot-test/letsencrypt/lib/python3.6/config-3.6m-x86_64-linux-gnu
    Symlinking /opt/certbot-test/letsencrypt/lib/python3.6/lib-dynload
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/os.py
    Ignoring built-in bootstrap module: posix
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/posixpath.py
    Cannot import bootstrap module: nt
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/ntpath.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/genericpath.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/fnmatch.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/locale.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/encodings
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/codecs.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/stat.py
    Cannot import bootstrap module: UserDict
    Cannot import bootstrap module: copy_reg
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/types.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/re.py
    Cannot import bootstrap module: sre
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/sre_parse.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/sre_constants.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/sre_compile.py
    Cannot import bootstrap module: _abcoll
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/warnings.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/linecache.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/abc.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/io.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/_weakrefset.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/copyreg.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/tempfile.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/random.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/__future__.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/collections
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/keyword.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/tarfile.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/shutil.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/struct.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/copy.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/tokenize.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/token.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/functools.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/heapq.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/bisect.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/weakref.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/reprlib.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/base64.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/_dummy_thread.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/hashlib.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/hmac.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/imp.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/importlib
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/rlcompleter.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/operator.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/_collections_abc.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/_bootlocale.py
    Symlinking /opt/certbot-test/letsencrypt/lib64/python3.6/enum.py
  Creating /opt/certbot-test/letsencrypt/lib/python3.6/site-packages
  Writing /opt/certbot-test/letsencrypt/lib64/python3.6/site.py
  Writing /opt/certbot-test/letsencrypt/lib64/python3.6/orig-prefix.txt
  Writing /opt/certbot-test/letsencrypt/lib64/python3.6/no-global-site-packages.txt
  Creating parent directories for /opt/certbot-test/letsencrypt/include
  Symlinking /opt/certbot-test/letsencrypt/include/python3.6m
  Creating /opt/certbot-test/letsencrypt/bin
  New python executable in /opt/certbot-test/letsencrypt/bin/python3
  Changed mode of /opt/certbot-test/letsencrypt/bin/python3 to 0o755
  Also creating executable in /opt/certbot-test/letsencrypt/bin/python
  Changed mode of /opt/certbot-test/letsencrypt/bin/python to 0o755
  Testing executable with /opt/certbot-test/letsencrypt/bin/python3 -c "import sys;out=sys.stdout;getattr(out, "buffer", out).write(sys.prefix.encode("utf-8"))"
  Got sys.prefix result: '/opt/certbot-test/letsencrypt'
  Creating /opt/certbot-test/letsencrypt/lib64/python3.6/distutils
  Writing /opt/certbot-test/letsencrypt/lib64/python3.6/distutils/__init__.py
  Writing /opt/certbot-test/letsencrypt/lib64/python3.6/distutils/distutils.cfg
  Installing setuptools, pip, wheel...
    Collecting setuptools
      Using cached https://files.pythonhosted.org/packages/ff/f4/385715ccc461885f3cedf57a41ae3c12b5fec3f35cce4c8706b1a112a133/setuptools-40.0.0-py2.py3-none-any.whl
    Collecting pip
      Using cached https://files.pythonhosted.org/packages/0f/74/ecd13431bcc456ed390b44c8a6e917c1820365cbebcb6a8974d1cd045ab4/pip-10.0.1-py2.py3-none-any.whl
    Collecting wheel
      Using cached https://files.pythonhosted.org/packages/81/30/e935244ca6165187ae8be876b6316ae201b71485538ffac1d718843025a9/wheel-0.31.1-py2.py3-none-any.whl
    Installing collected packages: setuptools, pip, wheel
    Successfully installed pip-10.0.1 setuptools-40.0.0 wheel-0.31.1
  ...Installing setuptools, pip, wheel...done.
  Writing /opt/certbot-test/letsencrypt/bin/activate
  Writing /opt/certbot-test/letsencrypt/bin/activate.fish
  Writing /opt/certbot-test/letsencrypt/bin/activate.csh
  Writing /opt/certbot-test/letsencrypt/bin/activate_this.py
  Writing /opt/certbot-test/letsencrypt/bin/python-config
then
 curl \
  https://raw.githubusercontent.com/certbot/certbot/master/letsencrypt-auto-source/pieces/pipstrap.py \
 | PATH=$XDG_DATA_HOME/letsencrypt/bin:$PATH \
   $XDG_DATA_HOME/letsencrypt/bin/python3 -

 $XDG_DATA_HOME/letsencrypt/bin/pip3 install \
  --no-cache-dir \
  --require-hashes \
  -r <(curl https://raw.githubusercontent.com/certbot/certbot/master/letsencrypt-auto-source/pieces/certbot-requirements.txt)
 ...
   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                  Dload  Upload   Total   Spent    Left  Speed
 100   754  100   754    0     0   3141      0 --:--:-- --:--:-- --:--:--  3141
 Collecting certbot==0.26.0 (from -r /dev/fd/63 (line 1))
   Downloading https://files.pythonhosted.org/packages/95/11/fd94a47974cd25abc920fd026dfc91f9a952443112662732237498e0d11f/certbot-0.26.0-py2.py3-none-any.whl (302kB)
     100% |████████████████████████████████| 307kB 3.3MB/s 
 Collecting acme==0.26.0 (from -r /dev/fd/63 (line 4))
   Downloading https://files.pythonhosted.org/packages/c8/f6/2a07a5d52ad68ec86a21ce727e15f0b63ca9264ebb1cf916b591f267f38e/acme-0.26.0-py2.py3-none-any.whl (77kB)
     100% |████████████████████████████████| 81kB 4.1MB/s 
 Collecting certbot-apache==0.26.0 (from -r /dev/fd/63 (line 7))
   Downloading https://files.pythonhosted.org/packages/0d/ac/dae21f49e19ecee63f8239036a36b0cd57762567b43c18e220e59f135ba9/certbot_apache-0.26.0-py2.py3-none-any.whl (223kB)
     100% |████████████████████████████████| 225kB 2.2MB/s 
 Collecting certbot-nginx==0.26.0 (from -r /dev/fd/63 (line 10))
   Downloading https://files.pythonhosted.org/packages/69/8e/4f8540cd33e90cf909573196c56c245e392ae327081f2504599944eb84fd/certbot_nginx-0.26.0-py2.py3-none-any.whl (78kB)
     100% |████████████████████████████████| 81kB 4.6MB/s 
 Collecting parsedatetime>=1.3 (from certbot==0.26.0->-r /dev/fd/63 (line 1))
 Requirement already satisfied: setuptools in /opt/certbot-test/letsencrypt/lib/python3.6/site-packages (from certbot==0.26.0->-r /dev/fd/63 (line 1)) (40.0.0)
 Collecting zope.interface (from certbot==0.26.0->-r /dev/fd/63 (line 1))
 Collecting josepy (from certbot==0.26.0->-r /dev/fd/63 (line 1))
 Collecting mock (from certbot==0.26.0->-r /dev/fd/63 (line 1))
 Collecting cryptography>=1.2 (from certbot==0.26.0->-r /dev/fd/63 (line 1))
 Collecting pyrfc3339 (from certbot==0.26.0->-r /dev/fd/63 (line 1))
 Collecting configobj (from certbot==0.26.0->-r /dev/fd/63 (line 1))
 Collecting zope.component (from certbot==0.26.0->-r /dev/fd/63 (line 1))
 Collecting ConfigArgParse>=0.9.3 (from certbot==0.26.0->-r /dev/fd/63 (line 1))
 Collecting pytz (from certbot==0.26.0->-r /dev/fd/63 (line 1))
 Collecting requests[security]>=2.4.1 (from acme==0.26.0->-r /dev/fd/63 (line 4))
 Collecting requests-toolbelt>=0.3.0 (from acme==0.26.0->-r /dev/fd/63 (line 4))
 Collecting PyOpenSSL>=0.13 (from acme==0.26.0->-r /dev/fd/63 (line 4))
 Collecting six>=1.9.0 (from acme==0.26.0->-r /dev/fd/63 (line 4))
 Collecting python-augeas (from certbot-apache==0.26.0->-r /dev/fd/63 (line 7))
 Collecting pyparsing>=1.5.5 (from certbot-nginx==0.26.0->-r /dev/fd/63 (line 10))
 In --require-hashes mode, all requirements must have their versions pinned with ==. These do not:
     parsedatetime>=1.3 from https://files.pythonhosted.org/packages/e3/b3/02385db13f1f25f04ad7895f35e9fe3960a4b9d53112775a6f7d63f264b6/parsedatetime-2.4.tar.gz#sha256=3d817c58fb9570d1eec1dd46fa9448cd644eeed4fb612684b02dfda3a79cb84b (from certbot==0.26.0->-r /dev/fd/63 (line 1))
     zope.interface from https://files.pythonhosted.org/packages/ac/8a/657532df378c2cd2a1fe6b12be3b4097521570769d4852ec02c24bd3594e/zope.interface-4.5.0.tar.gz#sha256=57c38470d9f57e37afb460c399eb254e7193ac7fb8042bd09bdc001981a9c74c (from certbot==0.26.0->-r /dev/fd/63 (line 1))
     josepy from https://files.pythonhosted.org/packages/23/46/30ac29742b03be92e05d1fd9048df6f0902bb0b3b042a7ea76a2b3c30f7e/josepy-1.1.0-py2.py3-none-any.whl#sha256=1309a25aac3caeff5239729c58ff9b583f7d022ffdb1553406ddfc8e5b52b76e (from certbot==0.26.0->-r /dev/fd/63 (line 1))
     mock from https://files.pythonhosted.org/packages/e6/35/f187bdf23be87092bd0f1200d43d23076cee4d0dec109f195173fd3ebc79/mock-2.0.0-py2.py3-none-any.whl#sha256=5ce3c71c5545b472da17b72268978914d0252980348636840bd34a00b5cc96c1 (from certbot==0.26.0->-r /dev/fd/63 (line 1))
     cryptography>=1.2 from https://files.pythonhosted.org/packages/fa/f4/3cde3604972dfa2b0fea85b9711948bb4fb70ab64095322aef35071bd254/cryptography-2.2.2-cp34-abi3-manylinux1_x86_64.whl#sha256=551a3abfe0c8c6833df4192a63371aa2ff43afd8f570ed345d31f251d78e7e04 (from certbot==0.26.0->-r /dev/fd/63 (line 1))
     pyrfc3339 from https://files.pythonhosted.org/packages/c1/7a/725f5c16756ec6211b1e7eeac09f469084595513917ea069bc023c40a5e2/pyRFC3339-1.1-py2.py3-none-any.whl#sha256=67196cb83b470709c580bb4738b83165e67c6cc60e1f2e4f286cfcb402a926f4 (from certbot==0.26.0->-r /dev/fd/63 (line 1))
     configobj from https://files.pythonhosted.org/packages/64/61/079eb60459c44929e684fa7d9e2fdca403f67d64dd9dbac27296be2e0fab/configobj-5.0.6.tar.gz#sha256=a2f5650770e1c87fb335af19a9b7eb73fc05ccf22144eb68db7d00cd2bcb0902 (from certbot==0.26.0->-r /dev/fd/63 (line 1))
     zope.component from https://files.pythonhosted.org/packages/b6/e8/6eb8e2c6e856fb9bfe842afe01695da53d046fd5ddee358cde24d8aab31f/zope.component-4.4.1-py2.py3-none-any.whl#sha256=2776ab93945c8df3781fdcc2126dc7080e9a1d64fef5f76a21550473cbb505bf (from certbot==0.26.0->-r /dev/fd/63 (line 1))
     ConfigArgParse>=0.9.3 from https://files.pythonhosted.org/packages/77/61/ae928ce6ab85d4479ea198488cf5ffa371bd4ece2030c0ee85ff668deac5/ConfigArgParse-0.13.0.tar.gz#sha256=e6441aa58e23d3d122055808e5e2220fd742dff6e1e51082d2a4e4ed145dd788 (from certbot==0.26.0->-r /dev/fd/63 (line 1))
     pytz from https://files.pythonhosted.org/packages/30/4e/27c34b62430286c6d59177a0842ed90dc789ce5d1ed740887653b898779a/pytz-2018.5-py2.py3-none-any.whl#sha256=a061aa0a9e06881eb8b3b2b43f05b9439d6583c206d0a6c340ff72a7b6669053 (from certbot==0.26.0->-r /dev/fd/63 (line 1))
     requests[security]>=2.4.1 from https://files.pythonhosted.org/packages/65/47/7e02164a2a3db50ed6d8a6ab1d6d60b69c4c3fdf57a284257925dfc12bda/requests-2.19.1-py2.py3-none-any.whl#sha256=63b52e3c866428a224f97cab011de738c36aec0185aa91cfacd418b5d58911d1 (from acme==0.26.0->-r /dev/fd/63 (line 4))
     requests-toolbelt>=0.3.0 from https://files.pythonhosted.org/packages/97/8a/d710f792d6f6ecc089c5e55b66e66c3f2f35516a1ede5a8f54c13350ffb0/requests_toolbelt-0.8.0-py2.py3-none-any.whl#sha256=42c9c170abc2cacb78b8ab23ac957945c7716249206f90874651971a4acff237 (from acme==0.26.0->-r /dev/fd/63 (line 4))
     PyOpenSSL>=0.13 from https://files.pythonhosted.org/packages/96/af/9d29e6bd40823061aea2e0574ccb2fcf72bfd6130ce53d32773ec375458c/pyOpenSSL-18.0.0-py2.py3-none-any.whl#sha256=26ff56a6b5ecaf3a2a59f132681e2a80afcc76b4f902f612f518f92c2a1bf854 (from acme==0.26.0->-r /dev/fd/63 (line 4))
     six>=1.9.0 from https://files.pythonhosted.org/packages/67/4b/141a581104b1f6397bfa78ac9d43d8ad29a7ca43ea90a2d863fe3056e86a/six-1.11.0-py2.py3-none-any.whl#sha256=832dc0e10feb1aa2c68dcc57dbb658f1c7e65b9b61af69048abc87a2db00a0eb (from acme==0.26.0->-r /dev/fd/63 (line 4))
     python-augeas from https://files.pythonhosted.org/packages/b4/d7/62d335d9df28e2f78207dcd12bbbcee89a7b5ba6d247feaddc9d04f27e1e/python-augeas-1.0.3.tar.gz#sha256=d062f4a44aee797aa9296f5a82cd8c3df5036ca23df6b9ac48cbaa3b4f29a664 (from certbot-apache==0.26.0->-r /dev/fd/63 (line 7))
     pyparsing>=1.5.5 from https://files.pythonhosted.org/packages/6a/8a/718fd7d3458f9fab8e67186b00abdd345b639976bc7fb3ae722e1b026a50/pyparsing-2.2.0-py2.py3-none-any.whl#sha256=fee43f17a9c4087e7ed1605bd6df994c6173c1e977d7ade7b651292fab2bd010 (from certbot-nginx==0.26.0->-r /dev/fd/63 (line 10))
Since this install procedure is supposed to be pulling the prereqs, not clear what I need to do here.  Is it the install procedure that needs to change?  Or do I need to manage local python2/3 env?
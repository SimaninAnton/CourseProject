oussamahammami commented on 22 Nov 2017
Hi,
This is a small issue with the certbot rpm postscript script in the directories creation /etc/letsencrypt/.
Directories archiveand live should be read accessible for any user so any daemon can use let's encrypt certificate.
thanks again for this awesome solution !
My operating system is (include version):
CentOS Linux release 7.4.1708 (Core)
I installed Certbot with yum from epel repo:
[root@web-proxy-001 ~]# rpm -qa|grep certbot
python2-certbot-0.19.0-1.el7.noarch
certbot-0.19.0-1.el7.noarch
I ran this command and it produced this output:
I use the certificates symbolic link /etc/letsencrypt/live/MyDomain.com/fullchain.pem and /etc/letsencrypt/live/MyDomain.com/privkey.pem from my server but I've got this error:
load_cert(): TLSs<default>: Unable to load certificate file ...
Certbot's behavior differed from what I expected because:
Directory Permission on /etc/letsencrypt/live/and /etc/letsencrypt/archive/
 # ll -d /etc/letsencrypt/live/
drwx------. 3 root root 38 Sep 28 11:24 /etc/letsencrypt/live/

# ll -d /etc/letsencrypt/archive/
drwx------. 3 root root 38 Sep 28 11:24 /etc/letsencrypt/archive/
To fix this error:
# chmod 755 /etc/letsencrypt/live/
# chmod 755 /etc/letsencrypt/archive/
# ll /etc/letsencrypt/
total 0
drwxr-xr-x. 3 root root 38 Sep 28 11:24 archive
drwxr-xr-x. 3 root root 38 Sep 28 11:24 live
...
11
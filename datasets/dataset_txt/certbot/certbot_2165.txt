ardaric commented on 23 Apr 2016
Hello everyone!
I encountered the following problem when I was trying to renew my server certificate:
When I first set up the server, installing letsencrypt-auto and getting a working certificate for my apache webserver worked without problems.
The server is a Raspberry Pi 2 with up-to-date Raspbian OS, mostly used as an owncloud Server. Therefor I cannot just reinstall the whole server to try on a fresh OS install.
Please let me know what Information you need.
When I tried to renew it about a week ago, I got the error message down below, using the command "$ ./letsencrypt-auto --help".
There is no letsencrypt folder in ~/.local/share afterwards.
I tried several times, deleted caches and temp-folders, but the problem remains.
I also tried setting swap to up to 2 G, but it is not even used during the process.
Might be related to: #2857 or #2832
...
Reading package lists... Done
Reading package lists... Done
Building dependency tree       
Reading state information... Done
augeas-lenses is already the newest version.
ca-certificates is already the newest version.
dialog is already the newest version.
gcc is already the newest version.
libaugeas0 is already the newest version.
libffi-dev is already the newest version.
libssl-dev is already the newest version.
python is already the newest version.
python-dev is already the newest version.
python-virtualenv is already the newest version.
virtualenv is already the newest version.
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
Checking for new version...
Creating virtual environment...
Installing Python packages...
Had a problem while installing Python packages:
Collecting argparse==1.4.0 (from -r /tmp/tmp.ztemUjrFMS/letsencrypt-auto-requirements.txt (line 5))
  Downloading argparse-1.4.0-py2.py3-none-any.whl
Collecting pycparser==2.14 (from -r /tmp/tmp.ztemUjrFMS/letsencrypt-auto-requirements.txt (line 11))
  Downloading pycparser-2.14.tar.gz (223kB)
Collecting cffi==1.4.2 (from -r /tmp/tmp.ztemUjrFMS/letsencrypt-auto-requirements.txt (line 14))
  Downloading cffi-1.4.2.tar.gz (365kB)
Collecting ConfigArgParse==0.10.0 (from -r /tmp/tmp.ztemUjrFMS/letsencrypt-auto-requirements.txt (line 31))
  Downloading ConfigArgParse-0.10.0.tar.gz
Collecting configobj==5.0.6 (from -r /tmp/tmp.ztemUjrFMS/letsencrypt-auto-requirements.txt (line 33))
  Downloading configobj-5.0.6.tar.gz
Collecting cryptography==1.2.3 (from -r /tmp/tmp.ztemUjrFMS/letsencrypt-auto-requirements.txt (line 35))
  Downloading cryptography-1.2.3.tar.gz (373kB)
Collecting enum34==1.1.2 (from -r /tmp/tmp.ztemUjrFMS/letsencrypt-auto-requirements.txt (line 57))
  Downloading enum34-1.1.2.tar.gz (46kB)
Collecting funcsigs==0.4 (from -r /tmp/tmp.ztemUjrFMS/letsencrypt-auto-requirements.txt (line 60))
  Downloading funcsigs-0.4-py2.py3-none-any.whl
Collecting idna==2.0 (from -r /tmp/tmp.ztemUjrFMS/letsencrypt-auto-requirements.txt (line 63))
  Downloading idna-2.0-py2.py3-none-any.whl (61kB)
Collecting ipaddress==1.0.16 (from -r /tmp/tmp.ztemUjrFMS/letsencrypt-auto-requirements.txt (line 66))
  Downloading ipaddress-1.0.16-py27-none-any.whl
Collecting linecache2==1.0.0 (from -r /tmp/tmp.ztemUjrFMS/letsencrypt-auto-requirements.txt (line 69))
  Downloading linecache2-1.0.0-py2.py3-none-any.whl
Collecting ndg-httpsclient==0.4.0 (from -r /tmp/tmp.ztemUjrFMS/letsencrypt-auto-requirements.txt (line 72))
  Downloading ndg_httpsclient-0.4.0.tar.gz
Collecting ordereddict==1.1 (from -r /tmp/tmp.ztemUjrFMS/letsencrypt-auto-requirements.txt (line 74))
  Downloading ordereddict-1.1.tar.gz
Collecting parsedatetime==2.1 (from -r /tmp/tmp.ztemUjrFMS/letsencrypt-auto-requirements.txt (line 76))
  Downloading parsedatetime-2.1-py2-none-any.whl
Collecting pbr==1.8.1 (from -r /tmp/tmp.ztemUjrFMS/letsencrypt-auto-requirements.txt (line 79))
  Downloading pbr-1.8.1-py2.py3-none-any.whl (89kB)
Collecting psutil==3.3.0 (from -r /tmp/tmp.ztemUjrFMS/letsencrypt-auto-requirements.txt (line 82))
  Downloading psutil-3.3.0.tar.gz (261kB)
Collecting pyasn1==0.1.9 (from -r /tmp/tmp.ztemUjrFMS/letsencrypt-auto-requirements.txt (line 104))
  Downloading pyasn1-0.1.9-py2.py3-none-any.whl
Collecting pyOpenSSL==0.15.1 (from -r /tmp/tmp.ztemUjrFMS/letsencrypt-auto-requirements.txt (line 116))
  Downloading pyOpenSSL-0.15.1-py2.py3-none-any.whl (102kB)
Collecting pyRFC3339==1.0 (from -r /tmp/tmp.ztemUjrFMS/letsencrypt-auto-requirements.txt (line 119))
  Downloading pyRFC3339-1.0-py2.py3-none-any.whl
Collecting python-augeas==0.5.0 (from -r /tmp/tmp.ztemUjrFMS/letsencrypt-auto-requirements.txt (line 122))
  Downloading python-augeas-0.5.0.tar.gz (90kB)
Collecting python2-pythondialog==3.3.0 (from -r /tmp/tmp.ztemUjrFMS/letsencrypt-auto-requirements.txt (line 124))
  Downloading python2-pythondialog-3.3.0.tar.bz2 (1.8MB)
Collecting pytz==2015.7 (from -r /tmp/tmp.ztemUjrFMS/letsencrypt-auto-requirements.txt (line 127))
  Downloading pytz-2015.7-py2.py3-none-any.whl (476kB)
Collecting requests==2.9.1 (from -r /tmp/tmp.ztemUjrFMS/letsencrypt-auto-requirements.txt (line 141))
  Downloading requests-2.9.1-py2.py3-none-any.whl (501kB)
Collecting six==1.10.0 (from -r /tmp/tmp.ztemUjrFMS/letsencrypt-auto-requirements.txt (line 144))
  Downloading six-1.10.0-py2.py3-none-any.whl
Collecting traceback2==1.4.0 (from -r /tmp/tmp.ztemUjrFMS/letsencrypt-auto-requirements.txt (line 147))
  Downloading traceback2-1.4.0-py2.py3-none-any.whl
Collecting unittest2==1.1.0 (from -r /tmp/tmp.ztemUjrFMS/letsencrypt-auto-requirements.txt (line 150))
  Downloading unittest2-1.1.0-py2.py3-none-any.whl (96kB)
Collecting zope.component==4.2.2 (from -r /tmp/tmp.ztemUjrFMS/letsencrypt-auto-requirements.txt (line 153))
  Downloading zope.component-4.2.2.tar.gz (546kB)
Collecting zope.event==4.1.0 (from -r /tmp/tmp.ztemUjrFMS/letsencrypt-auto-requirements.txt (line 155))
  Downloading zope.event-4.1.0.tar.gz (476kB)
Collecting zope.interface==4.1.3 (from -r /tmp/tmp.ztemUjrFMS/letsencrypt-auto-requirements.txt (line 157))
  Downloading zope.interface-4.1.3.tar.gz (141kB)
Collecting mock==1.0.1 (from -r /tmp/tmp.ztemUjrFMS/letsencrypt-auto-requirements.txt (line 175))
  Downloading mock-1.0.1.tar.gz (818kB)
Collecting acme==0.5.0 (from -r /tmp/tmp.ztemUjrFMS/letsencrypt-auto-requirements.txt (line 181))
  Downloading acme-0.5.0-py2.py3-none-any.whl (91kB)
Collecting letsencrypt==0.5.0 (from -r /tmp/tmp.ztemUjrFMS/letsencrypt-auto-requirements.txt (line 184))
  Downloading letsencrypt-0.5.0-py2-none-any.whl (208kB)
Collecting letsencrypt-apache==0.5.0 (from -r /tmp/tmp.ztemUjrFMS/letsencrypt-auto-requirements.txt (line 187))
  Downloading letsencrypt_apache-0.5.0-py2-none-any.whl (100kB)
Requirement already satisfied (use --upgrade to upgrade): setuptools>=1.0 in /home/sebastian/.local/share/letsencrypt/lib/python2.7/site-packages (from cryptography==1.2.3->-r /tmp/tmp.ztemUjrFMS/letsencrypt-auto-requirements.txt (line 35))
Installing collected packages: argparse, pycparser, cffi, ConfigArgParse, six, configobj, idna, pyasn1, enum34, ipaddress, cryptography, funcsigs, linecache2, pyOpenSSL, ndg-httpsclient, ordereddict, parsedatetime, pbr, psutil, pytz, pyRFC3339, python-augeas, python2-pythondialog, requests, traceback2, unittest2, zope.interface, zope.event, zope.component, mock, acme, letsencrypt, letsencrypt-apache
  Found existing installation: argparse 1.2.1
    Not uninstalling argparse at /usr/lib/python2.7, outside environment /home/sebastian/.local/share/letsencrypt
  Running setup.py install for pycparser: started
    Running setup.py install for pycparser: finished with status 'done'
  Running setup.py install for cffi: started
    Running setup.py install for cffi: finished with status 'done'
  Running setup.py install for ConfigArgParse: started
    Running setup.py install for ConfigArgParse: finished with status 'done'
  Running setup.py install for configobj: started
    Running setup.py install for configobj: finished with status 'done'
  Running setup.py install for enum34: started
    Running setup.py install for enum34: finished with status 'done'
  Running setup.py install for cryptography: started
    Running setup.py install for cryptography: still running...
    Running setup.py install for cryptography: finished with status 'done'
  Running setup.py install for ndg-httpsclient: started
    Running setup.py install for ndg-httpsclient: finished with status 'done'
  Running setup.py install for ordereddict: started
    Running setup.py install for ordereddict: finished with status 'done'
  Running setup.py install for psutil: started
    Running setup.py install for psutil: finished with status 'error'
    Complete output from command /home/sebastian/.local/share/letsencrypt/bin/python2.7 -u -c "import setuptools, tokenize;__file__='/tmp/pip-build-PU8zkR/psutil/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('
', '
'), __file__, 'exec'))" install --record /tmp/pip-ulwIP3-record/install-record.txt --single-version-externally-managed --compile --install-headers /home/sebastian/.local/share/letsencrypt/include/site/python2.7/psutil:
    running install
    running build
    running build_py
    creating build
    creating build/lib.linux-armv7l-2.7
    creating build/lib.linux-armv7l-2.7/psutil
    copying psutil/_pswindows.py -> build/lib.linux-armv7l-2.7/psutil
    copying psutil/_common.py -> build/lib.linux-armv7l-2.7/psutil
    copying psutil/__init__.py -> build/lib.linux-armv7l-2.7/psutil
    copying psutil/_pslinux.py -> build/lib.linux-armv7l-2.7/psutil
    copying psutil/_psposix.py -> build/lib.linux-armv7l-2.7/psutil
    copying psutil/_psbsd.py -> build/lib.linux-armv7l-2.7/psutil
    copying psutil/_psosx.py -> build/lib.linux-armv7l-2.7/psutil
    copying psutil/_compat.py -> build/lib.linux-armv7l-2.7/psutil
    copying psutil/_pssunos.py -> build/lib.linux-armv7l-2.7/psutil
    running build_ext
    building 'psutil._psutil_linux' extension
    creating build/temp.linux-armv7l-2.7
    creating build/temp.linux-armv7l-2.7/psutil
    arm-linux-gnueabihf-gcc -pthread -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fno-strict-aliasing -D_FORTIFY_SOURCE=2 -g -fstack-protector-strong -Wformat -Werror=format-security -fPIC -DPSUTIL_VERSION=330 -I/usr/include/python2.7 -c psutil/_psutil_linux.c -o build/temp.linux-armv7l-2.7/psutil/_psutil_linux.o
    In file included from psutil/_psutil_linux.c:24:0:
    /usr/include/linux/sockios.h:1:1: error: expected identifier or ‘(’ before ‘/’ token
     /
     ^
    /usr/include/linux/sockios.h:4:2: error: stray ‘�’ in program
      *  oxe�ating system.  INET is imp,emented using the  BSD Socket
      ^
    /usr/include/linux/sockios.h:5:2: error: stray ‘�’ in program
      *  inuer&�ce as the means mf cnmmUnication with2the$uceR levdl.
      ^
    /usr/include/linux/sockios.h:7:2: error: stray ‘�’ in program
      *) Definhtiofc of The sogket-leV�h I/O cmntroL caLlw.
      ^
    /usr/include/linux/sockios.h:8:1: error: stray ‘�’ in program
     �*
     ^
    /usr/include/linux/sockios.h:9:2: error: stray ‘`’ in program
      *`Ver�ion: @,#)sockios.h 1.0.2 07/09/93
      ^
    /usr/include/linux/sockios.h:9:2: error: stray ‘�’ in program
    /usr/include/linux/sockios.h:9:13: error: stray ‘@’ in program
      *`Ver�ion: @,#)sockios.h 1.0.2 07/09/93
                 ^
    /usr/include/linux/sockios.h:9:15: error: stray ‘#’ in program
      *`Ver�ion: @,#)sockios.h 1.0.2 07/09/93
                   ^
    /usr/include/linux/sockios.h:9:27: error: too many decimal points in number
      *`Ver�ion: @,#)sockios.h 1.0.2 07/09/93
                               ^
    /usr/include/linux/sockios.h:9:36: error: invalid digit "9" in octal constant
      *`Ver�ion: @,#)sockios.h 1.0.2 07/09/93
                                        ^
    /usr/include/linux/sockios.h:10:1: error: stray ‘�’ in program
     $** * Auth�rs; Ross Biro
     ^
    /usr/include/linux/sockios.h:10:16: error: unknown type name ‘Ross’
     $** * Auth�rs; Ross Biro
                    ^
    /usr/include/linux/sockios.h:11:2: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
      *  Bred N. van Kempen,$<wa
                                tje@uWalt.NL.Eueneu.OSG>
      ^
    /usr/include/linux/sockios.h:11:32: error: stray ‘@’ in program
      *  Bred N. van Kempen,$<wa
                                tje@uWalt.NL.Eueneu.OSG>
                                    ^
    /usr/include/linux/sockios.h:12:2: error: stray ‘�’ in program
      +�
      ^
    /usr/include/linux/sockios.h:13:2: error: stray ’ in program
     This�program")s$free software; you cen redistsibu4e it andor
      ^
    /usr/include/linux/sockios.h:13:2: error: stray ‘�’ in program
    /usr/include/linux/sockios.h:13:2: error: missing terminating " character
    /usr/include/linux/sockios.h:14:1: error: missing terminating " character
     "*  moDify i� }nde� the terms of dhe GNU0Ggneral Public L9gunse
     ^
    /usr/include/linux/sockios.h:15:2: error: stray ‘�’ in program
    as$pujlish%d by the Free Softvare Foundation; either Version
      ^
    /usr/include/linux/sockios.h:16:47: error: unknown type name ‘either’
     !*  6 of tle`License, or (at 9mur nptiOn)$any later`version.
                                                   ^
    /usr/include/linux/sockios.h:17:1: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘!’ token
      *
     ^
    /usr/include/linux/sockios.h:17:1: error: stray ‘`’ in program
    /usr/include/linux/sockios.h:17:30: error: invalid suffix "mur" on integer constant
      *
                                  ^
    /usr/include/linux/sockios.h:17:1: error: stray ‘`’ in program
      *
     ^
    /usr/include/linux/sockios.h:18:2: error: stray ‘’ in program
     'iffdff �LINUX_Q�KIOS_H
      ^
    /usr/include/linux/sockios.h:19:1: error: missing terminating ' character
     #dufyne _LINUZ_SOCOIOS_H
     ^
    /usr/include/linux/sockios.h:20:2: error: invalid preprocessing directive #dufyne

      ^
    /usr/include/linux/sockios.h:22:2: error: invalid preprocessing directive #inclu
     J/
      ^
    /usr/include/linux/sockios.h:24:2: error: stray ‘�’ in program
     #define$SIOCINQ  FIONSEAD
      ^
    /usr/include/linux/sockios.h:25:2: error: invalid preprocessing directive #define$SIOCINQ
     #def)ne SIO�OUTQ T�OCOUTQ        /* gu�p�t!qugue siXe (not sent + not acked) */
      ^
    /usr/include/linux/sockios.h:26:2: error: invalid preprocessing directive #def

      ^
    /usr/include/linux/sockios.h:29:2: error: invalid preprocessing directive #t
     #define SIO�DELRT 0x890C  /* delEte routing tabde entry
      ^
    /usr/include/linux/sockios.h:151:2: error: #endif without #if
    In file included from /usr/include/linux/if.h:23:0,
                     from psutil/_psutil_linux.c:25:
    /usr/include/linux/socket.h:14:2: error: unknown type name ‘__kernel_sa_family_t’
      __kernel_sa_family_t ss_family;  /* address family */
      ^
    error: command 'arm-linux-gnueabihf-gcc' failed with exit status 1

    ----------------------------------------
Command "/home/sebastian/.local/share/letsencrypt/bin/python2.7 -u -c "import setuptools, tokenize;__file__='/tmp/pip-build-PU8zkR/psutil/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('
', '
'), __file__, 'exec'))" install --record /tmp/pip-ulwIP3-record/install-record.txt --single-version-externally-managed --compile --install-headers /home/sebastian/.local/share/letsencrypt/include/site/python2.7/psutil" failed with error code 1 in /tmp/pip-build-PU8zkR/psutil
You are using pip version 8.0.3, however version 8.1.1 is available.
You should consider upgrading via the 'pip install --upgrade pip' command.
festum commented on 11 Dec 2015
Hi,
I follow the instruction ran letsencrypt on a vagrant virtual machine and got...
vagrant@aws-lambda:/letsencrypt$ ./letsencrypt-auto certonly --standalone --email mymail@mail.com -d www.mysite.com
An unexpected error occurred:
SSLError: bad handshake: Error([('SSL routines', 'SSL3_GET_SERVER_CERTIFICATE', 'certificate verify failed')],)
Please see the logfiles in /var/log/letsencrypt for more details.
vagrant@aws-lambda:/letsencrypt$ sudo cat /var/log/letsencrypt/letsencrypt.log
2015-12-11 05:58:10,576:DEBUG:letsencrypt.cli:Root logging level set at 30
2015-12-11 05:58:10,576:INFO:letsencrypt.cli:Saving debug log to /var/log/letsencrypt/letsencrypt.log
2015-12-11 05:58:10,576:DEBUG:letsencrypt.cli:letsencrypt version: 0.1.0
2015-12-11 05:58:10,576:DEBUG:letsencrypt.cli:Arguments: ['--standalone', '--email', 'mymail@mail.com', '-d', 'www.mysite.com']
2015-12-11 05:58:10,576:DEBUG:letsencrypt.cli:Discovered plugins: PluginsRegistry(PluginEntryPoint#apache,PluginEntryPoint#webroot,PluginEntryPoint#null,PluginEntryPoint#manual,PluginEntryPoint#standalone)
2015-12-11 05:58:10,582:DEBUG:letsencrypt.cli:Requested authenticator standalone and installer None
2015-12-11 05:58:10,678:DEBUG:letsencrypt.display.ops:Single candidate plugin: * standalone
Description: Automatically use a temporary webserver
Interfaces: IAuthenticator, IPlugin
Entry point: standalone = letsencrypt.plugins.standalone:Authenticator
Initialized: <letsencrypt.plugins.standalone.Authenticator object at 0x7ffa3ab38bd0>
Prep: True
2015-12-11 05:58:10,678:DEBUG:letsencrypt.cli:Selected authenticator <letsencrypt.plugins.standalone.Authenticator object at 0x7ffa3ab38bd0> and installer None
2015-12-11 05:58:10,949:DEBUG:root:Sending GET request to https://acme-v01.api.letsencrypt.org/directory. args: (), kwargs: {}
2015-12-11 05:58:10,955:INFO:requests.packages.urllib3.connectionpool:Starting new HTTPS connection (1): acme-v01.api.letsencrypt.org
2015-12-11 05:58:11,059:DEBUG:letsencrypt.cli:Exiting abnormally:
Traceback (most recent call last):
File "/home/vagrant/.local/share/letsencrypt/bin/letsencrypt", line 11, in
sys.exit(main())
File "/home/vagrant/.local/share/letsencrypt/local/lib/python2.7/site-packages/letsencrypt/cli.py", line 1283, in main
return args.func(args, config, plugins)
File "/home/vagrant/.local/share/letsencrypt/local/lib/python2.7/site-packages/letsencrypt/cli.py", line 501, in obtain_cert
le_client = _init_le_client(args, config, authenticator, installer)
File "/home/vagrant/.local/share/letsencrypt/local/lib/python2.7/site-packages/letsencrypt/cli.py", line 174, in _init_le_client
acc, acme = _determine_account(args, config)
File "/home/vagrant/.local/share/letsencrypt/local/lib/python2.7/site-packages/letsencrypt/cli.py", line 161, in _determine_account
config, account_storage, tos_cb=_tos_cb)
File "/home/vagrant/.local/share/letsencrypt/local/lib/python2.7/site-packages/letsencrypt/client.py", line 116, in register
acme = acme_from_config_key(config, key)
File "/home/vagrant/.local/share/letsencrypt/local/lib/python2.7/site-packages/letsencrypt/client.py", line 41, in acme_from_config_key
return acme_client.Client(config.server, key=key, net=net)
File "/home/vagrant/.local/share/letsencrypt/local/lib/python2.7/site-packages/acme/client.py", line 60, in init
self.net.get(directory).json())
File "/home/vagrant/.local/share/letsencrypt/local/lib/python2.7/site-packages/acme/client.py", line 609, in get
self._send_request('GET', url, *_kwargs), content_type=content_type)
File "/home/vagrant/.local/share/letsencrypt/local/lib/python2.7/site-packages/acme/client.py", line 591, in _send_request
response = requests.request(method, url, *args, *_kwargs)
File "/home/vagrant/.local/share/letsencrypt/local/lib/python2.7/site-packages/requests/api.py", line 50, in request
response = session.request(method=method, url=url, *_kwargs)
File "/home/vagrant/.local/share/letsencrypt/local/lib/python2.7/site-packages/requests/sessions.py", line 468, in request
resp = self.send(prep, *_send_kwargs)
File "/home/vagrant/.local/share/letsencrypt/local/lib/python2.7/site-packages/requests/sessions.py", line 576, in send
r = adapter.send(request, **kwargs)
File "/home/vagrant/.local/share/letsencrypt/local/lib/python2.7/site-packages/requests/adapters.py", line 433, in send
raise SSLError(e, request=request)
SSLError: bad handshake: Error([('SSL routines', 'SSL3_GET_SERVER_CERTIFICATE', 'certificate verify failed')],)
Do it again in a docker container on my xen vm:
root@c8d18daf6ee0:/letsencrypt# ./letsencrypt-auto certonly --standalone --email mymail@mail.com -d www.mysite.com
An unexpected error occurred:
PythonDialogBug
Please see the logfiles in /var/log/letsencrypt for more details.
root@c8d18daf6ee0:/letsencrypt# cat /var/log/letsencrypt/letsencrypt.log
root@c8d18daf6ee0:~/letsencrypt# cat /var/log/letsencrypt/letsencrypt.log
2015-12-11 06:12:24,090:DEBUG:letsencrypt.cli:Root logging level set at 30
2015-12-11 06:12:24,094:INFO:letsencrypt.cli:Saving debug log to /var/log/letsencrypt/letsencrypt.log
2015-12-11 06:12:24,095:DEBUG:letsencrypt.cli:letsencrypt version: 0.1.0
2015-12-11 06:12:24,095:DEBUG:letsencrypt.cli:Arguments: ['--standalone', '--email', 'mymail@mail.com', '-d', 'www.mysite.com']
2015-12-11 06:12:24,099:DEBUG:letsencrypt.cli:Discovered plugins: PluginsRegistry(PluginEntryPoint#apache,PluginEntryPoint#webroot,PluginEntryPoint#null,PluginEntryPoint#manual,PluginEntryPoint#standalone)
2015-12-11 06:12:24,123:DEBUG:letsencrypt.cli:Requested authenticator standalone and installer None
2015-12-11 06:12:24,324:DEBUG:letsencrypt.display.ops:Single candidate plugin: * standalone
Description: Automatically use a temporary webserver
Interfaces: IAuthenticator, IPlugin
Entry point: standalone = letsencrypt.plugins.standalone:Authenticator
Initialized: <letsencrypt.plugins.standalone.Authenticator object at 0x7fcc846964d0>
Prep: True
2015-12-11 06:12:24,327:DEBUG:letsencrypt.cli:Selected authenticator <letsencrypt.plugins.standalone.Authenticator object at 0x7fcc846964d0> and installer None
2015-12-11 06:12:24,411:DEBUG:root:Sending GET request to https://acme-v01.api.letsencrypt.org/directory. args: (), kwargs: {}
2015-12-11 06:12:24,419:INFO:requests.packages.urllib3.connectionpool:Starting new HTTPS connection (1): acme-v01.api.letsencrypt.org
2015-12-11 06:12:24,677:DEBUG:requests.packages.urllib3.connectionpool:"GET /directory HTTP/1.1" 200 263
2015-12-11 06:12:24,682:DEBUG:root:Received <Response [200]>. Headers: {'Content-Length': '263', 'Expires': 'Fri, 11 Dec 2015 05:57:32 GMT', 'Strict-Transport-Security': 'max-age=604800', 'Server': 'nginx', 'Connection': 'keep-alive', 'Pragma': 'no-cache', 'Cache-Control': 'max-age=0, no-cache, no-store', 'Date': 'Fri, 11 Dec 2015 05:57:32 GMT', 'X-Frame-Options': 'DENY', 'Content-Type': 'application/json', 'Replay-Nonce': 'qZzxpBpU_FGvYUQIQN0KwNuy7bbju-tnhAPDe6ajkDQ'}. Content: '{"new-authz":"https://acme-v01.api.letsencrypt.org/acme/new-authz","new-cert":"https://acme-v01.api.letsencrypt.org/acme/new-cert","new-reg":"https://acme-v01.api.letsencrypt.org/acme/new-reg","revoke-cert":"https://acme-v01.api.letsencrypt.org/acme/revoke-cert"}'
2015-12-11 06:12:24,683:DEBUG:acme.client:Received response <Response [200]> (headers: {'Content-Length': '263', 'Expires': 'Fri, 11 Dec 2015 05:57:32 GMT', 'Strict-Transport-Security': 'max-age=604800', 'Server': 'nginx', 'Connection': 'keep-alive', 'Pragma': 'no-cache', 'Cache-Control': 'max-age=0, no-cache, no-store', 'Date': 'Fri, 11 Dec 2015 05:57:32 GMT', 'X-Frame-Options': 'DENY', 'Content-Type': 'application/json', 'Replay-Nonce': 'qZzxpBpU_FGvYUQIQN0KwNuy7bbju-tnhAPDe6ajkDQ'}): '{"new-authz":"https://acme-v01.api.letsencrypt.org/acme/new-authz","new-cert":"https://acme-v01.api.letsencrypt.org/acme/new-cert","new-reg":"https://acme-v01.api.letsencrypt.org/acme/new-reg","revoke-cert":"https://acme-v01.api.letsencrypt.org/acme/revoke-cert"}'
2015-12-11 06:12:24,684:DEBUG:root:Requesting fresh nonce
2015-12-11 06:12:24,684:DEBUG:root:Sending HEAD request to https://acme-v01.api.letsencrypt.org/acme/new-reg. args: (), kwargs: {}
2015-12-11 06:12:24,685:INFO:requests.packages.urllib3.connectionpool:Starting new HTTPS connection (1): acme-v01.api.letsencrypt.org
2015-12-11 06:12:24,774:DEBUG:requests.packages.urllib3.connectionpool:"HEAD /acme/new-reg HTTP/1.1" 405 0
2015-12-11 06:12:24,777:DEBUG:root:Received <Response [405]>. Headers: {'Content-Length': '0', 'Pragma': 'no-cache', 'Expires': 'Fri, 11 Dec 2015 05:57:33 GMT', 'Server': 'nginx', 'Connection': 'keep-alive', 'Allow': 'POST', 'Cache-Control': 'max-age=0, no-cache, no-store', 'Date': 'Fri, 11 Dec 2015 05:57:33 GMT', 'Content-Type': 'application/problem+json', 'Replay-Nonce': '7jep9LmBJS6t15Zn3vS4HOeubDHfKbioZOY89vsvgx0'}. Content: ''
2015-12-11 06:12:24,778:DEBUG:acme.client:Storing nonce: '\xee7\xa9\xf4\xb9\x81%.\xad\xd7\x96g\xde\xf4\xb8\x1c\xe7\xael1\xdf)\xb8\xa8d\xe6<\xf6\xfb/\x83\x1d'
2015-12-11 06:12:24,779:DEBUG:acme.jose.json_util:Omitted empty fields: agreement=None, certificates=None, authorizations=None, key=None
2015-12-11 06:12:24,780:DEBUG:acme.client:Serialized JSON: {"contact": ["mailto:mymail@mail.com"], "resource": "new-reg"}
2015-12-11 06:12:24,781:DEBUG:acme.jose.json_util:Omitted empty fields: x5c=(), crit=(), typ=None, alg=None, jku=None, cty=None, x5t=None, kid=None, x5tS256=None, x5u=None, jwk=None
2015-12-11 06:12:24,786:DEBUG:acme.jose.json_util:Omitted empty fields: x5c=(), crit=(), typ=None, jku=None, nonce=None, cty=None, x5t=None, kid=None, x5tS256=None, x5u=None
2015-12-11 06:12:24,786:DEBUG:root:Sending POST request to https://acme-v01.api.letsencrypt.org/acme/new-reg. args: (), kwargs: {'data': '{"header": {"alg": "RS256", "jwk": {"e": "AQAB", "kty": "RSA", "n": "306j06sWxpaDuyXVNet3H4EYTdk3WvuWTeaYZn58dUk75etO7fCKeUH6FtRwqdq01pfVVKkmrF0F-tr08fhSEBmbZXfBR6G1H0PqO4R67JBZMNpHo7GK8-9MdhykBa-MlZiZdeA1ZJAEFi2d0FcQir2hz1m-JxasU2Dpr1mncMoqI3NC_HbDxaPkkKdg3c_ksSpIIzlTBriejRkvtKWdRNAuMFZ1hyzN-AmTFFUZYYDaxpWIr0vjMOSpWk8dZeUDhTVRSShFiiPLJ0QhjUdToDHHU20yZ4744fugedANuftA8Kof-x2NRqv0goG1drnfCkarqOLVvxlRJFkN2gPNSQ"}}, "protected": "eyJub25jZSI6ICI3amVwOUxtQkpTNnQxNVpuM3ZTNEhPZXViREhmS2Jpb1pPWTg5dnN2Z3gwIn0", "payload": "eyJjb250YWN0IjogWyJtYWlsdG86ZmVzdHVtQGcucGwiXSwgInJlc291cmNlIjogIm5ldy1yZWcifQ", "signature": "Pvsi2iFsy_DqwCejOFM3ixZF9FGcAQ1McYiA7s_F6cmCfyYAPUjWLUwkOladi_Pm0vG-5gCDq_lINpATDSlNtOg-VM_CVhxXSbK_EUnt_0HKW379a3Aq2eguZr1Zx59vo3BtYMPedTaPRwMLa1sZ7KknXwiO155qzqomu6wXWz6R2sv0-IHeAL1FZrjsf5rHBmgFu9sXvwqe7wtg6n420eEZohNS8VNJHCuonASw3Vj6AUXxdFEzbgLdMfGJEKqc_8ef3BLFf6JISR8DCz6KEtxCeXNEnZjGqPfXRtfeNbelxKwrOn0RT3nynjgaLEmgDC3_AeQAInsU0Hd2IVWV5w"}'}
2015-12-11 06:12:24,788:INFO:requests.packages.urllib3.connectionpool:Starting new HTTPS connection (1): acme-v01.api.letsencrypt.org
2015-12-11 06:12:25,501:DEBUG:requests.packages.urllib3.connectionpool:"POST /acme/new-reg HTTP/1.1" 201 500
2015-12-11 06:12:25,504:DEBUG:root:Received <Response [201]>. Headers: {'Content-Length': '500', 'Expires': 'Fri, 11 Dec 2015 05:57:33 GMT', 'Strict-Transport-Security': 'max-age=604800', 'Server': 'nginx', 'Connection': 'keep-alive', 'Link': 'https://acme-v01.api.letsencrypt.org/acme/new-authz;rel="next", https://letsencrypt.org/documents/LE-SA-v1.0.1-July-27-2015.pdf;rel="terms-of-service"', 'Location': 'https://acme-v01.api.letsencrypt.org/acme/reg/71403', 'Pragma': 'no-cache', 'Cache-Control': 'max-age=0, no-cache, no-store', 'Date': 'Fri, 11 Dec 2015 05:57:33 GMT', 'X-Frame-Options': 'DENY', 'Content-Type': 'application/json', 'Replay-Nonce': 'V-4028lPRVSDif4RQ-EYCoX09mciT1FAD2Rfr5LBR-Y'}. Content: '{"id":71403,"key":{"kty":"RSA","n":"306j06sWxpaDuyXVNet3H4EYTdk3WvuWTeaYZn58dUk75etO7fCKeUH6FtRwqdq01pfVVKkmrF0F-tr08fhSEBmbZXfBR6G1H0PqO4R67JBZMNpHo7GK8-9MdhykBa-MlZiZdeA1ZJAEFi2d0FcQir2hz1m-JxasU2Dpr1mncMoqI3NC_HbDxaPkkKdg3c_ksSpIIzlTBriejRkvtKWdRNAuMFZ1hyzN-AmTFFUZYYDaxpWIr0vjMOSpWk8dZeUDhTVRSShFiiPLJ0QhjUdToDHHU20yZ4744fugedANuftA8Kof-x2NRqv0goG1drnfCkarqOLVvxlRJFkN2gPNSQ","e":"AQAB"},"contact":["mailto:mymail@mail.com"],"initialIp":"SERVER_IP_ADDR","createdAt":"2015-12-11T05:57:33.735332777Z"}'
2015-12-11 06:12:25,505:DEBUG:acme.client:Storing nonce: 'W\xee4\xdb\xc9OET\x83\x89\xfe\x11C\xe1\x18\n\x85\xf4\xf6g"OQ@\x0fd_\xaf\x92\xc1G\xe6'
2015-12-11 06:12:25,505:DEBUG:acme.client:Received response <Response [201]> (headers: {'Content-Length': '500', 'Expires': 'Fri, 11 Dec 2015 05:57:33 GMT', 'Strict-Transport-Security': 'max-age=604800', 'Server': 'nginx', 'Connection': 'keep-alive', 'Link': 'https://acme-v01.api.letsencrypt.org/acme/new-authz;rel="next", https://letsencrypt.org/documents/LE-SA-v1.0.1-July-27-2015.pdf;rel="terms-of-service"', 'Location': 'https://acme-v01.api.letsencrypt.org/acme/reg/71403', 'Pragma': 'no-cache', 'Cache-Control': 'max-age=0, no-cache, no-store', 'Date': 'Fri, 11 Dec 2015 05:57:33 GMT', 'X-Frame-Options': 'DENY', 'Content-Type': 'application/json', 'Replay-Nonce': 'V-4028lPRVSDif4RQ-EYCoX09mciT1FAD2Rfr5LBR-Y'}): '{"id":71403,"key":{"kty":"RSA","n":"306j06sWxpaDuyXVNet3H4EYTdk3WvuWTeaYZn58dUk75etO7fCKeUH6FtRwqdq01pfVVKkmrF0F-tr08fhSEBmbZXfBR6G1H0PqO4R67JBZMNpHo7GK8-9MdhykBa-MlZiZdeA1ZJAEFi2d0FcQir2hz1m-JxasU2Dpr1mncMoqI3NC_HbDxaPkkKdg3c_ksSpIIzlTBriejRkvtKWdRNAuMFZ1hyzN-AmTFFUZYYDaxpWIr0vjMOSpWk8dZeUDhTVRSShFiiPLJ0QhjUdToDHHU20yZ4744fugedANuftA8Kof-x2NRqv0goG1drnfCkarqOLVvxlRJFkN2gPNSQ","e":"AQAB"},"contact":["mailto:mymail@mail.com"],"initialIp":"SERVER_IP_ADDR","createdAt":"2015-12-11T05:57:33.735332777Z"}'
2015-12-11 06:12:25,537:DEBUG:letsencrypt.cli:Exiting abnormally:
Traceback (most recent call last):
File "/root/.local/share/letsencrypt/bin/letsencrypt", line 11, in
sys.exit(main())
File "/root/.local/share/letsencrypt/local/lib/python2.7/site-packages/letsencrypt/cli.py", line 1283, in main
return args.func(args, config, plugins)
File "/root/.local/share/letsencrypt/local/lib/python2.7/site-packages/letsencrypt/cli.py", line 501, in obtain_cert
le_client = _init_le_client(args, config, authenticator, installer)
File "/root/.local/share/letsencrypt/local/lib/python2.7/site-packages/letsencrypt/cli.py", line 174, in _init_le_client
acc, acme = _determine_account(args, config)
File "/root/.local/share/letsencrypt/local/lib/python2.7/site-packages/letsencrypt/cli.py", line 161, in _determine_account
config, account_storage, tos_cb=_tos_cb)
File "/root/.local/share/letsencrypt/local/lib/python2.7/site-packages/letsencrypt/client.py", line 121, in register
if tos_cb is not None and not tos_cb(regr):
File "/root/.local/share/letsencrypt/local/lib/python2.7/site-packages/letsencrypt/cli.py", line 157, in _tos_cb
msg, "Agree", "Cancel")
File "/root/.local/share/letsencrypt/local/lib/python2.7/site-packages/letsencrypt/display/util.py", line 140, in yesno
yes_label=yes_label, no_label=no_label)
File "/root/.local/share/letsencrypt/local/lib/python2.7/site-packages/dialog.py", line 3749, in yesno
kwargs)
File "/root/.local/share/letsencrypt/local/lib/python2.7/site-packages/dialog.py", line 1765, in _widget_with_no_output
widget_name, output))
PythonDialogBug
I've ran it on Mac too:
✘  /fe0/git/letsencrypt   master  ./letsencrypt-auto certonly --standalone --email mymail@mail.com -d mysite.com -d www.mysite.com -d dev.mysite.com -d fe0.mysite.com -d pro.mysite.com -d blog.mysite.com -d git.mysite.com -d jenkins.mysite.com --debug
grep: /etc/os-release: No such file or directory
Bootstrapping dependencies for Mac OS X...
==> Installing dependencies for augeas: libxml2, readline
==> Installing augeas dependency: libxml2
==> Downloading https://homebrew.bintray.com/bottles/libxml2-2.9.2.yosemite.bottle.1.tar.gz
################################################################## 100.0%
==> Pouring libxml2-2.9.2.yosemite.bottle.1.tar.gz
==> Caveats
This formula is keg-only, which means it was not symlinked into /usr/local.
OS X already provides this software and installing another version in
parallel can cause all kinds of trouble.
Generally there are no consequences of this for you. If you build your
own software and it requires this formula, you'll need to add to your
build variables:
LDFLAGS: -L/usr/local/opt/libxml2/lib
CPPFLAGS: -I/usr/local/opt/libxml2/include
==> Summary
/usr/local/Cellar/libxml2/2.9.2: 275 files, 11M
==> Installing augeas dependency: readline
==> Downloading https://homebrew.bintray.com/bottles/readline-6.3.8.yosemite.bottle.tar.gz
################################################################## 100.0%
==> Pouring readline-6.3.8.yosemite.bottle.tar.gz
==> Caveats
This formula is keg-only, which means it was not symlinked into /usr/local.
OS X provides the BSD libedit library, which shadows libreadline.
In order to prevent conflicts when programs look for libreadline we are
defaulting this GNU Readline installation to keg-only.
Generally there are no consequences of this for you. If you build your
own software and it requires this formula, you'll need to add to your
build variables:
LDFLAGS: -L/usr/local/opt/readline/lib
CPPFLAGS: -I/usr/local/opt/readline/include
==> Summary
/usr/local/Cellar/readline/6.3.8: 40 files, 2.1M
==> Installing augeas
==> Downloading https://homebrew.bintray.com/bottles/augeas-1.4.0.yosemite.bottle.1.tar.gz
################################################################## 100.0%
==> Pouring augeas-1.4.0.yosemite.bottle.1.tar.gz
==> Caveats
Lenses have been installed to:
/usr/local/share/augeas/lenses/dist
==> Summary
/usr/local/Cellar/augeas/1.4.0: 420 files, 3.9M
==> Downloading https://homebrew.bintray.com/bottles/dialog-1.2-20150528.yosemite.bottle.tar.gz
################################################################## 100.0%
==> Pouring dialog-1.2-20150528.yosemite.bottle.tar.gz
/usr/local/Cellar/dialog/1.2-20150528: 13 files, 836K
pip Not Installed
Installing python from Homebrew...
==> Installing dependencies for python: sqlite, openssl
==> Installing python dependency: sqlite
==> Downloading https://homebrew.bintray.com/bottles/sqlite-3.9.2.yosemite.bottle.tar.gz
################################################################## 100.0%
==> Pouring sqlite-3.9.2.yosemite.bottle.tar.gz
==> Caveats
This formula is keg-only, which means it was not symlinked into /usr/local.
OS X provides an older sqlite3.
Generally there are no consequences of this for you. If you build your
own software and it requires this formula, you'll need to add to your
build variables:
LDFLAGS: -L/usr/local/opt/sqlite/lib
CPPFLAGS: -I/usr/local/opt/sqlite/include
==> Summary
/usr/local/Cellar/sqlite/3.9.2: 9 files, 2.8M
==> Installing python dependency: openssl
==> Downloading https://homebrew.bintray.com/bottles/openssl-1.0.2d_1.yosemite.bottle.tar.gz
################################################################## 100.0%
==> Pouring openssl-1.0.2d_1.yosemite.bottle.tar.gz
==> Caveats
A CA file has been bootstrapped using certificates from the system
keychain. To add additional certificates, place .pem files in
/usr/local/etc/openssl/certs
and run
/usr/local/opt/openssl/bin/c_rehash
This formula is keg-only, which means it was not symlinked into /usr/local.
Apple has deprecated use of OpenSSL in favor of its own TLS and crypto libraries
Generally there are no consequences of this for you. If you build your
own software and it requires this formula, you'll need to add to your
build variables:
LDFLAGS: -L/usr/local/opt/openssl/lib
CPPFLAGS: -I/usr/local/opt/openssl/include
==> Summary
/usr/local/Cellar/openssl/1.0.2d_1: 464 files, 18M
==> Installing python
==> Downloading https://homebrew.bintray.com/bottles/python-2.7.10_2.yosemite.bottle.3.tar.gz
################################################################## 100.0%
==> Pouring python-2.7.10_2.yosemite.bottle.3.tar.gz
==> /usr/local/Cellar/python/2.7.10_2/bin/python -s setup.py --no-user-cfg install --force --verbose --single-version-externally-managed --reco
==> /usr/local/Cellar/python/2.7.10_2/bin/python -s setup.py --no-user-cfg install --force --verbose --single-version-externally-managed --reco
==> /usr/local/Cellar/python/2.7.10_2/bin/python -s setup.py --no-user-cfg install --force --verbose --single-version-externally-managed --reco
==> Caveats
Pip and setuptools have been installed. To update them
pip install --upgrade pip setuptools
You can install Python packages with
pip install
They will install into the site-package directory
/usr/local/lib/python2.7/site-packages
See: https://github.com/Homebrew/homebrew/blob/master/share/doc/homebrew/Homebrew-and-Python.md
.app bundles were installed.
Run brew linkapps python to symlink these to /Applications.
==> Summary
/usr/local/Cellar/python/2.7.10_2: 4867 files, 76M
virtualenv Not Installed
Installing with pip
Collecting virtualenv
Downloading virtualenv-13.1.2-py2.py3-none-any.whl (1.7MB)
100% |████████████████████████████████| 1.7MB 192kB/s
Installing collected packages: virtualenv
Successfully installed virtualenv-13.1.2
Creating virtual environment...
Updating letsencrypt and virtual environment dependencies.......
Running with virtualenv: sudo /Users/Festum/.local/share/letsencrypt/bin/letsencrypt certonly --standalone --email mymail@mail.com -d mysite.com -d www.mysite.com -d dev.mysite.com -d fe0.mysite.com -d pro.mysite.com -d blog.mysite.com -d git.mysite.com -d jenkins.mysite.com --debug
Password:
Traceback (most recent call last):
File "/Users/Festum/.local/share/letsencrypt/bin/letsencrypt", line 11, in
sys.exit(main())
File "/Users/Festum/.local/share/letsencrypt/lib/python2.7/site-packages/letsencrypt/cli.py", line 1283, in main
return args.func(args, config, plugins)
File "/Users/Festum/.local/share/letsencrypt/lib/python2.7/site-packages/letsencrypt/cli.py", line 501, in obtain_cert
le_client = _init_le_client(args, config, authenticator, installer)
File "/Users/Festum/.local/share/letsencrypt/lib/python2.7/site-packages/letsencrypt/cli.py", line 174, in _init_le_client
acc, acme = _determine_account(args, config)
File "/Users/Festum/.local/share/letsencrypt/lib/python2.7/site-packages/letsencrypt/cli.py", line 161, in _determine_account
config, account_storage, tos_cb=_tos_cb)
File "/Users/Festum/.local/share/letsencrypt/lib/python2.7/site-packages/letsencrypt/client.py", line 116, in register
acme = acme_from_config_key(config, key)
File "/Users/Festum/.local/share/letsencrypt/lib/python2.7/site-packages/letsencrypt/client.py", line 41, in acme_from_config_key
return acme_client.Client(config.server, key=key, net=net)
File "/Users/Festum/.local/share/letsencrypt/lib/python2.7/site-packages/acme/client.py", line 60, in init
self.net.get(directory).json())
File "/Users/Festum/.local/share/letsencrypt/lib/python2.7/site-packages/acme/client.py", line 609, in get
self._send_request('GET', url, *_kwargs), content_type=content_type)
File "/Users/Festum/.local/share/letsencrypt/lib/python2.7/site-packages/acme/client.py", line 591, in _send_request
response = requests.request(method, url, *args, *_kwargs)
File "/Users/Festum/.local/share/letsencrypt/lib/python2.7/site-packages/requests/api.py", line 50, in request
response = session.request(method=method, url=url, *_kwargs)
File "/Users/Festum/.local/share/letsencrypt/lib/python2.7/site-packages/requests/sessions.py", line 468, in request
resp = self.send(prep, *_send_kwargs)
File "/Users/Festum/.local/share/letsencrypt/lib/python2.7/site-packages/requests/sessions.py", line 576, in send
r = adapter.send(request, **kwargs)
File "/Users/Festum/.local/share/letsencrypt/lib/python2.7/site-packages/requests/adapters.py", line 433, in send
raise SSLError(e, request=request)
SSLError: ("bad handshake: Error([('SSL routines', 'ssl3_get_server_certificate', 'certificate verify failed')],)",)
Did I do something in the wrong way?
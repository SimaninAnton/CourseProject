Bizarrus commented on 30 Jul 2017
The ACME Server is not reachable on my side:
tracepath acme-v01.api.letsencrypt.org
 1?: [LOCALHOST]                        0.009ms pmtu 1500
 1:  no reply
 2:  no reply
 3:  no reply
 4:  no reply
 5:  no reply
 6:  no reply
 7:  no reply
 8:  no reply
 9:  no reply
10:  no reply
11:  no reply
12:  no reply
13:  no reply
14:  no reply
15:  no reply
16:  no reply
17:  no reply
18:  no reply
19:  no reply
20:  no reply
21:  no reply
22:  no reply
23:  no reply
24:  no reply
25:  no reply
26:  no reply
27:  no reply
28:  no reply
29:  no reply
30:  no reply
     Too many hops: pmtu 1500
     Resume: pmtu 1500
My operating system is (include version):
Debian 9, new installed minimal version with nginx.
I installed Certbot with (certbot-auto, OS package manager, pip, etc):
apt Packetmanager (apt-get install certbot)
I ran this command and it produced this output:
root@mySite/var/log # certbot certonly --manual -w /var/www/html --debug --cert-name mySite --rsa-key-size 4096 --email system@mySite.de -d mySite.de -d www.mySite.de -d testserver.mySite.de -d scripts.mySite.de -d chat.mySite.de -d developer.mySite.de -d photo.mySite.de -d forum.mySite.de
Saving debug log to /var/log/letsencrypt/letsencrypt.log
For security reasons, im using here mySite.de as domain.
Certbot's behavior differed from what I expected because:
The server can't connect to acme-v01.api.letsencrypt.org.
Here is a Certbot log showing the issue (if available):
2017-07-30 10:14:38,267:DEBUG:certbot.main:Root logging level set at 20
2017-07-30 10:14:38,267:INFO:certbot.main:Saving debug log to /var/log/letsencrypt/letsencrypt.log
2017-07-30 10:14:38,268:DEBUG:certbot.main:certbot version: 0.10.2
2017-07-30 10:14:38,268:DEBUG:certbot.main:Arguments: ['--manual', '-w', '/var/www/html', '--debug', '--cert-name', 'mySite', '--rsa-key-size', '4096', '--email', 'system@mySite.de', '-d', 'mySite.de', '-d', 'www.mySite.de', '-d', 'testserver.mySite.de', '-d', 'scripts.mySite.de', '-d', 'chat.mySite.de', '-d', 'developer.mySite.de', '-d', 'photo.mySite.de', '-d', 'forum.mySite.de']
2017-07-30 10:14:38,268:DEBUG:certbot.main:Discovered plugins: PluginsRegistry(PluginEntryPoint#webroot,PluginEntryPoint#null,PluginEntryPoint#manual,PluginEntryPoint#standalone)
2017-07-30 10:14:38,268:DEBUG:certbot.plugins.selection:Requested authenticator manual and installer None
2017-07-30 10:14:38,268:DEBUG:certbot.plugins.selection:Single candidate plugin: * manual
Description: Manual configuration or run your own shell scripts
Interfaces: IAuthenticator, IPlugin
Entry point: manual = certbot.plugins.manual:Authenticator
Initialized: <certbot.plugins.manual.Authenticator object at 0x7fa575ea5350>
Prep: True
2017-07-30 10:14:38,269:DEBUG:certbot.plugins.selection:Selected authenticator <certbot.plugins.manual.Authenticator object at 0x7fa575ea5350> and installer None
2017-07-30 10:14:39,262:DEBUG:root:Sending GET request to https://acme-v01.api.letsencrypt.org/directory.
2017-07-30 10:14:39,276:DEBUG:requests.packages.urllib3.connectionpool:Starting new HTTPS connection (1): acme-v01.api.letsencrypt.org
Here is the relevant nginx server block or Apache virtualhost for the domain I am configuring:
currently nothing, because i want to request the certs - After request, i will create an VHost-Config. nginx is currently using the default VHost after installation
aptalca commented on 13 Nov 2018
I'm trying to get a wildcard cert that covers both the wildcard subdomains and the root domain in a single cert.
The issue is a result of the following combo:
duckdns only allows one txt record per domain (which is also set for all subdomains).
during validation, certbot wants to first set all of the txt records, and then validate all of them rather than setting the first record, validating the record, setting the second record and then validating the second record.
certbot tries to validate the root domain twice, once for the wildcard, and once for the root itself (another github issue mentioned this was an acme limitation)
So in my case, my hook script sets the first txt record (for the wildcard). And then it sets the txt record for the second (root), essentially overwriting the first. Then during validation, the first txt record fails as it has now been overwritten.
Is there any way to get around this limitation?
Currently, I'm able to get a cert for either sub.duckdns.org or *.sub.duckdns.org but not one that covers both
Thanks
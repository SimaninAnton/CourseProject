mitar commented on 20 May 2016
I am using this script to automatically generate certificates for my domains. I have the following command:
/letsencrypt/data/letsencrypt/bin/letsencrypt --no-self-upgrade --noninteractive --quiet --agree-tos --email "${LETSENCRYPT_EMAIL}" \
 --config-dir /ssl/letsencrypt certonly --webroot --keep-until-expiring --rsa-key-size 4096 \
 --webroot-map "${LIST_JSON}"
As you see, I use --noninteractive. But despite this, my automatic process has been stopped by (I see in the log) the following prompt:
You have an existing certificate that contains a portion of the domains you requested (ref: /ssl/letsencrypt/renewal/example.com.conf)

It contains these names: example.com

You requested these names for the new certificate: example.com, test.example.com.

Do you want to expand and replace this existing certificate with the new certificate?

(You can set this with the --expand flag)
I do not want to expand it the domain, and I would assume that --noninteractive should choose the default: not to expand and just do it.
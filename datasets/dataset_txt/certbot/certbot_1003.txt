CordlessWool commented on 21 Aug 2017 â€¢
edited
My operating system is (include version):
debian:8.9 but I am running the docker container
I installed Certbot with (certbot-auto, OS package manager, pip, etc):
docker container
I ran this command and it produced this output:
docker run -t --rm
-v "/etc/letsencrypt:/etc/letsencrypt"
-v "/tmp:/var/www"
-v "/var/lib/letsencrypt:/var/lib/letsencrypt"
certbot/certbot:latest renew --webroot --webroot-path /var/www --rsa-key-size 4096
Attempting to renew cert (sub.domain.tld) from /etc/letsencrypt/renewal/sub.domain.tld.conf produced an unexpected error: Failed authorization procedure. sub.domain.tld (http-01): urn:acme:error:connection :: The server could not connect to the client to verify the domain :: Fetching http://sub.domain.tld/.well-known/acme-challenge/zOq3BHOb7KqO6WALfFalHWoGmeUTe2ld5UY1-N5f3M0: Timeout. Skipping.d
Certbot's behavior differed from what I expected because:
If I run it with --dry-run it says everything is ok. On a other server it also works. The different between the two server is that one have a fix IP. On the server it fails there is a cname entry to a dyndns url
Here is a Certbot log showing the issue (if available):
Logs are stored in /var/log/letsencrypt by default. Feel free to redact domains, e-mail and IP addresses as you see fit.
Here is the relevant nginx server block or Apache virtualhost for the domain I am configuring:
location /.well-known/acme-challenge {
root /tmp;
}
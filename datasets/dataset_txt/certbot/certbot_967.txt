Member
bmw commented on 15 Sep 2017 â€¢
edited
Some users get themselves into a situation where --dry-run works but production does not (see #3231 and #5040). This is due to the user having a valid authorization from staging which is reused, but not from production. This results in people having to use the production server to test their configuration.
We should do something to work around this problem. This probably involves deactivating valid authorizations so the challenge is actually checked by the CA. This requires obtaining the URL of a valid authorization and currently the only way I'm aware of to get the URL of a valid authz from Let's Encrypt that will be reused is to request new authzs for the same domains.
Perhaps we should implement a subcommand that requests a new authz from Let's Encrypt and deactivates it and/or deactivate any valid authorization returned during a --dry-run and automatically request a new one.
Related #4945
cc @jsha, @SwartzCr
1
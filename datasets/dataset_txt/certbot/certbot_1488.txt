frozen-sky commented on 13 Jan 2017
The renew function does not call installer.deploy_cert() on every renewal. While this is expected behavior, there are also use-cases where it is desired the installer does handle/process the certificate on renewal. Use-cases are coping certs into a java keystore or push them to some other location/database where they are used. Not all application can work with (sym)linking to the certificates/keystore certbot provides itself.
Of course this kind or processing can also be handled by a wrapper script and/or by using the hooks available in renew command. But it would be nicer if this is possible within the plugin infrastructure itself, as it is very likely this code would be very similar to the deploy_cert() code when a new certificate is requested and it is better to keep similar processing in the same place.
We propose to introduce a renew_deploy_cert() in the IInstaller interface, and call this once a certificate is renewed. Standard the implementation should be empty, to keep the same behavior as in the current situation. But now it's up to the plugin developer to decide if they do or don't want to handle the new certificate in some manner.
tested against 0.9.3
tested on 64-bit/debian jessie
(patch pending, testing against 0.11.0.dev.0 pending)
1
BenjaminUrquhart commented on 4 Jul 2017 â€¢
edited
My operating system is (include version):
Raspbian 8 (Debian Jessie), Linux 4.4.27-v7+
I installed Certbot with (certbot-auto, OS package manager, pip, etc):
certbot-auto
I ran this command and it produced this output (all dependencies are installed):
pi@raspberrypi:~/certbot $ ./certbot-auto --apache --no-bootstrap
Error: couldn't get currently installed version for /home/pi/.local/share/letsencrypt/bin/letsencrypt:
Traceback (most recent call last):
File "/home/pi/.local/share/letsencrypt/bin/letsencrypt", line 7, in
from certbot.main import main
File "/home/pi/.local/share/letsencrypt/local/lib/python2.7/site-packages/certbot/main.py", line 9, in
from acme import jose
File "/home/pi/.local/share/letsencrypt/local/lib/python2.7/site-packages/acme/jose/init.py", line 37, in
from acme.jose.interfaces import JSONDeSerializable
File "/home/pi/.local/share/letsencrypt/local/lib/python2.7/site-packages/acme/jose/interfaces.py", line 9, in
from acme.jose import util
File "/home/pi/.local/share/letsencrypt/local/lib/python2.7/site-packages/acme/jose/util.py", line 5, in
import OpenSSL
File "/home/pi/.local/share/letsencrypt/local/lib/python2.7/site-packages/OpenSSL/init.py", line 8, in
from OpenSSL import rand, crypto, SSL
File "/home/pi/.local/share/letsencrypt/local/lib/python2.7/site-packages/OpenSSL/rand.py", line 12, in
from OpenSSL._util import (
File "/home/pi/.local/share/letsencrypt/local/lib/python2.7/site-packages/OpenSSL/_util.py", line 6, in
from cryptography.hazmat.bindings.openssl.binding import Binding
File "/home/pi/.local/share/letsencrypt/local/lib/python2.7/site-packages/cryptography/hazmat/bindings/openssl/binding.py", line 12, in
from cryptography.hazmat.bindings._openssl import ffi, lib
ImportError: /home/pi/.local/share/letsencrypt/local/lib/python2.7/site-packages/cryptography/hazmat/bindings/_openssl.so: undefined symbol OPENSSL_sk_num
pi@raspberrypi:~/certbot $
Certbot's behavior differed from what I expected because:
It is not supposed to crash
Here is a Certbot log showing the issue (if available):
Logs are stored in /var/log/letsencrypt by default. Feel free to redact domains, e-mail and IP addresses as you see fit.
Certbot did not run long enough for letsencrypt to be installed
Here is the relevant nginx server block or Apache virtualhost for the domain I am configuring:
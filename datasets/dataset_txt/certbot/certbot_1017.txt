mulander commented on 10 Aug 2017
My operating system is (include version):
Debian 8.9
I installed Certbot with (certbot-auto, OS package manager, pip, etc):
apt (certbot 0.10.2-1~bpo8+1)
I ran this command and it produced this output:
root@build:~# certbot renew                                                                                                                                                                                              [50/1167]
Saving debug log to /var/log/letsencrypt/letsencrypt.log

-------------------------------------------------------------------------------
Processing /etc/letsencrypt/renewal/head.koparo.com.conf
-------------------------------------------------------------------------------
Cert is due for renewal, auto-renewing...
Starting new HTTPS connection (1): acme-v01.api.letsencrypt.org
Renewing an existing certificate
Performing the following challenges:
http-01 challenge for head.koparo.com
http-01 challenge for ampd.koparo.com
http-01 challenge for atlas.koparo.com
http-01 challenge for dev.koparo.com
http-01 challenge for elm.koparo.com
http-01 challenge for m.koparo.com
Waiting for verification...
Cleaning up challenges
Attempting to renew cert from /etc/letsencrypt/renewal/head.koparo.com.conf produced an unexpected error: Failed authorization procedure. head.koparo.com (http-01): urn:acme:error:connection :: The server could not connect to 
the client to verify the domain :: Fetching http://head.koparo.com/.well-known/acme-challenge/50-msp9IKA4IY_-atBLndFwXCXhmHrV5iUGZ3rPbUtY: Timeout, dev.koparo.com (http-01): urn:acme:error:connection :: The server could not co
nnect to the client to verify the domain :: Fetching http://dev.koparo.com/.well-known/acme-challenge/GrtefiAeRNMa73Y3tM8guYLa23R3IprPJLT3Ig4gHgc: Timeout. Skipping.

All renewal attempts failed. The following certs could not be renewed:
  /etc/letsencrypt/live/head.koparo.com/fullchain.pem (failure)
1 renew failure(s), 0 parse failure(s)

IMPORTANT NOTES:
 - The following errors were reported by the server:

   Domain: head.koparo.com
   Type:   connection
   Detail: Fetching
   http://head.koparo.com/.well-known/acme-challenge/50-msp9IKA4IY_-atBLndFwXCXhmHrV5iUGZ3rPbUtY:
   Timeout

   Domain: dev.koparo.com
   Type:   connection
   Detail: Fetching
   http://dev.koparo.com/.well-known/acme-challenge/GrtefiAeRNMa73Y3tM8guYLa23R3IprPJLT3Ig4gHgc:
   Timeout

   To fix these errors, please make sure that your domain name was
   entered correctly and the DNS A record(s) for that domain
   contain(s) the right IP address. Additionally, please check that
   your computer has a publicly routable IP address and that no
   firewalls are preventing the server from communicating with the
   client. If you're using the webroot plugin, you should also verify
   that you are serving files from the webroot path you provided.
Certbot's behavior differed from what I expected because:
I expected this run to succeed. I had a failed run in the morning, due to a .htaccess blocking one subdomain. I proceeded to remove it and re-run the script and hit the error listed above. I did check that the challenge files are created during a certbot run and made sure the folders are accessible on http now without a redirect. Yet, I don't see hits for this run in my access.log (even though I saw them in the morning run 3-4 hours earlier).
The last time I saw letsencrypt touching the server in question was here:
66.133.109.36 - - [10/Aug/2017:13:09:47 +0000] "GET /.well-known/acme-challenge/50jsCJLDKwGbHpntRU9u5UZyXmZidj0TlvhC-LlhTrE HTTP/1.1" 301 185 "-" "Mozilla/5.0 (compatible; Let's Encrypt validation server; +https://www.letsencr
ypt.org)"
66.133.109.36 - - [10/Aug/2017:13:09:47 +0000] "GET /.well-known/acme-challenge/y_ZgiuWpEjRzkb3D_bCVVjjXfIZwmZVdG2L-OESA9s8 HTTP/1.1" 301 185 "-" "Mozilla/5.0 (compatible; Let's Encrypt validation server; +https://www.letsencrypt.org)"
66.133.109.36 - - [10/Aug/2017:13:09:47 +0000] "GET /.well-known/acme-challenge/50jsCJLDKwGbHpntRU9u5UZyXmZidj0TlvhC-LlhTrE HTTP/1.1" 200 87 "http://m.koparo.com/.well-known/acme-challenge/50jsCJLDKwGbHpntRU9u5UZyXmZidj0TlvhC-LlhTrE" "Mozilla/5.0 (compatible; Let's Encrypt validation server; +https://www.letsencrypt.org)"
66.133.109.36 - - [10/Aug/2017:13:09:47 +0000] "GET /.well-known/acme-challenge/OqfriYxCC2dx2we6qzk9qhCpWlFtEsTVAVn05FYVn94 HTTP/1.1" 301 185 "-" "Mozilla/5.0 (compatible; Let's Encrypt validation server; +https://www.letsencrypt.org)"
66.133.109.36 - - [10/Aug/2017:13:09:47 +0000] "GET /.well-known/acme-challenge/y_ZgiuWpEjRzkb3D_bCVVjjXfIZwmZVdG2L-OESA9s8 HTTP/1.1" 200 87 "http://elm.koparo.com/.well-known/acme-challenge/y_ZgiuWpEjRzkb3D_bCVVjjXfIZwmZVdG2L-OESA9s8" "Mozilla/5.0 (compatible; Let's Encrypt validation server; +https://www.letsencrypt.org)"
66.133.109.36 - - [10/Aug/2017:13:09:48 +0000] "GET /.well-known/acme-challenge/OqfriYxCC2dx2we6qzk9qhCpWlFtEsTVAVn05FYVn94 HTTP/1.1" 200 87 "http://atlas.koparo.com/.well-known/acme-challenge/OqfriYxCC2dx2we6qzk9qhCpWlFtEsTVAVn05FYVn94" "Mozilla/5.0 (compatible; Let's Encrypt validation server; +https://www.letsencrypt.org)"
since then, even with repeated renewal accounts I don't get a challenge request from the server.
Here is a Certbot log showing the issue (if available):
# renew_before_expiry = 30 days
cert = /etc/letsencrypt/live/head.koparo.com/cert.pem
privkey = /etc/letsencrypt/live/head.koparo.com/privkey.pem
chain = /etc/letsencrypt/live/head.koparo.com/chain.pem
fullchain = /etc/letsencrypt/live/head.koparo.com/fullchain.pem
version = 0.10.2
archive_dir = /etc/letsencrypt/archive/head.koparo.com

# Options and defaults used in the renewal process
[renewalparams]
installer = None
authenticator = webroot
account = 29773d8b7edfeec570f027039bff2fac
webroot_path = /home/webui/head/public, /home/webui/development/public, /home/webui/mobile/public, /home/webui/elm/public, /home/webui/ampd/web, /home/webui/atlas_master/public
[[webroot_map]]
elm.koparo.com = /home/webui/elm/public
head.koparo.com = /home/webui/head/public
dev.koparo.com = /home/webui/development/public
m.koparo.com = /home/webui/mobile/public
ampd.koparo.com = /home/webui/ampd/web
atlas.koparo.com = /home/webui/atlas_master/public
Logs are stored in /var/log/letsencrypt by default. Feel free to redact domains, e-mail and IP addresses as you see fit.
letsencrypt.txt
Here is the relevant nginx server block or Apache virtualhost for the domain I am configuring:
root@build:~# head -n 12 /etc/nginx/conf.d/webui-head.conf 
server {
  listen                80;
      server_name           head.koparo.com www.head.koparo.com;
    location / {
    rewrite               ^ https://$server_name$request_uri? permanent;
  }
  location /.well-known/acme-challenge/ {
    autoindex off;
    root /home/webui/head/public/;
  }
}

root@build:~# head -n 12 /etc/nginx/conf.d/webui-development.conf 
server {
  listen                80;
      server_name           dev.koparo.com www.dev.koparo.com;
    location / {
    rewrite               ^ https://$server_name$request_uri? permanent;
  }
  location /.well-known/acme-challenge/ {
    autoindex off;
    root /home/webui/development/public/;
  }
}
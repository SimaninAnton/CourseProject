Contributor
jsha commented on 15 Aug 2016
Running latest certbot master, with port 5001 occupied, I get the below stack trace. Instead it should present the message about port in use and wait for user input.
-------------------------------------------------------------------------------
Could not bind TCP port 5001 because it is already in use by another process on
this system (such as a web server). Please stop the program in question and then
try again.
-------------------------------------------------------------------------------
Exiting abnormally:
Traceback (most recent call last):
  File "/home/jsha/certbot/venv/bin/certbot", line 9, in <module>
    load_entry_point('certbot', 'console_scripts', 'certbot')()
  File "/home/jsha/certbot/certbot/main.py", line 770, in main
    return config.func(config, plugins)
  File "/home/jsha/certbot/certbot/main.py", line 565, in obtain_cert
    _, action = _auth_from_domains(le_client, config, domains, lineage)
  File "/home/jsha/certbot/certbot/main.py", line 104, in _auth_from_domains
    lineage = le_client.obtain_and_enroll_certificate(domains)
  File "/home/jsha/certbot/certbot/client.py", line 275, in obtain_and_enroll_certificate
    certr, chain, key, _ = self.obtain_certificate(domains)
  File "/home/jsha/certbot/certbot/client.py", line 247, in obtain_certificate
    self.config.allow_subset_of_names)
  File "/home/jsha/certbot/certbot/auth_handler.py", line 70, in get_authorizations
    resp = self._solve_challenges()
  File "/home/jsha/certbot/certbot/auth_handler.py", line 114, in _solve_challenges
    assert len(resp) == len(self.achalls)
TypeError: object of type 'NoneType' has no len()

Traceback (most recent call last):
  File "/home/jsha/certbot/venv/bin/certbot", line 9, in <module>
    load_entry_point('certbot', 'console_scripts', 'certbot')()
  File "/home/jsha/certbot/certbot/main.py", line 770, in main
    return config.func(config, plugins)
  File "/home/jsha/certbot/certbot/main.py", line 565, in obtain_cert
    _, action = _auth_from_domains(le_client, config, domains, lineage)
  File "/home/jsha/certbot/certbot/main.py", line 104, in _auth_from_domains
    lineage = le_client.obtain_and_enroll_certificate(domains)
  File "/home/jsha/certbot/certbot/client.py", line 275, in obtain_and_enroll_certificate
    certr, chain, key, _ = self.obtain_certificate(domains)
  File "/home/jsha/certbot/certbot/client.py", line 247, in obtain_certificate
    self.config.allow_subset_of_names)
  File "/home/jsha/certbot/certbot/auth_handler.py", line 70, in get_authorizations
    resp = self._solve_challenges()
  File "/home/jsha/certbot/certbot/auth_handler.py", line 114, in _solve_challenges
    assert len(resp) == len(self.achalls)
TypeError: object of type 'NoneType' has no len()
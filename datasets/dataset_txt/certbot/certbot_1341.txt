jimbauwens commented on 12 Mar 2017 â€¢
edited
My operating system is (include version):
Debian 8
I installed Certbot with (certbot-auto, OS package manager, pip, etc):
apt-get (using backports), certbot 0.9.3
I ran this command and it produced this output:
$ certbot register --update-registration --email new-xx@xx.xx

An unexpected error occurred:
UnexpectedUpdate: RegistrationResource(body=Registration(certificates=None, contact=('mailto:x@xx.xx',), authorizations=None, agreement=u'https://letsencrypt.org/documents/LE-SA-v1.0.1-July-27-2015.pdf', key=JWKRSA(key=<ComparableRSAKey(<cryptography.hazmat.backends.openssl.rsa._RSAPublicKey object at ..>)>)), uri=u'https://acme-v01.api.letsencrypt.org/acme/reg/..', new_authzr_uri=u'https://acme-v01.api.letsencrypt.org/acme/new-authz', terms_of_service=u'https://letsencrypt.org/documents/LE-SA-v1.0.1-July-27-2015.pdf')
Certbot's behavior differed from what I expected because:
Update_registration (acme/client.py) certbot is too strict:
       if updated_regr != regr:
           raise errors.UnexpectedUpdate(updated_regr)
In my case the terms-and-conditions got updated and certbot failed.
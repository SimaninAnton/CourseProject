Member
bmw commented on 18 Aug 2016
The common cases of error messages resulting from running Certbot without root were addressed in #3265. As I discussed in that PR, there's still a lot of cases where things can go wrong.
If we want to do more here, I propose the following:
Create a new error type named something like PermissionsError in certbot/errors.py.
If a permissions error occurs in certbot.util.make_or_verify_dir, raise a PermissionsError with contents like:
The following error occurred:
<insert error message without traceback here>
In most cases, you need to run Certbot with root privileges.
Make sure all code that catches OSError exceptions that are raised out of make_or_verify_dir properly handle the new error type.
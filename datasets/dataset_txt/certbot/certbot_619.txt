jherazob commented on 11 Apr 2018
If you're having trouble using Certbot and aren't sure you've found a bug or
request for a new feature, please first try asking for help at
https://community.letsencrypt.org/. There is a much larger community there of
people familiar with the project who will be able to more quickly answer your
questions.
My operating system is (include version):
Debian 7 (wheezy)
I installed Certbot with (certbot-auto, OS package manager, pip, etc):
certbot-auto
I ran this command and it produced this output:
Executed /usr/local/bin/certbot-auto renew -v
Received:
 Root logging level set at 10
 Saving debug log to /var/log/letsencrypt/letsencrypt.log

 -------------------------------------------------------------------------------
 Processing /etc/letsencrypt/renewal/<DOMAIN-WITHHELD>.conf
 -------------------------------------------------------------------------------
 Requested authenticator <certbot.cli._Default object at 0x23a0090> and installer <certbot.cli._Default object at 0x23a0090>
 Should renew, less than 30 days before certificate expiry 2018-04-30 19:54:44 UTC.
 Cert is due for renewal, auto-renewing...
 Requested authenticator apache and installer apache
 Apache version is 2.2.22
 /usr/local/bin/certbot-auto: line 1670: 21920 Bus error               "$VENV_BIN/letsencrypt" "$@"`
The number right before "Bus error" seems to change on every execution, and line 1670 is the last line of certbot-auto.
Certbot's behavior differed from what I expected because:
It crashed before upgrading the certificate
Here is a Certbot log showing the issue (if available):
Logs are stored in /var/log/letsencrypt by default. Feel free to redact domains, e-mail and IP addresses as you see fit.
Log stops before the error happens:
 2018-04-11 13:27:00,377:DEBUG:certbot.main:certbot version: 0.23.0
 2018-04-11 13:27:00,377:DEBUG:certbot.main:Arguments: ['-v']
 2018-04-11 13:27:00,377:DEBUG:certbot.main:Discovered plugins: PluginsRegistry(PluginEntryPoint#apache,PluginEntryPoint#manual,PluginEntryPoint#nginx,PluginEntryPoint#null,PluginEntryPoint#standalone,PluginEntryPoint#webroot)
 2018-04-11 13:27:00,394:DEBUG:certbot.log:Root logging level set at 10
 2018-04-11 13:27:00,394:INFO:certbot.log:Saving debug log to /var/log/letsencrypt/letsencrypt.log
 2018-04-11 13:27:00,424:DEBUG:certbot.plugins.selection:Requested authenticator <certbot.cli._Default object at 0x23a0090> and installer <certbot.cli._Default object at 0x23a0090>
 2018-04-11 13:27:00,431:DEBUG:certbot.storage:Should renew, less than 30 days before certificate expiry 2018-04-30 19:54:44 UTC.
 2018-04-11 13:27:00,431:INFO:certbot.renewal:Cert is due for renewal, auto-renewing...
 2018-04-11 13:27:00,454:DEBUG:certbot.plugins.selection:Requested authenticator apache and installer apache
 2018-04-11 13:27:00,989:DEBUG:certbot_apache.configurator:Apache version is 2.2.22
Here is the relevant nginx server block or Apache virtualhost for the domain I am configuring:
Doesn't seem to even get to do anything with it
All system packages are upgraded with dist-upgrade, and this used to work in the past as the certificate was created quite a while ago.
I'll provide any information you need to help debug and fix the issue.
GusevVictor commented on 26 Jun 2017
My operating system is (include version):
Debian 8 in a lxc container without systemd
I installed Certbot with (certbot-auto, OS package manager, pip, etc):
0.10.2-1~bpo8+1 from ftp.debian.org_debian_dists_jessie-backports_main_binary-amd64_Packages repo.
I ran this command and it produced this output:
My cronjob run this:
test -x /usr/bin/certbot -a \! -d /run/systemd/system && perl -e 'sleep int(rand(3600))' && certbot -q renew
My output this one:
Attempting to renew cert from /etc/letsencrypt/renewal/service.company.com.conf produced an unexpected error: HTTPSConnectionPool(host='acme-v01.api.letsencrypt.org',
+port=443): Max retries exceeded with url: /directory (Caused by NewConnectionError('<requests.packages.urllib3.connection.VerifiedHTTPSConnection object at 0x7f9ddc996450>:
+Failed to establish a new connection: [Errno -2] Name or service not known',)). Skipping.
Certbot's behavior differed from what I expected because:
If I run the command from console, it works but cronjob - fail.
Here is a Certbot log showing the issue (if available):
Logs are stored in /var/log/letsencrypt by default. Feel free to redact domains, e-mail and IP addresses as you see fit.
There is no any helpful information in /var/log/letsencrypt file
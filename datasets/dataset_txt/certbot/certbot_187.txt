fmunteanu commented on 24 Apr 2019 â€¢
edited
After upgrading to 0.33.1, I get this error:
2019-04-24 05:26:05,105:DEBUG:certbot.cli:Var dry_run=True (set by user).
2019-04-24 05:26:05,105:DEBUG:certbot.cli:Var server=set(['staging', 'dry_run']) (set by user).
2019-04-24 05:26:05,105:DEBUG:certbot.cli:Var dry_run=True (set by user).
2019-04-24 05:26:05,105:DEBUG:certbot.cli:Var server=set(['staging', 'dry_run']) (set by user).
2019-04-24 05:26:05,105:DEBUG:certbot.cli:Var account=set(['server']) (set by user).
2019-04-24 05:26:05,141:INFO:certbot.renewal:Cert not due for renewal, but simulating renewal for dry run
2019-04-24 05:26:05,141:DEBUG:certbot.plugins.selection:Requested authenticator nginx and installer nginx
2019-04-24 05:26:05,148:WARNING:certbot.renewal:Attempting to renew cert (domain.com) from /etc/letsencrypt/renewal/domain.com.conf produced an unexpected error: 'module' object has no attribute 'os_geteuid'. Skipping.
2019-04-24 05:26:05,149:DEBUG:certbot.renewal:Traceback was:
Traceback (most recent call last):
  File "/usr/lib/python2.7/site-packages/certbot/renewal.py", line 450, in handle_renewal_request
    main.renew_cert(lineage_config, plugins, renewal_candidate)
  File "/usr/lib/python2.7/site-packages/certbot/main.py", line 1186, in renew_cert
    installer, auth = plug_sel.choose_configurator_plugins(config, plugins, "certonly")
  File "/usr/lib/python2.7/site-packages/certbot/plugins/selection.py", line 228, in choose_configurator_plugins
    installer = pick_installer(config, req_inst, plugins, installer_question)
  File "/usr/lib/python2.7/site-packages/certbot/plugins/selection.py", line 32, in pick_installer
    config, default, plugins, question, (interfaces.IInstaller,))
  File "/usr/lib/python2.7/site-packages/certbot/plugins/selection.py", line 104, in pick_plugin
    filtered.init(config)
  File "/usr/lib/python2.7/site-packages/certbot/plugins/disco.py", line 229, in init
    in six.itervalues(self._plugins)]
  File "/usr/lib/python2.7/site-packages/certbot/plugins/disco.py", line 103, in init
    self._initialized = self.plugin_cls(config, self.name)
  File "/usr/lib/python2.7/site-packages/certbot_nginx/configurator.py", line 101, in __init__
    self._verify_setup()
  File "/usr/lib/python2.7/site-packages/certbot_nginx/configurator.py", line 901, in _verify_setup
    uid = compat.os_geteuid()
AttributeError: 'module' object has no attribute 'os_geteuid'
CentOS 7.6 details:
$ uname -a
Linux chronos 3.10.0-957.10.1.el7.x86_64 #1 SMP Mon Mar 18 15:06:45 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux
$ rpm -q python
python-2.7.5-77.el7_6.x86_64
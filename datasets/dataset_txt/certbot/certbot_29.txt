DrP2016 commented on 1 Dec 2019 â€¢
edited
Hi everyone,
i am using a GoDaddy domain and succesfully requested a wildcard certificate for this domain via the DNS-01 challenge. I ran this command:
sudo certbot certonly --manual --manual-public-ip-logging-ok --preferred-challenges dns-01 --server https://acme-v02.api.letsencrypt.org/directory -d "*.mydomain.com" -d mydomain.com
I added the two Tokens i got shown to the DNS-TXT-Records and certbot succeeded.
As i want to automate the renewal i wrote both hooks auth.sh and cleanup.sh, but I cant get the arguments $CERTBOT_VALIDATION and $CERTOBT_DOMAIN in my scripts, it doesnt matter if i do a dry-run or not. My Renew-Command looks like this:
sudo certbot renew --dry-run --manual --manual-auth-hook /etc/letsencrypt/renewal-hooks/pre/auth.sh --manual-cleanup-hook /etc/letsencrypt/renewal-hooks/post/cleanup.sh
For testing my auth.sh looks like this:
#!/bin/bash
echo $@
echo $CERTBOT_VALIDATION
And the Script outputs nothing. Am i doing something wrong?
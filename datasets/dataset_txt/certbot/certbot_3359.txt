Contributor
jsha commented on 26 Sep 2015
Steps to reproduce (from memory):
Use letsencrypt --server https://acme-staging.api.letsencrypt.org/directory auth to issue and install a cert for two names jacob.hoffman-andrews.com hoffman-andrews.com, using the staging instance
Use letsencrypt --server <prod> auth to issue and install from production for the two names hoffman-andrews.com jacob.hoffman-andrews.com. Note the different order!
Expected result:
Apache serves the prod cert.
Actual result:
Apache serves the staging cert.
Upon further investigation, I found that the staging cert existed in /etc/letsencrypt/live/jacob.hoffman-andrews.com/cert.pem and that prod cert existed in /etc/letsencrypt/live/hoffman-andrews.com/cert.pem.
My Apache config had:
SSLCertificateFile /etc/letsencrypt/live/jacob.hoffman-andrews.com/cert.pem
So it was still pointed at the first, staging cert, rather than being updated to point at the new prod cert.
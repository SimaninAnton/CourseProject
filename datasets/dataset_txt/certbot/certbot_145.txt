oskarwiksten commented on 3 Jun 2019
My operating system is (include version):
openSUSE Leap 15.0
I installed Certbot with (certbot-auto, OS package manager, pip, etc):
package manager: zypper install certbot
# certbot --version
certbot 0.30.2
I ran this command and it produced this output:
certbot certonly \
    --non-interactive --no-verify-ssl \
    --standalone --http-01-port 3380 \
    --agree-tos \
    --config-dir=config/ --work-dir=work/ --logs-dir=logs/ \
    -m test@localhost \
    --domain certbot.integration.test \
    --server https://127.0.0.1:8443/pgwy/acme/directory \
    --eab-kid certbot-account-prereg-keyid-310358708 \
    --eab-hmac-key -G7br10aPrU-iTbGgx7HVYXwp3t4owtQXNd39oUt3bw
Output:
usage:
  certbot [SUBCOMMAND] [options] [-d DOMAIN] [-d DOMAIN] ...

Certbot can obtain and install HTTPS/TLS/SSL certificates.  By default,
it will attempt to use a webserver both for obtaining and installing the
certificate.
certbot: error: argument --eab-hmac-key: expected one argument
Certbot's behavior differed from what I expected because:
The eab-hmac-key contains 32 bytes of data that is randomly generated, encoded using base64 url-safe encoding.
It happened to start with a leading -.
If the b64-encoding does not start with -, everything works as expected.
Here is a Certbot log showing the issue (if available):
See issued command above.
Here is the relevant nginx server block or Apache virtualhost for the domain I am configuring:
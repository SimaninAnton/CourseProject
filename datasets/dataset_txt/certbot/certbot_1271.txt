zzz2002 commented on 11 Apr 2017 â€¢
edited
Debian squeeze
I installed Certbot with (certbot-auto, OS package manager, pip, etc):
Aptitude, certbot version 11.1-1
I ran this command and it produced this output:
certbot --renew --staging --force-renewal --cert-name imap.klam.ca --renew-hook /root/CertbotTLSAgen
Produced the standard output on the terminal.
I cannot copy output as certbot is running on my server which I can only get to via ssh.
Certbot's behavior differed from what I expected because:
My hook code outputs progress and info messages to stdout as well as to a log file/var/log/tlsagen.log
Running my code standalone I get all messages both on the terminal and in the log.
Running from certbot renew-hook all stdout messages are dropped
Here is a Certbot log showing the issue (if available):
Logs are stored in /var/log/letsencrypt by default. Feel free to redact domains, e-mail and IP addresses as you see fit.
There are no messages in the log, other than:
Running renew-hook command: /root/CertbotTLSAgen
DEBUG:certbot.renewal:no renewal failures
... post-hook command: /bin/run-parts /etc/letsencrypt/post-hook.d/
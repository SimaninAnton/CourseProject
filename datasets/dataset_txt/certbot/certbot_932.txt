Collaborator
erikrose commented on 20 Oct 2017 â€¢
edited
On using certbot-auto, some people get this:
In --require-hashes mode, all requirements must have their versions pinned with ==. These do not:     zope.interface>=4.1.0 from https://pypi.python.org/packages/21/a7/3cd033ea29c7614f3b41c593a16ae19b4470eb4eca0a4a883bec31d08955/zope.interface-4.4.3-cp27-cp27mu-manylinux1_x86_64.whl#md5=025a5f2dcafe75900e6725cc0e5a2288 (from zope.component==4.2.2->-r
/tmp/tmp.jhvCusu52p/letsencrypt-auto-requirements.txt (line 164))
We do, of course, pin zope.interface==4.1.3 in the requirements file, but pip somehow lets the specification in zope.component take precedence. (pip doesn't have a real dependency resolver, so it's probably just reaching the zope.component one first.)
Try to reliably reproduce this.
Try to fix it by reordering the dependencies in our requirements files. Perhaps if we put zope.interface first, this will go away. (If it does, we should audit our dependencies for other such situations.)
Note that this is subtly different than #5163, where we legitimately don't have a dependency pinned. They might, however, have a common fix.
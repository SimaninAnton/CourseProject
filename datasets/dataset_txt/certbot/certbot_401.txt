ramarnat commented on 8 Sep 2018
If you're having trouble using Certbot and aren't sure you've found a bug or
request for a new feature, please first try asking for help at
https://community.letsencrypt.org/. There is a much larger community there of
people familiar with the project who will be able to more quickly answer your
questions.
My operating system is (include version):
Docker certbot/dns-cloudflare, running on osx
I installed Certbot with (certbot-auto, OS package manager, pip, etc):
docker run --rm certbot/dns-cloudflare`
I ran this command and it produced this output:
docker run -v `pwd`/cloudflare:/opt/cloudflare --rm certbot/dns-cloudflare certonly -n --agree-tos --email administrator@example.com --dry-run --dns-cloudflare  --dns-cloudflare-credentials /opt/cloudflare/credentials -d "*.example.com" --server https://acme-v02.api.letsencrypt.org/directory
usage:
  certbot [SUBCOMMAND] [options] [-d DOMAIN] [-d DOMAIN] ...

Certbot can obtain and install HTTPS/TLS/SSL certificates.  By default,
it will attempt to use a webserver both for obtaining and installing the
certificate.
certbot: error: unrecognized arguments: --dns-cloudflare --dns-cloudflare-credentials /opt/cloudflare/credentials
Running it with plugins, shows that the plugin is there
$ docker run --rm certbot/dns-cloudflare plugins
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
* dns-cloudflare
Description: Obtain certificates using a DNS TXT record (if you are using
Cloudflare for DNS).
Interfaces: IAuthenticator, IPlugin
Entry point: dns-cloudflare =
certbot_dns_cloudflare.dns_cloudflare:Authenticator

* standalone
Description: Spin up a temporary webserver
Interfaces: IAuthenticator, IPlugin
Entry point: standalone = certbot.plugins.standalone:Authenticator

* webroot
Description: Place files in webroot directory
Interfaces: IAuthenticator, IPlugin
Entry point: webroot = certbot.plugins.webroot:Authenticator
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Certbot's behavior differed from what I expected because:
It should have found the dns-cloudflare plugin because that is the docker image being used
Here is a Certbot log showing the issue (if available):
Logs are stored in /var/log/letsencrypt by default. Feel free to redact domains, e-mail and IP addresses as you see fit.
No logs generated.
Here is the relevant nginx server block or Apache virtualhost for the domain I am configuring:
N/A
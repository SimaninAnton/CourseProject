sudoman commented on 8 Dec 2016
I set up a server with an incorrect ip address associated with the host name of the server in its /etc/hosts file, causing certbot-auto to fail when attempting to create a certificate with the --apache method. It would be nice if certbot detected this specific issue and printed a helpful message specific to the error.
2016-12-07 16:55:49,372:DEBUG:certbot.reporter:Reporting to user: The following errors were reported by the server:

Domain: my.domain
Type:   connection
Detail: Failed to connect to 111.111.111.111:443 for TLS-SNI-01 challenge

To fix these errors, please make sure that your domain name was entered correctly and the DNS A record(s) for that domain contain(s) the right IP address. Additionally, please check that your computer has a publicly routable IP address and that no firewalls are preventing the server from communicating with the client. If you're using the webroot plugin, you should also verify that you are serving files from the webroot path you provided.
I set up my server using xen and a custom fai system, but using an incorrect ip address. I corrected the host's dns entry and fixed /etc/network/interfaces and the /etc/xen/my.domain.cfg file, but I did not change /etc/hosts until I debugged the source of the issue. To test this issue, you could try setting up Trisquel 7 or any GNU/Linux system and adding (or changing) an entry in /etc/hosts, inserting the incorrect ip address for the FQDN and PQDN of the host. As far as I know, the incorrect ip address I used was not in use by any other host on the internet at the time of testing.
As an aside, apache2 was serving http over the https port when incorrectly configured like this. You can see this by running:
curl http://my.domain:443/
If you would like more details, see the following thread:
https://community.letsencrypt.org/t/certbot-auto-unable-to-complete-tls-sni-01-challenge-on-ubuntu-14-04/23657
Thank you.
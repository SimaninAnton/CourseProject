bwesterb commented on 14 Nov 2015
The preferred way to use letsencrypt certificates, is pointing applications directly into /etc/letsencrypt/live. However, for several reasons (see below), this might not work and some custom steps need to be taken to install a certificate for an application. An admin should be able to install a script which is run on the renewal of a certificate to install it.
A hypothetical implementation could work as follows
letsencrypt -d mydomain --on-renewal=/usr/local/bin/install-cert-for-lighttpd
With the script /usr/local/bin/install-cert-for-lighttpd containing, for instance
cat "/etc/letsencrypt/live/$1/privkey.pem" "/etc/letsencrypt/live/$1/cert.pem" > /etc/lighttpd/ssl/$1.pem
chown www-data:www-data /etc/lighttpd/ssl/$1.pem
service lighttpd reload
Some reasons I can think of for a script are:
The applications requires that the certificate and key in a modified format. See #1201
The application does not run as root. Thus, we need to make a copy of the certificate only readable by the user as which the application is running. See e.g. #1425
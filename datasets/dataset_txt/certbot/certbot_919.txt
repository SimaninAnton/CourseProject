danydacosta commented on 5 Nov 2017 â€¢
edited
My certificate expired yesterday (my crontab seems to failed) and I can't renew it using the certbot renew command. Can I renew an expired certificate or do I have to recreate one? Below are my attempts to renew my certificate.
My operating system is (include version):
Raspbian GNU/Linux 8 (Jessie)
I installed Certbot with (certbot-auto, OS package manager, pip, etc):
Since it was 3 months ago, I do not know which method I used.
I ran this command and it produced this output:
certbot renew
-------------------------------------------------------------------------------
Processing /etc/letsencrypt/renewal/danydc.ch.conf
-------------------------------------------------------------------------------
Attempting to parse the version 0.17.0 renewal configuration file found at /etc/letsencrypt/renewal/danydc.ch.conf with version 0.10.2 of Certbot. This might not work.
Cert is due for renewal, auto-renewing...
Could not choose appropriate plugin: The requested apache plugin does not appear to be installed
Attempting to renew cert from /etc/letsencrypt/renewal/danydc.ch.conf produced an unexpected error: The requested apache plugin does not appear to be installed. Skipping.

All renewal attempts failed. The following certs could not be renewed:
  /etc/letsencrypt/live/danydc.ch/fullchain.pem (failure)
1 renew failure(s), 0 parse failure(s)
Certbot's behavior differed from what I expected because:
It should renew my certificate, doesn't it?
Here is the relevant Apache virtualhost for the domain I am configuring:
<IfModule mod_ssl.c>
<VirtualHost *:443>
 # The ServerName directive sets the request scheme, hostname and port that
 # the server uses to identify itself. This is used when creating
 # redirection URLs. In the context of virtual hosts, the ServerName
 # specifies what hostname must appear in the request's Host: header to
 # match this virtual host. For the default virtual host (this file) this
 # value is not decisive as it is used as a last resort host regardless.
 # However, you must set it for any further virtual host explicitly.
 #ServerName www.example.com

 ServerAdmin webmaster@localhost
 DocumentRoot /var/www/html

 # Available loglevels: trace8, ..., trace1, debug, info, notice, warn,
 # error, crit, alert, emerg.
 # It is also possible to configure the loglevel for particular
 # modules, e.g.
 #LogLevel info ssl:warn

 ErrorLog ${APACHE_LOG_DIR}/error.log
 CustomLog ${APACHE_LOG_DIR}/access.log combined

 # For most configuration files from conf-available/, which are
 # enabled or disabled at a global level, it is possible to
 # include a line for only one particular virtual host. For example the
 # following line enables the CGI configuration for this host only
 # after it has been globally disabled with "a2disconf".
 #Include conf-available/serve-cgi-bin.conf


SSLCertificateFile /etc/letsencrypt/live/danydc.ch/fullchain.pem
SSLCertificateKeyFile /etc/letsencrypt/live/danydc.ch/privkey.pem
Include /etc/letsencrypt/options-ssl-apache.conf
ServerName danydc.ch
</VirtualHost>
</IfModule>
scubanarc commented on 23 Feb 2017 â€¢
edited
I did the following:
sudo yum update
sudo yum install httpd mod_ssl python-certbot-apache
sudo systemctl start httpd
systemctl status httpd
sudo certbot --apache -d example.com -d www.example.com
certbot --version
certbot 0.9.3
rpm --query centos-release
centos-release-7-3.1611.el7.centos.x86_64
Command line doesn't seem to matter. I tried:
certbot
certbot --apache
sudo certbot --apache -d example.com -d www.example.com
In all cases certbot fails almost immediately with the error:
"AttributeError: 'NoneType' object has no attribute 'strip'"
It shows the blue window and immediately fails.
Here's the letsencrypt.log:
2017-02-22 20:21:45,928:DEBUG:certbot.main:Root logging level set at 20
2017-02-22 20:21:45,928:INFO:certbot.main:Saving debug log to /var/log/letsencrypt/letsencrypt.log
2017-02-22 20:21:45,932:DEBUG:certbot.main:certbot version: 0.9.3
2017-02-22 20:21:45,932:DEBUG:certbot.main:Arguments: ['--apache', '-d', 'domain.com', '-d', 'www.domain.com']
2017-02-22 20:21:45,932:DEBUG:certbot.main:Discovered plugins: PluginsRegistry(PluginEntryPoint#apache,PluginEntryPoint#webroot,PluginEntryPoint#null,PluginEntryPoint#manual,PluginEntryPoint#standalone)
2017-02-22 20:21:45,934:DEBUG:certbot.plugins.selection:Requested authenticator apache and installer apache
2017-02-22 20:21:46,202:DEBUG:certbot.main:Exiting abnormally:
Traceback (most recent call last):
  File "/bin/certbot", line 9, in 
    load_entry_point('certbot==0.9.3', 'console_scripts', 'certbot')()
  File "/usr/lib/python2.7/site-packages/certbot/main.py", line 776, in main
    return config.func(config, plugins)
  File "/usr/lib/python2.7/site-packages/certbot/main.py", line 502, in run
    installer, authenticator = plug_sel.choose_configurator_plugins(config, plugins, "run")
  File "/usr/lib/python2.7/site-packages/certbot/plugins/selection.py", line 185, in choose_configurator_plugins
    authenticator = installer = pick_configurator(config, req_inst, plugins)
  File "/usr/lib/python2.7/site-packages/certbot/plugins/selection.py", line 25, in pick_configurator
    (interfaces.IAuthenticator, interfaces.IInstaller))
  File "/usr/lib/python2.7/site-packages/certbot/plugins/selection.py", line 77, in pick_plugin
    verified.prepare()
  File "/usr/lib/python2.7/site-packages/certbot/plugins/disco.py", line 220, in prepare
    return [plugin_ep.prepare() for plugin_ep in six.itervalues(self._plugins)]
  File "/usr/lib/python2.7/site-packages/certbot/plugins/disco.py", line 106, in prepare
    self._initialized.prepare()
  File "/usr/lib/python2.7/site-packages/certbot_apache/configurator.py", line 188, in prepare
    self.version)
  File "/usr/lib/python2.7/site-packages/certbot_apache/parser.py", line 58, in __init__
    self.init_modules()
  File "/usr/lib/python2.7/site-packages/certbot_apache/parser.py", line 92, in init_modules
    self.modules.add(self.get_arg(match_name))
  File "/usr/lib/python2.7/site-packages/certbot_apache/parser.py", line 339, in get_arg
    value = value.strip("'\"")
AttributeError: 'NoneType' object has no attribute 'strip'
Any help would be appreciated.
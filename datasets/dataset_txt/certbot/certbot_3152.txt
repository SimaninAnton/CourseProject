ge0rg commented on 30 Oct 2015
Hi,
I tried to request a cert for a punycode subdomain for .op-co.de (xn--z38h.op-co.de as DNS-ID SAN and CN in the CSR) today, and the resulting response was:
Error: unauthorized :: The client lacks sufficient authorization :: Error creating new authz :: Syntax error
While that host is not whitelisted, there should be a more appropriate response.
CSR (shortened):
# openssl req -noout -text -inform der < catface.op-co.de-2015.csr
Certificate Request:
    Data:
        Version: 0 (0x0)
        Subject: C=DE, CN=xn--z38h.op-co.de
        Subject Public Key Info:
            Public Key Algorithm: rsaEncryption
                Public-Key: (4096 bit)
                Modulus:
                    [...]
                Exponent: 65537 (0x10001)
        Attributes:
        Requested Extensions:
            X509v3 Subject Alternative Name:
                DNS:xn--z38h.op-co.de
    Signature Algorithm: sha256WithRSAEncryption
         [...]
I'm skipping the log as @jcjones made me aware on IRC that punycode is currently forbidden in the code.
This ticket is therefore mainly for documentation purposes and to track the implementation status, should it be subject to change.
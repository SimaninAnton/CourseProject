joshbranham commented on 26 Sep 2017 â€¢
edited
My operating system is (include version):
Fedora 26
I installed Certbot with (certbot-auto, OS package manager, pip, etc):
dnf install certbot-nginx
I ran this command and it produced this output:
sudo certbot --nginx
The requested nginx plugin does not appear to be installed
OR
sudo certbot --nginx certonly
Saving debug log to /var/log/letsencrypt/letsencrypt.log
Could not choose appropriate plugin: The requested nginx plugin does not appear to be installed
The requested nginx plugin does not appear to be installed
Certbot's behavior differed from what I expected because:
no cert was issued
Here is a Certbot log showing the issue (if available):
Logs are stored in /var/log/letsencrypt by default. Feel free to redact domains, e-mail and IP addresses as you see fit.
2017-09-26 02:51:40,660:DEBUG:certbot.main:certbot version: 0.18.1
2017-09-26 02:51:40,661:DEBUG:certbot.main:Arguments: ['--nginx']
2017-09-26 02:51:40,661:DEBUG:certbot.main:Discovered plugins: PluginsRegistry(PluginEntryPoint#manual,PluginEntryPoint#null,PluginEntryPoint#standalone,PluginEntryPoint#webroot)
2017-09-26 02:51:40,674:DEBUG:certbot.log:Root logging level set at 20
2017-09-26 02:51:40,675:INFO:certbot.log:Saving debug log to /var/log/letsencrypt/letsencrypt.log
2017-09-26 02:51:40,676:DEBUG:certbot.plugins.selection:Requested authenticator nginx and installer nginx
2017-09-26 02:51:40,676:DEBUG:certbot.plugins.selection:No candidate plugin
2017-09-26 02:51:40,676:DEBUG:certbot.plugins.selection:No candidate plugin
2017-09-26 02:51:40,676:DEBUG:certbot.plugins.selection:Selected authenticator None and installer None
2017-09-26 02:51:40,676:INFO:certbot.main:Could not choose appropriate plugin: The requested nginx plugin does not appear to be installed
2017-09-26 02:51:40,677:DEBUG:certbot.log:Exiting abnormally:
Traceback (most recent call last):
File "/bin/certbot", line 11, in
load_entry_point('certbot==0.18.1', 'console_scripts', 'certbot')()
File "/usr/lib/python3.6/site-packages/certbot/main.py", line 755, in main
return config.func(config, plugins)
File "/usr/lib/python3.6/site-packages/certbot/main.py", line 673, in certonly
installer, auth = plug_sel.choose_configurator_plugins(config, plugins, "certonly")
File "/usr/lib/python3.6/site-packages/certbot/plugins/selection.py", line 201, in choose_configurator_plugins
diagnose_configurator_problem("authenticator", req_auth, plugins)
File "/usr/lib/python3.6/site-packages/certbot/plugins/selection.py", line 297, in diagnose_configurator_problem
raise errors.PluginSelectionError(msg)
certbot.errors.PluginSelectionError: The requested nginx plugin does not appear to be installed
Here is the relevant nginx server block or Apache virtualhost for the domain I am configuring:
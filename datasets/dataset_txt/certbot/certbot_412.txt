erco77 commented on 30 Aug 2018
My operating system is (include version):
       ubuntu 16.04.5
       uname -a:
       Linux <<OUR_FQDN>> 4.17.17-x86_64-linode116 #1 SMP PREEMPT Mon Aug 20 16:07:40 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux
I installed Certbot with (certbot-auto, OS package manager, pip, etc):
       sudo apt-get update
       sudo apt-get install software-properties-common
       sudo add-apt-repository ppa:certbot/certbot
       sudo apt-get update
       sudo apt-get install python-certbot-apache
I ran this command and it produced this output:
  Viewing the system logs, I noticed 'certbot -q renew' was being run by both cron AND systemd,
  both with similar timing events (twice a day at noon and midnight, random 12 hour delay), e.g.
    Aug 29 12:00:01 <<OUR_FQDN>> CRON[22255]: (root) CMD (test -x /usr/bin/certbot -a \! -d /run/systemd/system && perl -e 'sleep int(rand(43200))' && certbot -q renew)  \__ (1)
    Aug 30 00:00:01 <<OUR_FQDN>> CRON[25829]: (root) CMD (test -x /usr/bin/certbot -a \! -d /run/systemd/system && perl -e 'sleep int(rand(43200))' && certbot -q renew)  /
    Aug 30 07:13:02 <<OUR_FQDN>> systemd[1]: Starting Certbot...    \__ (2)
    Aug 30 07:13:02 <<OUR_FQDN>> systemd[1]: Started Certbot.       /
Certbot's behavior differed from what I expected because:
 I expected only cron OR systemd configs, but not /both/.
 Seems like this is running twice as much as it needs to (4x a day instead of 2x a day;
 2x by cron, and 2x by systemd)
Here is a Certbot log showing the issue (if available):
 See above excertps from syslog showing both CRON and systemd entries for renewal
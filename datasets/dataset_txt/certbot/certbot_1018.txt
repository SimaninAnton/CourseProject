Contributor
jsoref commented on 10 Aug 2017
My operating system is (include version):
debian 9.1
I installed Certbot with (certbot-auto, OS package manager, pip, etc):
certbot-auto 0.17.0
I ran this command and it produced this output:
certbot-auto -q renew

...
Attempting to renew cert (broken.example.com) from /etc/letsencrypt/renewal/broken.example.com.conf produced an unexpected error: Failed authorization procedure. www.test.other.example.net (tls-sni-01): urn:acme:error:connection :: The server could not connect to the client to verify the domain :: DNS problem: SERVFAIL looking up CAA for www.test.other.example.net, test.other.example.net (tls-sni-01): urn:acme:error:connection :: The server could not connect to the client to verify the domain :: DNS problem: SERVFAIL looking up CAA for test.other.example.net. Skipping.

The following certs are not due for renewal yet:
  /etc/letsencrypt/live/a.example.com/fullchain.pem (skipped)
  /etc/letsencrypt/live/b.example.com/fullchain.pem (skipped)
  /etc/letsencrypt/live/c.example.com/fullchain.pem (skipped)
  /etc/letsencrypt/live/b.example.com-0001/fullchain.pem (skipped)
  /etc/letsencrypt/live/e.example.com/fullchain.pem (skipped)
  /etc/letsencrypt/live/f.example.com/fullchain.pem (skipped)
  /etc/letsencrypt/live/example.org/fullchain.pem (skipped)
  /etc/letsencrypt/live/g.site.example.com/fullchain.pem (skipped)
  /etc/letsencrypt/live/example.net/fullchain.pem (skipped)
  /etc/letsencrypt/live/h.example.net/fullchain.pem (skipped)
  /etc/letsencrypt/live/i.example.com/fullchain.pem (skipped)
  /etc/letsencrypt/live/j.test.site.example.com/fullchain.pem (skipped)
  /etc/letsencrypt/live/broken.site.example.com/fullchain.pem (skipped)
  /etc/letsencrypt/live/k.example.com/fullchain.pem (skipped)
  /etc/letsencrypt/live/www.h.example.net/fullchain.pem (skipped)
  /etc/letsencrypt/live/l.example.com/fullchain.pem (skipped)
  /etc/letsencrypt/live/m.example.com/fullchain.pem (skipped)
  /etc/letsencrypt/live/site.example.com/fullchain.pem (skipped)
  /etc/letsencrypt/live/n.example.com/fullchain.pem (skipped)
  /etc/letsencrypt/live/o.example.com/fullchain.pem (skipped)
  /etc/letsencrypt/live/p.example.com/fullchain.pem (skipped)
  /etc/letsencrypt/live/q.example.net/fullchain.pem (skipped)
All renewal attempts failed. The following certs could not be renewed:
  /etc/letsencrypt/live/broken.example.com/fullchain.pem (failure)
1 renew failure(s), 0 parse failure(s)
Certbot's behavior differed from what I expected because:
I'm drowning in information that really isn't relevant to what I was trying to do. And I mean drowning -- best practices for certbot is that it runs twice daily from cron, that means that I'm getting 2 emails a day (I was on vacation for a week) where ~80% of the content is noise (22/28 lines per email * ~20 emails).
Personally, if I have more than 3 sites, all I want is:
the ones that are failing
the ones that were renewed (probably, although, possibly not)
a count of the number of sites that were skipped (maybe, possibly not even) -- but if it's included, it should be on that last line that currently says "1 renew failure(s), 0 parse failure(s)"
So, it should have said:
certbot-auto -q renew

...
Attempting to renew cert (broken.example.com) from /etc/letsencrypt/renewal/broken.example.com.conf produced an unexpected error: Failed authorization procedure. www.test.other.example.net (tls-sni-01): urn:acme:error:connection :: The server could not connect to the client to verify the domain :: DNS problem: SERVFAIL looking up CAA for www.test.other.example.net, test.other.example.net (tls-sni-01): urn:acme:error:connection :: The server could not connect to the client to verify the domain :: DNS problem: SERVFAIL looking up CAA for test.other.example.net. Skipping.

All renewal attempts failed. The following certs could not be renewed:
  /etc/letsencrypt/live/broken.example.com/fullchain.pem (failure)
1 renew failure(s), 0 parse failure(s), 22 not due for renewal
Here is a Certbot log showing the issue (if available):
Logs are stored in /var/log/letsencrypt by default. Feel free to redact domains, e-mail and IP addresses as you see fit.
Here is the relevant nginx server block or Apache virtualhost for the domain I am configuring:
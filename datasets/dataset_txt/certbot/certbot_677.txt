KeiroD commented on 13 Mar 2018
If you're having trouble using Certbot and aren't sure you've found a bug or
request for a new feature, please first try asking for help at
https://community.letsencrypt.org/. There is a much larger community there of
people familiar with the project who will be able to more quickly answer your
questions.
My operating system is (include version):
Ubuntu 14.04 LTS
I installed Certbot with (certbot-auto, OS package manager, pip, etc):
Package manager, via certbot.eff.org config
I ran this command and it produced this output:
root@heimkoma:~# certbot --nginx certonly
Saving debug log to /var/log/letsencrypt/letsencrypt.log
Error while running nginx -c /etc/nginx/nginx.conf -t.
nginx: [emerg] open() "/etc/letsencrypt/le_http_01_cert_challenge.conf" failed (2: No such file or directory) in /etc/nginx/nginx.conf:11
nginx: configuration file /etc/nginx/nginx.conf test failed
Could not choose appropriate plugin: The nginx plugin is not working; there may be problems with your existing configuration.
The error was: MisconfigurationError('Error while running nginx -c /etc/nginx/nginx.conf -t.\n\nnginx: [emerg] open() "/etc/letsencrypt/le_http_01_cert_challenge.conf" failed (2: No such file or directory) in /etc/nginx/nginx.conf:11\nnginx: configuration file /etc/nginx/nginx.conf test failed\n',)
The nginx plugin is not working; there may be problems with your existing configuration.
The error was: MisconfigurationError('Error while running nginx -c /etc/nginx/nginx.conf -t.\n\nnginx: [emerg] open() "/etc/letsencrypt/le_http_01_cert_challenge.conf" failed (2: No such file or directory) in /etc/nginx/nginx.conf:11\nnginx: configuration file /etc/nginx/nginx.conf test failed\n',)
root@heimkoma:~# ls -l /etc/letsencrypt/
total 24
drwx------ 3 root root 4096 Mar 13 09:15 accounts
-rw-r--r-- 1 root root 121 Jan 30 21:02 cli.ini
-rw-r--r-- 1 root root 1143 Mar 13 09:15 options-ssl-nginx.conf
drwxr-xr-x 2 root root 4096 Mar 13 09:15 renewal
drwxr-xr-x 5 root root 4096 Mar 13 09:12 renewal-hooks
-rw-r--r-- 1 root root 424 Mar 13 09:15 ssl-dhparams.pem
Certbot's behavior differed from what I expected because:
Why was it not able to create a new challenge.conf file as described per log?
Here is a Certbot log showing the issue (if available):
Logs are stored in /var/log/letsencrypt by default. Feel free to redact domains, e-mail and IP addresses as you see fit.
https://paste.ituralde.com/roliroqibi
Here is the relevant nginx server block or Apache virtualhost for the domain I am configuring:
https://paste.ituralde.com/jiyonelota
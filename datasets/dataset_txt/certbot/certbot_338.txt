Member
bmw commented on 14 Nov 2018
tests/letstest/scripts/test_sdists.sh which we currently run as part of the release process is now failing. I think this should be fixed quickly so it doesn't cause us problems whenever we go to do our next release. The cause of the failure is that newer versions of pytest cannot be installed using old versions of setuptools.
To resolve this, we either need to use a newer version of setuptools or an older version of pytest. My thought is to upgrade setuptools because it should prevent problems with other packages in the future and our tests should arguably work with the latest version of every package installed, however, either approach should work.
If we upgrade setuptools, we need to decide where to do it. My thought would be to do it somewhere in tools/_venv_common.py or the scripts it calls so other code that uses tools/_venv_common.py would benefit. (It also looks like tests/letstest/scripts/test_sdists.sh still uses the old name tools/_venv_common.sh and needs to be updated.) setuptools>=30.3 seems to be required.
If we decided to pin back pytest (and maybe other packages) instead, I don't have an opinion on the approach.
@ohemorange or @sydneyli, are you interested in taking this? I initially planned on doing it myself but haven't managed to get to it yet and think it's important. It shouldn't be much work.
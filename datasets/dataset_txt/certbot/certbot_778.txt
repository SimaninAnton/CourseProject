Member
bmw commented on 26 Jan 2018
This should work by querying the directory endpoint of the server and looking for new fields and/or the new names for existing fields to correctly determine the protocol version that should be used.
This should be done in a way where we store the value of the directory so acme.client.Client doesn't have to request it again. This should probably be accomplished by adding a new optional parameter to the ACME client which is the value of the directory.
There are many options on the return value here. The current plan is to have two different ACME client classes for each protocol (see #5287). With this in mind, the return value could be int/enum and directory value, ACME client type and directory, initialized ACME client of the right type, etc. I'm fine with any approach, but we have to live with the changes we make here for a long time so they should be designed carefully.
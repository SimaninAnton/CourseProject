Member
bmw commented on 28 Sep 2017 â€¢
edited
Imagine the following sequence of events:
We do a release, adding a new git tag with changes to our certbot-auto/letsencrypt-auto script.
An unrelated PR lands in master triggering CI.
A PR updating *-auto in the root of our repo to match the version from the release lands in master.
If tests/modification-check.sh has not been run yet for the first PR, when it does run, it will first compare certbot-auto to the files in master. Since these files were just updated in step 3, this check fails. It then compares the file to the version from our most recent git tag which also fails causing the entire test to fail.
This happened here. Our test should try to be more robust than this.
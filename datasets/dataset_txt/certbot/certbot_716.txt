arthibald commented on 23 Feb 2018
My operating system is (include version):
Centos 7
I installed Certbot with (certbot-auto, OS package manager, pip, etc):
yum
I ran this command and it produced this output:
certbot certonly --test-cert --manual --preferred-challenges=http --manual-auth-hook /path/to/http/authenticator.sh --manual-cleanup-hook /path/to/http/cleanup.sh -d example.com -d www.example.com
Inside /path/to/http/cleanup.sh:
#!/bin/bash
rm -f /var/www/htdocs/.well-known/acme-challenge/$CERTBOT_TOKEN
Certbot's behavior differed from what I expected because:
It appears the $CERTBOT_TOKEN is blank and the script tried:
rm -f /var/www/htdocs/.well-known/acme-challenge/
Here is a Certbot log showing the issue (if available):
Error output from certbot_cleanup.sh:
rm: cannot remove ‘/var/www/htdocs/.well-known/acme-challenge/’: Is a directory
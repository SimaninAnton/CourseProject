Contributor
jdkasten commented on 25 Jun 2015
make_or_verify_dir was initially written to avoid privilege escalation attacks. It checks that the directory is owned by the current user. Since files are overwritten and files are transferred into protected directories as root, it was important that those files were not edited by a lower privileged user. Requiring blanket permissions was an easy way to avoid the vulnerabilities.
Example vuln: Backup configuration files for Apache will automatically be transferred into the configuration if Let's Encrypt fails... or rather if certain backup files exist. Apache configuration files are Turing complete.
Now that the project has transitioned into a much more robust and feature heavy application. This limitation can be confusing and annoying.
We need a finer-grained approach that maintains the protections where necessary, but also avoids unnecessary restrictions.
turowicz commented on 20 Nov 2015
Description
After converting the pem files into a windows-compatible pfx file we get a successful server https connection and everything works fine for hosting websites.
Converting pem files into pfx
We issue the following command:
openssl pkcs12 -export -out cert.pfx -in cert.pem -inkey privkey.pem -certfile chain.pem
Problem
We also use the certificates for client authentication. While the certificate's headers state clearly that purpose is both for client and server auth (below), windows only detects the server auth. I've noticed that the header value has purposes in a different order than my other windows-compatible certificates.
What's in the LE-signed certificate:
Enchaned Key Usage
Server Authentication (1.3.6.1.5.5.7.3.1)
Client Authentication (1.3.6.1.5.5.7.3.2)
What's in an example self-signed certificate:
Enchaned Key Usage
Client Authentication (1.3.6.1.5.5.7.3.2)
Server Authentication (1.3.6.1.5.5.7.3.1)
Question
Has anyone got any ideas?
Maybe I'm converting it wrong.
LE bug?
Really I suspect it's probably just Windows being a buzzkill.
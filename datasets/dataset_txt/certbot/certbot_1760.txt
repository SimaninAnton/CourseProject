Contributor
cowlicks commented on 4 Oct 2016
I'm running a instance of boulder for local integration testing. Boulder recommends working with certbot in this way:
Check out the Certbot client from https://github.com/certbot/certbot and follow the setup instructions there. Once you've got the client set up, you'll probably want to run it against your local Boulder. There are a number of command line flags that are necessary to run the client against a local Boulder, and without root access. The simplest way to run the client locally is to source a file that provides an alias for certbot (certbot_test) that has all those flags:
source ~/certbot/tests/integration/_common.sh
certbot_test certonly -a standalone -d example.com
But here is what happens for me:
(venv) ➜  letsencrypt git:(master) ✗ source tests/integration/_common.sh
Root integration tests directory: /tmp/leiteKaS
(venv) ➜  letsencrypt git:(master) ✗ certbot_test certonly -a standalone -d example.com
usage: 
  certbot [SUBCOMMAND] [options] [-d domain] [-d domain] ...

Certbot can obtain and install HTTPS/TLS/SSL certificates.  By default,
it will attempt to use a webserver both for obtaining and installing the
cert. Major SUBCOMMANDS are:

  (default) run        Obtain & install a cert in your current webserver
  certonly             Obtain cert, but do not install it (aka "auth")
  install              Install a previously obtained cert in a server
  renew                Renew previously obtained certs that are near expiry
  revoke               Revoke a previously obtained certificate
  register             Perform tasks related to registering with the CA
  rollback             Rollback server configuration changes made during install
  config_changes       Show changes made to server config during installation
  plugins              Display information about installed plugins
certbot: error: unrecognized arguments: --config-dir /tmp/leiteKaS/conf --work-dir /tmp/leiteKaS/work --logs-dir /tmp/leiteKaS/logs
Basically the $store_flags line in _common.sh isn't working right.
I can apply this dirty hack to get things to work, but there must be a better way.
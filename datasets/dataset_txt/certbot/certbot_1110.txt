harvey637 commented on 12 Jun 2017 â€¢
edited by jsha
[Moderator's note: If you get the message "CAA record for XXX prevents issuance," please read https://letsencrypt.org/docs/caa/.
If that still doesn't answer your question, please post in https://community.letsencrypt.org/]
My operating system is CENTOS7
I installed Certbot with OS package manager
I ran this command and it produced this output:
certbot certonly --manual --preferred-challenges dns --dry-run -d <my_domain> --manual-auth-hook renew_auth.sh
My renew_auth.sh successfully integrates the $CERTBOT_VALIDATION into <my_domain> TXT record.
Certbot's behavior differed from what I expected because:
Additionally to TXT I have a CAA record for <my_domain> saying:
<my_domain> rdata_257 = 128 issue "Let's Encrypt Authority X3"
which is perfect for A+ validating <my_domain> with ssslabs.com and to me it looks great.
But then I get
-- The following errors were reported by the server:
Domain: <my_domain>
Type: connection
Detail: CAA record for <my_domain> prevents issuance
Here is a Certbot log showing the issue (if available): same as above
From my point of view a valid CAA record explaining lets encrypt as certificate authority is
a building block in ssl confidence and validation and should not interfere and prevent with renewal of my
certificate.
dirty workaround: remove CAA record and add it again after renewal
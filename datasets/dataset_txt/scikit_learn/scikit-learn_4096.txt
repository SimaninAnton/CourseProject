ebenolson commented on Dec 30, 2014
When calling log_loss with a label array (i.e. not an indicator matrix) for y_true, it uses a LabelBinarizer to construct the indicator matrix.
If not all classes in y_pred are present in y_true, this has the wrong shape, and it raises
ValueError: y_true and y_pred have different number of classes
Perhaps I don't understand the intended use of this mode, but it seems like it would work better to infer the indicator matrix from the shape of y_pred, as this causes brittleness where things appear to work until a batch of samples happens to not include every class.
Contributor
orausch commented on Nov 18, 2018
Description
LabelPropagation does not support string arrays, since it checks for unlabeled samples using y == -1.
A possible solution is to change the API for string arrays such that unlabeled samples are marked with the string "-1". See PR #11682 for more discussion.
Steps/Code to Reproduce
See https://gist.github.com/orausch/399045652a37553d00bd187e9dd119fd. Note that the test also fails when an object array containing -1s is passed.
Expected Results
The test for y_train_missing_strings passes.
Actual Results
See gist
Versions
ATLAS version 3.10.3 built by mockbuild on Thu Jul 12 20:47:26 UTC 2018:
   UNAME    : Linux buildhw-07.phx2.fedoraproject.org 4.17.3-200.fc28.x86_64 #1 SMP Tue Jun 26 14:17:07 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux
   INSTFLG  : -1 0 -a 1 -l 1
   ARCHDEFS : -DATL_OS_Linux -DATL_ARCH_HAMMER -DATL_CPUMHZ=1201 -DATL_SSE3 -DATL_SSE2 -DATL_SSE1 -DATL_USE64BITS -DATL_GAS_x8664
   F2CDEFS  : -DAdd_ -DF77_INTEGER=int -DStringSunStyle
   CACHEEDGE: 2097152
   F77      : /usr/bin/gfortran, version GNU Fortran (GCC) 8.1.1 20180626 (Red Hat 8.1.1-4)
   F77FLAGS : -fomit-frame-pointer -mfpmath=387 -O2 -msse3 -g -Wa,--noexecstack -fPIC -Wl,-z,relro -Wl,-z,now -specs=/usr/lib/rpm/redhat/redhat-hardened-ld -m64
   SMC      : /usr/bin/x86_64-redhat-linux-gcc, version x86_64-redhat-linux-gcc (GCC) 8.1.1 20180626 (Red Hat 8.1.1-4)
   SMCFLAGS : -fomit-frame-pointer -mfpmath=387 -O2 -msse3 -g -Wa,--noexecstack -fPIC -Wl,-z,relro -Wl,-z,now -specs=/usr/lib/rpm/redhat/redhat-hardened-ld -m64
   SKC      : /usr/bin/x86_64-redhat-linux-gcc, version x86_64-redhat-linux-gcc (GCC) 8.1.1 20180626 (Red Hat 8.1.1-4)
   SKCFLAGS : -fomit-frame-pointer -mfpmath=387 -O2 -msse3 -g -Wa,--noexecstack -fPIC -Wl,-z,relro -Wl,-z,now -specs=/usr/lib/rpm/redhat/redhat-hardened-ld -m64

System:
    python: 3.7.1 (default, Oct 23 2018, 18:19:07)  [GCC 8.2.1 20180801 (Red Hat 8.2.1-2)]
executable: /usr/bin/python3
   machine: Linux-4.18.16-300.fc29.x86_64-x86_64-with-fedora-29-Twenty_Nine

BLAS:
    macros: HAVE_CBLAS=None, ATLAS_INFO="\"3.10.3\""
  lib_dirs: /usr/lib64/atlas
cblas_libs: tatlas, tatlas

Python deps:
       pip: 18.0
setuptools: 40.4.3
   sklearn: 0.21.dev0
     numpy: 1.15.1
     scipy: 1.1.0
    Cython: 0.28.5
    pandas: None
breuderink commented on Apr 15, 2013
Sometimes I get what seems to be a divide-by-zero in the Nystr√∂m kernel approximation:
/usr/local/lib/python2.7/site-packages/sklearn/kernel_approximation.py:445: RuntimeWarning: divide by zero encountered in divide
  self.normalization_ = np.dot(U * 1. / np.sqrt(S), V)
/usr/local/lib/python2.7/site-packages/sklearn/kernel_approximation.py:445: RuntimeWarning: invalid value encountered in divide
  self.normalization_ = np.dot(U * 1. / np.sqrt(S), V)
I am trying to minimal example to reproduce the problem, but so far I have not been able to do so. I expect that some eigenvalues of the kernel matrix are rounded to zero, which could be caused by a rank-deficient kernel matrix. This is with sklearn version 0.13.1.
If that is the case, this problem can be fixed by adding a tiny ridge to the kernel matrix, or by adding a tiny value to the eigenvalues S. Alternatively, one could use only positive eigenvalues in the computation.
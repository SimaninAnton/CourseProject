ritocesura commented on Jan 30, 2018 â€¢
edited
Description
RandomForestRegressor drops in accuracy as well as number of leaves after a certain n_samples threshold, when restricting the depth with max_depth.
n_samples is sampled with fixed seed from a pool of 16 million samples. Additional information on nature of data can be provided if needed.
Steps/Code to Reproduce
If needed, I can provide a training and test set to reproduce the behavior described below.
Expected Results
Actual Results
I fixed the seed for sub-sampling as well as for training and ran this procedure multiple times without noticeable differences. All three test runs where trained with max_depth=15 and n_estimators=3. I am aware that n_estimators=3 is not very much but the same behavior arises with an increased number of trees. Mean absolute error is chosen here, due to the nature of the prediction. If additional information is needed, on the way inference is done, it can be provided.
n_samples=100,000: mean absolute error: 0.375; Avg number of leaves per tree = 10,600
n_samples=200,000: mean absolute error: 0.312; Avg number of leaves per tree = 12,610
n_samples=400,000: mean absolute error: 0.603; Avg number of leaves per tree = 2,920
If the max_depth of the forest is increased, the same behavior occurs at a higher number of samples.
Note, that the mean absolute error decreases with increasing number of samples, if the tree growing process is not restricted with the max_depth parameter.
Versions
Python 2.7.12 (default, Nov 20 2017, 18:23:56)
[GCC 5.4.0 20160609]
NumPy 1.11.0
SciPy 0.19.1
Scikit-Learn 0.19.1
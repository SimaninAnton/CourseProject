bayesfactor commented on Sep 28, 2016
Description
ValueError thrown when using dump_svmlight_file on a pandas dataframe that contains NaN values. The expected behavior should be to skip NaN values.
Steps/Code to Reproduce
from sklearn.datasets import dump_svmlight_file
import pandas as pd
df=pd.read_csv('somefile.csv')
dump_svmlight_file(df,[0]*len(df),'svmlightfile')
Actual Results
Traceback (most recent call last):
File "", line 1, in
File "/usr/lib64/python3.3/site-packages/sklearn/datasets/svmlight_format.py", line 393, in dump_svmlight_file
Xval = check_array(X, accept_sparse='csr')
File "/usr/lib64/python3.3/site-packages/sklearn/utils/validation.py", line 398, in check_array
_assert_all_finite(array)
File "/usr/lib64/python3.3/site-packages/sklearn/utils/validation.py", line 54, in _assert_all_finite
" or a value too large for %r." % X.dtype)
ValueError: Input contains NaN, infinity or a value too large for dtype('float64').#### Expected Results
Versions
Linux-2.6.32-573.26.1.el6.centos.plus.x86_64-x86_64-with-centos-6.7-Final
Python 3.3.0 (default, Feb 12 2013, 17:01:04)
[GCC 4.4.6 20120305 (Red Hat 4.4.6-4)]
NumPy 1.9.2
SciPy 0.14.1
Scikit-Learn 0.17.1
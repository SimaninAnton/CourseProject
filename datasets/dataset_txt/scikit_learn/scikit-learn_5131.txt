Contributor
conradlee commented on Nov 8, 2012
I recently updated the implementation of precision_recall_curve in metrics.py to make it more efficient. I now see that the output has changed in some situations---for example, consider the following code:
from sklearn.metrics import precision_recall_curve
labels = [1,0,0,1]
predict_probas = [1,2,3,4]
precision_recall_curve(labels, predict_probas)
The output here will differ depending on whether you use 0.12 (stable) or the latest version of master.
In the stable branch (using the old implementation), the output is:
>>> (array([ 0.5       ,  0.33333333,  0.5       ,  1.        ,  1.        ]),
   array([ 1. ,  0.5,  0.5,  0.5,  0. ]),
   array([1, 2, 3 ,4]))
In the dev branch (using the new implementation), the output is:
>>>(array([ 0.5       ,  0.33333333,  0.5       ,  1.        ]),
  array([ 1. ,  0.5,  0.5,  0. ]),
  array([2, 3]))
The output of the new code is wrong. I've already created a fix for this--I'll post the pull request here in a minute.
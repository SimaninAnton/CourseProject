Contributor
rhiever commented on Jan 18, 2017 â€¢
edited by TomDLT
I have been developing a new sklearn-compatible estimator that uses joblib to parallelize the algorithm. However, I run into issues when I set n_jobs to >1 for my estimator as well as the cross_val_score function, e.g.,
...
clf = MyCustomEstimator(n_jobs=3)
print(cross_val_score(clf, features, labels, cv=5, n_jobs=5))
With my estimator, I get a warning that joblib doesn't allow nested parallelization calls, and sets n_jobs to 1 for MyCustomEstimator.
However, when I try the same with, say, RandomForestClassifier, I don't get the warning. e.g.,
clf = RandomForestClassifier(n_estimators=500, n_jobs=10)
print(cross_val_score(clf, features, labels, cv=5, n_jobs=5))
It's not clear if that warning message is suppressed or if the functions do something more intelligent with nested parallelization calls.
I don't see any code handling this in the cross_val_score function. Does cross_val_score do anything fancy here?
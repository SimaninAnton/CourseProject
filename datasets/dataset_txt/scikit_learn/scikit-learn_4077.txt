elyase commented on Jan 12, 2015
Test code:
import numpy as np
from sklearn.ensemble import RandomForestRegressor
from sklearn.grid_search import GridSearchCV
from sklearn.metrics import r2_score

X = np.random.rand(50, 2)
y = np.random.rand(50)

tuned_parameters = {'n_estimators': [10, 20]}

rf = RandomForestRegressor(n_estimators=10, verbose=1)
clf = GridSearchCV(rf, tuned_parameters, scoring=r2_score, verbose=1)
clf.fit(X, y)
Traceback:
Fitting 3 folds for each of 2 candidates, totalling 6 fits
[Parallel(n_jobs=1)]: Done   1 jobs       | elapsed:    0.0s
[Parallel(n_jobs=1)]: Done   1 out of   1 | elapsed:    0.0s finished
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-80-ff0edd6bafcf> in <module>()
     11 rf = RandomForestRegressor(n_estimators=10, verbose=1)
     12 clf = GridSearchCV(rf, tuned_parameters, scoring=r2_score, verbose=1)
---> 13 clf.fit(X, y)

/Users/elyase/miniconda/envs/rftest/lib/python3.4/site-packages/sklearn/grid_search.py in fit(self, X, y)
    594 
    595         """
--> 596         return self._fit(X, y, ParameterGrid(self.param_grid))
    597 
    598 

/Users/elyase/miniconda/envs/rftest/lib/python3.4/site-packages/sklearn/grid_search.py in _fit(self, X, y, parameter_iterable)
    376                                     train, test, self.verbose, parameters,
    377                                     self.fit_params, return_parameters=True)
--> 378             for parameters in parameter_iterable
    379             for train, test in cv)
    380 

/Users/elyase/miniconda/envs/rftest/lib/python3.4/site-packages/sklearn/externals/joblib/parallel.py in __call__(self, iterable)
    651             self._iterating = True
    652             for function, args, kwargs in iterable:
--> 653                 self.dispatch(function, args, kwargs)
    654 
    655             if pre_dispatch == "all" or n_jobs == 1:

/Users/elyase/miniconda/envs/rftest/lib/python3.4/site-packages/sklearn/externals/joblib/parallel.py in dispatch(self, func, args, kwargs)
    398         """
    399         if self._pool is None:
--> 400             job = ImmediateApply(func, args, kwargs)
    401             index = len(self._jobs)
    402             if not _verbosity_filter(index, self.verbose):

/Users/elyase/miniconda/envs/rftest/lib/python3.4/site-packages/sklearn/externals/joblib/parallel.py in __init__(self, func, args, kwargs)
    136         # Don't delay the application, to avoid keeping the input
    137         # arguments in memory
--> 138         self.results = func(*args, **kwargs)
    139 
    140     def get(self):

/Users/elyase/miniconda/envs/rftest/lib/python3.4/site-packages/sklearn/cross_validation.py in _fit_and_score(estimator, X, y, scorer, train, test, verbose, parameters, fit_params, return_train_score, return_parameters)
   1238     else:
   1239         estimator.fit(X_train, y_train, **fit_params)
-> 1240     test_score = _score(estimator, X_test, y_test, scorer)
   1241     if return_train_score:
   1242         train_score = _score(estimator, X_train, y_train, scorer)

/Users/elyase/miniconda/envs/rftest/lib/python3.4/site-packages/sklearn/cross_validation.py in _score(estimator, X_test, y_test, scorer)
   1294         score = scorer(estimator, X_test)
   1295     else:
-> 1296         score = scorer(estimator, X_test, y_test)
   1297     if not isinstance(score, numbers.Number):
   1298         raise ValueError("scoring must return a number, got %s (%s) instead."

/Users/elyase/miniconda/envs/rftest/lib/python3.4/site-packages/sklearn/metrics/metrics.py in r2_score(y_true, y_pred, sample_weight)
   2322 
   2323     """
-> 2324     y_type, y_true, y_pred = _check_reg_targets(y_true, y_pred)
   2325 
   2326     if sample_weight is not None:

/Users/elyase/miniconda/envs/rftest/lib/python3.4/site-packages/sklearn/metrics/metrics.py in _check_reg_targets(y_true, y_pred)
     63         Estimated target values.
     64     """
---> 65     y_true, y_pred = check_arrays(y_true, y_pred)
     66 
     67     if y_true.ndim == 1:

/Users/elyase/miniconda/envs/rftest/lib/python3.4/site-packages/sklearn/utils/validation.py in check_arrays(*arrays, **options)
    252         if size != n_samples:
    253             raise ValueError("Found array with dim %d. Expected %d"
--> 254                              % (size, n_samples))
    255 
    256         if not allow_lists or hasattr(array, "shape"):

ValueError: Found array with dim 17. Expected 10
I I leave the default option scoring=None it works ok.
I have:
OSX: 10.10.1
python: 3.4.2 (conda environment)
sklearn: 0.15.2
numpy 1.9.1
Contributor
miguelbarao commented on May 26, 2019
Description
Installing scikit-learn 0.21.2
pip install -U scikit-learn
fails on FreeBSD 12.0 + python 3.7 with a message related with not finding an OpenMP header file:
...
    compile options: '-c'
    extra options: '-fopenmp'
    cc: test_openmp.c
    test_openmp.c:1:10: fatal error: 'omp.h' file not found
    #include <omp.h>
...
Fix
Defining the following environment variables fixes it:
export CFLAGS="$CFLAGS -I/usr/local/include"
export CXXFLAGS="$CXXFLAGS -I/usr/local/include"
export LDFLAGS="$LDFLAGS -L/usr/local/lib -lomp"
export DYLD_LIBRARY_PATH=/usr/local/lib
pip install -U scikit-learn
Versions
>>> import sklearn; sklearn.show_versions()

System:
    python: 3.7.3 (default, Apr 11 2019, 01:16:56)  [Clang 6.0.1 (tags/RELEASE_601/final 335540)]
executable: /usr/local/bin/python
   machine: FreeBSD-12.0-RELEASE-p4-amd64-64bit-ELF

BLAS:
    macros: HAVE_CBLAS=None
  lib_dirs: /usr/local/lib
cblas_libs: openblas, openblas

Python deps:
       pip: 19.1.1
setuptools: 41.0.0
   sklearn: 0.21.2
     numpy: 1.16.3
     scipy: 1.3.0
    Cython: 0.29
    pandas: 0.24.2
yanyang82 commented on Apr 4, 2019
In gradient_boosting.py, the MultinomialDeviance defines its init_estimator to be an instance of PriorProbabilityEstimator, which predicts the sample proportions for each class label as the prior. This is inconsistent with _score_to_proba which maps the score (log likelihood) to actual probabilities
The correct init estimator should use the log of the sample proportions for each class label, which then recovers to probability when substituting into _score_to_proba.
Both BinomialDeviance and ExponentialLoss are consistent in that regard in that their init_estimator predicts log likelihood and half log likelihood respectively, which are the target value each regression tree is predicting.
Contributor
glemaitre commented on Jan 11, 2018
Due to changes proposed in #10404, it seems that check_array as currently a main limitation. force_all_finite will force both NaN and infto be rejected. If preprocessing methods (whenever this is possible) should let pass NaN, this argument is not enough permissive.
Before to implement anything, I think it could be good to have some feedback on the way to go. I see the following solutions:
force_all_finite could still accept a bool to preserve the behaviour. Additionally, it could accept an str to filter only inf.
#7892 proposes to have an additional argument allow_nan. @amueller was worried that it makes check_array to complex.
make a private function _assert_finite_or_nan (similarly to this proposal removing the numpy version checking) in the data.py which can be shared between the preprocessing methods.
They are the solutions that I have in mind for the moment but anything else is welcomed.
@jnothman @agramfort @amueller @lesteve @ogrisel @GaelVaroquaux I would be grateful for any insight.
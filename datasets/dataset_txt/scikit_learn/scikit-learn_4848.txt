haroldn commented on May 15, 2013
I appreciate any aid in this issue, and apologize I've missed finding it in a previous issue. I've been getting the following message (I'm running on Mac OS X 10.7):
Here is the full traceback:
$ nosetests sklearn -exe
....................S........................................../usr/local/lib/python2.7/site-packages/sklearn/manifold/spectral_embedding.py:225: UserWarning: Graph is not fully connected, spectral embedding may not works as expected.
  warnings.warn("Graph is not fully connected, spectral embedding"
...........SS.........F.....SE................................................S.........................................................S.........................................SSS....................../usr/local/lib/python2.7/site-packages/sklearn/externals/joblib/test/test_func_inspect.py:122: UserWarning: Cannot inspect object <functools.partial object at 0x10a829788>, ignore list will not work.
  nose.tools.assert_equal(filter_args(ff, ['y'], (1, )),
...................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................FF......................................................................................S......................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................SSS....S....S...................................................................................................................................
======================================================================
ERROR: test suite for <module 'sklearn.datasets.tests.test_lfw' from '/usr/local/lib/python2.7/site-packages/sklearn/datasets/tests/test_lfw.pyc'>
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/site-packages/nose/suite.py", line 208, in run
    self.setUp()
  File "/usr/local/lib/python2.7/site-packages/nose/suite.py", line 291, in setUp
    self.setupContext(ancestor)
  File "/usr/local/lib/python2.7/site-packages/nose/suite.py", line 314, in setupContext
    try_run(context, names)
  File "/usr/local/lib/python2.7/site-packages/nose/util.py", line 469, in try_run
    return func()
  File "/usr/local/lib/python2.7/site-packages/sklearn/datasets/tests/test_lfw.py", line 72, in setup_module
    imsave(file_path, uniface)
  File "/Users/admin/src/scipy/scipy/misc/pilutil.py", line 160, in imsave
    im.save(name)
  File "/usr/local/lib/python2.7/site-packages/PIL/Image.py", line 1439, in save
    save_handler(self, fp, filename)
  File "/usr/local/lib/python2.7/site-packages/PIL/JpegImagePlugin.py", line 471, in _save
    ImageFile._save(im, fp, [("jpeg", (0,0)+im.size, 0, rawmode)])
  File "/usr/local/lib/python2.7/site-packages/PIL/ImageFile.py", line 495, in _save
    e = Image._getencoder(im.mode, e, a, im.encoderconfig)
  File "/usr/local/lib/python2.7/site-packages/PIL/Image.py", line 401, in _getencoder
    raise IOError("encoder %s not available" % encoder_name)
IOError: encoder jpeg not available

======================================================================
FAIL: sklearn.datasets.tests.test_base.test_load_sample_image
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/site-packages/nose/case.py", line 197, in runTest
    self.test(*self.arg)
  File "/usr/local/lib/python2.7/site-packages/sklearn/datasets/tests/test_base.py", line 142, in test_load_sample_image
    assert_equal(china.dtype, 'uint8')
AssertionError: dtype('O') != 'uint8'

======================================================================
FAIL: sklearn.feature_extraction.tests.test_image.test_connect_regions
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/site-packages/nose/case.py", line 197, in runTest
    self.test(*self.arg)
  File "/usr/local/lib/python2.7/site-packages/sklearn/feature_extraction/tests/test_image.py", line 63, in test_connect_regions
    assert_equal(ndimage.label(mask)[1], cs_graph_components(graph)[0])
AssertionError: 777 != 767

======================================================================
FAIL: sklearn.feature_extraction.tests.test_image.test_connect_regions_with_grid
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/site-packages/nose/case.py", line 197, in runTest
    self.test(*self.arg)
  File "/usr/local/lib/python2.7/site-packages/sklearn/feature_extraction/tests/test_image.py", line 70, in test_connect_regions_with_grid
    assert_equal(ndimage.label(mask)[1], cs_graph_components(graph)[0])
AssertionError: 777 != 767

----------------------------------------------------------------------
Ran 1595 tests in 81.893s

FAILED (SKIP=15, errors=1, failures=3)
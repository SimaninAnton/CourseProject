Member
ogrisel commented on Apr 30, 2015
@amueller recently (#4550) refactored the test_common / estimators_checks plumbing to provide a single check_estimator utility method to 3rd party developers who want to automate the compatibility checks of their own estimators with scikit-learn standards.
To be pragmatic, some checks have to be skipped for some specific estimators. At the moment this is done with the following idiom in the body of the checks them-selves:
    ...
    if name not in ['AdditiveChi2Sampler', 'Binarizer', 'Normalizer',
                    'PLSCanonical', 'PLSRegression', 'CCA', 'PLSSVD']:
        yield check_transformer_data_not_an_array
    ...
Instead of hardcoding the list of the names of the estimators to skip in the body of the check functions, I think it would be cleaner to extract those as module levels constants such as:
TRANSFORMER_DATA_NOT_AN_ARRAY_SKIP = [
    'AdditiveChi2Sampler', 'Binarizer', 'Normalizer',
    'PLSCanonical', 'PLSRegression', 'CCA', 'PLSSVD',
]
and then in the body of the function:
    ...
    if name not in TRANSFORMER_DATA_NOT_AN_ARRAY_SKIP:
        yield check_transformer_data_not_an_array
    ...
Furthermore we should probably use the fully qualified names or type objects in the list to make it easier for 3rd party developers to register there in classes in the skip list of a specific check without risking class name conflicts with classes from scikit-learn.
WDYT?
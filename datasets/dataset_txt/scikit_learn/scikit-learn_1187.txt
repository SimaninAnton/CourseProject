Yiyiyimu commented on Aug 4, 2018
Description
Hi!
The thing is I want to use the precision at 100% (or the highest possible) recall as the scorer in cross validation. But I can't find the way to put the predicted probability (which is needed for calculate the precision_recall_curve to get precision at 100% recall) of the classifier into the scorer.
Or is there another way to get precision at 100% recall? The only way I know is to calculate the precision_recall_curve.
Thank you so much for your help!
Code
from sklearn.metrics import precision_recall_curve, make_scorer
from sklearn.linear_model import LogisticRegression
from sklearn.model_selection import GridSearchCV

def precision_at_100recall (X_true, y_true, pred_proba):
    return (precision_recall_curve(y_true, pred_proba, pos_label=1))[0][0]

my_scorer=make_scorer(precision_at_100recall, greater_is_better = True, needs_proba=True)

```If needed
LogReg = LogisticRegression(penalty='l1')
gridLogReg = GridSearchCV ( LogReg , param_gridLogReg , cv=4 , scoring=my_scorer , verbose=1)
gridLogReg.fit(X_train,y_train)
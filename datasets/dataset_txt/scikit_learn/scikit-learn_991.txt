Contributor
glemaitre commented on Oct 16, 2018
I think that we have a possible regression linked to the nested parallelism. Let's take the following minimum example:
import numpy as np                                                                   
from sklearn.ensemble import RandomForestClassifier                                  
from sklearn.model_selection import cross_val_score                                  
                                                                                     
X = np.random.randn(500000, 80)                                                      
y = np.random.randint(0, 2, 500000)                                                  
                                                                                     
clf = RandomForestClassifier(n_jobs=-1)                                                               
cross_val_score(clf, X, y, n_jobs=1) 
In 0.19.2, htop shows activity for all processors. In 0.20, a single core is active. Is it link to the heuristic to avoid to over-subscription?
Can anyone try to reproduce it? ping @tomMoral @ogrisel @pierreglaser
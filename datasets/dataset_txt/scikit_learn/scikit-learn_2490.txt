isaac-gs commented on Jan 6, 2017
Thank you all for this great set of tools. I may have found a bug. It isn't getting in my way, but you probably want to know anyways. Just tell me if I should provide more information.
NOTE: I have Bash on Ubuntu on Windows on my machine, and this problem does not occur when run through Bash. This problem is exclusive to running through Windows.
Description
When using RFECV with param "n_jobs" > 1, each process restarts my code from the very beginning.
Steps/Code to Reproduce
When I run this code,
def reduce_features(train_x, train_y, test_x):
    svc = svm.LinearSVC(C=0.01, class_weight="balanced")
    rfe = RFECV(svc, step=1, n_jobs=2)
    model = rfe.fit(train_x, numpy.ravel(train_y))

    train_x = model.transform(train_x)
    test_x = model.transform(test_x)
    return train_x, test_x
Each process then restarts my script from the very beginning. Removing the "n_jobs" parameter solves the issue.
Expected Results
Beginning training data
Beginning testing data
Beginning scale and reduce phase
Results output expected
Actual Results
Beginning training data
Beginning testing data
Beginning scale and reduce phase
Beginning training data
Beginning training data
Beginning testing data
Beginning testing data
Traceback (most recent call last): <NOTE: This happens when I press Ctrl+C>
Traceback (most recent call last):
File "", line 1, in
File "", line 1, in
File "\Python\Python35\lib\multiprocessing\spawn.py", line 106, in spawn_main
File "\Python\Python35\lib\multiprocessing\spawn.py", line 106, in spawn_main
exitcode = _main(fd)
exitcode = _main(fd)
File "\Python\Python35\lib\multiprocessing\spawn.py", line 115, in _main
File "\Python\Python35\lib\multiprocessing\spawn.py", line 115, in _main
prepare(preparation_data)
prepare(preparation_data)
File "\Python\Python35\lib\multiprocessing\spawn.py", line 226, in prepare
File "\Python\Python35\lib\multiprocessing\spawn.py", line 226, in prepare
_fixup_main_from_path(data['init_main_from_path'])
_fixup_main_from_path(data['init_main_from_path'])
File "\Python\Python35\lib\multiprocessing\spawn.py", line 278, in _fixup_main_from_path
File "\Python\Python35\lib\multiprocessing\spawn.py", line 278, in _fixup_main_from_path
run_name="mp_main")
run_name="mp_main")
and so on.....
Versions
Windows-10-10.0.14393-SP0
Python 3.5.2 (v3.5.2:4def2a2901a5, Jun 25 2016, 22:18:55) [MSC v.1900 64 bit (AMD64)]
NumPy 1.11.3
SciPy 0.18.1
Scikit-Learn 0.18.1
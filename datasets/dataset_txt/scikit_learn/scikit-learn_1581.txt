snehlatamohite commented on Jan 31, 2018 â€¢
edited by rth
Description
Test - sklearn/cluster/tests/test_mean_shift.py::test_estimate_bandwidth_1sample fails on ppc64le platform
Steps/Code to Reproduce
We have build scikit-learn from source using below steps
yum update -y
yum install wget
wget https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm
rpm -ivh epel-release-latest-7.noarch.rpm
rpm -ivh epel-release-latest-7.noarch.rpm
yum update -y
yum install -y python-pip python-wheel swig python-devel.ppc64le atlas-devel.ppc64le blas-devel.ppc64le lapack-devel.ppc64le
yum install -y openblas-devel.ppc64le python-virtualenv.noarch gcc-c++ make gcc-gfortran
pip install --upgrade pip
pip install cython pytest
git clone https://github.com/scikit-learn/scikit-learn
cd scikit-learn/
make all

sklearn/cluster/tests/test_mean_shift.py::test_estimate_bandwidth_1sample fails on ppc64le platform with below error. 
Test Results -   test_estimate_bandwidth_1sample test failed with assertion error

_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <sklearn.utils._unittest_backport.TestCase testMethod=__init__>, first = 2.384185791015625e-07, second = 0.0, msg = '2.384185791015625e-07 != 0.0'

    def _baseAssertEqual(self, first, second, msg=None):
        """The default assertEqual implementation, not type specific."""
        if not first == second:
            standardMsg = '%s != %s' % (safe_repr(first), safe_repr(second))
            msg = self._formatMessage(msg, standardMsg)
>           raise self.failureException(msg)
E           AssertionError: 2.384185791015625e-07 != 0.0

first      = 2.384185791015625e-07
msg        = '2.384185791015625e-07 != 0.0'
second     = 0.0
self       = <sklearn.utils._unittest_backport.TestCase testMethod=__init__>
standardMsg = '2.384185791015625e-07 != 0.0'

/usr/lib64/python2.7/unittest/case.py:546: AssertionError
Any help to resolve the issue will be appreciated.
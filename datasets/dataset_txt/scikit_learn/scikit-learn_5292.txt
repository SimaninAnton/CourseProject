fwerner commented on Aug 11, 2012
Hi,
running MinCovDet.fit on a large dataset, e.g.
import numpy as np
from sklearn.covariance import MinCovDet

n_samples, n_features = 50000, 2

X = np.random.randn(n_samples * n_features).reshape(n_samples, n_features)
MinCovDet().fit(X)
yields an exception:
Traceback (most recent call last):
  File "testMinCovDet.py", line 7, in <module>
    MinCovDet().fit(X)
  File "/usr/lib/python2.7/site-packages/sklearn/covariance/robust_covariance.py", line 540, in fit
    random_state=self.random_state)
  File "/usr/lib/python2.7/site-packages/sklearn/covariance/robust_covariance.py", line 375, in fast_mcd
    all_best_locations[subset_slice] = best_locations_sub
ValueError: array is not broadcastable to correct shape
There are two issues connected to this:
the number of trials (and subset sizes etc.) in fast_mcd are hardcoded; with a large dataset, select_candidates() is called with select > n_trials
in this case, select_candidates does not return the promised arrays of shape (select, n_features), but (n_trials, n_features)
Cheers,
Felix
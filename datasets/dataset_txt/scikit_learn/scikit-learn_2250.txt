freedomzl commented on Apr 18, 2017 •
edited
在用维基百科语料训练word2vec词向量时需要对语料进行处理，第一步是将xml文档转换成text文档，运行脚本时报错了，脚本内容如下：
#!/usr/bin/env python
import logging
import os.path
import sys
from gensim.corpora import WikiCorpus
if name == 'main':
program = os.path.basename(sys.argv[0])
logger = logging.getLogger(program)
logging.basicConfig(format='%(asctime)s: %(levelname)s: %(message)s')
logging.root.setLevel(level=logging.INFO)
logger.info("running %s" % ' '.join(sys.argv))
check and process input arguments
if len(sys.argv) < 3:
print globals()['doc'] % locals()
sys.exit(1)
inp, outp = sys.argv[1:3]
space = " "
i = 0
output = open(outp, 'w')
wiki = WikiCorpus(inp, lemmatize=False, dictionary={})
for text in wiki.get_texts():
output.write(space.join(text) + "\n")
i = i + 1
if (i % 10000 == 0):
logger.info("Saved " + str(i) + " articles")
output.close()
logger.info("Finished Saved " + str(i) + " articles")
下面是报错的内容，该如何解决，就指点：
E:\PycharmProjects\test>python process_wiki.py
C:\ProgramData\Anaconda2\lib\site-packages\gensim\utils.py:860: UserWarning: det
ected Windows; aliasing chunkize to chunkize_serial
warnings.warn("detected Windows; aliasing chunkize to chunkize_serial")
2017-04-18 15:12:55,609: INFO: running process_wiki.py
Traceback (most recent call last):
File "process_wiki.py", line 21, in
print globals()['doc'] % locals()
TypeError: unsupported operand type(s) for %: 'NoneType' and 'dict'
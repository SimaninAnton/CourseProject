Contributor
tomMoral commented on Jun 20, 2017
In some of the test, we use the global random number generator (rng) of numpy, seeded to 0 np.random.seed(0).
This is not thread safe and should be corrected to be consistent with most of the testing suit.
I think the correct code should use from sklearn.utils import check_random_state, replace the seeding operation by rng = check_random_state(0) and use the rng object instead of np.random when generating random numbers.
A list of the tests I found:
sklearn/cross_decomposition/tests/test_pls.py:    np.random.seed(11)
sklearn/cross_decomposition/tests/test_pls.py:    np.random.seed(None)
sklearn/decomposition/tests/test_fastica.py:    np.random.seed(0)
sklearn/feature_selection/tests/test_mutual_info.py:    np.random.seed(0)
sklearn/feature_selection/tests/test_mutual_info.py:    np.random.seed(0)
sklearn/feature_selection/tests/test_mutual_info.py:    np.random.seed(0)
sklearn/feature_selection/tests/test_mutual_info.py:    np.random.seed(0)
sklearn/gaussian_process/tests/test_gaussian_process.py:    np.random.seed(0)
sklearn/gaussian_process/tests/test_gpc.py:    np.random.seed(0)
sklearn/gaussian_process/tests/test_gpr.py:    np.random.seed(0)
sklearn/neighbors/tests/test_ball_tree.py:    np.random.seed(0)
sklearn/neighbors/tests/test_ball_tree.py:    np.random.seed(0)
sklearn/neighbors/tests/test_ball_tree.py:    np.random.seed(0)
sklearn/neighbors/tests/test_ball_tree.py:    np.random.seed(0)
sklearn/neighbors/tests/test_ball_tree.py:    np.random.seed(0)
sklearn/neighbors/tests/test_ball_tree.py:    np.random.seed(0)
sklearn/neighbors/tests/test_ball_tree.py:    np.random.seed(0)
sklearn/neighbors/tests/test_ball_tree.py:    np.random.seed(0)
sklearn/neighbors/tests/test_ball_tree.py:    np.random.seed(0)
sklearn/neighbors/tests/test_ball_tree.py:    np.random.seed(0)
sklearn/neighbors/tests/test_kde.py:    #np.random.seed(0)
sklearn/neighbors/tests/test_dist_metrics.py:        np.random.seed(rseed)
sklearn/neighbors/tests/test_kd_tree.py:    np.random.seed(0)
sklearn/neighbors/tests/test_kd_tree.py:    np.random.seed(0)
sklearn/neighbors/tests/test_kd_tree.py:    np.random.seed(0)
sklearn/neighbors/tests/test_kd_tree.py:    np.random.seed(0)
sklearn/neighbors/tests/test_kd_tree.py:    np.random.seed(0)
sklearn/neighbors/tests/test_kd_tree.py:    np.random.seed(0)
sklearn/neighbors/tests/test_kd_tree.py:    np.random.seed(0)
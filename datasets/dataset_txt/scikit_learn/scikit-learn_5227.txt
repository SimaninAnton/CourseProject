Member
ogrisel commented on Sep 12, 2012
Most validation utilities in sklearn.utils.validation will trigger expensive memory copy of data inputs that are np.memmap because those utilities mostly use np.asarray instead of np.asanyarray (that preserve subclasses of np.ndarray as is the case for np.memmap).
It seems to be that we used to use np.asanyarray in the past. Anybody know why those functions use asarray instead?
Also it would be better to have and explicit parameter order with values in ["C", "F", None] to respectively force C contiguity, Fortran contiguity or accept any of those.
Edit: the above description is incorrect and the issue should be solved in the joblib pickler instead as np.asarray does not copy the memory buffer hence is perfectly legit in the validation functions.
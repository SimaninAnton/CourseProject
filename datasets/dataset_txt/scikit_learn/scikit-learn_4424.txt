gatapia commented on Apr 28, 2014
Gist: https://gist.github.com/gatapia/11363090
Data Can be Downloaded From: http://oem.picnet.com.au/all_data.p.zip
(rename .zip to .bz2)
Basically, as long as the grid search takes long enough a dead lock will eventually occur. During grid search I have had as few as 25 out of 32 CPUs being used (n_jobs=25) and no memory pressure on those processes.
Sometimes this message is displayed on the console:
*** Error in /usr/bin/python': realloc(): invalid pointer: 0x00007fa3bf253a90 ***
But not always and deadlock can occur without this happening.
Ctrl+C to prints following thread dump (just top printed):
[CV]  max_features=39, min_samples_split=5, n_estimators=470, max_depth=23, min_samples_leaf=3 -  49.9s
[CV]  max_features=39, min_samples_split=5, n_estimators=475, max_depth=23, min_samples_leaf=3 -  49.0s
[Parallel(n_jobs=30)]: Done 105 out of 108 | elapsed:  3.7min remaining:    6.3s
[CV]  max_features=39, min_samples_split=5, n_estimators=475, max_depth=23, min_samples_leaf=3 -  51.8s
[CV]  max_features=39, min_samples_split=5, n_estimators=470, max_depth=23, min_samples_leaf=3 -  55.1s
[CV]  max_features=39, min_samples_split=5, n_estimators=480, max_depth=23, min_samples_leaf=2 - 1.0min
[CV]  max_features=39, min_samples_split=5, n_estimators=480, max_depth=23, min_samples_leaf=3 -  51.5s
[CV]  max_features=39, min_samples_split=5, n_estimators=475, max_depth=23, min_samples_leaf=2 - 1.1min
[CV]  max_features=39, min_samples_split=5, n_estimators=480, max_depth=23, min_samples_leaf=3 -  53.7s
[CV]  max_features=39, min_samples_split=5, n_estimators=480, max_depth=23, min_samples_leaf=2 - 1.1min





^CProcess PoolWorker-18:
Process PoolWorker-13:
Process PoolWorker-12:
Process PoolWorker-10:
Process PoolWorker-26:
Process PoolWorker-21:
Process PoolWorker-16:
Process PoolWorker-2:
Traceback (most recent call last):
Traceback (most recent call last):
Traceback (most recent call last):
Traceback (most recent call last):
Traceback (most recent call last):
Traceback (most recent call last):
Traceback (most recent call last):
Process PoolWorker-33:
  File "/usr/lib/python2.7/multiprocessing/process.py", line 258, in _bootstrap
  File "/usr/lib/python2.7/multiprocessing/process.py", line 258, in _bootstrap
  File "/usr/lib/python2.7/multiprocessing/process.py", line 258, in _bootstrap
  File "/usr/lib/python2.7/multiprocessing/process.py", line 258, in _bootstrap
  File "/usr/lib/python2.7/multiprocessing/process.py", line 258, in _bootstrap
  File "/usr/lib/python2.7/multiprocessing/process.py", line 258, in _bootstrap
Traceback (most recent call last):
  File "/usr/lib/python2.7/multiprocessing/process.py", line 258, in _bootstrap
  File "/usr/lib/python2.7/multiprocessing/process.py", line 258, in _bootstrap
Traceback (most recent call last):
  File "/usr/lib/python2.7/multiprocessing/process.py", line 258, in _bootstrap
Process PoolWorker-29:
Process PoolWorker-22:
Process PoolWorker-24:
ps-aux showing no real server activity during deadlock:
asutera commented on Sep 17, 2015
Hi,
When running "make test", I have this:
ERROR: sklearn.datasets.tests.test_20news.test_20news
Which corresponds to this:
try:
data = datasets.fetch_20newsgroups(
subset='all', download_if_missing=False, shuffle=False)
except IOError:
raise SkipTest("Download 20 newsgroups to run this test")
# Extract a reduced dataset
data2cats = datasets.fetch_20newsgroups(
    subset='all', categories=data.target_names[-1:-3:-1], shuffle=False)
# Check that the ordering of the target_names is the same
# as the ordering in the full dataset
assert_equal(data2cats.target_names,
             data.target_names[-2:])
Apparently, line 264 (see below) in "twenty_newsgroups.py" does not work and "data.target_names" is still made of all names and modifying it does not change a thing.
data.target_names = list(categories)
Thanks !
NB : I had a previous dev version of scikit-learn (0.16 I think) and in order to update scikit-learn while keeping everything like it was, I cloned the up-to-date dev version and then I had this issue.
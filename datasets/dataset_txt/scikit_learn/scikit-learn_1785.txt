jesusareyesv commented on Oct 29, 2017
Hello everyone! I was trying to fit Abalone Dataset using scikit-learn k-means implementation. I had:
ValueError: Input contains NaN, infinity or a value too large for dtype('float64').
When the script reaches this line into scikit-learn package code:
scikit-learn/sklearn/cluster/k_means_.py
Line 1235 in 9e3ebd4
 X = check_array(X, accept_sparse="csr", order='C', dtype=np.float64) 
I wrote a script to find all possible NaNs or Infs in the dataset, but I haven't find them (really they doesn't exist). Then I diceded to use another python package for clustering with k-means, attempting to know if that error is due k-means implementation or dataset wrong values.
I ran the script using pyclustering instead scikit-learn and...It works!
I'm not familiar with your code, but this error occurs at this line
scikit-learn/sklearn/utils/validation.py
Line 486 in de29f3f
 _assert_all_finite(array) 
The entire traceback is:
Traceback (most recent call last):
File "improving_clustering.py", line 52, in
centroids, k = f_kCriterion(data)
File "/home/temetnosce/Documents/Repositorios/mlcolombia/aplicandoxmeans/f_kKmeansCriterion.py", line 70, in f_kCriterion
kmeans_core.fit(data) # Referencia 5.2
File "/home/temetnosce/venvs/mlcolombia/lib/python3.6/site-packages/sklearn/cluster/k_means_.py", line 887, in fit
X = self.check_fit_data(X)
File "/home/temetnosce/venvs/mlcolombia/lib/python3.6/site-packages/sklearn/cluster/k_means.py", line 858, in _check_fit_data
X = check_array(X, accept_sparse='csr', dtype=[np.float64, np.float32])
File "/home/temetnosce/venvs/mlcolombia/lib/python3.6/site-packages/sklearn/utils/validation.py", line 453, in check_array
_assert_all_finite(array)
File "/home/temetnosce/venvs/mlcolombia/lib/python3.6/site-packages/sklearn/utils/validation.py", line 44, in _assert_all_finite
" or a value too large for %r." % X.dtype)
ValueError: Input contains NaN, infinity or a value too large for dtype('float64').
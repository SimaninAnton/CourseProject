tokoroten commented on May 27, 2015
I tried to serialize a trained RandomForest model. But it taking a lot of memory and disk space.
So I looked into what is happen.
https://gist.github.com/tokoroten/629bf0a70d1a53d585cc
If bootstrap option is True, large member-variable was allocated in each tree to calculate oob_score.
here is the problem line.
scikit-learn/sklearn/ensemble/forest.py
Line 96 in 64e5533
 tree.indices_ = sample_counts > 0. 

tree.indices_ = sample_counts > 0.
So, it takes a lot of memory. the memory size is (randomforest_tree_num * len(train_dataset) * sizeof(bool)).
Therefore, it train large dataset, it takes large memory.
I seem indices_ is referenced only _set_oob_score method.
So I'm thinking, it should delete indices_ after _set_oob_score method.
If this idea is correct, I'll write a pull request.
redundant code in check_array
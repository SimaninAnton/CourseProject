Contributor
mfeurer commented on May 21, 2014
I am trying to fit a Random Forest with Random Search where the max_features parameter can go from 0.01 to 1.0. If I specify max_features as a percentage, sklearn sometimes raises the exception
ValueError: max_features must be in (0, n_features], is 0
e.g. for the iris dataset with max_features=0.01. Do you consider this as a problem or think this is a mistake by the user?
As I see it the problem lies here. Adding
max_features = max(1, max_features)
to the next line (and maybe a warning) solves this. Here is also a minimal example for version 0.14, I think the problem also exists in the Master branch:
import sklearn.datasets
import sklearn.ensemble
iris = sklearn.datasets.load_iris()
X = iris.data
Y = iris.target
rf = sklearn.ensemble.RandomForestClassifier(max_features=0.01)
rf.fit(X, Y)
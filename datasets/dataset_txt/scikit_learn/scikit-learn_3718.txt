psinger commented on Jul 16, 2015
Hi all,
I am currently running this line:
matrix = normalize(matrix, norm='l1', axis=1)
Where matrix is a pretty large scipy.sparse.csr_matrix with dimension of around 9,000,000 times 9,000,000. The issue I have with running this command is:
 File "/usr/local/lib/python2.7/dist-packages/sklearn/preprocessing/data.py", line 609, in normalize inplace_csr_row_normalize_l1(X)
 File "sparsefuncs_fast.pyx", line 182, in sklearn.utils.sparsefuncs_fast.inplace_csr_row_normalize_l1 (sklearn/utils/sparsefuncs_fast.c:3016)
 ValueError: Buffer dtype mismatch, expected 'DOUBLE' but got 'float'
I think the reason for that is actually an overflow in the index list of the sparse matrix somehow. I had something similar a while ago in numpy:
numpy/numpy#5783
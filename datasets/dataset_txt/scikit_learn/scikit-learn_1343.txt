Member
rth commented on Jun 5, 2018
The test sklearn/linear_model/tests/test_ridge.py::test_ridge_sample_weights passes on master, however, when it was parametrized as part of #11074 failures were observed (#11074 (comment)).
The relevant diff can be found in master...rth:test_ridge_sample_weights-parametrization (whitespaces are ignored in this diff), where the following runs fail,
alpha = 1.0, intercept = False, solver = 'lsqr', n_samples = 5, n_features = 10
alpha = 1.0, intercept = False, solver = 'sparse_cg', n_samples = 5, n_features = 10
alpha = 0.01, intercept = False, solver = 'sparse_cg', n_samples = 5, n_features = 10
(out of a total of 32 runs).
This means that this test is brittle and depends on the RNG state. Increasing numerical tolerance might be a solution or possibly increasing the number of samples?
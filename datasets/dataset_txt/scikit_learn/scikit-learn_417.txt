asis-shukla commented on Jul 9, 2019
Description
classifier clf of LogisticRegression gives error nasty or funny comment on score method.
Steps/Code to Reproduce
Example:
from sklearn.linear_model import LogisticRegression
clf = LogisticRegression()
clf.fit(X_tr, y_train)
clf.score(X_test, y_test)
Our X_test contain features directly in the string form without converting to vectors
Expected Results
ValueError: could not convert string to float
Actual Results
ValueError Traceback (most recent call last)
in
----> 1 clf.score(X_test, y_test)
~/anaconda3/lib/python3.6/site-packages/sklearn/base.py in score(self, X, y, sample_weight)
286 """
287 from .metrics import accuracy_score
--> 288 return accuracy_score(y, self.predict(X), sample_weight=sample_weight)
289
290
~/anaconda3/lib/python3.6/site-packages/sklearn/linear_model/base.py in predict(self, X)
279 Predicted class label per sample.
280 """
--> 281 scores = self.decision_function(X)
282 if len(scores.shape) == 1:
283 indices = (scores > 0).astype(np.int)
~/anaconda3/lib/python3.6/site-packages/sklearn/linear_model/base.py in decision_function(self, X)
255 "yet" % {'name': type(self).name})
256
--> 257 X = check_array(X, accept_sparse='csr')
258
259 n_features = self.coef_.shape[1]
~/anaconda3/lib/python3.6/site-packages/sklearn/utils/validation.py in check_array(array, accept_sparse, accept_large_sparse, dtype, order, copy, force_all_finite, ensure_2d, allow_nd, ensure_min_samples, ensure_min_features, warn_on_dtype, estimator)
565 # make sure we actually converted to numeric:
566 if dtype_numeric and array.dtype.kind == "O":
--> 567 array = array.astype(np.float64)
568 if not allow_nd and array.ndim >= 3:
569 raise ValueError("Found array with dim %d. %s expected <= 2."
ValueError: could not convert string to float: 'isis recruiter excited to be talking to popular high schooler for once'
Versions
System:
python: 3.6.7 |Anaconda custom (64-bit)| (default, Oct 23 2018, 19:16:44) [GCC 7.3.0]
executable: /home/ashish/anaconda3/bin/python
machine: Linux-4.15.0-54-generic-x86_64-with-debian-buster-sid
BLAS:
macros: SCIPY_MKL_H=None, HAVE_CBLAS=None
lib_dirs: /home/ashish/anaconda3/lib
cblas_libs: mkl_rt, pthread
Python deps:
pip: 19.1.1
setuptools: 41.0.1
sklearn: 0.20.1
numpy: 1.16.2
scipy: 1.1.0
Cython: None
pandas: 0.24.2
Linux-4.15.0-54-generic-x86_64-with-debian-buster-sid
Python 3.6.7 |Anaconda custom (64-bit)| (default, Oct 23 2018, 19:16:44)
[GCC 7.3.0]
NumPy 1.16.2
SciPy 1.1.0
Scikit-Learn 0.20.1
Member
jnothman commented on Mar 3, 2014
test_imputation_mean_median_only_zero tests for median value imputation over a column that contains a NaN (not to be imputed). The current system determines a non-NaN result for that median (5). I'm not sure this makes sense, but I don't really know what median means with NaN.
Moreover, the current implementation is emulating the anomalous output of numpy.ma.median with respect to NaNs, in which results differ from the unmasked equivalent.
I think we can choose to:
define median as ignoring all NaNs (a nanmedian), but this would be inconsistent with mean;
return NaN for median including NaNs; or
leave behaviour undefined for columns containing NaN, and not test it.
(I have a cleaner and correct implementation of sparse median for Imputer waiting to PR, but I wanted to check what the appropriate resolution is.)
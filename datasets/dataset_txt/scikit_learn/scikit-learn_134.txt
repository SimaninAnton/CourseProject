michaels011235 commented on Nov 21, 2019
Description
Error when trying to install using pipenv and python 3.8
Steps/Code to Reproduce
Commands:
pipenv install --python 3.8
pipenv install scikit-learn
Output:
Expected Results
No error is thrown.
Actual Results
Installing scikit-learnâ€¦
Error:  An error occurred while installing scikit-learn!
Error text: Collecting scikit-learn
  Using cached https://files.pythonhosted.org/packages/1e/ce/9d8c88e68af0a5b5c5d78d8d2b7bcadfd45e1d6afc863ccb9aee30765b06/scikit-learn-0.21.3.tar.gz
Collecting numpy>=1.11.0
  Using cached https://files.pythonhosted.org/packages/d7/6a/3fed132c846d1e47963f30376cc041e9dd586d286d931055ad06ff65c6c7/numpy-1.17.4-cp38-cp38-manylinux1_x86_64.whl
Collecting scipy>=0.17.0
  Using cached https://files.pythonhosted.org/packages/dd/25/b57bf2134f343909541977a79aa385addbc6a8ac470669739d8522e32c89/scipy-1.3.2-cp38-cp38-manylinux1_x86_64.whl
Collecting joblib>=0.11
  Using cached https://files.pythonhosted.org/packages/8f/42/155696f85f344c066e17af287359c9786b436b1bf86029bb3411283274f3/joblib-0.14.0-py2.py3-none-any.whl
Building wheels for collected packages: scikit-learn
  Building wheel for scikit-learn (setup.py): started
  Building wheel for scikit-learn (setup.py): finished with status 'error'
  Running setup.py clean for scikit-learn
Failed to build scikit-learn
Installing collected packages: numpy, scipy, joblib, scikit-learn
    Running setup.py install for scikit-learn: started
    Running setup.py install for scikit-learn: finished with status 'error'

  ERROR: Command errored out with exit status 1:
   command: /home/michael/.local/share/virtualenvs/test_dir-BAZsj9_-/bin/python3.8 -u -c 'import sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-sd788k5_/scikit-learn/setup.py'"'"'; __file__='"'"'/tmp/pip-install-sd788k5_/scikit-learn/setup.py'"'"';f=getattr(tokenize, '"'"'open'"'"', open)(__file__);code=f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' bdist_wheel -d /tmp/pip-wheel-4cl2zehb --python-tag cp38
       cwd: /tmp/pip-install-sd788k5_/scikit-learn/
  Complete output (15 lines):
  Partial import of sklearn during the build process.
  Traceback (most recent call last):
    File "/tmp/pip-install-sd788k5_/scikit-learn/setup.py", line 187, in get_numpy_status
      import numpy
  ModuleNotFoundError: No module named 'numpy'
  Traceback (most recent call last):
    File "<string>", line 1, in <module>
    File "/tmp/pip-install-sd788k5_/scikit-learn/setup.py", line 290, in <module>
      setup_package()
    File "/tmp/pip-install-sd788k5_/scikit-learn/setup.py", line 278, in setup_package
      raise ImportError("Numerical Python (NumPy) is not "
  ImportError: Numerical Python (NumPy) is not installed.
  scikit-learn requires NumPy >= 1.11.0.
  Installation instructions are available on the scikit-learn website: http://scikit-learn.org/stable/install.html
  
  ----------------------------------------
  ERROR: Failed building wheel for scikit-learn
    ERROR: Command errored out with exit status 1:
     command: /home/michael/.local/share/virtualenvs/test_dir-BAZsj9_-/bin/python3.8 -u -c 'import sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-sd788k5_/scikit-learn/setup.py'"'"'; __file__='"'"'/tmp/pip-install-sd788k5_/scikit-learn/setup.py'"'"';f=getattr(tokenize, '"'"'open'"'"', open)(__file__);code=f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' install --record /tmp/pip-record-ldjhfqen/install-record.txt --single-version-externally-managed --compile --install-headers /home/michael/.local/share/virtualenvs/test_dir-BAZsj9_-/include/site/python3.8/scikit-learn
         cwd: /tmp/pip-install-sd788k5_/scikit-learn/
    Complete output (28 lines):
    Partial import of sklearn during the build process.
    Traceback (most recent call last):
      File "<string>", line 1, in <module>
      File "/tmp/pip-install-sd788k5_/scikit-learn/setup.py", line 290, in <module>
        setup_package()
      File "/tmp/pip-install-sd788k5_/scikit-learn/setup.py", line 286, in setup_package
        setup(**metadata)
      File "/home/michael/.local/share/virtualenvs/test_dir-BAZsj9_-/lib/python3.8/site-packages/numpy/distutils/core.py", line 137, in setup
        config = configuration()
      File "/tmp/pip-install-sd788k5_/scikit-learn/setup.py", line 174, in configuration
        config.add_subpackage('sklearn')
      File "/home/michael/.local/share/virtualenvs/test_dir-BAZsj9_-/lib/python3.8/site-packages/numpy/distutils/misc_util.py", line 1033, in add_subpackage
        config_list = self.get_subpackage(subpackage_name, subpackage_path,
      File "/home/michael/.local/share/virtualenvs/test_dir-BAZsj9_-/lib/python3.8/site-packages/numpy/distutils/misc_util.py", line 999, in get_subpackage
        config = self._get_configuration_from_setup_py(
      File "/home/michael/.local/share/virtualenvs/test_dir-BAZsj9_-/lib/python3.8/site-packages/numpy/distutils/misc_util.py", line 941, in _get_configuration_from_setup_py
        config = setup_module.configuration(*args)
      File "sklearn/setup.py", line 62, in configuration
        config.add_subpackage('utils')
      File "/home/michael/.local/share/virtualenvs/test_dir-BAZsj9_-/lib/python3.8/site-packages/numpy/distutils/misc_util.py", line 1033, in add_subpackage
        config_list = self.get_subpackage(subpackage_name, subpackage_path,
      File "/home/michael/.local/share/virtualenvs/test_dir-BAZsj9_-/lib/python3.8/site-packages/numpy/distutils/misc_util.py", line 999, in get_subpackage
        config = self._get_configuration_from_setup_py(
      File "/home/michael/.local/share/virtualenvs/test_dir-BAZsj9_-/lib/python3.8/site-packages/numpy/distutils/misc_util.py", line 941, in _get_configuration_from_setup_py
        config = setup_module.configuration(*args)
      File "sklearn/utils/setup.py", line 8, in configuration
        from Cython import Tempita
    ModuleNotFoundError: No module named 'Cython'
    ----------------------------------------
ERROR: Command errored out with exit status 1: /home/michael/.local/share/virtualenvs/test_dir-BAZsj9_-/bin/python3.8 -u -c 'import sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-sd788k5_/scikit-learn/setup.py'"'"'; __file__='"'"'/tmp/pip-install-sd788k5_/scikit-learn/setup.py'"'"';f=getattr(tokenize, '"'"'open'"'"', open)(__file__);code=f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' install --record /tmp/pip-record-ldjhfqen/install-record.txt --single-version-externally-managed --compile --install-headers /home/michael/.local/share/virtualenvs/test_dir-BAZsj9_-/include/site/python3.8/scikit-learn Check the logs for full command output.
Versions
OS: Ubuntu 18.04
pipenv version:
pipenv, version 2018.11.27.dev0
python version:
Python 3.8.0 (default, Oct 19 2019, 20:18:31)
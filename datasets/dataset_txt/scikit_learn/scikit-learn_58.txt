festeh commented on Jan 2
Description
If one wants to set some classifier in VotingClassifier to drop and then fit the ensemble, it may cause incorrect named_estimators_ in the result.
Steps/Code to Reproduce
Example:
import numpy as np
from sklearn.naive_bayes import GaussianNB
from sklearn.ensemble import RandomForestClassifier, VotingClassifier
clf1 = RandomForestClassifier(n_estimators=50, random_state=1)
clf2 = GaussianNB()
X = np.array([[-1, -1], [-2, -1], [-3, -2]])
y = np.array([1, 1, 1])
eclf1 = VotingClassifier(estimators=[('rf', clf1), ('gnb', clf2)])
eclf1.set_params(rf="drop")
eclf1.fit(X, y)
print(eclf1.named_estimators_)
Expected Results
{'gnb': GaussianNB(priors=None, var_smoothing=1e-09)}
Actual Results
{'rf': GaussianNB(priors=None, var_smoothing=1e-09)}
Versions
0.21.3
In case it's not a desired behavior I could try to submit a PR.
mattyellen commented on Mar 31, 2018
The solution to issue #4944 involved fixing the threshold value used for replacing zero probabilities to ensure np.log(proba) was defined. Rather than a hardcoded value of 1e-5, an epsilon of np.finfo(proba.dtype).eps was used. From the discussion it seems the intent was to replace zero values with the smallest possible value storable in the underlying data type.
However, that's not how eps is defined. The correct threshold value should be np.finfo(proba.dtype).tiny. For example:
np.finfo('float64').eps == 2.22e-16
np.finfo('float64').tiny == 2.225e-308
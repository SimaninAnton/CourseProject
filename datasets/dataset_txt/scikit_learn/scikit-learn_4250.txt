Member
larsmans commented on Aug 25, 2014
As reported on the mailing list, the following raises a peculiar exception:
>>> from sklearn.grid_search import GridSearchCV
>>> from sklearn.neighbors import KNeighborsClassifier
>>> X = np.random.randn(10, 3)
>>> y = np.random.randint(0, 2, 10)
>>> grid = {"n_neighbors": [2,3], "metric": ['euclidean']}
>>> GridSearchCV(KNeighborsClassifier(), grid).fit(X, y)
Traceback (most recent call last):
  File "<ipython-input-11-49d7266f2f6f>", line 1, in <module>
    GridSearchCV(KNeighborsClassifier(), grid).fit(X, y)
  File "sklearn/grid_search.py", line 591, in fit
    return self._fit(X, y, ParameterGrid(self.param_grid))
  File "sklearn/grid_search.py", line 373, in _fit
    for parameters in parameter_iterable
  File "sklearn/externals/joblib/parallel.py", line 653, in __call__
    self.dispatch(function, args, kwargs)
  File "sklearn/externals/joblib/parallel.py", line 400, in dispatch
    job = ImmediateApply(func, args, kwargs)
  File "sklearn/externals/joblib/parallel.py", line 138, in __init__
    self.results = func(*args, **kwargs)
  File "sklearn/cross_validation.py", line 1237, in _fit_and_score
    estimator.fit(X_train, y_train, **fit_params)
  File "sklearn/neighbors/base.py", line 628, in fit
    return self._fit(X)
  File "sklearn/neighbors/base.py", line 217, in _fit
    **self.effective_metric_kwds_)
  File "binary_tree.pxi", line 1062, in sklearn.neighbors.kd_tree.BinaryTree.__init__ (sklearn/neighbors/kd_tree.c:8006)
  File "dist_metrics.pyx", line 280, in sklearn.neighbors.dist_metrics.DistanceMetric.get_metric (sklearn/neighbors/dist_metrics.c:4066)
TypeError: __init__() got an unexpected keyword argument 'p'
this-is-aggarwal commented 21 days ago
I'm trying to change the log function used to calculate entropy by decision tree classifier in the cython file _criterion.pyx . I keep on encountering the following error while running the command pip install --editable .
Error compiling Cython file:
------------------------------------------------------------
...
for k in range(self.n_outputs):
for c in range(n_classes[k]):
count_k = sum_total[c]
if count_k > 0.0:
count_k /= self.weighted_n_node_samples
entropy -= count_k * np.log2(count_k)
^
------------------------------------------------------------
sklearn/tree/_criterion.pyx:619:20: Coercion from Python not allowed without the GIL

Error compiling Cython file:
------------------------------------------------------------
...
        for k in range(self.n_outputs):
            for c in range(n_classes[k]):
                count_k = sum_total[c]
                if count_k > 0.0:
                    count_k /= self.weighted_n_node_samples
                    entropy -= count_k * np.log2(count_k)
                   ^
------------------------------------------------------------

sklearn/tree/_criterion.pyx:619:20: Operation not allowed without gil

Error compiling Cython file:
------------------------------------------------------------
...
        for k in range(self.n_outputs):
            for c in range(n_classes[k]):
                count_k = sum_total[c]
                if count_k > 0.0:
                    count_k /= self.weighted_n_node_samples
                    entropy -= count_k * np.log2(count_k)
                   ^
------------------------------------------------------------

sklearn/tree/_criterion.pyx:619:20: Converting to Python object not allowed without gil

Error compiling Cython file:
------------------------------------------------------------
...
        for k in range(self.n_outputs):
            for c in range(n_classes[k]):
                count_k = sum_total[c]
                if count_k > 0.0:
                    count_k /= self.weighted_n_node_samples
                    entropy -= count_k * np.log2(count_k)
                                      ^
------------------------------------------------------------

sklearn/tree/_criterion.pyx:619:39: Operation not allowed without gil

Error compiling Cython file:
------------------------------------------------------------
...
        for k in range(self.n_outputs):
            for c in range(n_classes[k]):
                count_k = sum_total[c]
                if count_k > 0.0:
                    count_k /= self.weighted_n_node_samples
                    entropy -= count_k * np.log2(count_k)
                              ^
------------------------------------------------------------

sklearn/tree/_criterion.pyx:619:31: Converting to Python object not allowed without gil

Error compiling Cython file:
------------------------------------------------------------
...
        for k in range(self.n_outputs):
            for c in range(n_classes[k]):
                count_k = sum_total[c]
                if count_k > 0.0:
                    count_k /= self.weighted_n_node_samples
                    entropy -= count_k * np.log2(count_k)
                                               ^
------------------------------------------------------------

sklearn/tree/_criterion.pyx:619:48: Calling gil-requiring function not allowed without gil

Error compiling Cython file:
------------------------------------------------------------
...
        for k in range(self.n_outputs):
            for c in range(n_classes[k]):
                count_k = sum_total[c]
                if count_k > 0.0:
                    count_k /= self.weighted_n_node_samples
                    entropy -= count_k * np.log2(count_k)
                                          ^
------------------------------------------------------------

sklearn/tree/_criterion.pyx:619:43: Accessing Python attribute not allowed without gil

Error compiling Cython file:
------------------------------------------------------------
...
        for k in range(self.n_outputs):
            for c in range(n_classes[k]):
                count_k = sum_total[c]
                if count_k > 0.0:
                    count_k /= self.weighted_n_node_samples
                    entropy -= count_k * np.log2(count_k)
                                        ^
------------------------------------------------------------

sklearn/tree/_criterion.pyx:619:41: Accessing Python global or builtin not allowed without gil

Error compiling Cython file:
------------------------------------------------------------
...
        for k in range(self.n_outputs):
            for c in range(n_classes[k]):
                count_k = sum_total[c]
                if count_k > 0.0:
                    count_k /= self.weighted_n_node_samples
                    entropy -= count_k * np.log2(count_k)
                                               ^
------------------------------------------------------------

sklearn/tree/_criterion.pyx:619:48: Constructing Python tuple not allowed without gil

Error compiling Cython file:
------------------------------------------------------------
...
        for k in range(self.n_outputs):
            for c in range(n_classes[k]):
                count_k = sum_total[c]
                if count_k > 0.0:
                    count_k /= self.weighted_n_node_samples
                    entropy -= count_k * np.log2(count_k)
                                                ^
------------------------------------------------------------

sklearn/tree/_criterion.pyx:619:49: Converting to Python object not allowed without gil

Error compiling Cython file:
------------------------------------------------------------
...
        for k in range(self.n_outputs):
            for c in range(n_classes[k]):
                count_k = sum_left[c]
                if count_k > 0.0:
                    count_k /= self.weighted_n_left
                    entropy_left -= count_k * np.log2(count_k)
                   ^
------------------------------------------------------------

sklearn/tree/_criterion.pyx:654:20: Coercion from Python not allowed without the GIL

Error compiling Cython file:
------------------------------------------------------------
...
        for k in range(self.n_outputs):
            for c in range(n_classes[k]):
                count_k = sum_left[c]
                if count_k > 0.0:
                    count_k /= self.weighted_n_left
                    entropy_left -= count_k * np.log2(count_k)
                   ^
------------------------------------------------------------

sklearn/tree/_criterion.pyx:654:20: Operation not allowed without gil

Error compiling Cython file:
------------------------------------------------------------
...
        for k in range(self.n_outputs):
            for c in range(n_classes[k]):
                count_k = sum_left[c]
                if count_k > 0.0:
                    count_k /= self.weighted_n_left
                    entropy_left -= count_k * np.log2(count_k)
                   ^
------------------------------------------------------------

sklearn/tree/_criterion.pyx:654:20: Converting to Python object not allowed without gil

Error compiling Cython file:
------------------------------------------------------------
...
        for k in range(self.n_outputs):
            for c in range(n_classes[k]):
                count_k = sum_left[c]
                if count_k > 0.0:
                    count_k /= self.weighted_n_left
                    entropy_left -= count_k * np.log2(count_k)
                                           ^
------------------------------------------------------------

sklearn/tree/_criterion.pyx:654:44: Operation not allowed without gil

Error compiling Cython file:
------------------------------------------------------------
...
        for k in range(self.n_outputs):
            for c in range(n_classes[k]):
                count_k = sum_left[c]
                if count_k > 0.0:
                    count_k /= self.weighted_n_left
                    entropy_left -= count_k * np.log2(count_k)
                                   ^
------------------------------------------------------------

sklearn/tree/_criterion.pyx:654:36: Converting to Python object not allowed without gil

Error compiling Cython file:
------------------------------------------------------------
...
        for k in range(self.n_outputs):
            for c in range(n_classes[k]):
                count_k = sum_left[c]
                if count_k > 0.0:
                    count_k /= self.weighted_n_left
                    entropy_left -= count_k * np.log2(count_k)
                                                    ^
------------------------------------------------------------

sklearn/tree/_criterion.pyx:654:53: Calling gil-requiring function not allowed without gil

Error compiling Cython file:
------------------------------------------------------------
...
        for k in range(self.n_outputs):
            for c in range(n_classes[k]):
                count_k = sum_left[c]
                if count_k > 0.0:
                    count_k /= self.weighted_n_left
                    entropy_left -= count_k * np.log2(count_k)
                                               ^
------------------------------------------------------------

sklearn/tree/_criterion.pyx:654:48: Accessing Python attribute not allowed without gil

Error compiling Cython file:
------------------------------------------------------------
...
        for k in range(self.n_outputs):
            for c in range(n_classes[k]):
                count_k = sum_left[c]
                if count_k > 0.0:
                    count_k /= self.weighted_n_left
                    entropy_left -= count_k * np.log2(count_k)
                                             ^
------------------------------------------------------------

sklearn/tree/_criterion.pyx:654:46: Accessing Python global or builtin not allowed without gil

Error compiling Cython file:
------------------------------------------------------------
...
        for k in range(self.n_outputs):
            for c in range(n_classes[k]):
                count_k = sum_left[c]
                if count_k > 0.0:
                    count_k /= self.weighted_n_left
                    entropy_left -= count_k * np.log2(count_k)
                                                    ^
------------------------------------------------------------

sklearn/tree/_criterion.pyx:654:53: Constructing Python tuple not allowed without gil

Error compiling Cython file:
------------------------------------------------------------
...
        for k in range(self.n_outputs):
            for c in range(n_classes[k]):
                count_k = sum_left[c]
                if count_k > 0.0:
                    count_k /= self.weighted_n_left
                    entropy_left -= count_k * np.log2(count_k)
                                                     ^
------------------------------------------------------------

sklearn/tree/_criterion.pyx:654:54: Converting to Python object not allowed without gil

Error compiling Cython file:
------------------------------------------------------------
...
                    entropy_left -= count_k * np.log2(count_k)

                count_k = sum_right[c]
                if count_k > 0.0:
                    count_k /= self.weighted_n_right
                    entropy_right -= count_k * np.log2(count_k)
                   ^
------------------------------------------------------------

sklearn/tree/_criterion.pyx:659:20: Coercion from Python not allowed without the GIL

Error compiling Cython file:
------------------------------------------------------------
...
                    entropy_left -= count_k * np.log2(count_k)

                count_k = sum_right[c]
                if count_k > 0.0:
                    count_k /= self.weighted_n_right
                    entropy_right -= count_k * np.log2(count_k)
                   ^
------------------------------------------------------------

sklearn/tree/_criterion.pyx:659:20: Operation not allowed without gil

Error compiling Cython file:
------------------------------------------------------------
...
                    entropy_left -= count_k * np.log2(count_k)

                count_k = sum_right[c]
                if count_k > 0.0:
                    count_k /= self.weighted_n_right
                    entropy_right -= count_k * np.log2(count_k)
                   ^
------------------------------------------------------------

sklearn/tree/_criterion.pyx:659:20: Converting to Python object not allowed without gil

Error compiling Cython file:
------------------------------------------------------------
...
                    entropy_left -= count_k * np.log2(count_k)

                count_k = sum_right[c]
                if count_k > 0.0:
                    count_k /= self.weighted_n_right
                    entropy_right -= count_k * np.log2(count_k)
                                            ^
------------------------------------------------------------

sklearn/tree/_criterion.pyx:659:45: Operation not allowed without gil

Error compiling Cython file:
------------------------------------------------------------
...
                    entropy_left -= count_k * np.log2(count_k)

                count_k = sum_right[c]
                if count_k > 0.0:
                    count_k /= self.weighted_n_right
                    entropy_right -= count_k * np.log2(count_k)
                                    ^
------------------------------------------------------------

sklearn/tree/_criterion.pyx:659:37: Converting to Python object not allowed without gil

Error compiling Cython file:
------------------------------------------------------------
...
                    entropy_left -= count_k * np.log2(count_k)

                count_k = sum_right[c]
                if count_k > 0.0:
                    count_k /= self.weighted_n_right
                    entropy_right -= count_k * np.log2(count_k)
                                                     ^
------------------------------------------------------------

sklearn/tree/_criterion.pyx:659:54: Calling gil-requiring function not allowed without gil

Error compiling Cython file:
------------------------------------------------------------
...
                    entropy_left -= count_k * np.log2(count_k)

                count_k = sum_right[c]
                if count_k > 0.0:
                    count_k /= self.weighted_n_right
                    entropy_right -= count_k * np.log2(count_k)
                                                ^
------------------------------------------------------------

sklearn/tree/_criterion.pyx:659:49: Accessing Python attribute not allowed without gil

Error compiling Cython file:
------------------------------------------------------------
...
                    entropy_left -= count_k * np.log2(count_k)

                count_k = sum_right[c]
                if count_k > 0.0:
                    count_k /= self.weighted_n_right
                    entropy_right -= count_k * np.log2(count_k)
                                              ^
------------------------------------------------------------

sklearn/tree/_criterion.pyx:659:47: Accessing Python global or builtin not allowed without gil

Error compiling Cython file:
------------------------------------------------------------
...
                    entropy_left -= count_k * np.log2(count_k)

                count_k = sum_right[c]
                if count_k > 0.0:
                    count_k /= self.weighted_n_right
                    entropy_right -= count_k * np.log2(count_k)
                                                     ^
------------------------------------------------------------

sklearn/tree/_criterion.pyx:659:54: Constructing Python tuple not allowed without gil

Error compiling Cython file:
------------------------------------------------------------
...
                    entropy_left -= count_k * np.log2(count_k)

                count_k = sum_right[c]
                if count_k > 0.0:
                    count_k /= self.weighted_n_right
                    entropy_right -= count_k * np.log2(count_k)
I want to change the log to different bases and then perform classification. If this is not the way, can someone suggest any other way to do so.
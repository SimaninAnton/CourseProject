DanilZherebtsov commented on Nov 5, 2019
Description
When RandomizedSearchCV runs for a long time (on a big dataset), regardless of the verbose settings the console prints the parameters combinations that I don't want to see in the console while the code executes.
This does not happen on the small datasets when the RandomizedSearchCV is executing within a reasonable amount of time (<15 minutes)!
Steps/Code to Reproduce
'''USE SOME DATASET 'data' OVER 40 mb SIZE''''
from sklearn.metrics import accuracy_score
from XGBoost import XGBClassifier
from sklearn.model_selection import KFold
from sklearn.model_selection import RandomizedSearchCV
X = data.drop('target', axis = 1)
y = data.target
param_comb = 50
model = XGBClassifer()
params = {
        'min_child_weight':     [0.1, 1, 5, 10, 20],
        'gamma':                [0.5, 1, 1.5, 2, 5],
        'subsample':            [0.2, 0.4, 0.6, 0.8, 1.0],
        'colsample_bytree':     [0.2, 0.4, 0.6, 0.8, 1.0],
        'max_depth':            [3, 4, 5, 7, 9],
        'eta':                  [0.005, 0.01, 0.1],
        'n_estimators':         [1000],
        'n_jobs':               [n_jobs]
        }
kf = KFold(n_splits = 3, shuffle = True, random_state = 5)
scoring = accuracy_score
random_search = RandomizedSearchCV(
        model, 
        param_distributions = params, 
        n_iter = param_comb, 
        scoring = scoring, 
        n_jobs = -1,
        refit = True, 
        cv = kf.split(X,y), 
        verbose = 10,
        random_state = 5
        )
random_search.fit(X, np.array(y))
Expected Results
Clean output showing the number of executed tasks like so:
Actual Results
Messy prints that can go on and on for hundreds of lines like so:
Versions
System:
python: 3.7.3 (default, Mar 27 2019, 16:54:48) [Clang 4.0.1 (tags/RELEASE_401/final)]
executable: /Users/user/anaconda3/bin/python
machine: Darwin-18.7.0-x86_64-i386-64bit
BLAS:
macros: SCIPY_MKL_H=None, HAVE_CBLAS=None
lib_dirs: /Users/user/anaconda3/lib
cblas_libs: mkl_rt, pthread
Python deps:
pip: 19.0.3
setuptools: 40.8.0
sklearn: 0.21.2
numpy: 1.17.0
scipy: 1.3.1
Cython: 0.29.6
pandas: 0.24.2
xgboost.version
1.0.0-SNAPSHOT
ProgVal commented on Sep 29, 2016
Description
ImportError because sklearn depends on the bz2 module, which is not available on all Python distributions
Steps/Code to Reproduce
On a Debian system without libbz2-dev installed:
wget https://hg.python.org/cpython/archive/v3.5.2.tar.bz2
tar -xvf v3.5.2.tar.bz2
cd cpython-v3.5.2/
./configure --prefix=/tmp/python/
make -j 4 # Takes a few minutes
make install
/tmp/python/bin/pip3 install numpy scikit-learn
/tmp/python/bin/python3 -c "import sklearn"
Expected Results
No error is thrown; or maybe a warning that some features are disabled.
Actual Results
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/tmp/python/lib/python3.5/site-packages/sklearn/__init__.py", line 57, in <module>
    from .base import clone
  File "/tmp/python/lib/python3.5/site-packages/sklearn/base.py", line 12, in <module>
    from .utils.fixes import signature
  File "/tmp/python/lib/python3.5/site-packages/sklearn/utils/__init__.py", line 18, in <module>
    from ..externals.joblib import cpu_count
  File "/tmp/python/lib/python3.5/site-packages/sklearn/externals/joblib/__init__.py", line 121, in <module>
    from .memory import Memory, MemorizedResult
  File "/tmp/python/lib/python3.5/site-packages/sklearn/externals/joblib/memory.py", line 37, in <module>
    from . import numpy_pickle
  File "/tmp/python/lib/python3.5/site-packages/sklearn/externals/joblib/numpy_pickle.py", line 16, in <module>
    from .numpy_pickle_utils import _COMPRESSORS
  File "/tmp/python/lib/python3.5/site-packages/sklearn/externals/joblib/numpy_pickle_utils.py", line 12, in <module>
    import bz2
  File "/tmp/python/lib/python3.5/bz2.py", line 22, in <module>
    from _bz2 import BZ2Compressor, BZ2Decompressor
ImportError: No module named '_bz2'
Versions
>>> import platform; print(platform.platform())
Linux-3.2.0-4-amd64-x86_64-with-debian-7.11
>>> import sys; print("Python", sys.version)
Python 3.5.2 (default, Sep 29 2016, 10:46:04) 
[GCC 4.7.2]
>>> import numpy; print("NumPy", numpy.__version__)
NumPy 1.11.1
>>> import scipy; print("SciPy", scipy.__version__)
SciPy 0.18.1
$ grep "__version__" /tmp/python/lib/python3.5/site-packages/sklearn/__init__.py
__version__ = '0.18'
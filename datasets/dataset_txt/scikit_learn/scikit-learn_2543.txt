KamodaP commented on Dec 7, 2016 â€¢
edited
Description
sklearn does not recognize numpy versions correctly
Steps/Code to Reproduce
import sklearn
Expected Results
No error is thrown
Actual Results
File "C:\Users\kamodap\AppData\Local\Programs\Python\Python35-32\lib\site-pack
ages\sklearn\base.py", line 12, in
from .utils.fixes import signature
File "C:\Users\kamodap\AppData\Local\Programs\Python\Python35-32\lib\site-pack
ages\sklearn\utils_init_.py", line 11, in
from .validation import (as_float_array,
File "C:\Users\kamodap\AppData\Local\Programs\Python\Python35-32\lib\site-pack
ages\sklearn\utils\validation.py", line 18, in
from ..utils.fixes import signature
File "C:\Users\kamodap\AppData\Local\Programs\Python\Python35-32\lib\site-pack
ages\sklearn\utils\fixes.py", line 406, in
if np_version < (1, 12, 0):
TypeError: unorderable types: str() < int()
Versions
import platform; print(platform.platform())
Windows-7-6.1.7601-SP1
import sys; print("Python", sys.version)
Python 3.5.2 (v3.5.2:4def2a2901a5, Jun 25 2016, 22:18:55) [MSC v.1900 64 bit (AM
D64)]
import numpy; print("NumPy", numpy.version)
NumPy 1.12.0b1
import scipy; print("SciPy", scipy.version)
SciPy 0.18.1
import sklearn; print("Scikit-Learn", sklearn.version)
The problem is here:
\Lib\site-packages\sklearn\utils\fixes.py
def _parse_version(version_string):
    version = []
    for x in version_string.split('.'):
        try:
            version.append(int(x))
        except ValueError:
            # x may be of the form dev-1ea1592
            version.append(x)
    return tuple(version)

[...]
np_version = _parse_version(np.__version__)
[...]
if np_version < (1, 12, 0):
[...]
if version is 1.12.0b1 your np_version is equal to (1,12,0b1) and comparison np_version < (1, 12, 0) results in
    if np_version < (1, 12, 0):
TypeError: unorderable types: str() < int()
I'd recommend to drop beta etc, like:
def _parse_version(version_string):
    version = []
    for x in version_string.split('.'):
        try:
            version.append(int(x))
        except ValueError:
            # x may be of the form dev-1ea1592
            for c in x:
                if not c.isdigit()
                    x = x[0:x.index(c)]
            if len(x) == 0: x = 0
            version.append(x)
    return tuple(version)
Member
jmschrei commented on Jun 23, 2015
I cloned sklearn v0.17.dev0, built it on Windows for 64bit Python, and ran the nosetests. I get one error, in sklearn.tests.test_common.test_transformer_n_iter. I am using numpy v1.9.2 and scipy v0.15.1.
Running C:\Anaconda\Python -c "import nose; nose.main()" -v sklearn.tests.test_common:test_transformer_n_iter yields the following logs:
c:\users\jacob\documents\github\scikit-learn\sklearn\metrics\metrics.py:4: DeprecationWarning: sklearn.metrics.metrics is deprecated and will be removed in 0.18. Please import from sklearn.metrics
  DeprecationWarning)
sklearn.tests.test_common.test_transformer_n_iter('CCA', CCA(copy=True, max_iter=500, n_components=2, scale=True, tol=1e-06)) ... c:\users\jacob\documents\github\scikit-learn\sklearn\cross_decomposition\pls_.py:46: RuntimeWarning: invalid value encountered in divide
  x_weights /= np.sqrt(np.dot(x_weights.T, x_weights))
c:\users\jacob\documents\github\scikit-learn\sklearn\cross_decomposition\pls_.py:64: RuntimeWarning: invalid value encountered in less
  if np.dot(x_weights_diff.T, x_weights_diff) < tol or Y.shape[1] == 1:
c:\users\jacob\documents\github\scikit-learn\sklearn\cross_decomposition\pls_.py:67: UserWarning: Maximum number of iterations reached
  warnings.warn('Maximum number of iterations reached')
c:\users\jacob\documents\github\scikit-learn\sklearn\cross_decomposition\pls_.py:297: RuntimeWarning: invalid value encountered in less
  if np.dot(x_scores.T, x_scores) < np.finfo(np.double).eps:
ERROR
sklearn.tests.test_common.test_transformer_n_iter('DictionaryLearning', DictionaryLearning(alpha=1, code_init=None, dict_init=None, ... ok
sklearn.tests.test_common.test_transformer_n_iter('FactorAnalysis', FactorAnalysis(copy=True, iterated_power=3, max_iter=1000, n_components=None, ... ok
sklearn.tests.test_common.test_transformer_n_iter('FastICA', FastICA(algorithm='parallel', fun='logcosh', fun_args=None, max_iter=200, ... ok
sklearn.tests.test_common.test_transformer_n_iter('KMeans', KMeans(copy_x=True, init='k-means++', max_iter=300, n_clusters=8, n_init=10, ... ok
sklearn.tests.test_common.test_transformer_n_iter('LinearSVC', LinearSVC(C=1.0, class_weight=None, dual=True, fit_intercept=True, ... ok
sklearn.tests.test_common.test_transformer_n_iter('LogisticRegression', LogisticRegression(C=1.0, class_weight=None, dual=False, fit_intercept=True, ... ok
sklearn.tests.test_common.test_transformer_n_iter('MiniBatchKMeans', MiniBatchKMeans(batch_size=100, compute_labels=True, init='k-means++', ... ok
sklearn.tests.test_common.test_transformer_n_iter('NMF', NMF(beta=1, eta=0.1, init=None, max_iter=200, n_components=None, ... ok
sklearn.tests.test_common.test_transformer_n_iter('PLSCanonical', PLSCanonical(algorithm='nipals', copy=True, max_iter=500, n_components=2, ... ok
sklearn.tests.test_common.test_transformer_n_iter('PLSRegression', PLSRegression(copy=True, max_iter=500, n_components=2, scale=True, tol=1e-06)) ... ok
sklearn.tests.test_common.test_transformer_n_iter('ProjectedGradientNMF', ProjectedGradientNMF(beta=1, eta=0.1, init=None, max_iter=200, ... ok
sklearn.tests.test_common.test_transformer_n_iter('SparsePCA', SparsePCA(U_init=None, V_init=None, alpha=1, max_iter=1000, method='lars', ... ok

======================================================================
ERROR: sklearn.tests.test_common.test_transformer_n_iter('CCA', CCA(copy=True, max_iter=500, n_components=2, scale=True, tol=1e-06))
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\Anaconda\lib\site-packages\nose\case.py", line 197, in runTest
    self.test(*self.arg)
  File "c:\users\jacob\documents\github\scikit-learn\sklearn\utils\estimator_checks.py", line 1306, in check_transformer_n_iter
    estimator.fit(X, y_)
  File "c:\users\jacob\documents\github\scikit-learn\sklearn\cross_decomposition\pls_.py", line 335, in fit
    linalg.pinv(np.dot(self.x_loadings_.T, self.x_weights_)))
  File "C:\Anaconda\lib\site-packages\scipy\linalg\basic.py", line 602, in pinv
    a = np.asarray_chkfinite(a)
  File "C:\Anaconda\lib\site-packages\numpy\lib\function_base.py", line 613, in asarray_chkfinite
    "array must not contain infs or NaNs")
ValueError: array must not contain infs or NaNs

----------------------------------------------------------------------
Ran 13 tests in 0.344s

FAILED (errors=1)
I will begin looking deeper into this issue.
ruiann commented on Nov 22, 2018
Description
I'm trying to change some code and have to create a np.ndarray in a cython class
cdef class T:

    def __cinit__(self, X):
        # copy a memory space by the numpy way
        cdef np.ndarray temp = np.ndarray(shape=X.shape, dtype=X.dtype)
        self.X_fake = <DTYPE_t*> temp.data

    def __dealloc__(self):
        # should I free this?
        free(self.X_fake)
I havn't seen an similar example in source code of sklearn, and found nothing in numpy or cython doc. I know if I use malloc to create a DTYPE_t* pointer, it's easy to work, I just wanna know that whether should I free the self.X_fake, or how can I dealloc the temp ndarray, will cython dealloc a numpy class by gc workflow?
Steps/Code to Reproduce
Expected Results
Actual Results
Versions
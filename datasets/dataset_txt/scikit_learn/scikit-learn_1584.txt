KhaledSharif commented on Jan 30, 2018
Description
Export Graphviz (sklearn.tree.export_graphviz) function produces incorrect DOT file, but only when trying to add class_names.
Steps/Code to Reproduce
from sklearn.tree import export_graphviz
export_graphviz(
            self.classifier,
            out_file=self.docker_container_path + "classifier.dot",
            feature_names=self.feature_names,
            class_names=self.class_names, # removing this line fixes the problem!
)
Expected Results
DOT file that can be properly read by a website such as Viz.js, or can be transformed into a png file using the following command:
dot classifier.dot -Tpng -o classifier.png
Actual Results
Error: classifier.dot: syntax error in line 3 near '['
> head classifier.dot


digraph Tree {
node [shape=box] ;
0 [label=['"feature_1 <= 60.603\\ngini = 0.644\\nsamples = 4756\\nvalue = [1977, 1989, 159, 235, 307, 89]\\nclass = class_1"']] ;
Versions
Linux-4.4.0-112-generic-x86_64-with-Ubuntu-16.04-xenial
Python 3.5.2 (default, Nov 23 2017, 16:37:01) 
[GCC 5.4.0 20160609]
NumPy 1.14.0
SciPy 1.0.0
Scikit-Learn 0.19.1
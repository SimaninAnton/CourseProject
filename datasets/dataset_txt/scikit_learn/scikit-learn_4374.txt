Contributor
jseabold commented on Jun 3, 2014
I'm not sure yet whether this is a local problem. On
|4 $ git log -n 1
commit 083b5f569d54753e943de9c7e1207e24db238ec2
Code to reproduce
[~/]
[1]: paste
>>> corpus = [
...     'This is the first document.',
...     'This is the second second document.',
...     'And the third one.',
...     'Is this the first document?',
... ]

## -- End pasted text --

[~/]
[2]: paste
>>> from sklearn.feature_extraction.text import TfidfVectorizer
>>> vectorizer = TfidfVectorizer(min_df=1)
>>> vectorizer.fit_transform(corpus).todense()

## -- End pasted text --
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-2-0d928a0a70df> in <module>()
    1 from sklearn.feature_extraction.text import TfidfVectorizer
    2 vectorizer = TfidfVectorizer(min_df=1)
----> 3 vectorizer.fit_transform(corpus)

/home/skipper/.local/lib/python2.7/site-packages/sklearn/feature_extraction/text.pyc in fit_transform(self, raw_documents, y)
1239         # X is already a transformed view of raw_documents so
1240         # we set copy to False
-> 1241         return self._tfidf.transform(X, copy=False)
1242 
1243     def transform(self, raw_documents, copy=True):

/home/skipper/.local/lib/python2.7/site-packages/sklearn/feature_extraction/text.pyc in transform(self, X, copy)
1011 
1012         if self.norm:
-> 1013             X = normalize(X, norm=self.norm, copy=False)
1014 
1015         return X

/home/skipper/.local/lib/python2.7/site-packages/sklearn/preprocessing/data.pyc in normalize(X, norm, axis, copy)
    532             inplace_csr_row_normalize_l1(X)
    533         elif norm == 'l2':
--> 534             inplace_csr_row_normalize_l2(X)
    535     else:
    536         if norm == 'l1':

/home/skipper/.local/lib/python2.7/site-packages/sklearn/utils/sparsefuncs_fast.so in sklearn.utils.sparsefuncs_fast.inplace_csr_row_normalize_l2 (sklearn/utils/sparsefuncs_fast.c:2768)()

ValueError: Buffer dtype mismatch, expected 'int' but got 'long'

[~/]
[3]: from scipy import version

[~/]
[4]: version.version
[4]: '0.15.0.dev-54796c7'
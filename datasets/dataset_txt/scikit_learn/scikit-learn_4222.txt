Contributor
sergiopasra commented on Sep 8, 2014
I have found an error when running the tests of 0.15.2
It happens both with python 3.4 and python 2.7. The problematic test is in sklearn.linear_model.tests.test_base
I have the following packages:
numpy 1.9.0rc1
scipy 0.14.0
In testing in a Fedora system, so numpy and scipy are both precompiled RPMs. sklearn compiled from the tarball from PyPI.
$ nosetests-v2.7 sklearn.linear_model.tests.test_base
../usr/lib64/python2.7/site-packages/scipy/sparse/linalg/isolve/lsqr.py:435: RuntimeWarning: invalid value encountered in double_scalars
  test2 = arnorm / (anorm * rnorm)
E.......
======================================================================
ERROR: Test that linear regression also works with sparse data
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python2.7/site-packages/nose/case.py", line 197, in runTest
    self.test(*self.arg)
  File "/home/xxx/.local/lib/python2.7/site-packages/sklearn/linear_model/tests/test_base.py", line 78, in test_linear_regression_sparse
    ols.fit(X, y.ravel())
  File "/home/xxx/.local/lib/python2.7/site-packages/sklearn/linear_model/base.py", line 359, in fit
    out = lsqr(X, y)
  File "/usr/lib64/python2.7/site-packages/scipy/sparse/linalg/isolve/lsqr.py", line 436, in lsqr
    test3 = 1 / acond
ZeroDivisionError: float division by zero

----------------------------------------------------------------------
Ran 10 tests in 0.052s

FAILED (errors=1)
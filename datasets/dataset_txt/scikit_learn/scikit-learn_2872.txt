bayesfactor commented on Jul 29, 2016
In my understanding, svmlight files should be sparse. Therefore, dump_svmlight_file from a pandas dataframe should skip NaN values, since pandas defaults missing values to NaN.
Description:
writing a pandas dataframe that contains missing (NaN) values throws an error.
Minimal code to reproduce:
import pandas as pd
import sklearn.datasets
import numpy as np
df = pd.DataFrame([0, np.nan])
sklearn.datasets.dump_svmlight_file(df, (0,1) ,'file')
Expected Results
no error is thrown, that entry is not written to the svmlight file.
Actual Results
File sklearn/utils/validation.py, line 398, in check_array
_assert_all_finite(array)
File sklearn/utils/validation.py, line 54, in _assert_all_finite
"or a value too large for %r." % X.dtype)
ValueError: Input contains NaN, infinity or a value too large for dtype('float64').
Versions
Linux-2.6.32-573.26.1.e16.centos.plus.x86_64-x86_64-with-centos-6.7
Python 3.3.0 (default, Feb 12 2013, 17:01:04)
[GCC 4.4.6 20120305 (Red Hat 4.4.6-4)]
NumPy 1.9.2
SciPy 0.14.1
Scikit-learn 0.17.1
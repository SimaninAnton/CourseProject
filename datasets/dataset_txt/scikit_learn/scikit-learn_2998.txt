daviddaileo commented on May 18, 2016
Description
I was trying to use partial_fit of BIRCH in a streaming data scenario, following the instruction.
Steps/Code to Reproduce
import collections
from sklearn import cluster
birch = cluster.Birch(branching_factor=50,threshold=0.2,n_clusters=None).fit(X)
par_birch = cluster.Birch(n_clusters=None,threshold=0.2).partial_fit(data[0].reshape(1,-1))
par_label=[]
for i in range(0,len(data)):
    par_birch.partial_fit(data[i].reshape(1,-1))
    par_label.append(par_birch.labels_[0].tolist())
par_birch.set_params(n_clusters=len(set(par_label)))
par_birch.partial_fit()
label_count=collections.Counter(par_label)
Expected Results
As suggested in the instruction, after training all data by multiple calls to partial_fit, set n_clusters and call partial_fit finally with no arguments, which performs the global clustering.
Actual Results
However, birch.label_ and par_label do not have the same cluster configuration. I don't mean that the cluster labels should be the same. But I think the number of data points in the same cluster should be the same.
Did I miss anything after global clustering?
zhangnew commented on Jan 19, 2018
Description
I use sklearn.tree.DecisionTreeClassifier
when I write this Parameter:
class_weight=[{0: 1, 1: 1}, {0: 1, 1: 5}, {0: 1, 1: 1}, {0: 1, 1: 1}]
I got this error : class_weight must be dict, 'balanced', or None
In source code , I find the class_weight seem not support list of dicts
scikit-learn/sklearn/utils/class_weight.py line 44 to 62
    if class_weight is None or len(class_weight) == 0:
        # uniform class weights
        weight = np.ones(classes.shape[0], dtype=np.float64, order='C')
    elif class_weight == 'balanced':
        # Find the weight of each class as present in y.
        le = LabelEncoder()
        y_ind = le.fit_transform(y)
        if not all(np.in1d(classes, le.classes_)):
            raise ValueError("classes should have valid labels that are in y")

        recip_freq = len(y) / (len(le.classes_) *
                               np.bincount(y_ind).astype(np.float64))
        weight = recip_freq[le.transform(classes)]
    else:
        # user-defined dictionary
        weight = np.ones(classes.shape[0], dtype=np.float64, order='C')
        if not isinstance(class_weight, dict):
            raise ValueError("class_weight must be dict, 'balanced', or None,"
                             " got: %r" % class_weight)
there is no code deal with list of dicts
but the doc in line 78 is support list of dicts
class_weight : dict, list of dicts, "balanced", or None, optional
Steps/Code to Reproduce
Expected Results
Actual Results
Versions
0.19.1
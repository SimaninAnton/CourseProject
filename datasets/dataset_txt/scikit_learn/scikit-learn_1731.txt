hmcezar commented on Nov 24, 2017
I've upgraded my Anaconda Python to the latest version, and found that a script I was using (https://github.com/hmcezar/clustering-traj) started to have a strange behaviour in the multidimensional scaling part.
In this latest version of Anaconda, sklearn is in version 0.19.1
First it wasn't deterministic, meaning random_state was being ignored.
More importantly, the scaling was horrible, clusters were all together in the same place (in my case the coloring allowed me to see that).
After enabling verbose in the sklearn.manifold.MDS I saw that the stress was not being converged at all:
it: 0, stress 6710.61383473
it: 1, stress 24336.9882615
breaking at iteration 1 with stress 24336.9882615
it: 0, stress 6918.60554798
it: 1, stress 34192.7290768
breaking at iteration 1 with stress 34192.7290768
it: 0, stress 6560.50638361
it: 1, stress 39720.3395654
breaking at iteration 1 with stress 39720.3395654
it: 0, stress 6958.39350335
it: 1, stress 27453.7424775
breaking at iteration 1 with stress 27453.7424775
it: 0, stress 6635.19230589
it: 1, stress 25024.0755894
breaking at iteration 1 with stress 25024.0755894
it: 0, stress 6845.99753266
it: 1, stress 40996.8224831
breaking at iteration 1 with stress 40996.8224831
(here I was using n_init=6 and eps=1e-12)
I downgraded sklearn to 0.19 and the problem continued.
After downgrading sklearn to 0.18.2 the script is properly working again: (just the latest steps to show it's converging)
it: 2082, stress 722.993978673
it: 2083, stress 722.993978673
it: 2084, stress 722.993978673
it: 2085, stress 722.993978673
it: 2086, stress 722.993978673
it: 2087, stress 722.993978673
it: 2088, stress 722.993978673
it: 2089, stress 722.993978673
breaking at iteration 2089 with stress 722.993978673
Not only it's converging, but random_state=int is working again to seed the PRNG.
Contributor
varunagrawal commented on Feb 25, 2018 â€¢
edited
Description
Due to a fix for #7352 introduced in #7373, the function precision_recall_curve in metrics.ranking
no longer accepts y_score as a mutlilabel-indicator. This is a regression bug caused due to _binary_clf_curve having a check for y_true which doesn't allow multilabel-indicator types.
Steps/Code to Reproduce
import numpy as np
from sklearn.metrics.ranking import precision_recall_curve

y_true = np.array([[0, 1], [0, 1]])
y_score = np.array([[0, 1], [0, 1]])
p, r, thresholds = precision_recall_curve(y_true, y_score)
Expected Results
precision_recall_curve should return the correct precision, recall and threshold values.
Actual Results
ValueError: multilabel-indicator format is not supported is raised.
Versions
Linux-4.4.0-112-generic-x86_64-with-debian-stretch-sid
Python 3.6.4 (default, Jan 19 2018, 13:21:56)
[GCC 5.4.0 20160609]
NumPy 1.14.0
SciPy 0.19.0
Scikit-Learn 0.19.1
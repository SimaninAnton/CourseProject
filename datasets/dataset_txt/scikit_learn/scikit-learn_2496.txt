ishbir commented on Jan 2, 2017
Description
Building docs fails while embedding documentation hyperlinks in examples.
Steps/Code to Reproduce
git clone https://github.com/scikit-learn/scikit-learn.git
cd scikit-learn/doc
git checkout 0.18.X
make html
Expected Results
No error.
Actual Results
Docs build fine as I can open and read them but nevertheless, an error is thrown:
build succeeded, 45 warnings.
Embedding documentation hyperlinks in examples..
 processing: missing_values.html

Exception occurred:
  File "/home/random/python/scikit-learn/doc/sphinxext/sphinx_gallery/docs_resolv.py", line 48, in _get_data
    with open(url, 'r') as fid:
FileNotFoundError: [Errno 2] No such file or directory: '/home/random/python/scikit-learn/doc/_build/html/stable/modules/generated/sklearn.model_selection.cross_val_score.rst.html'
The full traceback has been saved in /tmp/sphinx-err-jzgqj71t.log, if you want to report the issue to the developers.
Please also report this if it was a user error, so that a better error message can be provided next time.
A bug report can be filed in the tracker at <https://github.com/sphinx-doc/sphinx/issues>. Thanks!
make: *** [Makefile:42: html] Error 1
Stack trace and error details from the log file:
# Sphinx version: 1.5.1
# Python version: 3.5.2 (CPython)
# Docutils version: 0.13.1 release
# Jinja2 version: 2.8
# Last messages:
#   
#   copying static files...
#   done
#   copying extra files...
#   done
#   dumping search index in English (code: en) ...
#   done
#   dumping object inventory...
#   done
#   build succeeded, 45 warnings.
# Loaded extensions:
#   sphinx.builders.changes (builtin) from /usr/lib/python3.5/site-packages/sphinx/builders/changes.py
#   sphinx.builders.epub3 (builtin) from /usr/lib/python3.5/site-packages/sphinx/builders/epub3.py
#   sphinx.builders.epub (builtin) from /usr/lib/python3.5/site-packages/sphinx/builders/epub.py
#   sphinx.builders.htmlhelp (builtin) from /usr/lib/python3.5/site-packages/sphinx/builders/htmlhelp.py
#   sphinx_issues (unknown version) from /home/random/python/scikit-learn/doc/sphinxext/sphinx_issues.py
#   sphinx.ext.doctest (1.5.1) from /usr/lib/python3.5/site-packages/sphinx/ext/doctest.py
#   sphinx.domains.rst (builtin) from /usr/lib/python3.5/site-packages/sphinx/domains/rst.py
#   sphinx.builders.dummy (builtin) from /usr/lib/python3.5/site-packages/sphinx/builders/dummy.py
#   sphinx_gallery.gen_gallery (unknown version) from /home/random/python/scikit-learn/doc/sphinxext/sphinx_gallery/gen_gallery.py
#   sphinx.roles (builtin) from /usr/lib/python3.5/site-packages/sphinx/roles.py
#   sphinx.domains.python (builtin) from /usr/lib/python3.5/site-packages/sphinx/domains/python.py
#   sphinx.builders.xml (builtin) from /usr/lib/python3.5/site-packages/sphinx/builders/xml.py
#   sphinx.builders.texinfo (builtin) from /usr/lib/python3.5/site-packages/sphinx/builders/texinfo.py
#   sphinx.domains.cpp (builtin) from /usr/lib/python3.5/site-packages/sphinx/domains/cpp.py
#   sphinx.builders.gettext (builtin) from /usr/lib/python3.5/site-packages/sphinx/builders/gettext.py
#   sphinx.ext.linkcode (1.5.1) from /usr/lib/python3.5/site-packages/sphinx/ext/linkcode.py
#   numpy_ext.numpydoc (unknown version) from /home/random/python/scikit-learn/doc/sphinxext/numpy_ext/numpydoc.py
#   sphinx.ext.imgmath (1.5.1) from /usr/lib/python3.5/site-packages/sphinx/ext/imgmath.py
#   sphinx.builders.html (builtin) from /usr/lib/python3.5/site-packages/sphinx/builders/html.py
#   sphinx.builders.devhelp (builtin) from /usr/lib/python3.5/site-packages/sphinx/builders/devhelp.py
#   alabaster (0.7.9) from /usr/lib/python3.5/site-packages/alabaster/__init__.py
#   sphinx.directives.other (builtin) from /usr/lib/python3.5/site-packages/sphinx/directives/other.py
#   sphinx.builders.applehelp (builtin) from /usr/lib/python3.5/site-packages/sphinx/builders/applehelp.py
#   sphinx.directives (builtin) from /usr/lib/python3.5/site-packages/sphinx/directives/__init__.py
#   sphinx.builders.websupport (builtin) from /usr/lib/python3.5/site-packages/sphinx/builders/websupport.py
#   sphinx.directives.code (builtin) from /usr/lib/python3.5/site-packages/sphinx/directives/code.py
#   sphinx.domains.javascript (builtin) from /usr/lib/python3.5/site-packages/sphinx/domains/javascript.py
#   sphinx.builders.manpage (builtin) from /usr/lib/python3.5/site-packages/sphinx/builders/manpage.py
#   sphinx.directives.patches (builtin) from /usr/lib/python3.5/site-packages/sphinx/directives/patches.py
#   sphinx.builders.latex (builtin) from /usr/lib/python3.5/site-packages/sphinx/builders/latex.py
#   sphinx.ext.autodoc (1.5.1) from /usr/lib/python3.5/site-packages/sphinx/ext/autodoc.py
#   sphinx.ext.autosummary (1.5.1) from /usr/lib/python3.5/site-packages/sphinx/ext/autosummary/__init__.py
#   sphinx.builders.qthelp (builtin) from /usr/lib/python3.5/site-packages/sphinx/builders/qthelp.py
#   sphinx.builders.text (builtin) from /usr/lib/python3.5/site-packages/sphinx/builders/text.py
#   sphinx.builders.linkcheck (builtin) from /usr/lib/python3.5/site-packages/sphinx/builders/linkcheck.py
#   sphinx.domains.c (builtin) from /usr/lib/python3.5/site-packages/sphinx/domains/c.py
#   sphinx.domains.std (builtin) from /usr/lib/python3.5/site-packages/sphinx/domains/std.py
Traceback (most recent call last):
  File "/usr/lib/python3.5/site-packages/sphinx/cmdline.py", line 296, in main
    app.build(opts.force_all, filenames)
  File "/usr/lib/python3.5/site-packages/sphinx/application.py", line 351, in build
    self.emit('build-finished', None)
  File "/usr/lib/python3.5/site-packages/sphinx/application.py", line 589, in emit
    results.append(callback(self, *args))
  File "/home/random/python/scikit-learn/doc/sphinxext/sphinx_gallery/docs_resolv.py", line 436, in embed_code_links
    _embed_code_links(app, gallery_conf, gallery_dir)
  File "/home/random/python/scikit-learn/doc/sphinxext/sphinx_gallery/docs_resolv.py", line 375, in _embed_code_links
    full_fname)
  File "/home/random/python/scikit-learn/doc/sphinxext/sphinx_gallery/docs_resolv.py", line 298, in resolve
    link = self._get_link(cobj)
  File "/home/random/python/scikit-learn/doc/sphinxext/sphinx_gallery/docs_resolv.py", line 249, in _get_link
    html = get_data(link, self.gallery_dir)
  File "/home/random/python/scikit-learn/doc/sphinxext/sphinx_gallery/docs_resolv.py", line 66, in get_data
    data = _get_data(url)
  File "/home/random/python/scikit-learn/doc/sphinxext/sphinx_gallery/docs_resolv.py", line 48, in _get_data
    with open(url, 'r') as fid:
FileNotFoundError: [Errno 2] No such file or directory: '/home/random/python/scikit-learn/doc/_build/html/stable/modules/generated/sklearn.model_selection.cross_val_score.rst.html'
The file that Sphinx looks for exists but is named sklearn.model_selection.cross_val_score.html. Oh and running make html again results in the same error but with a different file, suggesting that the problem is with stripping .rst from the file names.
Versions
Linux-4.8.13-1-ARCH-x86_64-with-arch
Python 3.5.2 (default, Nov 7 2016, 11:31:36) [GCC 6.2.1 20160830]
NumPy 1.11.2
SciPy 0.18.1
Scikit-Learn 0.18.1
kigawas commented on Mar 27, 2016
I use pickle.dump on this environment:
Windows-8.1-6.3.9600
('Python', '2.7.11 |Anaconda 2.2.0 (64-bit)| (default, Jan 29 2016, 14:26:21) [MSC v.1500 64 bit (AMD64)]')
('NumPy', '1.9.3')
('SciPy', '0.16.0')
('Scikit-Learn', '0.16.1')
And use pickle.load on this environment:
Linux-4.2.0-c9-x86_64-with-Ubuntu-14.04-trusty
('Python', '2.7.6 (default, Jun 22 2015, 17:58:13) \n[GCC 4.8.2]')
('NumPy', '1.10.4')
('SciPy', '0.17.0')
('Scikit-Learn', '0.17.1')
If you dump StandardScaler after fitting it, just like pickle.dump(scaler,open('scaler','wb')) on Windows(b is to avoid format problem on Windows). And load it like scaler = pickle.load(open('pickles/scaler')) on Ubuntu, you will get a sklearn.utils.validation.NotFittedError.
Notice that sklearn's version on Windows is 0.17.1 while on Ubuntu is 0.16.1. After I change Ubuntu's version to Windows', the problem is resolved.
Also, only StandarScaler can reproduce this problem, MinMaxScaler won't raise such an error.
The whole traceback is below:
Traceback (most recent call last):
  File "scoring.py", line 95, in <module>
    e = EssayScorer(text)
  File "scoring.py", line 63, in __init__
    self.score = self.__score()
  File "scoring.py", line 71, in __score
    EssayScorer.scaler.transform(lf)),
  File "/home/ubuntu/workspace/Flask/flasky/venv/local/lib/python2.7/site-packages/sklearn/utils/metaestimators.py", line 37, in <lambda>
    out = lambda *args, **kwargs: self.fn(obj, *args, **kwargs)
  File "/home/ubuntu/workspace/Flask/flasky/venv/local/lib/python2.7/site-packages/sklearn/pipeline.py", line 291, in transform
    Xt = transform.transform(Xt)
  File "/home/ubuntu/workspace/Flask/flasky/venv/local/lib/python2.7/site-packages/sklearn/preprocessing/data.py", line 638, in transform
    check_is_fitted(self, 'scale_')
  File "/home/ubuntu/workspace/Flask/flasky/venv/local/lib/python2.7/site-packages/sklearn/utils/validation.py", line 678, in check_is_fitted
    raise NotFittedError(msg % {'name': type(estimator).__name__})
sklearn.utils.validation.NotFittedError: This StandardScaler instance is not fitted yet. Call 'fit' with appropriate arguments before using this method.
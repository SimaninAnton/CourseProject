charris commented on Jul 24, 2017
In [1]: import platform; print(platform.platform())
Linux-4.11.10-300.fc26.x86_64-x86_64-with-fedora-26-Twenty_Six

In [2]: import sys; print("Python", sys.version)
('Python', '2.7.13 (default, Jun 26 2017, 10:20:05) \n[GCC 7.1.1 20170622 (Red Hat 7.1.1-3)]')

In [3]: import numpy; print("NumPy", numpy.__version__)
('NumPy', '1.14.0.dev0+6958be1')

In [4]: import scipy; print("SciPy", scipy.__version__)
('SciPy', '0.18.1')

In [5]: import sklearn; print("Scikit-Learn", sklearn.__version__)
('Scikit-Learn', '0.20.dev0')
I am seeing the following error in scikit master compiled agains current NumPy master on Fedora 26 with gcc 7.1
FAIL: sklearn.feature_selection.tests.test_from_model.test_feature_importances
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python2.7/site-packages/nose/case.py", line 197, in runTest
    self.test(*self.arg)
  File "/home/charris/Workspace/scikit-learn/sklearn/utils/testing.py", line 667, in run_test
    return func(*args, **kwargs)
  File "/home/charris/Workspace/scikit-learn/sklearn/feature_selection/tests/test_from_model.py", line 72, in test_feature_importances
    assert_almost_equal(importances, importances_bis)
  File "/home/charris/.local/lib/python2.7/site-packages/numpy-1.14.0.dev0+6958be1-py2.7-linux-x86_64.egg/numpy/testing/nose_tools/utils.py", line 564, in assert_almost_equal
    return assert_array_almost_equal(actual, desired, decimal, err_msg)
  File "/home/charris/.local/lib/python2.7/site-packages/numpy-1.14.0.dev0+6958be1-py2.7-linux-x86_64.egg/numpy/testing/nose_tools/utils.py", line 963, in assert_array_almost_equal
    precision=decimal)
  File "/home/charris/.local/lib/python2.7/site-packages/numpy-1.14.0.dev0+6958be1-py2.7-linux-x86_64.egg/numpy/testing/nose_tools/utils.py", line 779, in assert_array_compare
    raise AssertionError(msg)
AssertionError: 
Arrays are not almost equal to 7 decimals

(mismatch 100.0%)
 x: array([ 0.153665 ,  0.229425 ,  0.182473 ,  0.0666691,  0.0484974,
        0.0587289,  0.0643475,  0.0642126,  0.0659716,  0.06601  ])
 y: array([ 0.1526605,  0.229434 ,  0.1821972,  0.0674997,  0.048336 ,
        0.0587308,  0.0648382,  0.0641795,  0.0655971,  0.066527 ])
>>  raise AssertionError('\nArrays are not almost equal to 7 decimals\n\n(mismatch 100.0%)\n x: array([ 0.153665 ,  0.229425 ,  0.182473 ,  0.0666691,  0.0484974,\n        0.0587289,  0.0643475,  0.0642126,  0.0659716,  0.06601  ])\n y: array([ 0.1526605,  0.229434 ,  0.1821972,  0.0674997,  0.048336 ,\n        0.0587308,  0.0648382,  0.0641795,  0.0655971,  0.066527 ])')
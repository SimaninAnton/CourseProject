Member
qinhanmin2014 commented on Aug 12, 2017
Description
When developing recently, I find that test_kernel_ridge_singular_kernel(sklearn.tests.test_kernel_ridge.test_kernel_ridge_singular_kernel) sometimes fails on Travis. The test pass after an empty commit.
Steps/Code to Reproduce
pull request #9108
failed build https://travis-ci.org/scikit-learn/scikit-learn/jobs/259750223
empty commit 2a9d47e
passed build https://travis-ci.org/scikit-learn/scikit-learn/jobs/259764708
pull request #9521
failed build https://travis-ci.org/scikit-learn/scikit-learn/jobs/263774523
empty commit 6d27fca
passed build https://travis-ci.org/scikit-learn/scikit-learn/jobs/263782780
These pull requests seem totally unrelevant to test_kernel_ridge_singular_kernel.
possible solution
(1)Reduce decimal requirement of assert_array_almost_equal from default to maybe 4-5
(2)Add a random state (may work since the errors are different and only occur sometimes, not sure)
Could you please confirm it and give me some suggestions. I'll try to fix it if the issue is valid. Thanks :)
Contributor
adamjstewart commented on Jul 13, 2019
Description
I'm trying to install scikit-learn from source on macOS. Sklearn recently added an OpenMP dependency, which I am still in the process of getting working. In the meantime, I tried setting SKLEARN_NO_OPENMP to TRUE, but found that compilation still fails.
Steps/Code to Reproduce
$ export SKLEARN_NO_OPENMP=TRUE
$ python setup.py build
$ python setup.py install
Expected Results
Successful compilation without OpenMP support.
Actual Results
I see the following error message during compilation:
sklearn/ensemble/_hist_gradient_boosting/splitting.c:614:10: fatal error: 'omp.h' file not found
#include <omp.h>
         ^~~~~~~
1 warning and 1 error generated.
All compilation is done using the Spack package manager. Full build logs are presented below. Don't worry about understanding the inner workings of Spack, I'm a Spack developer so I can handle that part.
Build Output
Build Environment
Versions
Dependency Version
OS macOS 10.14.5
Compiler Apple Clang 10.0.1
Platform Darwin-18.6.0-x86_64-i386-64bit
Python 3.7.3
NumPy 1.16.4
SciPy 1.2.1
Sklearn 0.21.2
Cython 0.29.7
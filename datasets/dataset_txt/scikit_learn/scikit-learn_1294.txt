Member
jeremiedbb commented on Jun 21, 2018
This issue is about the n_iter_ attribute of the KMean estimator.
First, it does not appear in the docstring, under 'attributes'. I think it should.
Then, it's value seems wrong when using algorithm='elkan'. The code below returns n_iter_=1 for the 'full' algorithm, as expected:
    estimator = KMean(algorithm="full", max_iter=1)
    estimator.fit(np.random.rand(10,10))
    print(estimator.n_iter_)
The same code using algorithm='elkan' returns n_iter_=0, not as expected.
The fix is really simple. It's just that the last line of scikit-learn/sklearn/cluster/_k_means_elkan.pyx
    return centers_, labels_, iteration
should be replaced by
    return centers_, labels_, iteration + 1
Can you confirm that it was not intended ?
If so, I'll make a PR to fix it and add n_iter_ to the docstring
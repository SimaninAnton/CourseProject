skorokithakis commented on Jan 30, 2013
Hello,
I am trying to run the "working with text" example on the tutorial. However, I get an error:
classifier = Pipeline([('vect', CountVectorizer()), ('tfidf', TfidfTransformer()), ('clf', LinearSVC())])
parameters = {'vect__analyzer__max_n': (1, 2), 'tfidf__use_idf': (True, False), 'clf__C': (100, 1000)}
gs_clf = GridSearchCV(classifier, parameters, n_jobs=1)
gs_clf.fit(["foo", "bar", "baz"], [0, 1, 0])
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
/proj/env/local/lib/python2.7/site-packages/django/core/management/commands/shell.pyc in <module>()
----> 1 gs_clf.fit(["foo", "bar", "baz"], [0, 1, 0])

/proj/env/local/lib/python2.7/site-packages/sklearn/grid_search.pyc in fit(self, X, y, **params)
    370                                self.loss_func, self.score_func, self.verbose,
    371                                **self.fit_params)
--> 372                            for clf_params in grid for train, test in cv)
    373 
    374         # Out is a list of triplet: score, estimator, n_test_samples

/proj/env/local/lib/python2.7/site-packages/sklearn/externals/joblib/parallel.pyc in __call__(self, iterable)
    512         try:
    513             for function, args, kwargs in iterable:
--> 514                 self.dispatch(function, args, kwargs)
    515 
    516             self.retrieve()

/proj/env/local/lib/python2.7/site-packages/sklearn/externals/joblib/parallel.pyc in dispatch(self, func, args, kwargs)
    309         """
    310         if self._pool is None:
--> 311             job = ImmediateApply(func, args, kwargs)
    312             index = len(self._jobs)
    313             if not _verbosity_filter(index, self.verbose):

/proj/env/local/lib/python2.7/site-packages/sklearn/externals/joblib/parallel.pyc in __init__(self, func, args, kwargs)
    133         # Don't delay the application, to avoid keeping the input
    134         # arguments in memory
--> 135         self.results = func(*args, **kwargs)
    136 
    137     def get(self):

/proj/env/local/lib/python2.7/site-packages/sklearn/grid_search.pyc in fit_grid_point(X, y, base_clf, clf_params, train, test, loss_func, score_func, verbose, **fit_params)
     82     # update parameters of the classifier after a copy of its base structure
     83     clf = clone(base_clf)
---> 84     clf.set_params(**clf_params)
     85 
     86     if hasattr(base_clf, 'kernel') and hasattr(base_clf.kernel, '__call__'):

/proj/env/local/lib/python2.7/site-packages/sklearn/base.pyc in set_params(self, **params)
    235                                      (name, self))
    236                 sub_object = valid_params[name]
--> 237                 sub_object.set_params(**{sub_name: value})
    238             else:
    239                 # simple objects case

/proj/env/local/lib/python2.7/site-packages/sklearn/base.pyc in set_params(self, **params)
    235                                      (name, self))
    236                 sub_object = valid_params[name]
--> 237                 sub_object.set_params(**{sub_name: value})
    238             else:
    239                 # simple objects case

AttributeError: 'str' object has no attribute 'set_params'
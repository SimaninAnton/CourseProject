valtron commented on Jun 28, 2019
Description
The results of spectral_embedding are not deterministic. So far, this only seems to happen when the graph is not fully connected.
Steps/Code to Reproduce
import numpy as np
from sklearn.manifold import spectral_embedding
for i in range(10):
 out = spectral_embedding(np.eye(4), 1, random_state=0)
 print(out[0])
Expected Results
The same number 10 times.
Actual Results
/home/username/test/.venv/lib/python3.6/site-packages/sklearn/manifold/spectral_embedding_.py:235: UserWarning: Graph is not fully connected, spectral embedding may not work as expected.
  warnings.warn("Graph is not fully connected, spectral embedding"
[0.62535436]
[0.94751536]
[0.90575878]
[0.38352695]
[0.53871056]
[0.11014779]
[0.81740735]
[-0.06368836]
[0.9799327]
[0.08177197]
Versions
/home/username/test/.venv/lib/python3.6/site-packages/numpy/distutils/system_info.py:639: UserWarning: 
    Atlas (http://math-atlas.sourceforge.net/) libraries not found.
    Directories to search for the libraries can be specified in the
    numpy/distutils/site.cfg file (section [atlas]) or by setting
    the ATLAS environment variable.
  self.calc_info()
/home/username/test/.venv/lib/python3.6/site-packages/numpy/distutils/system_info.py:639: UserWarning: 
    Blas (http://www.netlib.org/blas/) libraries not found.
    Directories to search for the libraries can be specified in the
    numpy/distutils/site.cfg file (section [blas]) or by setting
    the BLAS environment variable.
  self.calc_info()
/home/username/test/.venv/lib/python3.6/site-packages/numpy/distutils/system_info.py:639: UserWarning: 
    Blas (http://www.netlib.org/blas/) sources not found.
    Directories to search for the sources can be specified in the
    numpy/distutils/site.cfg file (section [blas_src]) or by setting
    the BLAS_SRC environment variable.
  self.calc_info()

System:
    python: 3.6.8 (default, Jan 14 2019, 11:02:34)  [GCC 8.0.1 20180414 (experimental) [trunk revision 259383]]
executable: /home/username/test/.venv/bin/python3
   machine: Linux-4.19.20-surface-linux-surface-x86_64-with-Ubuntu-18.04-bionic

BLAS:
    macros: 
  lib_dirs: 
cblas_libs: cblas

Python deps:
       pip: 19.1.1
setuptools: 39.0.1
   sklearn: 0.21.2
     numpy: 1.16.4
     scipy: 1.3.0
    Cython: None
    pandas: 0.24.2
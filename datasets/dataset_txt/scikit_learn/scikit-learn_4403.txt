hadim commented on May 21, 2014
I get the following error compiling scikit-learn 0.14.1 (from pip install) with python 3.4. Note that 0.14.1/py3.3 works and 0.15-git-last-commit/py3.4 works too.
Partial import of sklearn during the build process.

error: Command "x86_64-linux-gnu-gcc -pthread -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -D_FORTIFY_SOURCE=2 -fPIC -DATLAS_INFO="\"3.10.1\"" -Isklearn/src/cblas -I/home/hadim/.virtualenvs/st/lib/python3.4/site-packages/numpy/core/include -I/usr/include/atlas -I/home/hadim/.virtualenvs/st/lib/python3.4/site-packages/numpy/core/include -I/usr/include/python3.4m -I/home/hadim/.virtualenvs/st/include/python3.4m -c sklearn/cluster/_k_means.c -o build/temp.linux-x86_64-3.4/sklearn/cluster/_k_means.o" failed with exit status 1

In file included from /home/hadim/.virtualenvs/st/lib/python3.4/site-packages/numpy/core/include/numpy/ndarraytypes.h:1761:0,

                 from /home/hadim/.virtualenvs/st/lib/python3.4/site-packages/numpy/core/include/numpy/ndarrayobject.h:17,

                 from /home/hadim/.virtualenvs/st/lib/python3.4/site-packages/numpy/core/include/numpy/arrayobject.h:4,

                 from sklearn/cluster/_k_means.c:315:

/home/hadim/.virtualenvs/st/lib/python3.4/site-packages/numpy/core/include/numpy/npy_1_7_deprecated_api.h:15:2: warning: #warning "Using deprecated NumPy API, disable it by " "#defining NPY_NO_DEPRECATED_API NPY_1_7_API_VERSION" [-Wcpp]

 #warning "Using deprecated NumPy API, disable it by " \

  ^

sklearn/cluster/_k_means.c: In function â��__Pyx_TraceSetupAndCallâ��:

sklearn/cluster/_k_means.c:7955:17: error: â��PyFrameObjectâ�� has no member named â��f_tstateâ��

         (*frame)->f_tstate = tstate;

                 ^

In file included from /home/hadim/.virtualenvs/st/lib/python3.4/site-packages/numpy/core/include/numpy/ufuncobject.h:327:0,

                 from sklearn/cluster/_k_means.c:316:

sklearn/cluster/_k_means.c: At top level:

/home/hadim/.virtualenvs/st/lib/python3.4/site-packages/numpy/core/include/numpy/__ufunc_api.h:241:1: warning: â��_import_umathâ�� defined but not used [-Wunused-function]

 _import_umath(void)

 ^

----------------------------------------
Cleaning up...
Command /home/hadim/.virtualenvs/st/bin/python3 -c "import setuptools, tokenize;__file__='/home/hadim/.virtualenvs/st/build/scikit-learn/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record /tmp/pip-ahwouitg-record/install-record.txt --single-version-externally-managed --compile --install-headers /home/hadim/.virtualenvs/st/include/site/python3.4 failed with error code 1 in /home/hadim/.virtualenvs/st/build/scikit-learn
Storing debug log for failure in /home/hadim/.pip/pip.log
This issue has been discovered while I was trying to setup a travis test env for python 3.4. I use conda in that case.
See the related conda error: conda/conda#703
Member
rth commented on Sep 9, 2018 â€¢
edited
Currently Travis CI fails on master for Python 2.7 with the following traceback,
$ bash build_tools/travis/test_script.sh
Python 2.7.6
numpy 1.8.2
scipy 0.13.3
48 CPUs

platform linux2 -- Python 2.7.6, pytest-3.8.0, py-1.6.0, pluggy-0.7.1
rootdir: /tmp/sklearn, inifile: setup.cfg
plugins: cov-2.6.0
collected 0 items / 1 errors                                                   
==================================== ERRORS ====================================
______________________________ ERROR collecting  _______________________________
/home/travis/build/scikit-learn/scikit-learn/testvenv/local/lib/python2.7/site-packages/py/_path/common.py:377: in visit
    for x in Visitor(fil, rec, ignore, bf, sort).gen(self):
/home/travis/build/scikit-learn/scikit-learn/testvenv/local/lib/python2.7/site-packages/py/_path/common.py:419: in gen
    if p.check(dir=1) and (rec is None or rec(p))])
/home/travis/build/scikit-learn/scikit-learn/testvenv/local/lib/python2.7/site-packages/_pytest/main.py:561: in _recurse
    ihook = self.gethookproxy(path)
/home/travis/build/scikit-learn/scikit-learn/testvenv/local/lib/python2.7/site-packages/_pytest/main.py:416: in gethookproxy
    my_conftestmodules = pm._getconftestmodules(fspath)
/home/travis/build/scikit-learn/scikit-learn/testvenv/local/lib/python2.7/site-packages/_pytest/config/__init__.py:395: in _getconftestmodules
    mod = self._importconftest(conftestpath)
/home/travis/build/scikit-learn/scikit-learn/testvenv/local/lib/python2.7/site-packages/_pytest/config/__init__.py:431: in _importconftest
    raise ConftestImportFailure(conftestpath, sys.exc_info())
E   ConftestImportFailure: ModuleDeprecationWarning('The oldnumeric module will be dropped in Numpy 1.9',)
E     File "/home/travis/build/scikit-learn/scikit-learn/sklearn/__init__.py", line 64, in <module>
E       from .base import clone
E     File "/home/travis/build/scikit-learn/scikit-learn/sklearn/base.py", line 11, in <module>
E       from scipy import sparse
E     File "/usr/lib/python2.7/dist-packages/scipy/__init__.py", line 77, in <module>
E       from numpy import oldnumeric
E     File "/usr/lib/python2.7/dist-packages/numpy/oldnumeric/__init__.py", line 11, in <module>
E       warnings.warn(_msg, ModuleDeprecationWarning)

!!!!!!!!!!!!!!!!!!! Interrupted: 1 errors during collection !!!!!!!!!!!!!!!!!!!!
=========================== 1 error in 0.30 seconds ============================
which doesn't make much sense, as it would mean that somehow it's using a system numpy/scipy instead of the one in the created virtualenv.
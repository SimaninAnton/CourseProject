swzCuroverse commented on Feb 9, 2017 â€¢
edited by lesteve
Description
First component for Sparse PCA shows no variation. Noticed it in my data, but then tried with the fisher iris data set.
Steps/Code to Reproduce
import matplotlib.pyplot as plt
import pandas as pd
import numpy as np
from sklearn.datasets import load_iris
from sklearn.decomposition import PCA
from sklearn.decomposition import SparsePCA

iris = load_iris()
X = iris.data
y = iris.target

n_components = 2
ipca = SparsePCA(n_components=2, alpha = 1e-3)
X_ipca = ipca.fit_transform(X)

pca = PCA(n_components=n_components)
X_pca = pca.fit_transform(X)

colors = ['navy', 'turquoise', 'darkorange']

for X_transformed, title in [(X_ipca, "Sparse PCA"), (X_pca, "PCA")]:
    plt.figure(figsize=(8, 8))
    for color, i, target_name in zip(colors, [0, 1, 2], iris.target_names):
        plt.scatter(X_transformed[y == i, 0], X_transformed[y == i, 1],
                    color=color, lw=2, label=target_name)

    if "Sparse" in title:
        err = np.abs(np.abs(X_pca) - np.abs(X_ipca)).mean()
        plt.title(title + " of iris dataset\nMean absolute unsigned error "
                  "%.6f" % err)
    else:
        plt.title(title + " of iris dataset")
    plt.legend(loc="best", shadow=False, scatterpoints=1)
    plt.axis([-4, 4, -1.5, 1.5])

plt.show()
Expected Results
I would expect that it would show a similar result as PCA, especially for a simple fisher iris dataset and low value of alpha
Actual Results
Projection onto the first principle component (sparse PCA) shows no variation (should show max) and does not show the sample result as the PCA example for small values of alpha
Versions
Linux-4.4.0-59-generic-x86_64-with-debian-stretch-sid
Python 3.5.2 |Continuum Analytics, Inc.| (default, Jul  2 2016, 17:53:06) 
[GCC 4.4.7 20120313 (Red Hat 4.4.7-1)]
NumPy 1.11.2
SciPy 0.18.1
Scikit-Learn 0.18.1
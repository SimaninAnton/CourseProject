pmiller10 commented on Oct 9, 2012
I tried using the predict_proba() that was implemented in 0.11. It fails when the weights are set to "uniform" and also when weights are set to "distance." When the weights are set to "uniform" it crashes with the following error stack:
File "/models/decorator.py", line 45, in predictions
probs = neigh.predict_proba(query)[0]
File "/lib/python/sklearn/neighbors/classification.py", line 165, in predict_proba
weights = np.ones_like(pred_labels)
NotImplementedError: Not implemented for this type
If the weights are set to "distance" then the error stack is:
File "/models/decorator.py", line 45, in predictions
probs = neigh.predict_proba(arg)[0]
File "/lib/python/sklearn/neighbors/classification.py", line 180, in predict_proba
probabilities[all_rows, idx] += weights[:, i]
IndexError: arrays used as indices must be of integer (or boolean) type
The same instance of kNeighborsClassifier works correctly with the predict() method. I've also used the same input data and class labels for ExtraTrees and RandomForests and their predict_proba() methods work correctly with the same input data.
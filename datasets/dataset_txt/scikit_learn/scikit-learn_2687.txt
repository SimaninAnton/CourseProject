mgoldwasser commented on Oct 8, 2016
Description
This is a silent bug in version 0.18.0, as a result of the following change: "Random forest, extra trees, decision trees and gradient boosting estimator accept the parameter min_samples_split and min_samples_leaf provided as a percentage of the training samples. By yelite and Arnaud Joly."
The bug is that no error is thrown when large float values are passed. In theory, it would be useless to set min_samples_split to 1.0 or more, or min_samples_leaf to 0.5 or more. For example, min_samples_split=2 gives a very different result compared with min_samples_split=2.0. In this case, accidentally setting min_samples_split=2.0 in 0.18.0 would produce a tree with no splits. In this example, the error would be completely silent, and difficult to debug. This would probably be an unexpected outcome, especially for users coming from version 0.17.1, where these two values (2.0 and 2) would behave identically.
Steps/Code to Reproduce
Example:
from sklearn.ensemble import RandomForestClassifier
from sklearn.cross_validation import train_test_split
from sklearn.datasets import load_iris

iris = load_iris()
X, y = iris.data[:, [0,1,2]], iris.target
X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=.33)

rf = RandomForestClassifier(n_estimators=5, min_samples_leaf=3.0)
rf.fit(X_train, y_train)
print "rf score %s" % rf.score(X_test, y_test)
Expected Results
The RandomForestClassifier scores in the ~0.9 range in 0.17.1, and I believe an error should be thrown in 0.18.0.
Actual Results
The RandomForestClassifier scores in the ~0.3 range in 0.18.0, with no error thrown.
Versions
Darwin-15.6.0-x86_64-i386-64bit
('Python', '2.7.11 (default, Jan 22 2016, 08:29:18) \n[GCC 4.2.1 Compatible Apple LLVM 7.0.2 (clang-700.1.81)]')
('NumPy', '1.11.2')
('SciPy', '0.17.0')
('Scikit-Learn', '0.18')
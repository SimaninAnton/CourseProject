stuz5000 commented on Oct 3, 2017 â€¢
edited
Description
sklearn.datasets.make_classification modifies its weights parameters. Rude!
Steps/Code to Reproduce
init_weights = [0.4]
weights = list(init_weights)

X,y = sklearn.datasets.make_classification(n_samples=100,
                                           n_features=4, n_informative=2, n_redundant=2, n_repeated=0,
                                           n_classes=2, n_clusters_per_class=2, weights=weights,
                                           flip_y=0.01, class_sep=1.0, hypercube=True,
                                           shift=0.0, scale=1.0, shuffle=True, random_state=123)

assert weights == init_weights
Expected Results
weights is modified. Should be copied
Actual Results
Above assert is hit.
Versions
Current:
https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/datasets/samples_generator.py
165: weights.append(1.0 - sum(weights))
Should be:
  weights = weights + [1.0 - sum(weights)]
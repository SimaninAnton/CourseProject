laegrim commented on Jul 17, 2016
Descripton
The multilabel classification test fails, and should pass.
Steps to Reproduce
nosetests -v sklearn/neural_network/tests/test_mlp.py
where the failing code in question is:
X, y = make_multilabel_classification(n_samples=50, random_state=0, return_indicator=True) mlp = MLPClassifier(algorithm='l-bfgs', hidden_layer_sizes=50, alpha=1e-5, max_iter=150, random_state=0, activation='logistic', learning_rate_init=0.2) mlp.fit(X, y)
Expected Results
The test should pass (data from make_multilabel_classification should be fitted with multilabel input when binarized)
Actual Results
ERROR: sklearn.neural_network.tests.test_mlp.test_multilabel_classification
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/laegrim/scikit-learn-sprint/venv/local/lib/python2.7/site-packages/nose/case.py", line 197, in runTest
    self.test(*self.arg)
  File "/home/laegrim/scikit-learn-sprint/scikit-learn/sklearn/neural_network/tests/test_mlp.py", line 288, in test_multilabel_classification
    mlp.fit(X, y)
  File "/home/laegrim/scikit-learn-sprint/scikit-learn/sklearn/neural_network/multilayer_perceptron.py", line 615, in fit
    return self._fit(X, y, incremental=False)
  File "/home/laegrim/scikit-learn-sprint/scikit-learn/sklearn/neural_network/multilayer_perceptron.py", line 331, in _fit
    X, y = self._validate_input(X, y, incremental)
  File "/home/laegrim/scikit-learn-sprint/scikit-learn/sklearn/neural_network/multilayer_perceptron.py", line 914, in _validate_input
    y = self.label_binarizer_.transform(y)
  File "/home/laegrim/scikit-learn-sprint/scikit-learn/sklearn/preprocessing/label.py", line 323, in transform
    raise ValueError("The object was not fitted with multilabel"
ValueError: The object was not fitted with multilabel input.

----------------------------------------------------------------------
Versions
Linux-4.2.0-41-generic-x86_64-with-Ubuntu-15.10-wily
('Python', '2.7.10 (default, Oct 14 2015, 16:09:02) \n[GCC 5.2.1 20151010]')
('NumPy', '1.6.1')
('SciPy', '0.9.0')
('Scikit-Learn', '0.18.dev0')
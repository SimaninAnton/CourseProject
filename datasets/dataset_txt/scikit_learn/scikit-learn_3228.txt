fjanoos commented on Feb 1, 2016
Hello,
I've been trying to make some modifications to sklearn/tree/_criterion.pyx file and I've run into a strange issue. Whenever I try to build sklearn - either as
python setup.py install
or
make
the _criterion.pyx gets cythonized into a cpp file, however the build process is expecting a c file. No errors are thrown during cythonization.
(sklmod)[21:01 - 0.23][firdaus@gsrs3 174] ~/projects/general/scikit-learn >python setup.py install
0.18.dev1 20160129
Partial import of sklearn during the build process.
Generating cython files
Cythonizing sources
/srv/home/firdaus/hsfirdaus/projects/general/scikit-learn
.... 
/srv/home/firdaus/hsfirdaus/projects/general/scikit-learn/sklearn/feature_extraction/_hashing.pyx has not changed
/srv/home/firdaus/hsfirdaus/projects/general/scikit-learn/sklearn/tree/_criterion.pyx has not changed
/srv/home/firdaus/hsfirdaus/projects/general/scikit-learn/sklearn/tree/_splitter.pyx has not changed
...
blas_opt_info:
blas_mkl_info:
  libraries mkl,vml,guide not found in ['/home/firdaus/.conda/envs/sklmod/lib']
  NOT AVAILABLE

openblas_info:
[21:01:33.093 WARNING] /home/firdaus/.conda/envs/sklmod/lib/python3.5/site-packages/numpy/distutils/system_info.py:635: UserWarning: Specified path  is invalid.
  warnings.warn('Specified path %s is invalid.' % d)

  FOUND:
    language = c
    define_macros = [('HAVE_CBLAS', None)]
    libraries = ['openblas']
    library_dirs = ['/home/firdaus/.conda/envs/sklmod/lib']

  FOUND:
    language = c
    define_macros = [('HAVE_CBLAS', None)]
    libraries = ['openblas']
    library_dirs = ['/home/firdaus/.conda/envs/sklmod/lib']

non-existing path in 'sklearn/tree': '_criterion.c'
running install
running build
running config_cc
unifing config_cc, config, build_clib, build_ext, build commands --compiler options
running config_fc
unifing config_fc, config, build_clib, build_ext, build commands --fcompiler options
running build_src
build_src

...

customize UnixCCompiler
customize UnixCCompiler using build_clib
running build_ext
customize UnixCCompiler
customize UnixCCompiler using build_ext
resetting extension 'sklearn.svm.liblinear' language from 'c' to 'c++'.
customize UnixCCompiler
customize UnixCCompiler using build_ext
building 'sklearn.tree._criterion' extension
compiling C sources
C compiler: gcc -pthread -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC

compile options: '-I/home/firdaus/.conda/envs/sklmod/lib/python3.5/site-packages/numpy/core/include -I/home/firdaus/.conda/envs/sklmod/lib/python3.5/site-packages/numpy/core/inc
lude -I/home/firdaus/.conda/envs/sklmod/include/python3.5m -c'
extra options: '-O3'
gcc: _criterion.c
gcc: error: _criterion.c: No such file or directory
gcc: fatal error: no input files
compilation terminated.
gcc: error: _criterion.c: No such file or directory
gcc: fatal error: no input files
compilation terminated.
error: Command "gcc -pthread -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/home/firdaus/.conda/envs/sklmod/lib/python3.5/site-pack
ages/numpy/core/include -I/home/firdaus/.conda/envs/sklmod/lib/python3.5/site-packages/numpy/core/include -I/home/firdaus/.conda/envs/sklmod/include/python3.5m -c _criterion.c -
o build/temp.linux-x86_64-3.5/_criterion.o -O3" failed with exit status 4
Any advice would be appreciated.
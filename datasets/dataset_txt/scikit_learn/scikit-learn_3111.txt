Contributor
dallascard commented on Mar 14, 2016
I am trying to make use of the development version of sklearn on TACC Stampede. There are a number of ways to do this, but the simplest seems to be using virtualenv. Unfortunately, all methods seem to result in a problem with libsvm.so.
If I run
python -c "from sklearn import svm"
I get the following traceback:
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/home1/03913/ab123456/python/venvs/test/lib/python2.7/site-packages/sklearn/svm/__init__.py", line 13, in <module>
    from .classes import SVC, NuSVC, SVR, NuSVR, OneClassSVM, LinearSVC, \
  File "/home1/03913/ab123456/python/venvs/test/lib/python2.7/site-packages/sklearn/svm/classes.py", line 4, in <module>
    from .base import _fit_liblinear, BaseSVC, BaseLibSVM
  File "/home1/03913/ab123456/python/venvs/test/lib/python2.7/site-packages/sklearn/svm/base.py", line 8, in <module>
    from . import libsvm, liblinear
ImportError: /home1/03913/ab123456/python/venvs/test/lib/python2.7/site-packages/sklearn/svm/libsvm.so: undefined symbol: svm_free_and_destroy_model
Version information is below:
Platform: Linux-2.6.32-431.17.1.el6.x86_64-x86_64-with-centos-6.7-Final
Python 2.7.9 (default, Nov 18 2015, 15:58:12)  \  [GCC Intel(R) C++ gcc 4.4 mode]
Numpy: 1.9.1
Scipy: 0.15.0
Scikit-learn:  0.18.dev0
Running
which icc
gives
/opt/apps/intel/15/composer_xe_2015.2.164/bin/intel64/icc
My installation was done using
module load python
virtualenv --system_site_packages <env>
source <env>/bin/activate
export PATH=~/.local/bin:$PATH
git clone https://github.com/scikit-learn/scikit-learn.git
cd scikit-learn
python setup.py install
where I'm adding ~/.local/bin to the path to avoid a cython error.
There are no errors during the installation, and I can import sklearn, but not sklearn.svm.
If I replace libsvm.so and libsvm_sparse.so with symlinks to the corresponding files in the underlying python installation, everything else seems to work fine, but it seems like there is a problem here.
Thanks!
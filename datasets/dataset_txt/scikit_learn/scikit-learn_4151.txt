Contributor
justhalf commented on Nov 10, 2014
The docstring in clone says
Constructs a new estimator with the same parameters.
Clone does a deep copy of the model in an estimator without actually copying attached data. It yields a new estimator with the same parameters that has not been fit on any data.
(emphasis mine)
I think in CountVectorizer, although the vocabulary is part of the arguments that can be fed in during initialization, it is nevertheless the result of fitting, since further fitting will replace the existing vocabulary.
I noticed that in previous versions, the vocabulary was part of "private" member (it was named vocabulary_), but now it's named as vocabulary, which caused it to be copied by clone method (since it's returned by get_params method). The change is made in this commit: 143e5ff
The purpose of clone, I think, is to be able to create a fresh copy of an estimator without the data, which is usually large. But with the inclusion of vocabulary into clone, this renders cloning a CountVectorizer virtually useless.
I think this is a bug in that commit and we should still keep it as vocabulary_ instead of vocabulary.
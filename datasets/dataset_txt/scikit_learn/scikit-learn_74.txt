Contributor
GregoryMorse commented on Dec 16, 2019 â€¢
edited
Description
Cannot import the 0.22.0 DecisionTreeClassifier without an AttributeError.
Looks like a bug in 0.22.0... It looks like there is some serious error inside that DLL. Checking the file timestamps - they all appear to be correct. sklearn/tree/_criterion.cp37-win_amd64.pyd and sklearn/tree/_criterion.pxd specifically appear to be of the right version based on this.
Although searching on the web about the __reduce_cython__ implies it could be an issue with recent Cython versions.
Update: restarting Python after dealing with issue #15884, and updating conda and running
condabin\conda update --force conda
condabin\conda update --all
has seemed to resolve it. I can't explain exactly why though. The updates did not touch Cython nor sklearn, so perhaps the restart was the crucial thing.
Steps/Code to Reproduce
from sklearn.ensemble import GradientBoostingClassifier, RandomForestClassifier, ExtraTreesClassifier, AdaBoostClassifier
Expected Results
No error
Actual Results
from sklearn.ensemble import GradientBoostingClassifier, RandomForestClassifier, ExtraTreesClassifier, AdaBoostClassifier

  File "C:\ProgramData\Anaconda3\lib\site-packages\sklearn\ensemble\__init__.py", line 7, in <module>
    from ._forest import RandomForestClassifier

  File "C:\ProgramData\Anaconda3\lib\site-packages\sklearn\ensemble\_forest.py", line 56, in <module>
    from ..tree import (DecisionTreeClassifier, DecisionTreeRegressor,

  File "C:\ProgramData\Anaconda3\lib\site-packages\sklearn\tree\__init__.py", line 6, in <module>
    from ._classes import BaseDecisionTree

  File "C:\ProgramData\Anaconda3\lib\site-packages\sklearn\tree\_classes.py", line 40, in <module>
    from ._criterion import Criterion

  File "stringsource", line 105, in init sklearn.tree._criterion

AttributeError: type object 'sklearn.tree._criterion.array' has no attribute '__reduce_cython__'
Versions
System:
    python: 3.7.5 (default, Oct 31 2019, 15:18:51) [MSC v.1916 64 bit (AMD64)]
executable: C:\ProgramData\Anaconda3\pythonw.exe
   machine: Windows-10-10.0.18362-SP0

Python dependencies:
       pip: 19.3.1
setuptools: 42.0.2.post20191203
   sklearn: 0.22
     numpy: 1.17.4
     scipy: 1.3.3
    Cython: 0.29.14
    pandas: 0.25.3
matplotlib: 3.1.1
    joblib: 0.14.0

Built with OpenMP: True
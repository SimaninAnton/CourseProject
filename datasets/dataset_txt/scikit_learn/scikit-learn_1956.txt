Member
jnothman commented on Aug 21, 2017
from sklearn.linear_model import LogisticRegression
from sklearn.model_selection import cross_val_predict
from sklearn.datasets import make_classification

X, y = make_classification(n_classes=2, n_samples=10)

cross_val_predict(LogisticRegression(), X.tolist(), y, method='decision_function')
In v0.18, this succeeds.
In v0.19.0:
Traceback (most recent call last):
  File "/Users/joel/repos/scikit-learn/sklearn/model_selection/_validation.py", line 655, in cross_val_predict
    for train, test in cv.split(X, y, groups))
  File "/Users/joel/repos/scikit-learn/sklearn/externals/joblib/parallel.py", line 779, in __call__
    while self.dispatch_one_batch(iterator):
  File "/Users/joel/repos/scikit-learn/sklearn/externals/joblib/parallel.py", line 625, in dispatch_one_batch
    self._dispatch(tasks)
  File "/Users/joel/repos/scikit-learn/sklearn/externals/joblib/parallel.py", line 588, in _dispatch
    job = self._backend.apply_async(batch, callback=cb)
  File "/Users/joel/repos/scikit-learn/sklearn/externals/joblib/_parallel_backends.py", line 111, in apply_async
    result = ImmediateResult(func)
  File "/Users/joel/repos/scikit-learn/sklearn/externals/joblib/_parallel_backends.py", line 332, in __init__
    self.results = batch()
  File "/Users/joel/repos/scikit-learn/sklearn/externals/joblib/parallel.py", line 131, in __call__
    return [func(*args, **kwargs) for func, args, kwargs in self.items]
  File "/Users/joel/repos/scikit-learn/sklearn/externals/joblib/parallel.py", line 131, in <listcomp>
    return [func(*args, **kwargs) for func, args, kwargs in self.items]
  File "/Users/joel/repos/scikit-learn/sklearn/model_selection/_validation.py", line 733, in _fit_and_predict
    predictions_ = np.zeros((X_test.shape[0], n_classes))
AttributeError: 'list' object has no attribute 'shape'
H/T @AlJohri
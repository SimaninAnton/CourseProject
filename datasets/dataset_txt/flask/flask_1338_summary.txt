Too many files open when instantiating the app thousands times
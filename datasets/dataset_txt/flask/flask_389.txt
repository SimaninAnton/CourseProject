claygorman commented on 27 Apr 2018
Expected Behavior
When I run pytest on my code it should complete all tests successfully. This does work fine in 0.12.2.
Actual Behavior
After upgrading to flask 1.0 I get a strange error when running pytest. I was hoping you might have some insight
Traceback (most recent call last):
  File "/Volumes/Storage/Users/claygorman/.pyenv/versions/3.6.4/envs/testproj-1/lib/python3.6/site-packages/_pytest/config.py", line 371, in _importconftest
    mod = conftestpath.pyimport()
  File "/Volumes/Storage/Users/claygorman/.pyenv/versions/3.6.4/envs/testproj-1/lib/python3.6/site-packages/py/_path/local.py", line 668, in pyimport
    __import__(modname)
  File "/Volumes/Storage/Users/claygorman/.pyenv/versions/3.6.4/envs/testproj-1/lib/python3.6/site-packages/_pytest/assertion/rewrite.py", line 213, in load_module
    py.builtin.exec_(co, mod.__dict__)
  File "/Volumes/Storage/clay-dev/testproj/tests/conftest.py", line 13, in <module>
    from testproj import create_app
  File "/Volumes/Storage/clay-dev/testproj/testproj/__init__.py", line 8, in <module>
    from flask import Flask
  File "/Volumes/Storage/Users/claygorman/.pyenv/versions/3.6.4/envs/testproj-1/lib/python3.6/site-packages/flask/__init__.py", line 21, in <module>
    from .app import Flask, Request, Response
  File "/Volumes/Storage/Users/claygorman/.pyenv/versions/3.6.4/envs/testproj-1/lib/python3.6/site-packages/_pytest/assertion/rewrite.py", line 213, in load_module
    py.builtin.exec_(co, mod.__dict__)
  File "/Volumes/Storage/Users/claygorman/.pyenv/versions/3.6.4/envs/testproj-1/lib/python3.6/site-packages/flask/app.py", line 34, in <module>
    from .sessions import SecureCookieSessionInterface
  File "/Volumes/Storage/Users/claygorman/.pyenv/versions/3.6.4/envs/testproj-1/lib/python3.6/site-packages/_pytest/assertion/rewrite.py", line 213, in load_module
    py.builtin.exec_(co, mod.__dict__)
  File "/Volumes/Storage/Users/claygorman/.pyenv/versions/3.6.4/envs/testproj-1/lib/python3.6/site-packages/flask/sessions.py", line 21, in <module>
    from flask.json.tag import TaggedJSONSerializer
ModuleNotFoundError: No module named 'flask.json.tag'; 'flask.json' is not a package
ERROR: could not load /Volumes/Storage/clay-dev/testproj/tests/conftest.py
Environment
Python version: 3.6.4
Flask version: 1.0
Werkzeug version: 0.14.1
after_request behavior regarding exceptions
jrichterpowell commented on 14 Sep 2019 â€¢
edited
Expected Behavior
request.form should contain data posted from an html form.
import os
import functools
from flask import(
    Flask, Blueprint, flash, g, redirect, render_template_string, request, session, url_for
)

bp = Blueprint('new', __name__, url_prefix="/")

html = """
<!DOCTYPE html>
<title> Example Issue</title>
<section class="content">
<form method="POST">
        <label for="task">Task</label>
        <input name="task" id="task" required>
        <input type="submit" name="Add" value="Submit">
    </form>
</section>
"""

@bp.route('/new', methods=('GET', 'POST'))
def new():
    if request.method == 'POST':
        print(request.form.__dict__)
    return render_template_string(html)

def create_app():
    app = Flask(__name__)
    app.register_blueprint(bp)
    return app
Actual Behavior
request.form is empty. The output of request.__dict__ is
{'environ': {'wsgi.version': (1, 0), 'wsgi.url_scheme': 'http', 'wsgi.input': <_io.BufferedReader name=5>, 'wsgi.errors': <_io.TextIOWrapper name='<stderr>' mode='w' encoding='UTF-8'>, 'wsgi.multithread': True, 'wsgi.multiprocess': False, 'wsgi.run_once': False, 'werkzeug.server.shutdown': <function WSGIRequestHandler.make_environ.<locals>.shutdown_server at 0x7f0d2c2fa8c0>, 'SERVER_SOFTWARE': 'Werkzeug/0.15.6', 'REQUEST_METHOD': 'POST', 'SCRIPT_NAME': '', 'PATH_INFO': '/new', 'QUERY_STRING': '', 'REQUEST_URI': '/new', 'RAW_URI': '/new', 'REMOTE_ADDR': '127.0.0.1', 'REMOTE_PORT': 49372, 'SERVER_NAME': '127.0.0.1', 'SERVER_PORT': '5000', 'SERVER_PROTOCOL': 'HTTP/1.1', 'HTTP_HOST': '127.0.0.1:5000', 'HTTP_USER_AGENT': 'Mozilla/5.0 (X11; Linux x86_64; rv:68.0) Gecko/20100101 Firefox/68.0', 'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'HTTP_ACCEPT_LANGUAGE': 'en-US,en;q=0.5', 'HTTP_ACCEPT_ENCODING': 'gzip, deflate', 'HTTP_REFERER': 'http://127.0.0.1:5000/new', 'CONTENT_TYPE': 'application/x-www-form-urlencoded', 'CONTENT_LENGTH': '26', 'HTTP_CONNECTION': 'keep-alive', 'HTTP_UPGRADE_INSECURE_REQUESTS': '1', 'werkzeug.request': <Request 'http://127.0.0.1:5000/new' [POST]>}, 'shallow': False, 'url_rule': <Rule '/new' (HEAD, POST, GET, OPTIONS) -> new.new>, 'view_args': {}, 'url': 'http://127.0.0.1:5000/new'}
Environment
Python version: 3.74
Flask version: 1.1.1
Werkzeug version: 0.15.6
Firefox console shows the form data as a param
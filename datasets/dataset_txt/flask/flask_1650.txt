orutherfurd commented on 6 May 2011
makes caching w/varnish easier
diff -r 66cb5def7b6e flask/app.py
--- a/flask/app.py      Fri Dec 31 15:21:46 2010 +0100
+++ b/flask/app.py      Thu May 05 15:45:18 2011 -0400
@@ -439,6 +439,8 @@ class Flask(_PackageBoundObject):
                         object)
         :param response: an instance of :attr:`response_class`
         """
+        if not session:
+            return
         expires = domain = None
         if session.permanent:
             expires = datetime.utcnow() + self.permanent_session_lifetime
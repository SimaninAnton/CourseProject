Lyla-Fischer commented on 22 Jul 2019
Expected Behavior
I think that the documentation for mocking request contexts in Flask 1.1.x might be a bit off. I'm filing an issue instead of submitting a pull request in case there is something about my configuration that doesn't fit the target audience of the documentation.
The docs say that in order to mock a request context, you should use the with functionality as such:
with app.test_request_context(
        '/make_report/2017', data={'format': 'short'}):
    generate_report()
Actual Behavior
In order to actually gain access to the request context, I has to insert as as with the with
with app.test_request_context(
        '/make_report/2017', data={'format': 'short'}) as request:
    generate_report(request)
It's not hard to guess, but it seemed like it might be worth updating the docs.
Environment
Python version: 3.7.3
Flask version: 1.1.1
Werkzeug version: 0.15.5
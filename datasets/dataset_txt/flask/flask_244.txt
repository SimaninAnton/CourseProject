iyaozhen commented on 20 Nov 2018
My code:
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import copy

from flask import Flask
from flask import request

app = Flask(__name__)


@app.route('/')
def hello_world():
    return 'Hello, World!'


@app.before_request
def before_request():
    request_copy = copy.deepcopy(request)
    print request_copy.path


if __name__ == '__main__':
    app.run(debug=True)
As you see, I want copy request and log something. But it is not work.
……
  File "……/python2.7/copy.py", line 163, in deepcopy
    y = copier(x, memo)
  File "……/python2.7/copy.py", line 257, in _deepcopy_dict
    y[deepcopy(key, memo)] = deepcopy(value, memo)
  File "……/python2.7/copy.py", line 174, in deepcopy
    y = copier(memo)
TypeError: cannot deepcopy this pattern object
And copy.copy() work well.
Environment
Python version: 2.7.15
Flask version: 1.0.2
Werkzeug version: 0.14.1
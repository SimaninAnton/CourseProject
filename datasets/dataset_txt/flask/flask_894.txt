binhvq commented on 28 Jan 2016
Exception on / [GET] [/usr/lib/python2.7/site-packages/flask/app.py:1423]
Traceback (most recent call last):
  File "/usr/lib/python2.7/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python2.7/site-packages/flask/app.py", line 1478, in full_dispatch_request
    response = self.make_response(rv)
  File "/usr/lib/python2.7/site-packages/flask/app.py", line 1577, in make_response
    rv = self.response_class.force_type(rv, request.environ)
  File "/usr/lib/python2.7/site-packages/werkzeug/wrappers.py", line 847, in force_type
    response = BaseResponse(*_run_wsgi_app(response, environ))
  File "/usr/lib/python2.7/site-packages/werkzeug/test.py", line 871, in run_wsgi_app
    app_rv = app(environ, start_response)
TypeError: 'list' object is not callable
@app.route('/')
@cache.cached(timeout=30)
def site_index():
    _cates, cates = app.get_cates_home(), []
    if not _cates:
        return render_template('maintain.htm')
    route = routes['index']
    featured = app.get_news_by_priority(8, route['featured'])
    featured_ids = [fea['id'] for fea in featured]
    hotnews = app.get_news_hot(route['new'], featured_ids)
    popular = app.get_news_by_priority(7, route['popular'])
    result = {'pagetitle': app.appname,
              'featured': featured,
              'hot': hotnews,
              'popular': popular,
              'cates': cates}
    return render_template('index.htm', **result)
Why error. 2 my return function too return with function render_template.
Im' runing flask with uwsgi and 8 process. Error 1% request has this error.
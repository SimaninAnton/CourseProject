ghostbod99 commented on 17 Dec 2014
I found a exception when i use NestableBlueprint. It raise FormDataRoutingRedirect Exception.
And I found this exception again where I run a simple test demo.
test demo:
@user.route('/v1/', methods=['GET', 'POST'])
def user_test():
print 'test'
return 'test'
get http://192.168.2.103:7700/v1 -> successed
get http://192.168.2.103:7700/v1/ -> successed
post http://192.168.2.103:7700/v1/ -> successed
post http://192.168.2.103:7700/v1 -> raise FormDataRoutingRedirect:
File "/home/ghostbod/python/hmt_api/venv/lib/python2.7/site-packages/flask/app.py", line 1439, in raise_routing_exception
raise FormDataRoutingRedirect(request)
FormDataRoutingRedirect: A request was sent to this URL (http://192.168.2.103:7700/v1) but a redirect was issued automatically by the routing system to "http://192.168.2.103:7700/v1/". The URL was defined with a trailing slash so Flask will automatically redirect to the URL with the trailing slash if it was accessed without one. Make sure to directly send your POST-request to this URL since we can't make browsers or HTTP clients redirect with form data reliably or without user interaction.
NestableBlueprint test demo
init.py:
from modules.warehouse.bp import warehouse
app.register_blueprint(warehouse, url_prefix='/v1/warehouse')
bp.py:
from wh.views import bp_wh
warehouse = NestableBlueprint('warehouse', name)
warehouse.register_blueprint(bp_wh, url_prefix='/wh')
view.ppy:
@bp_wh.route('/', methods=['POST'])
@oauth.common_require_oauth()
def test(cid, uid):
return "test"
http://192.168.2.103:7700/v1/warehouse/wh/?access_token=NX5fUsTrKR8Gi6AsrWgT0tFQAR5C7w -> successed
http://192.168.2.103:7700/v1/warehouse/wh?access_token=NX5fUsTrKR8Gi6AsrWgT0tFQAR5C7w -> raise FormDataRoutingRedirect(request)
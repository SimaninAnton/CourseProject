chibuchifan commented on 22 May 2019
In the code below：
from flask import Flask, jsonify

app = Flask(__name__)

@app.route('/users/kaka')
def update_user():
    return jsonify(a=1)

@app.route('/users/kaka/')
def update_userss():
    return jsonify(a=11)

if __name__ == '__main__':
    app.run(debug=True, port=3000)
然后调用:
qq@zz:~$ curl http://127.0.0.1:3000/users/kaka/
{
  "a": 11
}
qq@zz:~$ curl http://127.0.0.1:3000/users/kaka
{
  "a": 1
}
# 这是因为werkzug中所有的路由都存在一个列表中, 所以涉及到匹配的先后顺序
然后将路径/users/kaka最后的斜杠顺序换过来:
from flask import Flask, jsonify

app = Flask(__name__)

@app.route('/users/kaka/')
def update_user():
    return jsonify(a=1)

@app.route('/users/kaka')
def update_userss():
    return jsonify(a=11)

if __name__ == '__main__':
    app.run(debug=True, port=3000)
返回结果:
qq@zz:~$ curl http://127.0.0.1:3000/users/kaka/
{
  "a": 1
}
qq@zz:~$ curl http://127.0.0.1:3000/users/kaka
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<title>Redirecting...</title>
<h1>Redirecting...</h1>
<p>You should be redirected automatically to target URL: <a href="http://127.0.0.1:3000/users/kaka/">http://127.0.0.1:3000/users/kaka/</a>.  If not click the link.
the diff of two is the order of /users/haha/ is ahead or behind
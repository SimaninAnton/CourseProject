segevfiner commented on 20 Jul 2017
Expected Behavior
The reloader should keep working even on SyntaxError when using a custom cli entry point. Obviously it might be diffcult to make it work as is, so it might require the cli entry point to be written in a certain way for this to work. For example it should be in a separate file that is not modified often during app development and should import the app only from the create_app function. This might just require documenting this more clearly.
import click
from flask import Flask
from flask.cli import FlaskGroup

app = Flask(__name__)

@app.route('/')
def hello_world():
    return 'Hello, World!'

@click.group(cls=FlaskGroup, create_app=lambda info: app)
def cli():
    pass

if __name__ == '__main__':
    cli()
set FLASK_DEBUG=1
python app.py run
Actual Behavior
Introucing a SyntaxError into the file will cause the reloader to exit.
Environment
Python version: 2.7.13
Flask version: 0.12.2
Werkzeug version: 0.12.2
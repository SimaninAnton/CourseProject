julian-r commented on 30 May 2018
Expected Behavior
If a multipart/form-data body is not conforming to RFC return an HTTP error, do log a message or parse the data anyways.
Strangly werkzeug.formparser does throw an error, but I don't know what happens then in flask with it.
POST /garmin-inbox HTTP/1.1
Content-Type: multipart/form-data; boundary=Boundary_19_110302338_1527600550018

--Boundary_19_110302338_1527600550018
Content-Type: application/octet-stream

Hello123

--Boundary_19_110302338_1527600550018
Content-Type: application/json

blabla
--Boundary_19_110302338_1527600550018--
@app.route('/inbox', methods=['POST'])
def inbox():
    pprint(request.form) # will be empty
    pprint(request.files) # will be empty
Actual Behavior
If a http client behaves not like defined in RFC7578 the request.form and request.files fields are just empty.
Environment
Python version: 3.6.5
Flask version: 1.0.2
Werkzeug version: 0.14.1
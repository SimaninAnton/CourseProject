Faboor commented on 6 Jun 2018
Expected Behavior
When an error occurs and traceback is printed out, the stderr should be flushed.
File app.py:
from flask import Flask
app = Flask(__name__)

@app.route('/')
def err():
  return i_will_cause_an_error(" :'( ")

if __name__ == '__name__':
  app.run()
And then run it with python app.py 2>out.txt and connect to the server, e.g. using curl http://localhost:5000/
Here I'd expect to see the 127.0.0.1 - - [<date>] "GET / HTTP/1.1 500 - and a full traceback for the AttributeError raised in the file out.txt
Actual Behavior
Only 127.0.0.1 - - [<date>] "GET / HTTP/1.1 500 - shows up in the out.txt file. Only when a new request is made the full traceback is flushed to the file, together with the new response log line.
Environment
version
Python 3.5.2
Flask 1.0.2
Werkzeug 0.14.1
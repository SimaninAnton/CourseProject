anselal commented on 23 Mar 2018
Expected Behavior
The template should render without any error.
When I run the app using python manage.py run I get an error when I open the app in the browser.
But when I start the app using gunicorn like gunicorn -b 0.0.0.0:5000 --access-logfile - "project.app:create_app()" the error does not occur.
app.py
def create_app(settings_override=None):
    """
    Create a Flask application using the app factory pattern.

    :return: Flask app
    """
    app = Flask(__name__, instance_relative_config=True)
    app.config.from_object('config.settings')
    app.config.from_pyfile('settings.py', silent=True)
    
    app.register_blueprint(antminer)
    app.register_blueprint(antminer_json)
    extensions(app)

    if settings_override:
       app.config.update(settings_override)

    @app.shell_context_processor
    def make_shell_context():
        return dict(app=app, db=db)

    
    return app
manage.py
from flask.cli import FlaskGroup
from project.app import create_app

cli = FlaskGroup(create_app=create_app)

@cli.command()
def create_db():
    pass

@cli.command()
def update_db():
    pass

if __name__ == "__main__":
    cli()
Actual Behavior
Traceback (most recent call last):
  File "/home/pi/Projects/project/project/app.py", line 60, in create_app
    app.config.update(settings_override)
TypeError: 'ScriptInfo' object is not iterable
Environment
Python version: 2.7.9
Flask version: 0.12.2
Werkzeug version: 0.12.2
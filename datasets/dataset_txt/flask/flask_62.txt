darkclouder commented on 11 Sep 2019 â€¢
edited
Problem:
Creating a custom command for the flask CLI with an import exception is silent, even when running the command, e.g. start with flask start directly.
This makes it difficult to debug import errors in changing environments, as you're left with
Error: No such command "start".
without further explanation.
Origin:
flask/src/flask/cli.py
Lines 541 to 546 in d694eb4
 try: 
     rv = info.load_app().cli.get_command(ctx, name) 
     if rv is not None: 
         return rv 
 except NoAppException: 
     pass 

NoAppException is caught silently with a pass, even though get_command seems to only be used to execute a single command rather than an entire command listing.
However, even the command listing of list_commands explicitly prints the traceback with traceback.print_exc().
Why that is not done in get_command is not clear to me at this point.
1
Calling post method in loop yields unexpected results
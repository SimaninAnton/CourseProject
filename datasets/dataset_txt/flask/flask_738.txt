Gallaecio commented on 4 Oct 2016
I am using Python 3 and the following code:
@app.route('/')
def pdf():
    # [Generate PDF as a byte string]
    with open('file.pdf', 'wb') as f:
        f.write(pdf)
    return send_file(BytesIO(pdf))
On the server, a valid PDF file is written. On the client, I get an invalid PDF about twice the expected size.
it looks like an encoding issue, so I am guessing that the fact that I am using Python 3 may be relevant. The differences between the file saved on the server and the one I get on the client is similar to that of this StackOverflow question, but the poster there was passing the PDF data as a string, whereas in my code pdf is made of bytes (Python 3 would not let me write the file otherwise).
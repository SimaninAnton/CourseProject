To much logic in view url generation
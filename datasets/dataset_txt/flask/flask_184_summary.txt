Testing with TestClient and a custom response_class calls constructor twice
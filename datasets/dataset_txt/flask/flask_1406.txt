Member
ThiefMaster commented on 3 Jun 2013
from flask import Flask, redirect
app = Flask(__name__)

@app.route('/blah')
def blah():
    return 'blah'

app.add_url_rule('/', view_func=lambda: redirect('/blah'))
Run it like this:
uwsgi --plugin python27 --http 0.0.0.0:31337 --module app --callable app --virtualenv .
Then access it, e.g. using httpie:
http get http://myhost:31337
uwsgi shows this error:
Traceback (most recent call last):
  File "/tmp/werkzeug-uwsgi-unicode-headers/lib/python2.7/site-packages/flask/app.py", line 1829, in __call__
    return self.wsgi_app(environ, start_response)
  File "/tmp/werkzeug-uwsgi-unicode-headers/lib/python2.7/site-packages/flask/app.py", line 1814, in wsgi_app
    return response(environ, start_response)
  File "/tmp/werkzeug-uwsgi-unicode-headers/lib/python2.7/site-packages/werkzeug/wrappers.py", line 1103, in __call__
    start_response(status, headers)
TypeError: http header key must be a string
a print headers in __call__ shows this:
[('Content-Type', 'text/html; charset=utf-8'), ('Content-Length', '217'), (u'Location', 'http://myhost:31337/blah')]
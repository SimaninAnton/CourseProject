joostdevries commented on 3 Jul 2013
On docs/_sources/testing.txt it states in the section Faking resources and context:
A very common pattern is to store user authorization information and
database connections on the application context or the :attr:flask.g
object. The general pattern for this is to put the object on there on
first usage and then to remove it on a teardown. Imagine for instance
this code to get the current user::
This should be adjusted as fask.g is now registered on the application context.
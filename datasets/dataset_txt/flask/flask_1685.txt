Member
mitsuhiko commented on 18 Feb 2011
after_request is not executed if an exception happens in debug mode. This is annoying for databases because it requires that you restart the server to tear down the connection. Sometimes that's what you want, otherwise not. The original intention was that you want to continue having the transaction in the interactive debugger.
Generally however we need a separate decorator that always executes after request, even if an exception happened. Signals are one option, if that is what we want we should document it better. I would prefer a separate decorator however.
Related feedback issues:
http://feedback.flask.pocoo.org/message/108
http://feedback.flask.pocoo.org/message/76
alexander-jiang commented on 13 Jul 2017 â€¢
edited
Expected Behavior
The flaskr example code (in examples/flaskr) should work off-the-shelf. But I was able to reproduce the following issue by forking a clean copy of the repository and following the instructions in the README.md of the flaskr example. Namely, these are the commands I'm executing:
$ git clone https://github.com/alexander-jiang/flask.git
$ cd flask/examples/flaskr
$ virtualenv venv
$ venv\Scripts\activate
$ pip install -e .
$ set FLASK_APP=flaskr.factory:create_app()
$ flask initdb
$ flask run
Actual Behavior
The flask initdb command fails with a RuntimeError:
Traceback (most recent call last):
  File "c:\users\xxxxxxxxx\appdata\local\programs\python\python36-32\Lib\runpy.py", line 193, in _run_module_as_main
    "__main__", mod_spec)
  File "c:\users\xxxxxxxxx\appdata\local\programs\python\python36-32\Lib\runpy.py", line 85, in _run_code
    exec(code, run_globals)
  File "C:\Users\xxxxxxxxx\flask\examples\flaskr\venv\Scripts\flask.exe\__main__.py", line 9, in <module>
  File "c:\users\xxxxxxxxx\flask\examples\flaskr\venv\lib\site-packages\flask\cli.py", line 513, in main
    cli.main(args=args, prog_name=name)
  File "c:\users\xxxxxxxxx\flask\examples\flaskr\venv\lib\site-packages\flask\cli.py", line 380, in main
    return AppGroup.main(self, *args, **kwargs)
  File "c:\users\xxxxxxxxx\flask\examples\flaskr\venv\lib\site-packages\click\core.py", line 697, in main
    rv = self.invoke(ctx)
  File "c:\users\xxxxxxxxx\flask\examples\flaskr\venv\lib\site-packages\click\core.py", line 1061, in invoke
    cmd_name, cmd, args = self.resolve_command(ctx, args)
  File "c:\users\xxxxxxxxx\flask\examples\flaskr\venv\lib\site-packages\click\core.py", line 1100, in resolve_command
    cmd = self.get_command(ctx, cmd_name)
  File "c:\users\xxxxxxxxx\flask\examples\flaskr\venv\lib\site-packages\flask\cli.py", line 351, in get_command
    rv = info.load_app().cli.get_command(ctx, name)
  File "c:\users\xxxxxxxxx\flask\examples\flaskr\venv\lib\site-packages\flask\cli.py", line 237, in load_app
    rv = locate_app(self.app_import_path)
  File "c:\users\xxxxxxxxx\flask\examples\flaskr\venv\lib\site-packages\flask\cli.py", line 109, in locate_app
    % module)
RuntimeError: Failed to find application in module "flaskr.factory"
Environment
OS: Windows 10 (64 bit)
Python version: 3.6.1
Flask version: 0.12.2
Werkzeug version: 0.12.2
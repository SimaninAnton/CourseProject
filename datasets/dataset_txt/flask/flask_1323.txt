okdistribute commented on 28 Nov 2013
Sessions don't seem to be working on heroku
2013-11-27T17:47:24.382234+00:00 app[web.1]: Traceback (most recent call last):
2013-11-27T17:47:24.382234+00:00 app[web.1]:     super(GeventWorker, self).handle_request(*args)
2013-11-27T17:47:24.382234+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/flask/app.py", line 1701, in __call__
2013-11-27T17:47:24.382234+00:00 app[web.1]:     return self.wsgi_app(environ, start_response)
2013-11-27T17:47:24.382469+00:00 app[web.1]:     response = self.make_response(self.handle_exception(e))
2013-11-27T17:47:24.382656+00:00 app[web.1]:     client.resource_owner_key = tup[0]
2013-11-27T17:47:24.382469+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/flask/app.py", line 1689, in wsgi_app
2013-11-27T17:47:24.382469+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/flask/app.py", line 1358, in full_dispatch_request
2013-11-27T17:47:24.382469+00:00 app[web.1]:     rv = self.dispatch_request()
2013-11-27T17:47:24.382656+00:00 app[web.1]:     data = self.handle_oauth1_response()
2013-11-27T17:47:24.382656+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/flask_oauthlib/client.py", line 528, in handle_oauth1_response
2013-11-27T17:47:24.382234+00:00 app[web.1]: 2013-11-27 17:47:24 [10] [ERROR] Error handling request
2013-11-27T17:47:24.382234+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/gunicorn/workers/async.py", line 45, in handle
2013-11-27T17:47:24.382234+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/gunicorn/workers/async.py", line 93, in handle_request
2013-11-27T17:47:24.382469+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/flask/app.py", line 1360, in full_dispatch_request
2013-11-27T17:47:24.382469+00:00 app[web.1]:     rv = self.handle_user_exception(e)
2013-11-27T17:47:24.382234+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/gunicorn/workers/ggevent.py", line 119, in handle_request
2013-11-27T17:47:24.382234+00:00 app[web.1]:     respiter = self.wsgi(environ, resp.start_response)
2013-11-27T17:47:24.382656+00:00 app[web.1]: TypeError: 'NoneType' object has no attribute '__getitem__'
2013-11-27T17:47:24.382469+00:00 app[web.1]:     response = self.full_dispatch_request()
2013-11-27T17:47:24.382469+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/flask/app.py", line 1344, in dispatch_request
2013-11-27T17:47:24.382469+00:00 app[web.1]:     return self.view_functions[rule.endpoint](**req.view_args)
2013-11-27T17:47:24.382469+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/flask/app.py", line 1687, in wsgi_app
2013-11-27T17:47:24.382656+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/flask_oauthlib/client.py", line 594, in decorated
localhost cookies (this works):
session="xxxx?_fresh=yyyy==&twitter_oauthtok=zzzz"
heroku cookies (doesn't work):
None="xxxx=?_id=yyyy==&twitter_oauthtok=zzzz"
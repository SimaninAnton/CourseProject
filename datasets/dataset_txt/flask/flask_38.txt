gandroz commented on 18 Oct 2019
I can't figure out how to define a custom command with an application factory.
app/__init__.py:
import click
from flask import Flask
from flask.cli import with_appcontext
from config import config


def create_app():
    app = Flask(__name__)
    app.config.from_object(config)
    app.cli.add_command(seed)

    with app.app_context():
        from flask_bootstrap import Bootstrap
        from flask_sqlalchemy import SQLAlchemy
        from flask_migrate import Migrate
        from app.models import db
        from app.main import main_blueprint
        from app.api_1_0 import api_blueprint

        bootstrap = Bootstrap()
        migrate = Migrate()

        bootstrap.init_app(app)
        db.init_app(app)
        migrate.init_app(app, db)

        # Register Blueprints
        app.register_blueprint(main_blueprint)
        app.register_blueprint(api_blueprint, url_prefix='/api/v1.0')        

        return app


@click.command()
def seed():
    from app.seed import seed
    seed()
When I run flask seed I got the error No such command "seed". I used to use flask script but I would like to "migrate" to the CLI. Is that even possible without installing the app in dev mode like in #3289 ?
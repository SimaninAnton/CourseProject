Contributor
trungly commented on 15 Jan 2013
I found this issue when trying out the example code the Deferred Callbacks pattern:
http://flask.pocoo.org/docs/patterns/deferredcallbacks/
In the for loop of the call_after_request_callbacks() function, it is setting the response to the return value of callback function. Then later, under Practical Example, the remember_language() function implicitly returns None. This will likely cause a problem on the second iteration of the for loop.
This can be fixed by either 1) not setting the response to the callback returned value, or by b) returning the response in the remember_language() function.
sebsto commented on 18 Jun 2013
I am using Flask with SSL.
Testing in dev environment with stunnel and a self-signed certificate.
http://localhost:5000 is Flask
https://localhost:8000 is SSL Flask through stunnel
When using redirect(url_for(...)) in the program below, the browser is redirected to http://localhost:8000/ssl (HTTP protocol instead of HTTPS)
Correct URL should be https://localhost:8000/ssl
Here is a sample program to demonstrate:
from flask import Flask, request, url_for, redirect

# Flask Initialization
app = Flask(__name__)

@app.route("/")
def index():
    return "Hello World"

@app.route("/ssl")
def ssl():
    return "Hello SSL World"

@app.route('/redirect/')
def redirectToSSL():
    return redirect(url_for('ssl'))

if __name__ == "__main__":
    app.run(debug=True)
My stunnel config is
pid =
foreground = yes

cert = ./stunnel.crt
key = ./stunnel.pem

[https]
accept=8000
connect=5000
To test this,
start your stunnel
start the application
connect to https://localhost:8000 - you should see 'Hello World'
connect to https://localhost:8000/redirect - you should receive an error page as the browser is redirected to http://localhost:8000/ssl (instead of https:// ...)
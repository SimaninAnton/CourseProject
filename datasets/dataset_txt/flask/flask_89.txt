adrienferrari commented on 1 Aug 2019
Expected Behavior
I need to stream data the Flask server to another external API. For this I'm using the request object from Flash with stream argument.
from flask import request, Response

@blueprint.route("/upload3", methods=["POST"])
def upload3():
    resp = requests.post(
                    url,
                    data=request.stream,
                    auth=auth,
                    verify=False,
                    stream=True)
    return Response(status=200)
Actual Behavior
It works properly when the client and Flask server are on the same network but it doesn't work when not.
client -> Flask server -> external API
Here the result on the same network
https://photos.app.goo.gl/wzRvN667791NxQhXA
Here the trouble : The server wait all incoming data before sending it to the other server. But we can see that the connection is already opend.
I can also see the python process eating the RAM memory corresponding to the data size.
https://photos.app.goo.gl/EAWPvSL4CCBZURKb6
https://photos.app.goo.gl/EGSnFU6fLHAwgPB46
Environment
Python version:3.6
Flask version:1.0.3
Werkzeug version:0.15.4```
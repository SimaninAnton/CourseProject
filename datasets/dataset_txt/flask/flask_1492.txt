Kroisse commented on 27 Jul 2012
I used Attest for testing my web application using Flask 0.8 and tried to upgrade it to 0.9.
Running the test after upgrade it, the testing raised an error when initializing a Flask app object.
Testing with Flask 0.8 has no problem.
Here is my traceback:
Traceback (most recent call last):
  File ".../testsuite/__init__.py", line 5, in <module>
    import project.api
  File "/Users/ecdysis/.virtualenvs/sheepfarm/lib/python2.7/site-packages/attest/hook.py", line 260, in load_module
    return imp.load_module(name, fd, fn, info)
  File ".../project/api/__init__.py", line 3, in <module>
    from .http import app, init
  File "/Users/ecdysis/.virtualenvs/sheepfarm/lib/python2.7/site-packages/attest/hook.py", line 260, in load_module
    return imp.load_module(name, fd, fn, info)
  File ".../project/api/http.py", line 40, in <module>
    app = Flask(__name__)
  File "/Users/ecdysis/.virtualenvs/sheepfarm/lib/python2.7/site-packages/Flask-0.9-py2.7.egg/flask/app.py", line 303, in __init__
    instance_path = self.auto_find_instance_path()
  File "/Users/ecdysis/.virtualenvs/sheepfarm/lib/python2.7/site-packages/Flask-0.9-py2.7.egg/flask/app.py", line 608, in auto_find_instance_path
    prefix, package_path = find_package(self.import_name)
  File "/Users/ecdysis/.virtualenvs/sheepfarm/lib/python2.7/site-packages/Flask-0.9-py2.7.egg/flask/helpers.py", line 727, in find_package
    if loader.is_package(root_mod_name):
AttributeError: 'AssertImportHook' object has no attribute 'is_package'
I think that Attest's AssertImportHook broke the internal behavior of Flask. So I temporarily disabled it, and the above error disappeared.
Member
davidism commented on 23 Apr 2017 â€¢
edited
This is a pattern to generate the url to pass to the test client during testing, instead of writing out the url manually.
with app.app_context():
    url = url_for('foo', _external=False)
This currently fails if no SERVER_NAME is set, even though it's not needed for relative urls. url_for could be modified to support the case where there's only an app context and _external=False was passed. Instead of raising an error, create an adapter with a dummy server name, like localhost.
Documenting the pattern in the testing docs might be useful too.
Continued from #801.
rawrgulmuffins commented on 13 Apr 2014
Cloned the latest Flask source from github with the intention of increase flasks test coverage and the first thing I did was run-tests.
Output was,
Ran 240 tests in 1.415s

OK
When I ran-tests under coverage however I received this error.
coverage run run-tests.py .................................................................................................................................E..............................................................................................................
======================================================================
ERROR: test_main_module_paths (flask.testsuite.config.InstanceTestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/happy/opt/lib/python3.4/pkgutil.py", line 481, in find_loader
    spec = importlib.util.find_spec(fullname)
  File "/Users/happy/opt/lib/python3.4/importlib/util.py", line 100, in find_spec
    raise ValueError('{}.__spec__ is None'.format(name))
ValueError: __main__.__spec__ is None

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/happy/flask/flask_source/flask/flask/testsuite/config.py", line 198, in test_main_module_paths
    from main_app import app
  File "/Users/happy/flask/flask_source/flask/flask/testsuite/test_apps/main_app.py", line 4, in <module>
    app = flask.Flask('__main__')
  File "/Users/happy/flask/flask_source/flask/flask/app.py", line 354, in __init__
    instance_path = self.auto_find_instance_path()
  File "/Users/happy/flask/flask_source/flask/flask/app.py", line 645, in auto_find_instance_path
    prefix, package_path = find_package(self.import_name)
  File "/Users/happy/flask/flask_source/flask/flask/helpers.py", line 704, in find_package
    loader = pkgutil.get_loader(root_mod_name)
  File "/Users/happy/opt/lib/python3.4/pkgutil.py", line 467, in get_loader
    return find_loader(fullname)
  File "/Users/happy/opt/lib/python3.4/pkgutil.py", line 487, in find_loader
    raise ImportError(msg.format(fullname, type(ex), ex)) from ex
ImportError: Error while finding loader for '__main__' (<class 'ValueError'>: __main__.__spec__ is None)

----------------------------------------------------------------------
Ran 240 tests in 1.703s

FAILED (errors=1)
Environment:
OS X 10.8.5 (12F45)
Python3.4
    pip freeze produces
        Flask==0.10.1
        Jinja2==2.7.2
        MarkupSafe==0.19
        Werkzeug==0.9.4
        coverage==3.7.1
        itsdangerous==0.24
Unsure at this point if this is a coverage.py issue or a flask issue.
honmaple commented on 30 May 2016
The code is like this
from flask import Flask, Blueprint, url_for

app = Flask(__name__)
app.config['SERVER_NAME'] = 'localhost:5000'
app.url_map.default_subdomain = 'forums'

forums = Blueprint('forums', __name__)


@forums.route('/')
def forums_index():
    print(url_for('static', filename='index.css'))
    return 'forums,hello'

docs = Blueprint('docs', __name__)


@docs.route('/')
def docs_index():
    return 'docs,hello'


app.register_blueprint(forums)
app.register_blueprint(docs, subdomain='docs')


@app.route('/hello')
def index():
    return 'index,hello'


if __name__ == '__main__':
    app.run(debug=True)
    print(app.url_map) 
The all url
([<Rule 'forums|/hello' (GET, OPTIONS, HEAD) -> index>,
 <Rule 'forums|/' (GET, OPTIONS, HEAD) -> forums.forums_index>,
 <Rule 'docs|/' (GET, OPTIONS, HEAD) -> docs.docs_index>,
 <Rule '/static/<filename>' (GET, OPTIONS, HEAD) -> static>])
The static url
url_for('static', filename='index.css')
will return http://localhost:5000/static/index.css not http://forums.localhost:5000/static/index.css
I think I have set
app.url_map.default_subdomain = 'forums'
the all default url is forums.localhost:5000 not localhost:5000
Though I can add
    app.url_map._rules.clear()
    app.url_map._rules_by_endpoint.clear()
    app.url_map.default_subdomain = 'forums'
    app.config['SERVER_NAME'] = 'localhost:5000'
    app.add_url_rule(app.static_url_path + '/<path:filename>',
                                      endpoint='static',
                                      view_func=app.send_static_file,
                                      subdomain='forums')
to solve it,is it a bug with flask?
(python3 and Werkzeug (0.11.10))
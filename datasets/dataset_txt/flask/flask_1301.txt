vladzloteanu commented on 30 Jan 2014
Using full URL in flask test client. GET params are silently discarded:
import unittest
from flask import Flask, request

app = Flask(__name__)
app.testing = True

@app.route('/action')
def action():
    return ""


class MyTestCase(unittest.TestCase):

    def test_get_with_path(self):
        with app.test_client() as c:
            rv = c.get('/action?vodka=42')
            assert 'vodka' in request.args # assertion OK

    def test_get_with_complete_url(self):
        with app.test_client() as c:
            rv = c.get('http://domain.com/action?vodka=42')
            assert 'vodka' in request.args # assertion error

    def test_post_with_complete_url(self):
        with app.test_client() as c:
            rv = c.post('http://domain.com/action?vodka=42', data={'gin': 43})
            assert 'gin' in request.form # assertion OK
            assert 'vodka' in request.args # assertion error


if __name__ == '__main__':
    unittest.main()
This may also be considered inconsistent with the behaviour on POST params.
If this is not the way one should use test client, maybe put a warning in the docs ?
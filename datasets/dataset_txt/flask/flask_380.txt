joshuaavalon commented on 4 May 2018
Expected Behavior
Print in following order:
foo
bar
def foo(response):
    print("foo")
    return response
def bar(response):
    print("bar")
    return response

app = Flask(__name__)
app.after_request(foo)
app.after_request(bar)
Actual Behavior
Print in following order:
bar
foo
Environment
Python version: 3.6.5
Flask version: 1.0.2
Werkzeug version: 0.14.1
This is very counter intuitive. Is there a reason to execute reversed order? It seems like it is reversed on purpose in process_response in app.py. The order actually matters. I found out this when I apply gzip and html minifier which gzip is apply first and the minifier is unable to read the data as string.
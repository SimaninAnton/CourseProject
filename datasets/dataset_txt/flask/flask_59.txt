cangscop commented on 17 Sep 2019
Expected Behavior
Flask should load the correct MIME type for dict ("application/json")
from flask import Flask
import sqlite3
app = Flask(__name__)

@app.route('/cards')
def hello_world():
    #some sql to create my data
    result = {a:b for a,b in list(zip(names,my_radical))}
    return result
    #things i also tried:
    #return jsonify(result)
    #return Response(jsonify(result), mimetype="application/json")
Actual Behavior
I GET my JSON as "text/html" literal, with no unicode(could encoding be the problem?)
This happens if i try using Response() directly:
Error on request:
Traceback (most recent call last):
  File "/home/john/Documents/wk6-server/venv/lib/python3.6/site-packages/werkzeug/serving.py", line 303, in run_wsgi
    execute(self.server.app)
  File "/home/john/Documents/wk6-server/venv/lib/python3.6/site-packages/werkzeug/serving.py", line 293, in execute
    for data in application_iter:
  File "/home/john/Documents/wk6-server/venv/lib/python3.6/site-packages/werkzeug/wsgi.py", line 507, in __next__
    return self._next()
  File "/home/john/Documents/wk6-server/venv/lib/python3.6/site-packages/werkzeug/wrappers/base_response.py", line 45, in _iter_encoded
    for item in iterable:
TypeError: 'Response' object is not iterable
Environment
$ flask --version
Python 3.6.8
Flask 1.1.1
Werkzeug 0.15.6
mathiasson commented on 29 Oct 2014
from flask import Flask

app = Flask(__name__)
app.config['DEBUG'] = True

@app.teardown_appcontext
def td_ac(exc):
    # This will not get called on the first request if the first request fails,
    # that is if /err is requested. It will be called on subsequent requests,
    # no matter if they're throwing exceptions or not.
    print('td_ac exception: %r' % exc)

@app.teardown_request
def td_req(exc):
    # This will not get called on the first request if the first request fails,
    # that is if /err is requested. It will be called on subsequent requests,
    # no matter if they're throwing exceptions or not.
    print('td_req exception: %r' % exc)

@app.route('/ok')
def ok():
    return 'ok'

@app.route('/err')
def err():
    raise Exception('error')

if __name__ == '__main__':
    app.run()
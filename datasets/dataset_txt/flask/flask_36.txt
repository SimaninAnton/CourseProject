brandiqa commented on 29 Oct 2019 â€¢
edited
Expected Behavior
Am assuming calling response.location should return the current location i.e. url path
# app/__init__.py
def create_app():
    app = Flask(__name__)

    @app.route('/')
    def hello():
        return 'Hello, World!'

    return app


# app/conftest.py
import pytest
from app import create_app

@pytest.fixture
def app():
    app = create_app()
    app.config['TESTING'] = True

    yield app


@pytest.fixture
def client(app):
    return app.test_client()


# app/test_hello.py
def test_hello(client):
    response = client.get('/')
    assert response.status_code == 200
    assert response.data == b'Hello, World!'
    assert response.location == "http://localhost/"
Actual Behavior
Running pytest command results in a failed test
client = <FlaskClient <Flask 'app'>>

    def test_hello(client):
        response = client.get('/')
        assert response.status_code == 200
        assert response.data == b'Hello, World!'
>       assert response.location == "http://localhost/"
E       AssertionError: assert None == 'http://localhost/'
E         -None
E         +'http://localhost/'

app/test_app.py:5: AssertionError
Environment
Python version: 3.8
Flask version: 1.1.1
Werkzeug version: 0.16.0
1
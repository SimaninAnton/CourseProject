Contributor
Reisen commented on 23 Jun 2011
Any errors that occur inside request_context are not properly caught by handle_exception. From app.py:
def wsgi_app(self, environ, start_response):
    with self.request_context(environ):
        try:
            response = self.full_dispatch_request()
        except Exception, e:
            response = self.make_response(self.handle_exception(e))
            return response(environ, start_response)
As an example, create an error handler for error code 500. Set config['SERVER_NAME'] to something your client won't send, and visit the application. The call to url_map.bind_to_environ in RequestContext results in a ValueError from werkzeug.
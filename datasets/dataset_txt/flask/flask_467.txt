namedots commented on 22 Jan 2018 â€¢
edited
Problem
cli.py:shell_command (flask shell) creates a context and passes it to code.interact
This leaves tab completion broken:
>>> stuff = 5
>>> stuTABTABTABTAB <- no match
Suggestion
This can be remedied by supplying a completer to readline:
>>> import readline
>>> import rlcompleter
>>> readline.set_completer(rlcompleter.Completer(globals()).complete)
>>> stuTAB <- stuff! yay!
Or perhaps flask/__main__.py could be used as the context:
file: flask/cli.py
...
def shell_command():
...
    import __main__
    ctx = __main__.__dict__
...
2
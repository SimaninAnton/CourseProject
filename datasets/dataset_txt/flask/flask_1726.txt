truedat101 commented on 31 Jul 2010
Description
Need to qualify the call to escape() with Markup class.
Reference
http://flask.pocoo.org/docs/quickstart/#sessions
3.8 Sessions
Besides the request object there is also a second object called session that allows you to store information specific to a user from one request to the next. This is implemented on top of cookies for you and signs the cookies cryptographically. What this means is that the user could look at the contents of your cookie but not modify it, unless he knows the secret key used for signing.
In order to use sessions you have to set a secret key. Here is how sessions work:
The here mentioned escape() does escaping for you if you are not using the template engine (like in this example).
How to generate good Secret Keys
from flask import session, redirect, url_for, escape
@app.route(’/’) def index():
if ’username’ in session: return ’Logged in as %s’ % escape(session[’username’])
return ’You are not logged in’
Bug Fix
---- replace line: if ’username’ in session: return ’Logged in as %s’ % escape(session[’username’])
---- with: if ’username’ in session: return ’Logged in as %s’ % Markup.escape(session[’username’])
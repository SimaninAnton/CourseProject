honglei commented on 25 May 2014
I get an an error during request to a static html file.
serving on http://0.0.0.0:8080
ERROR:main:Exception on /static/bloggr-client/index.html [GET]
Traceback (most recent call last):
File "c:\users\honglei\appdata\local\enthought\canopy\user\lib\site-packages\flask\app.py", line 1898, in wsgi_app
response = self.full_dispatch_request()
File "c:\users\honglei\appdata\local\enthought\canopy\user\lib\site-packages\flask\app.py", line 1553, in full_dispatch_request
rv = self.handle_user_exception(e)
File "c:\users\honglei\appdata\local\enthought\canopy\user\lib\site-packages\flask\app.py", line 1457, in handle_user_exception
reraise(exc_type, exc_value, tb)
File "c:\users\honglei\appdata\local\enthought\canopy\user\lib\site-packages\flask\app.py", line 1551, in full_dispatch_request
rv = self.dispatch_request()
File "c:\users\honglei\appdata\local\enthought\canopy\user\lib\site-packages\flask\app.py", line 1537, in dispatch_request
return self.view_functionsrule.endpoint
File "c:\users\honglei\appdata\local\enthought\canopy\user\lib\site-packages\flask\helpers.py", line 872, in send_static_file
cache_timeout=cache_timeout)
File "c:\users\honglei\appdata\local\enthought\canopy\user\lib\site-packages\flask\helpers.py", line 623, in send_from_directory
return send_file(filename, **options)
File "c:\users\honglei\appdata\local\enthought\canopy\user\lib\site-packages\flask\helpers.py", line 498, in send_file
mimetype = mimetypes.guess_type(filename or attachment_filename)[0]
File "C:\Users\honglei\AppData\Local\Enthought\Canopy\App\appdata\canopy-1.3.0.1715.win-x86_64\lib\mimetypes.py", line 297, in guess_type
init()
File "C:\Users\honglei\AppData\Local\Enthought\Canopy\App\appdata\canopy-1.3.0.1715.win-x86_64\lib\mimetypes.py", line 358, in init
db.read_windows_registry()
File "C:\Users\honglei\AppData\Local\Enthought\Canopy\App\appdata\canopy-1.3.0.1715.win-x86_64\lib\mimetypes.py", line 258, in read_windows_registry
for subkeyname in enum_types(hkcr):
File "C:\Users\honglei\AppData\Local\Enthought\Canopy\App\appdata\canopy-1.3.0.1715.win-x86_64\lib\mimetypes.py", line 249, in enum_types
ctype = ctype.encode(default_encoding) # omit in 3.x!
UnicodeDecodeError: 'ascii' codec can't decode byte 0xb0 in position 1: ordinal not in range(128)
ctype's value
'.\xb0\xa2\xc0\xef\xcd\xfa\xcd\xfa\xbd\xd3\xca\xd5\xb5\xc4\xbf\xc9\xd2\xc9\xce\xc4\xbc\xfe'
I don't think a unkown ctype in Windows's registry should cause Flask give up user's request.
littlegreenbean33 commented on 5 Mar 2018
The model includes a custom loss and 2 outputs.
The below is the dump
In [3]: keras.version
Out[3]: '2.1.3'
In [5]: tf.version
Out[5]: '1.6.0-rc0'
In [6]: model=load_model("/home/julian/kaggle/sbowl2018/saved_models/model.h5")
AttributeError Traceback (most recent call last)
~/virtualenvs/tensorflowgpu/lib/python3.6/site-packages/numpy/core/fromnumeric.py in _wrapfunc(obj, method, *args, **kwds)
51 try:
---> 52 return getattr(obj, method)(*args, **kwds)
53
AttributeError: 'Dataset' object has no attribute 'transpose'
During handling of the above exception, another exception occurred:
ValueError Traceback (most recent call last)
in ()
----> 1 model=load_model("/home/julian/kaggle/sbowl2018/saved_models/model.h5")
~/virtualenvs/tensorflowgpu/lib/python3.6/site-packages/keras/models.py in load_model(filepath, custom_objects, compile)
244
245 # set weights
--> 246 topology.load_weights_from_hdf5_group(f['model_weights'], model.layers)
247
248 # Early return if compilation is not required.
~/virtualenvs/tensorflowgpu/lib/python3.6/site-packages/keras/engine/topology.py in load_weights_from_hdf5_group(f, layers)
3151 weight_values,
3152 original_keras_version,
-> 3153 original_backend)
3154 if len(weight_values) != len(symbolic_weights):
3155 raise ValueError('Layer #' + str(k) +
~/virtualenvs/tensorflowgpu/lib/python3.6/site-packages/keras/engine/topology.py in preprocess_weights_for_loading(layer, weights, original_keras_version, original_backend)
3048 weights[1] = conv_utils.convert_kernel(weights[1])
3049 if K.int_shape(layer.weights[0]) != weights[0].shape:
-> 3050 weights[0] = np.transpose(weights[0], (3, 2, 0, 1))
3051 if layer.class.name == 'ConvLSTM2D':
3052 weights[1] = np.transpose(weights[1], (3, 2, 0, 1))
~/virtualenvs/tensorflowgpu/lib/python3.6/site-packages/numpy/core/fromnumeric.py in transpose(a, axes)
573
574 """
--> 575 return _wrapfunc(a, 'transpose', axes)
576
577
~/virtualenvs/tensorflowgpu/lib/python3.6/site-packages/numpy/core/fromnumeric.py in _wrapfunc(obj, method, *args, **kwds)
60 # a downstream library like 'pandas'.
61 except (AttributeError, TypeError):
---> 62 return _wrapit(obj, method, *args, **kwds)
63
64
~/virtualenvs/tensorflowgpu/lib/python3.6/site-packages/numpy/core/fromnumeric.py in _wrapit(obj, method, *args, **kwds)
40 except AttributeError:
41 wrap = None
---> 42 result = getattr(asarray(obj), method)(*args, **kwds)
43 if wrap:
44 if not isinstance(result, mu.ndarray):
ValueError: axes don't match array
18
What is the best way to implement a projection matrix + max pooling to represent a collection of regions in an image ?
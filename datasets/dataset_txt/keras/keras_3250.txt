ghost commented on 10 Feb 2017 â€¢
edited by ghost
hello, everyone!
I have some problems regarding tensorflow backend and BatchNormalization layer
part of my code is:
seq.add(LSTM(256,
input_shape=(length, dim),
activation='tanh',
return_sequences=True))
seq.add(BatchNormalization(
mode=0,
axis=1))
After I update keras to 1.2.1 and tensorflow to 1.0.0rc2 then I have the following error.
File "D:\SciSoft\Anaconda3\envs\tensorflow\lib\site-packages\tensorflow\python\framework\constant_op.py", line 165, in cons
tant
tensor_util.make_tensor_proto(value, dtype=dtype, shape=shape, verify_shape=verify_shape))
File "D:\SciSoft\Anaconda3\envs\tensorflow\lib\site-packages\tensorflow\python\framework\tensor_util.py", line 441, in make
_tensor_proto
tensor_proto.string_val.extend([compat.as_bytes(x) for x in proto_values])
File "D:\SciSoft\Anaconda3\envs\tensorflow\lib\site-packages\tensorflow\python\framework\tensor_util.py", line 441, in
tensor_proto.string_val.extend([compat.as_bytes(x) for x in proto_values])
File "D:\SciSoft\Anaconda3\envs\tensorflow\lib\site-packages\tensorflow\python\util\compat.py", line 65, in as_bytes
(bytes_or_text,))
TypeError: Expected binary or unicode string, got 1
The code runs ok with theano backend.
Also if set axis=0 or 2, The code is ok. and if set mode=2 and axis=1 the code also works.
But I need featurewise normalization.
Anything wrong here?
nelson-liu commented on 13 Feb 2017
Here's some code to reproduce the issue. If you run it on the tensorflow backend vs the Theano backend, you can see that the tensorflow backend is incorrect and the Theano backend gives the right result
import keras.backend as K
K.eval(K.batch_dot(K.ones(shape=(5, 10)), K.ones(shape=(5, 10)), axes=(1,1))).shape
Expected result:
(5,1)
Actual Result on TF (incorrect):
(5,5)
Actual Result on Theano (correct):
(5,1)
Check that you are up-to-date with the master branch of Keras. You can update with:
pip install git+git://github.com/fchollet/keras.git --upgrade --no-deps
If running on TensorFlow, check that you are up-to-date with the latest version. The installation instructions can be found here.
If running on Theano, check that you are up-to-date with the master branch of Theano. You can update with:
pip install git+git://github.com/Theano/Theano.git --upgrade --no-deps
Provide a link to a GitHub Gist of a Python script that can reproduce your issue (or just copy the script here if it is short).
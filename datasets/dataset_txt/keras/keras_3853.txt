isaacgerg commented on 23 Nov 2016 â€¢
edited
from keras.applications.resnet50 import ResNet50
import keras.layers

# this could also be the output a different Keras model or layer
input = keras.layers.Input(shape=(400, 400, 1))  # this assumes K.image_dim_ordering() == 'tf'
x1 = keras.layers.AveragePooling2D(pool_size=(2,2))(input)
#x2 = keras.layers.Reshape((40000,))(x1)
x2 = keras.layers.Flatten()(x1)
x3 = keras.layers.RepeatVector(3)(x2)
x4 = keras.layers.Reshape((200, 200, 3))(x3)
x5 = keras.layers.ZeroPadding2D(padding=(12,12))(x4)
m = keras.models.Model(input, x5)  
model = ResNet50(input_tensor=m.output, weights='imagenet', include_top=False)
yields:
builtins.Exception: Graph disconnected: cannot obtain value for tensor Output("input_2:0", shape=(?, 400, 400, 1), dtype=float32) at layer "input_2". The following previous layers were accessed without issue: []
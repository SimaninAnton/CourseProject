tuxkiller17 commented on 12 Jun 2018 â€¢
edited
i am new in keras and i fallow just a simple tuto about it,
when i try to execute the fallowing code from the official website of keras i'm getting an error .
i use the last version of keras using theano 2.1.6 as backend
from keras.models import Sequential 
from keras.layers import Dense, Activation

model = Sequential([
    Dense(32, input_shape=(784,)),
    Activation('relu'),
    Dense(10),
    Activation('softmax'),
])
and the error is
---------------------------------------------------------------------------
OSError                                   Traceback (most recent call last)
<ipython-input-7-6a9867103bba> in <module>()
      1 model = Sequential()
----> 2 model.add(Dense(12, input_dim=8, activation='relu'))
      3 model.add(Dense(8, activation='relu'))
      4 model.add(Dense(1, activation='sigmoid'))

/usr/local/lib/python2.7/dist-packages/keras/models.pyc in add(self, layer)
    495                 # and create the node connecting the current layer
    496                 # to the input layer we just created.
--> 497                 layer(x)
    498 
    499             if len(layer._inbound_nodes[-1].output_tensors) != 1:

/usr/local/lib/python2.7/dist-packages/keras/engine/topology.pyc in __call__(self, inputs, **kwargs)
    590                                          '`layer.build(batch_input_shape)`')
    591                 if len(input_shapes) == 1:
--> 592                     self.build(input_shapes[0])
    593                 else:
    594                     self.build(input_shapes)

/usr/local/lib/python2.7/dist-packages/keras/layers/core.pyc in build(self, input_shape)
    862                                       name='kernel',
    863                                       regularizer=self.kernel_regularizer,
--> 864                                       constraint=self.kernel_constraint)
    865         if self.use_bias:
    866             self.bias = self.add_weight(shape=(self.units,),

/usr/local/lib/python2.7/dist-packages/keras/legacy/interfaces.pyc in wrapper(*args, **kwargs)
     89                 warnings.warn('Update your `' + object_name +
     90                               '` call to the Keras 2 API: ' + signature, stacklevel=2)
---> 91             return func(*args, **kwargs)
     92         wrapper._original_function = func
     93         return wrapper

/usr/local/lib/python2.7/dist-packages/keras/engine/topology.pyc in add_weight(self, name, shape, dtype, initializer, regularizer, trainable, constraint)
    411         if dtype is None:
    412             dtype = K.floatx()
--> 413         weight = K.variable(initializer(shape),
    414                             dtype=dtype,
    415                             name=name,

/usr/local/lib/python2.7/dist-packages/keras/initializers.pyc in __call__(self, shape, dtype)
    215             limit = np.sqrt(3. * scale)
    216             return K.random_uniform(shape, -limit, limit,
--> 217                                     dtype=dtype, seed=self.seed)
    218 
    219     def get_config(self):

/usr/local/lib/python2.7/dist-packages/keras/backend/theano_backend.pyc in random_uniform(shape, minval, maxval, dtype, seed)
   2319         seed = np.random.randint(1, 10e6)
   2320     rng = RandomStreams(seed=seed)
-> 2321     return rng.uniform(shape, low=minval, high=maxval, dtype=dtype)
   2322 
   2323 

/usr/local/lib/python2.7/dist-packages/theano/sandbox/rng_mrg.pyc in uniform(self, size, low, high, ndim, dtype, nstreams, **kwargs)
    870         if nstreams is None:
    871             nstreams = self.n_streams(size)
--> 872         rstates = self.get_substream_rstates(nstreams, dtype)
    873 
    874         d = {}

/usr/local/lib/python2.7/dist-packages/theano/configparser.pyc in res(*args, **kwargs)
    115         def res(*args, **kwargs):
    116             with self:
--> 117                 return f(*args, **kwargs)
    118         return res
    119 

/usr/local/lib/python2.7/dist-packages/theano/sandbox/rng_mrg.pyc in get_substream_rstates(self, n_streams, dtype, inc_rstate)
    777         # If multMatVect.dot_modulo isn't compiled, compile it.
    778         if multMatVect.dot_modulo is None:
--> 779             multMatVect(rval[0], A1p72, M1, A2p72, M2)
    780 
    781         # This way of calling the Theano fct is done to bypass Theano overhead.

/usr/local/lib/python2.7/dist-packages/theano/sandbox/rng_mrg.pyc in multMatVect(v, A, m1, B, m2)
     60         o = DotModulo()(A_sym, s_sym, m_sym, A2_sym, s2_sym, m2_sym)
     61         multMatVect.dot_modulo = function(
---> 62             [A_sym, s_sym, m_sym, A2_sym, s2_sym, m2_sym], o, profile=False)
     63 
     64     # This way of calling the Theano fct is done to bypass Theano overhead.

/usr/local/lib/python2.7/dist-packages/theano/compile/function.pyc in function(inputs, outputs, mode, updates, givens, no_default_updates, accept_inplace, name, rebuild_strict, allow_input_downcast, profile, on_unused_input)
    315                    on_unused_input=on_unused_input,
    316                    profile=profile,
--> 317                    output_keys=output_keys)
    318     return fn

/usr/local/lib/python2.7/dist-packages/theano/compile/pfunc.pyc in pfunc(params, outputs, mode, updates, givens, no_default_updates, accept_inplace, name, rebuild_strict, allow_input_downcast, profile, on_unused_input, output_keys)
    484                          accept_inplace=accept_inplace, name=name,
    485                          profile=profile, on_unused_input=on_unused_input,
--> 486                          output_keys=output_keys)
    487 
    488 

/usr/local/lib/python2.7/dist-packages/theano/compile/function_module.pyc in orig_function(inputs, outputs, mode, accept_inplace, name, profile, on_unused_input, output_keys)
   1839                   name=name)
   1840         with theano.change_flags(compute_test_value="off"):
-> 1841             fn = m.create(defaults)
   1842     finally:
   1843         t2 = time.time()

/usr/local/lib/python2.7/dist-packages/theano/compile/function_module.pyc in create(self, input_storage, trustme, storage_map)
   1713             theano.config.traceback.limit = theano.config.traceback.compile_limit
   1714             _fn, _i, _o = self.linker.make_thunk(
-> 1715                 input_storage=input_storage_lists, storage_map=storage_map)
   1716         finally:
   1717             theano.config.traceback.limit = limit_orig

/usr/local/lib/python2.7/dist-packages/theano/gof/link.pyc in make_thunk(self, input_storage, output_storage, storage_map)
    697         return self.make_all(input_storage=input_storage,
    698                              output_storage=output_storage,
--> 699                              storage_map=storage_map)[:3]
    700 
    701     def make_all(self, input_storage, output_storage):

/usr/local/lib/python2.7/dist-packages/theano/gof/vm.pyc in make_all(self, profiler, input_storage, output_storage, storage_map)
   1089                                                  compute_map,
   1090                                                  [],
-> 1091                                                  impl=impl))
   1092                 linker_make_thunk_time[node] = time.time() - thunk_start
   1093                 if not hasattr(thunks[-1], 'lazy'):

/usr/local/lib/python2.7/dist-packages/theano/gof/op.pyc in make_thunk(self, node, storage_map, compute_map, no_recycling, impl)
    953             try:
    954                 return self.make_c_thunk(node, storage_map, compute_map,
--> 955                                          no_recycling)
    956             except (NotImplementedError, utils.MethodNotDefined):
    957                 # We requested the c code, so don't catch the error.

/usr/local/lib/python2.7/dist-packages/theano/gof/op.pyc in make_c_thunk(self, node, storage_map, compute_map, no_recycling)
    856         _logger.debug('Trying CLinker.make_thunk')
    857         outputs = cl.make_thunk(input_storage=node_input_storage,
--> 858                                 output_storage=node_output_storage)
    859         thunk, node_input_filters, node_output_filters = outputs
    860 

/usr/local/lib/python2.7/dist-packages/theano/gof/cc.pyc in make_thunk(self, input_storage, output_storage, storage_map, keep_lock)
   1215         cthunk, module, in_storage, out_storage, error_storage = self.__compile__(
   1216             input_storage, output_storage, storage_map,
-> 1217             keep_lock=keep_lock)
   1218 
   1219         res = _CThunk(cthunk, init_tasks, tasks, error_storage, module)

/usr/local/lib/python2.7/dist-packages/theano/gof/cc.pyc in __compile__(self, input_storage, output_storage, storage_map, keep_lock)
   1155                                             output_storage,
   1156                                             storage_map,
-> 1157                                             keep_lock=keep_lock)
   1158         return (thunk,
   1159                 module,

/usr/local/lib/python2.7/dist-packages/theano/gof/cc.pyc in cthunk_factory(self, error_storage, in_storage, out_storage, storage_map, keep_lock)
   1617             for node in self.node_order:
   1618                 node.op.prepare_node(node, storage_map, None, 'c')
-> 1619             module = get_module_cache().module_from_key(
   1620                 key=key, lnk=self, keep_lock=keep_lock)
   1621 

/usr/local/lib/python2.7/dist-packages/theano/gof/cc.pyc in get_module_cache(init_args)
     46 
     47     """
---> 48     return cmodule.get_module_cache(config.compiledir, init_args=init_args)
     49 
     50 

/usr/local/lib/python2.7/dist-packages/theano/gof/cmodule.pyc in get_module_cache(dirname, init_args)
   1577         init_args = {}
   1578     if _module_cache is None:
-> 1579         _module_cache = ModuleCache(dirname, **init_args)
   1580         atexit.register(_module_cache._on_atexit)
   1581     elif init_args:

/usr/local/lib/python2.7/dist-packages/theano/gof/cmodule.pyc in __init__(self, dirname, check_for_broken_eq, do_refresh)
    693 
    694         if do_refresh:
--> 695             self.refresh()
    696 
    697     age_thresh_use = config.cmodule.age_thresh_use  # default 24 days

/usr/local/lib/python2.7/dist-packages/theano/gof/cmodule.pyc in refresh(self, age_thresh_use, delete_if_problem, cleanup)
    784             if not os.path.isdir(root):
    785                 continue
--> 786             files = os.listdir(root)
    787             if not files:
    788                 rmtree_empty(root, ignore_nocleanup=True,

OSError: [Errno 13] Permission denied: '/home/tuxkiller/.theano/compiledir_Linux-4.15--generic-x86_64-with-Ubuntu-18.04-bionic-x86_64-2.7.15rc1-64/tmp6AeDTf'
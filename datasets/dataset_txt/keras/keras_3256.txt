qxcv commented on 9 Feb 2017 â€¢
edited
What the title says, basically. It's likely just due to a single missing line in the ZeroPadding2D class. Repro:
from keras.models import Sequential
from keras.layers import ZeroPadding2D
import h5py, json, pprint

def run_experiment(ordering):
    model = Sequential()
    model.add(ZeroPadding2D(padding=(2, 2),
                            input_shape=(10, 11, 12),
                            dim_ordering=ordering))
    model_path = ordering + '_model.h5'
    model.save(model_path)
    with h5py.File(model_path, 'r') as fp:
        config = json.loads(fp.attrs['model_config'].decode('utf8'))
    print('Layer config for %s model at %s:' % (ordering, model_path))
    pprint.pprint(config['config'])

run_experiment('tf')
run_experiment('th')
Should include dim_ordering in the configs, but there are no dim_ordering keys at all:
Layer config for tf model at tf_model.h5:
[{'class_name': 'ZeroPadding2D',
  'config': {'batch_input_shape': [None, 10, 11, 12],
             'input_dtype': 'float32',
             'name': 'zeropadding2d_1',
             'padding': [2, 2],
             'trainable': True}}]
Layer config for th model at th_model.h5:
[{'class_name': 'ZeroPadding2D',
  'config': {'batch_input_shape': [None, 10, 11, 12],
             'input_dtype': 'float32',
             'name': 'zeropadding2d_2',
             'padding': [2, 2],
             'trainable': True}}]
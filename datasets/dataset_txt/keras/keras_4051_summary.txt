how to track the loss at each epoch and use it to update learning rate
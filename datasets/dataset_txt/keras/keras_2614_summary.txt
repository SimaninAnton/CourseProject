Proper way to make fit_generator interact with training callback?
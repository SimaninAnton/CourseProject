JamesDConley commented on 10 Sep 2019
When running
p_model = multi_gpu_model(model)
I get
ValueError: To call multi_gpu_model with gpus=4, we expect the following devices to be available: ['/cpu:0', '/gpu:0', '/gpu:1', '/gpu:2', '/gpu:3']. However this machine only has: ['/gpu:0', '/gpu:1', '/gpu:2', '/gpu:3']. Try reducing gpus
Running the following correctly lists all GPUs and a CPU:
from tensorflow.python.client import device_lib
device_lib.list_local_devices()
I have tried :
with and without
os.environ['CUDA_VISIBLE_DEVICES'] = "0,1,2,3,4"
and permutations of those numbers (ie 0,1,2,3)
building the initial model with and without
with tf.device('/cpu:0'):
building the subsequent parallel model with and without
with tf.device('/cpu:0'):
this error only happens on the latest branch, I installed via
pip3.6 install git+https://github.com/keras-team/keras --upgrade --no-deps
and have tried with both TF 1.13 and 1.14
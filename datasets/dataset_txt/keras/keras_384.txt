Contributor
zachmayer commented on 13 Feb 2019
I noticed that intra_op_parallelism_threads respects the OMP_NUM_THREADS environment variable, but inter_op_parallelism_threads does not.
Its confusing to set that environment variable, and have it respected in some places and ignored in others. I think it would make sense to set both intra_op_parallelism_threads and inter_op_parallelism_threads using OMP_NUM_THREADS.
This can be especially useful if you want keras to only use one thread, e.g. for reproducibility.
If this makes sense, I have a green PR up (with a unit test), here: #12254
Check that you are up-to-date with the master branch of Keras. You can update with:
pip install git+git://github.com/keras-team/keras.git --upgrade --no-deps
Check that your version of TensorFlow is up-to-date. The installation instructions can be found here.
Provide a link to a GitHub Gist of a Python script that can reproduce your issue (or just copy the script here if it is short).
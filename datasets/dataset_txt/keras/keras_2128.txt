ktagowski commented on 15 Jun 2017 â€¢
edited
Hi,
So I observed some weird behavior after changing image data format in Keras. And I don't understand few things.
The output dimmensions of Dense layer is not changed after I changed image data order. Suppose I have 3D input like (8,24,24) where the first dimension corresponds to channels number. With channels first ordering I would get Output like (8,24,dense_layer_size) but I would expect output with shape (dense_layer_size, 24,24). I solved that problem by setting in keras channel order to first, but rest of layers (in my case I used convolutions and I changed data-format to last channel) and I reshaped input before and after Dense Layer. Is it expected behavior from point of Library?
I have received very poor result (in this case: cost function values) of my models (working with RGB pictures dataset) after changing data format. I will skip epochs calculations times because I know that there is overhead to convert TF orderings to Theano format. More important for me is fact that with Channel First data format on both backends (TensorFlow and Theano, CNTK - not tested) I received similar result, but when I changed data order to Channel First order I've received completely different results, and my cost functions result after training phase is about 30% worse than that with channel last orderings. Nothing was changed except data format. What is the reason for such a difference?
Best Regards,
Kamil
mustgoplay commented on 1 Jan 2017 â€¢
edited
Hi,
Here's a simple function to see both the image as well as the actual values that are the output of a given input/layer/filter. It's just based on the example but it makes it a re-usable function to call.
It might be useful to allow multiple filters for output as well as the actual data of the input.
from pandas import Dataframe
import numpy as np
import pylab as pl
import matplotlib.pyplot as plt
import matplotlib.cm as mpcm
from keras import backend as K

def VisualizeLayerOutput(model, input, output_layer_num, filter_num = 0, input_num=0,
                           output_pics=True, output_values=True):
    # Displays the selected input in visual form and 
    # outputs of the output layer for a single input with a given input in both 
    # pictorial and numerical form

    pl.imshow(input[input_num, 0], interpolation='nearest', cmap=mpcm.binary)
    pl.title('Input')
    plt.show()

    get_layer_output = K.function([model.layers[0].input],
                                      [model.layers[output_layer_num].output])
    layer_output = get_layer_output([input])[0]
    print(np.shape(layer_output))
    output_image = np.array(layer_output[input_num][filter_num])
    if output_values:
        print("Output Shape: ", np.shape(output_image))
        print(DataFrame(output_image.round(2)))
    if output_pics:
        pl.title('Output')
        plt.imshow(output_image, cmap='gray')
        plt.show()
It might be helpful to add it to the visualize file.
Not sure if this should have been a pull request but new to git so don't know and not sure how to.
Please make sure that the boxes below are checked before you submit your issue. If your issue is an implementation question, please ask your question on StackOverflow or join the Keras Slack channel and ask there instead of filing a GitHub issue.
Thank you!
[x ] Check that you are up-to-date with the master branch of Keras. You can update with:
pip install git+git://github.com/fchollet/keras.git --upgrade --no-deps
If running on TensorFlow, check that you are up-to-date with the latest version. The installation instructions can be found here.
[ x] If running on Theano, check that you are up-to-date with the master branch of Theano. You can update with:
pip install git+git://github.com/Theano/Theano.git --upgrade --no-deps
[x ] Provide a link to a GitHub Gist of a Python script that can reproduce your issue (or just copy the script here if it is short).
Contributor
wxs commented on 21 Aug 2015
At some point this branch was added to the weighted_objective function:
else:
            # We assume the time index to be masked is axis=1
            wc = masked_weights * obj_output
            wc = wc.reshape(mask.shape)
            wc = wc.sum(axis=1) / mask.sum(axis=1)
            return wc.mean()
however the reshape will fail in the event that any of sample_weight are zero, because obj_output is filtered to only the nonzero sample_weights. We're working on a fix, opening an issue here in case anyone else has beens truggling with this.
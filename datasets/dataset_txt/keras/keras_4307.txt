Contributor
sunil-at-gh commented on 27 Sep 2016
The documentation for batch_dot, in theano_backend.py and tensorflow_backend.py, says:
# Examples
    Assume x = [[1, 2], [3, 4]]   and y = [[5, 6], [7, 8]]
    batch_dot(x, y, axes=1) = [[17, 53]] which is the main diagonal
    of x.dot(y.T), although we never have to calculate the off-diagonal
    elements.
Looks like the result in the example has the wrong shape. Proposed correction:
# Examples
    Assume x = [[1, 2], [3, 4]]   and y = [[5, 6], [7, 8]], _with shapes (2, 2)_
    batch_dot(x, y, axes=1) = [[17], [53]] with shape (2, 1). This is the main diagonal
    of x.dot(y.T), although we never have to calculate the off-diagonal
    elements.
Please make sure that the boxes below are checked before you submit your issue. Thank you!
Check that you are up-to-date with the master branch of Keras. You can update with:
pip install git+git://github.com/fchollet/keras.git --upgrade --no-deps
If running on Theano, check that you are up-to-date with the master branch of Theano. You can update with:
pip install git+git://github.com/Theano/Theano.git --upgrade --no-deps
Provide a link to a GitHub Gist of a Python script that can reproduce your issue (or just copy the script here if it is short).
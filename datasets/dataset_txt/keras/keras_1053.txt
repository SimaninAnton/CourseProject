tanakataiki commented on 4 May 2018 â€¢
edited
I am trying to use mobilenetv2 middle layer for MobileNetv2-ssdlite So I want to use middle layer as Feature extractor and localization
The purpose
1 Set input layer of bn13_conv_bn_expand output layer of Conv_1
2 Apply width and height multiplier for different resolution like 224224, 300300 or so
3 To understand get_3rd_layer_output([x])[0] function
//I defined model
mobilenetv2=MobileNetV2(input_shape=mobilenetv2_input_shape,
include_top=False,weights='imagenet')
//this works in my environment
FeatureExtractor=Model(inputs=mobilenetv2.input, outputs
=mobilenetv2.get_layer('mobl13_conv_expand').output)
//I set mid model (I am not sure weather this is ok or not maybe not ok )
mobilenetv2_mid13=mobilenetv2_mid.get_layer('bn13_conv_bn_expand')
//K function to get mid layer 114= bn13_conv_bn_expand and 147=Conv_1
get_3rd_layer_output = K.function([mobilenetv2.layers[114].input,
K.learning_phase()], [mobilenetv2.layers[147].output])
//this produce error below
conv_1 = get_3rd_layer_output(net[['mbl13_conv'],1])[0]
ValueError: In order to feed symbolic tensors to a Keras model in TensorFlow, you need tensorflow 1.8 or higher.
Can anybody help me to know how to solve this?
Thanks
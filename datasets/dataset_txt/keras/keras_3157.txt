gongzhitaao commented on 21 Feb 2017 â€¢
edited
Simply put, tf.while_loop hangs when Dropout layer is used. Keras version 2.0.2 1.2.2, Tensorflow version 1.0.1 1.0.0.
Please see the gist to reproduce this error.
Basically If you remove (comment out) the Dropout(0.5) layer OR change the total iteration to less than 10, the program correctly runs and terminates.
Otherwise, the program hangs.
It seems to me like a race condition. And it seems to be a bug within keras since tensorflow alone does not have this bug.
Contributor
cympfh commented on 21 Mar 2017 â€¢
edited
This code is ok (with a warning about legacy).
x = Input(shape=(100,))
y = Input(shape=(100,))
z = merge([x, y], mode='dot')
When merge is wrapped like following,
x = Input(shape=(100,))
y = Input(shape=(100,))

def cosine(args):
    x, y = args
    return merge([x, y], mode='dot')

z = Lambda(cosine)([x, y])
an error occurs
>           shape1.pop(self.dot_axes[0])
E           TypeError: 'int' object is not subscriptable
from /keras/legacy/layers.py:275 (compute_output_shape function),
because self.dot_axes = -1.
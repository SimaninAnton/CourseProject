Contributor
jstypka commented on 22 Jan 2016
If you use model.fit_generator() function and pass it a parameter nb_worker which is higher than 1 and at the same time provide a non threadsafe generator as a first argument, a confusing situation occurrs.
The generator worker fails:
https://github.com/fchollet/keras/blob/master/keras/models.py#L953
because of an error - in my case it was ValueError: generator already executing, but it can be any other error. It fails silently because of the try ... except statement and only sets the _stop event, so it's difficult to get what's wrong.
I have an older version of the repo, but in my version the line:
https://github.com/fchollet/keras/blob/master/keras/models.py#L966
doesn't exist and therefore, the program breaks in a weird way on the line:
https://github.com/fchollet/keras/blob/master/keras/models.py#L974
with a UnboundLocalError. I see that it has now been fixed, but I still had some troubles with figuring out that the problem is with the generator.
Wouldn't it be a good idea to remove this try...except block altogether or at least remove the catch 'em all statement?
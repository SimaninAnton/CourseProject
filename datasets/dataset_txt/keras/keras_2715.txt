jakubLangr commented on 6 Apr 2017 â€¢
edited
Anyone ever came across this bug:
---------------------------------------------------------------------------
ImportError                               Traceback (most recent call last)
<ipython-input-23-cbcfc17289ab> in <module>()
      2 print('Done!')
      3 model_loaded = get_custom_CNN()
----> 4 model_loaded.load_weights('mdl.h5')

/usr/local/lib/python2.7/dist-packages/keras/models.pyc in load_weights(self, filepath, by_name)
    691     def load_weights(self, filepath, by_name=False):
    692         if h5py is None:
--> 693             raise ImportError('`load_weights` requires h5py.')
    694         f = h5py.File(filepath, mode='r')
    695         if 'layer_names' not in f.attrs and 'model_weights' in f:

ImportError: `load_weights` requires h5py.
after running this:
import h5py # version 2.7.0
print('Done!')
model_loaded = get_custom_CNN()  #this can really be any network that fits mdl.h5
model_loaded.load_weights('mdl.h5')
I even checked the exact condition (h5py is None is False) after seeing the actual code here:
https://github.com/fchollet/keras/blob/master/keras/models.py
Keras 2.0.2, tf (1.0.0) backend.
Tried:
Checking for mismatching environments
Importing h5py from scratch
Some old GH tickets suggested installing cython so i did that
Searching online
CPapadim commented on 7 Jul 2017 â€¢
edited
I'm getting the wrong number of output predictions using predict_generator, when setting predict_generator(workers = 2)
generator = datagen.flow_from_directory(
        validation_data_dir,
        target_size=(150, 150),
        batch_size=16,
        class_mode=None,
        shuffle=False)
pred = model.predict_generator(generator, 50, verbose = 1, workers = 2)
There's 802 images in the validation_data_dir that the generator detects, split evenly with 2 classes.
In this case, I'd expect len(pred) to be 50 x 16 = 800, but it's 786, every time. If instead of 50 for that argument I enter 49, then I do get the expected number, 49 x 16 = 784. If I enter 51, I get again the expected number, 802 (this is the total number of available images).
Note that if I set predict_generator(workers = 1) I get back 800 predictions as expected.
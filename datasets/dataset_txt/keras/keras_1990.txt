november2011 commented on 5 Jul 2017
The output dimension is 4*4 whatever the border_mode is same or valid, I don't know what's wrong
x = tf.reshape(img, shape=[-1, 28, 28, 1]) #reshape img to 2-dimensional
x = Convolution2D(32, 5, 5)(x)
x = Activation('relu')(x)
x = MaxPooling2D(pool_size=(2, 2), border_mode='same')(x)
x = Convolution2D(64, 5, 5)(x)
x = Activation('relu')(x)
x = MaxPooling2D(pool_size=(2, 2), border_mode='valid')(x)
x = tf.reshape(x, shape=[-1, 4464])
meanmee commented on 22 Dec 2015
def build_residual_block_conv(num_filters, name, input_shape, input_name='x'):
"""
Rough sketch of building blocks of layers for residual learning.
See http://arxiv.org/abs/1512.03385 for motivation.
"""
block = Graph()
block.add_input(input_name, input_shape=input_shape)

h1 = Convolution2D(num_filters, 3, 3,activation='relu', border_mode='same')
block.add_node(h1, name=name+'h1', input=input_name)
block.add_node(Dropout(0.25), name=name+'d1', input=name+'h1')

h2 = Convolution2D(num_filters, 3, 3,activation='linear', border_mode='same')
block.add_node(h2, name=name+'h2', input=name+'d1')

block.add_output(name=name+'output', inputs=[name+'h1', name+'h2'], merge_mode='sum')

return block
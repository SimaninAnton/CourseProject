michalgregor commented on 20 Jul 2016 â€¢
edited
I am using keras with the tensorflow backend. I am running an interactive shell. What I notice is that when I build a graph using the functional API, the script takes longer to execute on every subsequent run. The following code illustrates the issue:
import time
from keras.layers import Dense, Input
from keras.models import Model

start = time.time()

input_data = Input(shape=(100,))
x = Dense(100)(input_data)

for i in range(50):
    x = Dense(100)(x)

end = time.time()
print("{}s".format(end - start))
Note that I am not even creating a model or compiling it at any point. The run times increase in the following fashion:
1.6856169700622559s
3.498518943786621s
5.327540397644043s
7.185122013092041s
9.20834469795227s
Any ideas? Is there perhaps some caching going on in the background that could be causing this?
Check that you are up-to-date with the master branch of Keras. You can update with:
pip install git+git://github.com/fchollet/keras.git --upgrade --no-deps
If running on Theano, check that you are up-to-date with the master branch of Theano. You can update with:
pip install git+git://github.com/Theano/Theano.git --upgrade --no-deps
Provide a link to a GitHub Gist of a Python script that can reproduce your issue (or just copy the script here if it is short).
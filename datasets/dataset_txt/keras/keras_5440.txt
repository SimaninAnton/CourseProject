Froskekongen commented on 18 Apr 2016
There appears to be a minor piece missing in the new functional API.
To reproduce:
model=some functional model
modeljson=model.to_json()
model.save_weighths(path)
model2=model_from_json(modeljson)
model2.load_weigths(path)
model2.predict(...)
It's possible to fix by calling model.compile(...) after loading. This may be intentional behaviour, but I am not sure.
AttributeError                            Traceback (most recent call last)
<ipython-input-2-7f288cbaeaed> in <module>()
----> 1 modelWrap.predict(pList[0])

/home/erlenda/repos/content-classification/model_loader.py in predict(self, inputD)
     41         #maxlen = 168
     42         feed_dict={'input_text':seq,'input_titles':seq_title}
---> 43         predictions=self.model.predict(feed_dict)
     44         predictions['hovedkategori']=predictions['hovedkategori'][0]
     45         predictions['underkategori']=predictions['hovedkategori'][0]

/usr/local/lib/python3.5/dist-packages/keras/engine/training.py in predict(self, x, batch_size, verbose)
   1098         else:
   1099             ins = x
-> 1100         self._make_predict_function()
   1101         f = self.predict_function
   1102         return self._predict_loop(f, ins,

/usr/local/lib/python3.5/dist-packages/keras/engine/training.py in _make_predict_function(self)
    667 
    668     def _make_predict_function(self):
--> 669         if self.predict_function is None:
    670             if self.uses_learning_phase:
    671                 inputs = self.inputs + [K.learning_phase()]

AttributeError: 'Model' object has no attribute 'predict_function'
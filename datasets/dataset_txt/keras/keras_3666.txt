Contributor
PPACI commented on 15 Dec 2016
Please make sure that the boxes below are checked before you submit your issue. Thank you!
Check that you are up-to-date with the master branch of Keras. You can update with:
pip install git+git://github.com/fchollet/keras.git --upgrade --no-deps
Hi Keras.
I have a pipeline where i need to preprocess an image with 5 channels (random rotation/shearing). So the dimensions of an image is (x, y, 5) in 'tf' ordering mode. It was working nicely until i updated to latest keras version.
Then i got an error saying that the image must must be either 1, 3 or 4 channels on last axis.
I found a quickfix by commenting those line in keras.preprocessing.image :
if self.X.shape[channels_axis] not in {1, 3, 4}: raise ValueError('NumpyArrayIterator is set to use the ' 'dimension ordering convention "' + dim_ordering + '" ' '(channels on axis ' + str(channels_axis) + '), i.e. expected ' 'either 1, 3 or 4 channels on axis ' + str(channels_axis) + '. ' 'However, it was passed an array with shape ' + str(self.X.shape) + ' (' + str(self.X.shape[channels_axis]) + ' channels).')
Around line 550 in the files.
So my question is, is there a way to deal with more than 4 channel images ? Have i broken something in my local keras ?
Thank you all
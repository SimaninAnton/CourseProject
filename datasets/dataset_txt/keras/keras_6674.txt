Contributor
the-moliver commented on 9 Sep 2015
It seems like there was a bug recently introduced in Theano that breaks parts of Keras in subtle ways, i.e. things run but don't work very well. The last good commit was:
Theano/Theano@2595fea
The code below works if you pull from this commit, but loss doesn't really decrease with bleeding edge Theano. If someone can confirm I'll report it to the Theano devs. I've only tried on GPU, so it may only apply there
from __future__ import print_function
import numpy as np
np.random.seed(1337)

from keras.utils.test_utils import get_test_data
from keras.models import Sequential
from keras.layers.core import TimeDistributedDense
import unittest

(X_train, y_train), (X_test, y_test) = get_test_data(nb_train=1000, nb_test=200, input_shape=(5, 10), output_shape=(5, 10),
                                                 classification=False)

model = Sequential()
model.add(TimeDistributedDense(X_train.shape[-1], y_train.shape[-1]))
model.compile(loss='hinge', optimizer='rmsprop')
history = model.fit(X_train, y_train, nb_epoch=12, batch_size=16, validation_data=(X_test, y_test), verbose=2)
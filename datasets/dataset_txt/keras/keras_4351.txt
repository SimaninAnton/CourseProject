Contributor
kilotaras commented on 19 Sep 2016
#3709 introduced a crash when time dimension is None
Please make sure that the boxes below are checked before you submit your issue. Thank you!
Check that you are up-to-date with the master branch of Keras. You can update with:
pip install git+git://github.com/fchollet/keras.git --upgrade --no-deps
If running on Theano, check that you are up-to-date with the master branch of Theano. You can update with:
pip install git+git://github.com/Theano/Theano.git --upgrade --no-deps
Provide a link to a GitHub Gist of a Python script that can reproduce your issue (or just copy the script here if it is short).
from keras.models import Sequential
from keras.layers import LSTM

model = Sequential()
model.add(LSTM(4, input_shape=(None, 7)))
...
  File "/tmp/Keras/keras/backend/tensorflow_backend.py", line 1189, in rnn
    _step.output_size = int(_step(tf.unpack(inputs)[0], state)[0].get_shape()[-1])
  File "/usr/local/lib/python3.5/dist-packages/tensorflow/python/ops/array_ops.py", line 685, in unpack
    raise ValueError("Cannot infer num from shape %s" % value_shape)
ValueError: Cannot infer num from shape (?, ?, 28)
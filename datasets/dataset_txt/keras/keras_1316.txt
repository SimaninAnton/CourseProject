teng88 commented on 19 Jan 2018
error running multi_gpu_model given in https://keras.io/utils/#multi_gpu_model
I am using anaconda2 with keras-gpu 2.1.3 and tensorflow-gpu 1.3.0
@fchollet
Trac eback (most recent call last):
File "test2.py", line 23, in
parallel_model = multi_gpu_model(model, gpus=2)
File "/home/caoteng/data/anaconda2/lib/python2.7/site-packages/keras/utils/training_utils.py", line 169, in multi_gpu_model
outputs = model(inputs)
File "/home/caoteng/data/anaconda2/lib/python2.7/site-packages/keras/engine/topology.py", line 617, in call
output = self.call(inputs, **kwargs)
File "/home/caoteng/data/anaconda2/lib/python2.7/site-packages/keras/engine/topology.py", line 2078, in call
output_tensors, _, _ = self.run_internal_graph(inputs, masks)
File "/home/caoteng/data/anaconda2/lib/python2.7/site-packages/keras/engine/topology.py", line 2229, in run_internal_graph
output_tensors = _to_list(layer.call(computed_tensor, **kwargs))
File "/home/caoteng/data/anaconda2/lib/python2.7/site-packages/keras/layers/normalization.py", line 185, in call
self.momentum),
File "/home/caoteng/data/anaconda2/lib/python2.7/site-packages/keras/backend/tensorflow_backend.py", line 1001, in moving_average_update
x, value, momentum, zero_debias=True)
File "/home/caoteng/data/anaconda2/lib/python2.7/site-packages/tensorflow/python/training/moving_averages.py", line 70, in assign_moving_average
update_delta = _zero_debias(variable, value, decay)
File "/home/caoteng/data/anaconda2/lib/python2.7/site-packages/tensorflow/python/training/moving_averages.py", line 180, in _zero_debias
"biased", initializer=biased_initializer, trainable=False)
File "/home/caoteng/data/anaconda2/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py", line 1065, in get_variable
use_resource=use_resource, custom_getter=custom_getter)
File "/home/caoteng/data/anaconda2/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py", line 962, in get_variable
use_resource=use_resource, custom_getter=custom_getter)
File "/home/caoteng/data/anaconda2/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py", line 367, in get_variable
validate_shape=validate_shape, use_resource=use_resource)
File "/home/caoteng/data/anaconda2/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py", line 352, in _true_getter
use_resource=use_resource)
File "/home/caoteng/data/anaconda2/lib/python2.7/site-packages/tensorflow/python/ops/variable_scope.py", line 664, in _get_single_variable
name, "".join(traceback.format_list(tb))))
ValueError: Variable block1_conv1_bn/moving_mean/biased already exists, disallowed. Did you mean to set reuse=True in VarScope? Originally defined at:
File "/home/caoteng/data/anaconda2/lib/python2.7/site-packages/keras/backend/tensorflow_backend.py", line 1001, in moving_average_update
x, value, momentum, zero_debias=True)
File "/home/caoteng/data/anaconda2/lib/python2.7/site-packages/keras/layers/normalization.py", line 185, in call
self.momentum),
File "/home/caoteng/data/anaconda2/lib/python2.7/site-packages/keras/engine/topology.py", line 617, in call
output = self.call(inputs, **kwargs)
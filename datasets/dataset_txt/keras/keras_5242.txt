wddabc commented on 6 May 2016 â€¢
edited
I think this is related to #1487 I guess. Here is an sample code
def b(x):
    return x
def a(x):
    return b(x)
c=Lambda(a)(x) 
When load such and architecture from a .json or .yml file and make prediction. It returns
global name 'b' is not defined
I'm guessing the serialization ignores b. If I define:
def a(x):
    def b(x):
         return x
    return b(x)
It works correctly. So the lambda should be self-contained. One solution for this is defining b from another file (say util.py) and do:
def a(x):
    from util import b
    return b(x)
What if I need to define b() locally (a and b are in the same .py file)? Are there any ways to do self import? Seems this question is not related to keras, but might be useful if the lambda function are complex.
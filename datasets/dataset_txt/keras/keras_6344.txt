volvador commented on 3 Dec 2015
I apologize in advance as my question is due to me not understanding the doc, and not to an issue in Keras. As it seems Github is the best place to ask Keras questions, I post it here instead of SO.
To simplify my problem : my training set is a series of matrices, and my target is a vector. I am trying to put a convolutional2D layer as a first layer, then a hidden dense layer, then a final Dense layer. The code below presents what I wrote, and I am obtaining a shape mismatch which I do not understand. Can you please correct and explain?
X, Y  = [], []
for i in range(100):
  X.append(np.random.rand(100).reshape((10, 10)))
  Y.append(np.random.randn(5).reshape((5, 1)))

X = np.array(X)
Y = np.array(Y)
NB_FILTER = 25
model = Sequential()
model.add(Convolution2D(nb_filter = NB_FILTER, stack_size=1,  nb_row=5, nb_col=5))
model.add(Flatten())
model.add(Dense(output_dim = 10, input_dim = NB_FILTER))
model.add(Dense(output_dim=5, input_dim = 10))
model.compile(loss='mse', optimizer='adam')
X = X.reshape((X.shape[0], 1, 10, 10))

model.fit(X, Y, validation_split = 0.3, batch_size=10, nb_epoch=2)
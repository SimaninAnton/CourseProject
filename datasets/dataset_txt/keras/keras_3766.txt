Tristacheng commented on 5 Dec 2016
My model has 14 inputs, finally concatenated into one, I want to get the output of 'merged' and 'dense1', but when I run my code ,it reports error like below:

This is my model:
    sub_model = Sequential()
    sub_model.add(Convolution3D(number_filter,size_filter,size_filter,size_filter, input_shape=(50,4, 3,3),activation='tanh'))
    sub_model.add(Dropout(0.1))
    sub_model.add(Flatten())
    sub_model.add(Dense(sub_fc,W_regularizer = l1l2(l1 = 0.01,l2 = 0.2),activation='tanh'))
    numIn = en_number
    Inputi = ['']*numIn
    sub_outi = ['']*numIn
    for i in range(numIn):
        Inputi[i] = Input(shape =(50, 4, 3, 3))
        sub_outi[i] = sub_model(Inputi[i])
    merged = merge(sub_outi,mode = 'concat')
    dense1 = Dense(number_fc,W_regularizer = l1l2(l1 = 0.01,l2 = 0.2),activation='tanh')(merged)
    dense1 = Dropout(0.5)(dense1)
    output = Dense(2, activation='softmax')(dense1)
    model = Model(input=Inputi, output=output)
    model.summary()  

and this is my code to extract the feature:
###        define theano funtion to get output of FC layer
        get_feature = K.function([model.layers[0].input,K.learning_phase()],[model.layers[-2].output]) 
        FC_train_feature = get_feature([X_train,1])[0]
        FC_test_feature = get_feature([X_test,0])[0]
        FC_val_feature = get_feature([X_val,0])[0]
The model works well, but the feature cannot be extracted. Can you help me? I am sorry to disturb you.
@fchollet
@bmabey
@jfsantos
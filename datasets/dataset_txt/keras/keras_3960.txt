fahman commented on 9 Nov 2016
The following snippet fails on call to K.set_value(layer_gates, retrieved_layer_gates) although call to layer_gates.set_value(retrieved_layer_gates) works just fine. Error message is:
Using Theano backend.
Traceback (most recent call last):
File ".../scratches/scratch_8", line 13, in
K.set_value(layer_gates, retrieved_layer_gates)
File "...\keras\backend\theano_backend.py", line 685, in set_value
x.set_value(np.asarray(value, dtype=x.dtype))
AttributeError: 'SharedVariable' object has no attribute 'dtype'
import keras.backend as K
import numpy as np

death_rate = K.variable(0.5)
gate = K.variable(1, dtype="uint8")

layer_gates = K.variable(np.empty([0, 2], dtype=[('death_rate', 'f4'), ('gate','i4')]), dtype=np.object)

retrieved_layer_gates = K.get_value(layer_gates)
retrieved_layer_gates = np.vstack([retrieved_layer_gates, (death_rate, gate)])

# this fails
K.set_value(layer_gates, retrieved_layer_gates)
# this works
# layer_gates.set_value(retrieved_layer_gates)
eyaler commented on 25 Oct 2016 â€¢
edited
An rnn can work on batches having sequences of different length. in the case of return_sequences=True, we should average the losses over batches taking into account not only the batch size but also the different sequence length for the averaging weights. a batch with longer sequences should have a stronger effect on the loss than a batch of same batch size but with shorter sequences.
A related issue is to also take into account the effective length changes due to masking.
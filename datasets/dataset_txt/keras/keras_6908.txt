ghost commented on 30 Jun 2015
As of the current release of Keras I get an Attribute error for Merge layer, indicating that Merge does not have get_output_mask. Is Merge no longer compatible with LSTM?
image = Sequential()
image.add(TimeDistributedDense(cnn_feature_size, 512))

text = Sequential()
text.add(TimeDistributedDense(token_feature_size, 512))

model = Sequential()
model.add(Merge([image, text], mode='sum'))

model.add(LSTM(512, 512, return_sequences=True))
model.add(TimeDistributedDense(512, token_feature_size))
model.add(Activation('time_distributed_softmax'))
model.compile(loss='categorical_crossentropy', optimizer='rmsprop')
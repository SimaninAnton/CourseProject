KlaymenGC commented on 14 Dec 2015
Hello,
I've been using Keras 0.2.0 and I've just upgraded to 0.3.0. When I compile my model in 0.2.0, it has no problem but when compile the same model in 0.3.0, I've got the error:
Using Theano backend.
Epoch 1/20
Traceback (most recent call last):
  File "/Users/ceguo/Documents/PycharmProjects/convnet/Test.py", line 81, in <module>
    verbose=1, show_accuracy=True)
  File "build/bdist.macosx-10.10-intel/egg/keras/models.py", line 507, in fit
  File "build/bdist.macosx-10.10-intel/egg/keras/models.py", line 226, in _fit
  File "build/bdist.macosx-10.10-intel/egg/keras/backend/theano_backend.py", line 357, in __call__
  File "/Users/ceguo/Documents/GitHub/Theano/theano/compile/function_module.py", line 871, in __call__
    storage_map=getattr(self.fn, 'storage_map', None))
  File "/Users/Documents/GitHub/Theano/theano/gof/link.py", line 314, in raise_with_op
    reraise(exc_type, exc_value, exc_trace)
  File "/Users/ceguo/Documents/GitHub/Theano/theano/compile/function_module.py", line 859, in __call__
    outputs = self.fn()
ValueError: The hardcoded shape for the number of rows in the image (66) isn't the run time shape (130).
Apply node that caused the error: ConvOp{('imshp', (32, 66, 66)),('kshp', (1, 1)),('nkern', 21),('bsize', None),('dx', 1),('dy', 1),('out_mode', 'valid'),('unroll_batch', None),('unroll_kern', None),('unroll_patch', True),('imshp_logical', (32, 66, 66)),('kshp_logical', (1, 1)),('kshp_logical_top_aligned', True)}(IncSubtensor{InplaceSet;::, ::, int64:int64:, int64:int64:}.0, <TensorType(float32, 4D)>)
Toposort index: 117
Inputs types: [TensorType(float32, 4D), TensorType(float32, 4D)]
Inputs shapes: [(50, 32, 130, 130), (21, 32, 1, 1)]
Inputs strides: [(2163200, 67600, 520, 4), (128, 4, 4, 4)]
Inputs values: ['not shown', 'not shown']
Outputs clients: [[Elemwise{Add}[(0, 0)](ConvOp{('imshp', (32, 66, 66)),('kshp', (1, 1)),('nkern', 21),('bsize', None),('dx', 1),('dy', 1),('out_mode', 'valid'),('unroll_batch', None),('unroll_kern', None),('unroll_patch', True),('imshp_logical', (32, 66, 66)),('kshp_logical', (1, 1)),('kshp_logical_top_aligned', True)}.0, Reshape{4}.0)]]

Backtrace when the node is created:
  File "build/bdist.macosx-10.10-intel/egg/keras/backend/theano_backend.py", line 570, in conv2d
    filter_shape=filter_shape)

HINT: Use the Theano flag 'exception_verbosity=high' for a debugprint and storage map footprint of this apply node.
Any ideas? Thanks in advance!
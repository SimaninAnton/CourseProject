hadaev8 commented on 11 Mar 2018 â€¢
edited
Same for GlobalMaxPooling2D
keras from master, tensorflow from tf-nightly-gpu
    def conv(i, deph, size, std, usebn = True):
        i = Conv2D(filters = deph, kernel_size = size, strides = 1, padding = 'same')(i)
        if usebn:
            i = bn(i)
        i = relu(i)
        i = MaxPooling2D(std)(i)
        return i

    inp = Input(shape = d_shape)
    i = inp

    i = conv(i, depth, size, 2, False)    
    i = conv(i, depth, size, 2)
    i = conv(i, depth, size, 2)
    i = conv(i, depth, size, 2)
    
    i = GlobalMaxPooling2D(i)

    i = Dense(len(labels), activation = 'softmax')(i)

    m = Model(inp, i)
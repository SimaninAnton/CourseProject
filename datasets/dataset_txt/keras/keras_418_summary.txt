Handling multi-dimensional array of arbitrary length in Keras
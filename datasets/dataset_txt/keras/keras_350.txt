nickeleres commented on 8 Mar 2019 â€¢
edited
I have a generator, which yields the following:
yield {'stuff': stuff, 'documents': documents}, labels
The yield'd iterator has the following shape:
stuff.shape (10, 46) documents.shape (10, 46) labels.shape (10,)
Once this iterator is fed through do my model, I get the following:
ValueError: Error when checking input: expected stuff to have shape (1,) but got array with shape (46,)
Here is the model code which produces the above error:
# Both inputs are 1-dimensional
stuff = Input( 
    name='stuff', 
    shape=[1]
)     # stuff.shape (?, 1)

documents = Input(
    name='documents',
    shape=[1]
)     # documents.shape (?, 1)

logger.info('stuff %s documents shape %s', stuff.shape, documents.shape)

stuff_embedding = Embedding(name='stuff_embedding',
                                  input_dim=training_size,
                                  output_dim=embedded_document_size)(stuff) 

# Embedding the document (shape will be (None, 1, embedding_size))
document_embedding = Embedding(name='documents_embedding',
                               input_dim=training_size,
                               output_dim=embedded_document_size)(documents)
You'll notice that the shape of the Inputs is different than the shape of the data yielded by my generator. I am on the latest version of Numpy, Tensorflow, and Keras.
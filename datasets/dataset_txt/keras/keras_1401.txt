Contributor
novotnj3 commented on 15 Dec 2017
callbacks.py: CSVLogger: on_epoch_end - the self.keys dict is None when model.stop_training = True and the first epoch have not been completed yet. This results in TypeError: 'NoneType' object is not iterable.
Short example:
from keras.callbacks import Callback, CSVLogger
from keras.layers import InputLayer
from keras.models import Sequential


class TerminateInFirstEpoch(Callback):
    """Callback that terminates before the first epoch is completed.
    """

    def on_batch_end(self, batch, logs=None):
        self.model.stop_training = True


model = Sequential()
model.add(InputLayer(input_shape=(1,)))
model.compile(optimizer='sgd', loss='mse')

terminator = TerminateInFirstEpoch()
logger = CSVLogger('./log.csv')

x, y = [1, 2, 3, 4], [1, 2, 3, 4]
model.fit(x, y, batch_size=2, callbacks=[terminator, logger])
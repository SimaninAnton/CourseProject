dberma15 commented on 24 Feb 2017
Please make sure that the boxes below are checked before you submit your issue. If your issue is an implementation question, please ask your question on StackOverflow or join the Keras Slack channel and ask there instead of filing a GitHub issue.
Thank you!
[x ] Check that you are up-to-date with the master branch of Keras. You can update with:
pip install git+git://github.com/fchollet/keras.git --upgrade --no-deps
[ x] If running on TensorFlow, check that you are up-to-date with the latest version. The installation instructions can be found here.
If running on Theano, check that you are up-to-date with the master branch of Theano. You can update with:
pip install git+git://github.com/Theano/Theano.git --upgrade --no-deps
[x ] Provide a link to a GitHub Gist of a Python script that can reproduce your issue (or just copy the script here if it is short).
I'm also having trouble with a slow model.predict significantly bottle necking my code. I am running Python 3.5 on a Windows 7 laptop, so no GPU and 8GB of RAM, . The model is VGG_16 (https://gist.github.com/baraldilorenzo/07d7802847aaad0a35d3) with the last four layers (two dense layers and two drop out layers removed). I am using it as a feature extractor so that I don't have to build a CNN on my own. I resize the images and then use predict on them.
features=featureExtractor.predict(X_train)
I decided to try it on a subset of 3,600 images, a fraction of all of the images I have, and I found that it took just about an hour. That's only 1% of my images. If I use all of them, it'll take four days just to load it all in. Is there anything I can do to speed this up?
I have already tried using
get_output = K.function([featureExtractor.layers[0].input],[featureExtractor.layers[32].output])
model_output = get_output([X_test])[0]
and that takes even longer.
I have also tried changing batch_size and that only increases the time as well.
Does anyone have any suggestions?
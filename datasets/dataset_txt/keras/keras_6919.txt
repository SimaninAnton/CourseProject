hnykda commented on 29 Jun 2015
When running the LSTM example:
from keras.models import Sequential
from keras.layers.core import Dense, Dropout, Activation
from keras.layers.embeddings import Embedding
from keras.layers.recurrent import LSTM

model = Sequential()
model.add(Embedding(12, 256))
model.add(LSTM(256, 128, activation='sigmoid', inner_activation='hard_sigmoid'))
model.add(Dropout(0.5))
model.add(Dense(128, 1))
model.add(Activation('sigmoid'))

model.compile(loss='binary_crossentropy', optimizer='rmsprop')
I get following error:
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-19-ad3a7d50e175> in <module>()
     11 model.add(Activation('sigmoid'))
     12 
---> 13 model.compile(loss='binary_crossentropy', optimizer='rmsprop')

/home/kotrfa/.neurs_venv/lib/python3.4/site-packages/keras/models.py in compile(self, optimizer, loss, class_mode, theano_mode)
    111 
    112         for r in self.regularizers:
--> 113             train_loss = r(train_loss)
    114         updates = self.optimizer.get_updates(self.params, self.constraints, train_loss)
    115 

TypeError: 'NoneType' object is not callable
the problem is in this line https://github.com/fchollet/keras/blob/master/keras/layers/embeddings.py#L32. I guess there should be same process as in e.g. here: https://github.com/fchollet/keras/blob/master/keras/layers/core.py#L281
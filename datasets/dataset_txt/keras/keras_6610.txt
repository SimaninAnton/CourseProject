AvantiShri commented on 1 Oct 2015
I may be missing something fundamental, but something seems a little odd about https://github.com/fchollet/keras/blob/master/keras/optimizers.py#L69-L70. Here are the lines reproduced below for convenience:
for p, g, c in zip(params, grads, constraints):
    m = shared_zeros(p.get_value().shape)  # momentum
    v = self.momentum * m - lr * g  # velocity
Where shared_zeros just returns:
sharedX(np.zeros(shape), dtype=dtype, name=name)
I am confused why v would ever be anything other than -lr*g, since it looks like the value of m is being overwritten to be all zeros in the previous line every time. I see this pattern appear elsewhere with accumulators as well, so I assume I'm just misunderstanding something fundamental about how theano works - but if so I'd really like to know what.
Thanks,
Av
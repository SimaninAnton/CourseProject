dickreuter commented on 22 May 2018 â€¢
edited
I'm trying to run an LSTM (or just any other network) but am getting this error:
  File "C:/git/raspberry_environment_analysis/app.py", line 93, in <module>
    p.train()
  File "C:\git\raspberry_environment_analysis\prediction_models\rnn_nicolas.py", line 163, in train
    self.early_stop])
  File "C:\git\keras\keras\engine\training.py", line 1037, in fit
    validation_steps=validation_steps)
  File "C:\git\keras\keras\engine\training_arrays.py", line 219, in fit_loop
    callbacks.on_epoch_end(epoch, epoch_logs)
  File "C:\git\keras\keras\callbacks.py", line 76, in on_epoch_end
    callback.on_epoch_end(epoch, logs)
  File "C:\git\keras\keras\callbacks.py", line 335, in on_epoch_end
    self.progbar.update(self.seen, self.log_values)
AttributeError: 'ProgbarLogger' object has no attribute 'log_values'
The code I'm trying to run is this:
https://github.com/dickreuter/raspberry_environment_analysis/tree/additional_features
Running:
app.py train
I'm using the latest keras master from github
The part of the code that causes the error:
# create and fit the LSTM network
        self.model = Sequential()
        self.model.add(LSTM(4, input_shape=(features, look_back)))
        self.model.add(Dense(1))
        self.model.compile(loss='mean_squared_error', optimizer='adam')
        self.model.fit(trainX, trainY,
                       validation_split=0.1,
                       epochs=25,
                       batch_size=batchsize, verbose=1,
                       callbacks=[self.tbCallBack,
                                  self.early_stop])
where trainX
Out[2]: 
array([[[24.5,  6. ,  3. , 24.5,  7. ,  3. , 24.5,  8. ,  3. , 24.6,
          9. ,  3. , 25. , 10. ,  3. , 25.7, 11. ,  3. , 26.1, 12. ,
          3. , 26.1, 13. ,  3. , 26. , 14. ,  3. , 26.4, 15. ,  3. ,
         26.6, 16. ,  3. , 26.5, 17. ,  3. , 26.3, 18. ,  3. , 26.1,
         19. ,  3. , 25.6, 20. ,  3. , 25.4, 21. ,  3. ],
        [25.2, 22. ,  3. , 25. , 23. ,  3. , 25.1,  0. ,  4. , 25.2,
          1. ,  4. , 25. ,  2. ,  4. , 24.9,  3. ,  4. , 24.7,  4. ,
          4. , 24.7,  5. ,  4. , 24.6,  6. ,  4. , 24.6,  7. ,  4. ,
         24.5,  8. ,  4. , 24.5,  9. ,  4. , 24.6, 10. ,  4. , 24.6,
         11. ,  4. , 24.6, 12. ,  4. , 24.6, 13. ,  4. ],
        [24.6, 14. ,  4. , 24.6, 15. ,  4. , 24.6, 16. ,  4. , 24.6,
         17. ,  4. , 24.7, 18. ,  4. , 24.7, 19. ,  4. , 24.5, 20. ,
          4. , 24.4, 21. ,  4. , 24.4, 22. ,  4. , 24.5, 23. ,  4. ,
         24.5,  0. ,  5. , 24.9,  1. ,  5. , 25. ,  2. ,  5. , 24.9,
          3. ,  5. , 24.7,  4. ,  5. , 24.5,  5. ,  5. ]]])
trainX.shape=(1, 3, 48)
Feature = 3
look_back = 48
Removing the callbacks has no effect (just saying, as the error message points towards the callbacks).
The error seems to be connected to the validation_split=0.1. Probably there's something wrong with the dimensionality of the data. Maybe additional checks are needed?
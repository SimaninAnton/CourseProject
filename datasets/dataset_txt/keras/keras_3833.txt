sourabhd commented on 25 Nov 2016 â€¢
edited
Keras version : 1.1.1 (latest)
Tensorflow version: 0.10.0
CUDA version: 7.5
CUDNN version: 5.0.5
Python version : 2.7
https://github.com/fchollet/keras/blob/master/examples/variational_autoencoder.py#L47
On changing line 47:
return xent_loss + kl_loss
to:
return kl_loss
I see the following error
CUDA_VISIBLE_DEVICES=3 python variational_autoencoder.py
Using TensorFlow backend.
I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.so locally
I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.so locally
I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.so locally
I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcuda.so.1 locally
I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcurand.so locally
Traceback (most recent call last):
File "variational_autoencoder.py", line 65, in
validation_data=(x_test, x_test))
File "/users/sourabh.d/.local/lib/python2.7/site-packages/keras/engine/training.py", line 1083, in fit
self._make_train_function()
File "/users/sourabh.d/.local/lib/python2.7/site-packages/keras/engine/training.py", line 696, in _make_train_function
self.total_loss)
File "/users/sourabh.d/.local/lib/python2.7/site-packages/keras/optimizers.py", line 213, in get_updates
new_a = self.rho * a + (1. - self.rho) * K.square(g)
File "/users/sourabh.d/.local/lib/python2.7/site-packages/keras/backend/tensorflow_backend.py", line 576, in square
return tf.square(x)
File "/users/sourabh.d/.local/lib/python2.7/site-packages/tensorflow/python/ops/math_ops.py", line 345, in square
return gen_math_ops.square(x, name=name)
File "/users/sourabh.d/.local/lib/python2.7/site-packages/tensorflow/python/ops/gen_math_ops.py", line 2228, in square
result = _op_def_lib.apply_op("Square", x=x, name=name)
File "/users/sourabh.d/.local/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py", line 458, in apply_op
as_ref=input_arg.is_ref).dtype.name
File "/users/sourabh.d/.local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py", line 628, in convert_to_tensor
ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)
File "/users/sourabh.d/.local/lib/python2.7/site-packages/tensorflow/python/framework/constant_op.py", line 180, in _constant_tensor_conversion_function
return constant(v, dtype=dtype, name=name)
File "/users/sourabh.d/.local/lib/python2.7/site-packages/tensorflow/python/framework/constant_op.py", line 163, in constant
tensor_util.make_tensor_proto(value, dtype=dtype, shape=shape))
File "/users/sourabh.d/.local/lib/python2.7/site-packages/tensorflow/python/framework/tensor_util.py", line 346, in make_tensor_proto
raise ValueError("None values not supported.")
ValueError: None values not supported.
Please make sure that the boxes below are checked before you submit your issue. Thank you!
Check that you are up-to-date with the master branch of Keras. You can update with:
pip install git+git://github.com/fchollet/keras.git --upgrade --no-deps
If running on Theano, check that you are up-to-date with the master branch of Theano. You can update with:
pip install git+git://github.com/Theano/Theano.git --upgrade --no-deps
Provide a link to a GitHub Gist of a Python script that can reproduce your issue (or just copy the script here if it is short).
1
using intermediate layer's output as a parameter for custom loss
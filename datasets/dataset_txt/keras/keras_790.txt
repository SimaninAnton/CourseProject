wottpal commented on 2 Sep 2018 â€¢
edited
Keras 2.2.2
TensorFlow 1.10.1
Python 3.6.6
macOS 10.13.6
I'm trying to generate augmentations of my training data with zca_whitening and an ImageDataGenerator. But when I try to fit the generator (which is mandatory when using zca_whitening) the python process eats more and more memory (100Gb+) until it gets killed by the system.
This small example can cause the leak:
import numpy as np
from keras.preprocessing.image import ImageDataGenerator

def cause_leak():
    idg = ImageDataGenerator(zca_whitening = True)
    random_sample = np.random.random((1, 250, 250, 3))
    idg.fit(random_sample)

cause_leak()
The terminal output only consists of a warning saying that featurewise_center is overwritten when enabling zca_whitening. I don't think this is related to the problem but who knows.
4
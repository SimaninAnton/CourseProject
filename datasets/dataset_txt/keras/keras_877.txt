theceday commented on 19 Jul 2018 â€¢
edited
There was a "indexing" error in my code. dataProvider.next_val iterator was getting out of bounds error.
m.model.fit_generator( dataProvider.next_train(), steps_per_epoch=3, epochs=50, validation_data=dataProvider.next_val(), validation_steps=20)
However, most of the time, the error i get is:
tensorflow.python.framework.errors_impl.InvalidArgumentError: All labels must be nonnegative integers, batch: 0 labels: 4,17,3,31,5,7,13,9,10,9,16,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1 [[Node: ctc/CTCLoss = CTCLoss[ctc_merge_repeated=true, ignore_longer_outputs_than_inputs=false, preprocess_collapse_repeated=false, _device="/job:localhost/replica:0/task:0/device:CPU:0"](ctc/Log/_343, ctc/ToInt64/_345, ctc/ToInt32_2/_347, ctc/ToInt32_1/_349)]] [[Node: ctc/CTCLoss/_351 = _Recv[client_terminated=false, recv_device="/job:localhost/replica:0/task:0/device:GPU:0", send_device="/job:localhost/replica:0/task:0/device:CPU:0", send_device_incarnation=1, tensor_name="edge_980_ctc/CTCLoss", tensor_type=DT_FLOAT, _device="/job:localhost/replica:0/task:0/device:GPU:0"]()]]
Though with breakpoints etc disabled, it is easier to see (not always) the actual error:
x_data[i, 0:self.img_w, :, 0] = xdata[actualIndex] IndexError: index 40 is out of bounds for axis 0 with size 40
this is with keras 2.2.0.
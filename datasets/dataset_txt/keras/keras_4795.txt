bogdan-kulynych commented on 12 Jul 2016
See e.g. https://github.com/fchollet/keras/blob/master/keras/preprocessing/image.py#L478:
        if self.save_to_dir:
            for i in range(current_batch_size):
                img = array_to_img(batch_x[i], self.dim_ordering, scale=True)
                # ...
        # ...
        return batch_x, batch_y
array_to_img with scale=True mutates its first argument, batch_x[i].
Therefore, data_generator.flow(data) and data_generator.flow(data, save_to_dir='/path/to/dir') generate different batches. I found it unexpected and counter-intuitive, since there was no obvious note that save_to_dir can somehow affect the output.
Should batch_x be backed up before the call to array_to_img?
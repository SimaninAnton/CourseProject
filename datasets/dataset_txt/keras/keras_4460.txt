Pashton commented on 1 Sep 2016
Please make sure that the boxes below are checked before you submit your issue. Thank you!
Check that you are up-to-date with the master branch of Keras. You can update with:
pip install git+git://github.com/fchollet/keras.git --upgrade --no-deps
If running on Theano, check that you are up-to-date with the master branch of Theano. You can update with:
pip install git+git://github.com/Theano/Theano.git --upgrade --no-deps
Provide a link to a GitHub Gist of a Python script that can reproduce your issue (or just copy the script here if it is short).
code :
firstLSTM = LSTM(40, input_dim=np.array(train_x).shape[-1], return_sequences=True)
model.add(firstLSTM)
model.add(Dropout(0.1))
model.add(LSTM(30, return_sequences=True))
model.add(Dropout(0.1))
model.add(LSTM(20, return_sequences=True))
model.add(Dropout(0.1))
model.add(LSTM(1, return_sequences=True))
model.add(Activation('linear'))
train_x looks like :
[
[[1,2,3,4,5,6,7,8,9],[1,2,3,4,5,6,7,8,9]...]
...
[[1,2,3,4,5,6,7,8,9],[1,2,3,4,5,6,7,8,9]...]
]
This runs on my local windows box just fine. I am using Anaconda2. Installed Anaconda2 on a linux redhat server, exact same code when run gives the following error :
TypeError: ('The following error happened while compiling the node', forall_inplace,cpu,scan_fn}(Elemwise{Composite{Switch(EQ(i0, i1), i2, i0)}}[(0, 0)].0, Subtensor{int64:int64:int8}.0, IncSubtensor{InplaceSet;:int64:}.0, DeepCopyOp.0, Elemwise{Composite{Switch(EQ(i0, i1), i2, i0)}}[(0, 0)].0, lstm_4_U_o, lstm_4_U_f, lstm_4_U_i, lstm_4_U_c), '\n', "Inconsistency in the inner graph of scan 'scan_fn' : an input and an output are associated with the same recurrent state and should have the same type but have type 'TensorType(float32, col)' and 'TensorType(float32, matrix)' respectively.")
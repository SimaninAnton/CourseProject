ergysr commented on 27 Oct 2017
I have a NxN distance matrix D inside a loss function, and I would like to get the behavior:
eye = K.eye_like(D)
I have tried eye = K.eye(K.get_variable_shape(D)[0]). It returns the desired identity matrix outside the loss function. When I use it in the loss function I get the following error message:
eye = K.eye(K.get_variable_shape(D)[0])
File "C:\Users\Ergys\Anaconda3\lib\site-packages\keras\backend\tensorflow_backend.py", line 657, in eye
return variable(np.eye(size), dtype, name)
File "C:\Users\Ergys\Anaconda3\lib\site-packages\numpy\lib\twodim_base.py", line 180, in eye
m = zeros((N, M), dtype=dtype)
TypeError: 'NoneType' object cannot be interpreted as an integer
For now I hardcode the size of the matrix:
N = 72 
eye = K.eye(N)
However I would like to infer N from D. Any suggestions would be appreciated.
Custom loss function for hidden layers
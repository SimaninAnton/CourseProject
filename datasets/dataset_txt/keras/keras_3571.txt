Contributor
keunwoochoi commented on 30 Dec 2016
What should I do to make my custom layers available to be loaded using load_model()?
I used my custom layers in this repo both Spectrogram and Melspectrogram didn't work for load_model().
Error message:
>>> keras.models.load_model('model_best.hdf5')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/Users/gnu/anaconda/lib/python2.7/site-packages/keras/models.py", line 140, in load_model
    model = model_from_config(model_config, custom_objects=custom_objects)
  File "/Users/gnu/anaconda/lib/python2.7/site-packages/keras/models.py", line 189, in model_from_config
    return layer_from_config(config, custom_objects=custom_objects)
  File "/Users/gnu/anaconda/lib/python2.7/site-packages/keras/utils/layer_utils.py", line 34, in layer_from_config
    return layer_class.from_config(config['config'])
  File "/Users/gnu/anaconda/lib/python2.7/site-packages/keras/models.py", line 1055, in from_config
    layer = get_or_create_layer(first_layer)
  File "/Users/gnu/anaconda/lib/python2.7/site-packages/keras/models.py", line 1039, in get_or_create_layer
    layer = layer_from_config(layer_data)
  File "/Users/gnu/anaconda/lib/python2.7/site-packages/keras/utils/layer_utils.py", line 33, in layer_from_config
    instantiate=False)
  File "/Users/gnu/anaconda/lib/python2.7/site-packages/keras/utils/generic_utils.py", line 16, in get_from_module
    str(identifier))
Exception: Invalid layer: Melspectrogram
>>>
In the same manner, I think we should update layer customising documentation. My questions would be
if I have to use self.add_weight() method? or just appending them in self.trainable_weights is fine?
What do I have to do with get_config() method? When and how are they used?
How self.built is used?
12
vladdxc commented on 4 Mar 2019 â€¢
edited
Hi. I am training a variational autoencoder model using my own data generator. The model compiles fine but when I call the fit_generator method following error appears:
    Traceback (most recent call last):
 

     File "C:/Users/Vlad/Desktop/bachelorarbeit/autoencoder/vae_script.py", line 77, in <module>
        vae.fit_generator(generator=xtrain, use_multiprocessing= True, workers= 6)
      File "C:\Users\Vlad\Desktop\bachelorarbeit\autoencoder\venv\lib\site-packages\keras\legacy\interfaces.py", line 91, in wrapper
        return func(*args, **kwargs)
      File "C:\Users\Vlad\Desktop\bachelorarbeit\autoencoder\venv\lib\site-packages\keras\engine\training.py", line 1418, in fit_generator
        initial_epoch=initial_epoch)
      File "C:\Users\Vlad\Desktop\bachelorarbeit\autoencoder\venv\lib\site-packages\keras\engine\training_generator.py", line 217, in fit_generator
        class_weight=class_weight)
      File "C:\Users\Vlad\Desktop\bachelorarbeit\autoencoder\venv\lib\site-packages\keras\engine\training.py", line 1211, in train_on_batch
        class_weight=class_weight)
      File "C:\Users\Vlad\Desktop\bachelorarbeit\autoencoder\venv\lib\site-packages\keras\engine\training.py", line 789, in _standardize_user_data
        exception_prefix='target')
      File "C:\Users\Vlad\Desktop\bachelorarbeit\autoencoder\venv\lib\site-packages\keras\engine\training_utils.py", line 63, in standardize_input_data
        'expected no data, but got:', data)
    ValueError: ('Error when checking model target: expected no data, but got:', array([1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
           1, 1, 1, 1, 1, 1, 1, 1, 1, 1]))
    
    Process finished with exit code 1
As far as I can see the ValueError is raised by following lines in the trainings_util.py in the standardize_input_data method:
        if not names:
        if data is not None and hasattr(data, '__len__') and len(data):
            raise ValueError('Error when checking model ' +
                             exception_prefix + ': '
                             'expected no data, but got:', data)
        return []
where 'names' is according to the docstring a list of expected array names. I tried solving this problem by feeding the generator with a tuple of dicitionaries of the type ({'input': X}, {'output': y}) where X is the data and y the targets, but the same error is raised.
My question is what names should I pass to the generator or should I pass any names at all? Also another question would is how to solve this problem? Can you give me a hint on what I am missing?
I am using the lastest Keras version (2.2.4) with Tensorflow backend (version 1.12.0) on a Windows 10 64-Bit machine. The code for the generator class and the model script can be found here:
(1) Model: https://pastebin.com/YR9y9WAN
(2) Data generator: https://pastebin.com/UK7VyQe4
Thank you!
Please make sure that the boxes below are checked before you submit your issue.
If your issue is an implementation question, please ask your question on StackOverflow or on the Keras Slack channel instead of opening a GitHub issue.
Thank you!
[ x] Check that you are up-to-date with the master branch of Keras. You can update with:
pip install git+git://github.com/keras-team/keras.git --upgrade --no-deps
[ x] Check that your version of TensorFlow is up-to-date. The installation instructions can be found here.
Provide a link to a GitHub Gist of a Python script that can reproduce your issue (or just copy the script here if it is short).
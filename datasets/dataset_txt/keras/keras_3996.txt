adelsalehali1982 commented on 3 Nov 2016
I'm trying to covert this model :
https://github.com/yjxiong/caffe/tree/action_recog/models/action_recognition
which is in caffe to keras
to do that as small experimen I download prototxt
https://github.com/yjxiong/caffe/blob/action_recog/models/action_recognition/cuhk_action_spatial_vgg_16_deploy.prototxt
and the model file :
http://mmlab.siat.ac.cn/very_deep_two_stream_model/cuhk_action_spatial_vgg_16_split1.caffemodel
I'm try to convert using @MarcBS
https://github.com/MarcBS/keras
here is the command line:
python caffe2keras.py -load_path 'TSN/' -prototxt 'cuhk_action_spatial_vgg_16_deploy.prototxt' -caffemodel 'cuhk_action_spatial_vgg_16_split1.caffemodel'
But I got that IndexError: list index out of range
drop7 (Dropout) (None, 4096) 0 relu7[0][0]
fc8-1 (Dense) (None, 101) 413797 drop7[0][0]
Total params: 134637413
LOADING WEIGHTS
Traceback (most recent call last):
File "caffe2keras.py", line 45, in
main(args)
File "caffe2keras.py", line 34, in main
model = convert.caffe_to_keras(args.load_path+'/'+args.prototxt, args.load_path+'/'+args.caffemodel, debug=args.debug)
File "/usr/local/lib/python2.7/dist-packages/Keras-1.1.0-py2.7.egg/keras/caffe/convert.py", line 62, in caffe_to_keras
weights = convert_weights(param_layers, v, debug)
File "/usr/local/lib/python2.7/dist-packages/Keras-1.1.0-py2.7.egg/keras/caffe/convert.py", line 395, in convert_weights
nb_filter = int(blobs[0].shape.dim[0])
File "/usr/local/lib/python2.7/dist-packages/google/protobuf/internal/containers.py", line 204, in getitem
return self._values[key]
IndexError: list index out of range
Please tell me what is the problem
shnayder commented on 21 Mar 2017 â€¢
edited
The IMDB dataset in imdb.npz is broken or at least incompatible with the provided word index--converting reviews to a string gives nonsense (either the wrong words or mixed up word order--not sure). Example:
import keras
from keras.datasets import imdb
import cPickle as pickle
import os.path

word2index = imdb.get_word_index()
index2word = dict([(i,w) for (w,i) in word2index.items()])

# use new load_data
# (post https://github.com/fchollet/keras/commit/b0500764a8a451882262328c0f1676402fb0a783)
(x_train, y_train), (x_test, y_test) = imdb.load_data()

# Load manually downloaded old pickle file (before above commit)
# from https://s3.amazonaws.com/text-datasets/imdb_full.pkl
path = os.path.expanduser('~/.keras/datasets/imdb_full.pkl')
f = open(path, 'rb')
(x_train2, y_train2), (x_test2, y_test2) = pickle.load(f)

def totext(review):
    return ' '.join(index2word[i] for i in review)

print(keras.__version__)

print("New commit review -- makes no sense:")
print(totext(x_train[0][:20]))

print("\nOld commit review:")
print(totext(x_train2[0][:20]))
Output:
2.0.1
New commit review -- makes no sense:
the as you with out themselves powerful lets loves their becomes reaching had journalist of lot from anyone to have

Old commit review:
bromwell high is a cartoon comedy it ran at the same time as some other programs about school life such
Check that you are up-to-date with the master branch of Keras. You can update with:
pip install git+git://github.com/fchollet/keras.git --upgrade --no-deps
If running on TensorFlow, check that you are up-to-date with the latest version. The installation instructions can be found here.
[x ] Provide a link to a GitHub Gist of a Python script that can reproduce your issue (or just copy the script here if it is short).
1
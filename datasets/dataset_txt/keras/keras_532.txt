FiReTiTi commented on 17 Dec 2018
Hi,
I wanted to train a U-net, and everything works fine on my laptop with the tensorflow CPU version. However, on the cluster with a GPU, I can create and compile it, but when I call the fit_generator method I get the following error:
Traceback (most recent call last):
  File "Cluster.py", line 46, in <module>
unet.fit_generator(gen, steps_per_epoch=gen.getStepsPerEpoch(), epochs=101)
  File "/home/exacloud/tempwork/ChangLab/Guillaume/Python/lib/python3.5/site-packages/keras/legacy/interfaces.py", line 91, in wrapper
return func(*args, **kwargs)
  File "/home/exacloud/tempwork/ChangLab/Guillaume/Python/lib/python3.5/site-packages/keras/engine/training.py", line 1418, in fit_generator
initial_epoch=initial_epoch)
  File "/home/exacloud/tempwork/ChangLab/Guillaume/Python/lib/python3.5/site-packages/keras/engine/training_generator.py", line 40, in fit_generator
model._make_train_function()
  File "/home/exacloud/tempwork/ChangLab/Guillaume/Python/lib/python3.5/site-packages/keras/engine/training.py", line 509, in _make_train_function
loss=self.total_loss)
  File "/home/exacloud/tempwork/ChangLab/Guillaume/Python/lib/python3.5/site-packages/keras/legacy/interfaces.py", line 91, in wrapper
return func(*args, **kwargs)
  File "/home/exacloud/tempwork/ChangLab/Guillaume/Python/lib/python3.5/site-packages/keras/optimizers.py", line 410, in get_updates
self.updates.append(K.update(a, new_a))
  File "/home/exacloud/tempwork/ChangLab/Guillaume/Python/lib/python3.5/site-packages/keras/backend/tensorflow_backend.py", line 973, in update
return tf.assign(x, new_x)
  File "/home/exacloud/tempwork/ChangLab/Guillaume/Conda/DL35/lib/python3.5/site-packages/tensorflow/python/ops/state_ops.py", line 277, in assign
return ref.assign(value)
AttributeError: 'Tensor' object has no attribute 'assign'
So the exact same code runs perfectly on my laptop on the cpu only version of Tensorflow, but not on the GPU one.
Any idea what the issue may be?
Thanks in advance!
1
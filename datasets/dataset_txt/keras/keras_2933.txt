superhy commented on 18 Mar 2017
can not run the example mnist_acgan!
Traceback (most recent call last):
File "D:\mywork\eclipse\gan-test\gan\acgan_backload.py", line 224, in
epoch_disc_loss.append(discriminator.train_on_batch(X, [y, aux_y]))
File "C:\Anaconda2\lib\site-packages\keras\engine\training.py", line 1619, in train_on_batch
self._make_train_function()
File "C:\Anaconda2\lib\site-packages\keras\engine\training.py", line 1001, in _make_train_function
self.total_loss)
File "C:\Anaconda2\lib\site-packages\keras\optimizers.py", line 381, in get_updates
grads = self.get_gradients(loss, params)
File "C:\Anaconda2\lib\site-packages\keras\optimizers.py", line 47, in get_gradients
grads = K.gradients(loss, params)
File "C:\Anaconda2\lib\site-packages\keras\backend\theano_backend.py", line 1085, in gradients
return T.grad(loss, variables)
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 561, in grad
grad_dict, wrt, cost_name)
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 1324, in _populate_grad_dict
rval = [access_grad_cache(elem) for elem in wrt]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 1279, in access_grad_cache
term = access_term_cache(node)[idx]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 973, in access_term_cache
output_grads = [access_grad_cache(var) for var in node.outputs]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 1279, in access_grad_cache
term = access_term_cache(node)[idx]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 973, in access_term_cache
output_grads = [access_grad_cache(var) for var in node.outputs]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 1279, in access_grad_cache
term = access_term_cache(node)[idx]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 973, in access_term_cache
output_grads = [access_grad_cache(var) for var in node.outputs]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 1279, in access_grad_cache
term = access_term_cache(node)[idx]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 973, in access_term_cache
output_grads = [access_grad_cache(var) for var in node.outputs]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 1279, in access_grad_cache
term = access_term_cache(node)[idx]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 973, in access_term_cache
output_grads = [access_grad_cache(var) for var in node.outputs]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 1279, in access_grad_cache
term = access_term_cache(node)[idx]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 973, in access_term_cache
output_grads = [access_grad_cache(var) for var in node.outputs]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 1279, in access_grad_cache
term = access_term_cache(node)[idx]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 973, in access_term_cache
output_grads = [access_grad_cache(var) for var in node.outputs]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 1279, in access_grad_cache
term = access_term_cache(node)[idx]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 973, in access_term_cache
output_grads = [access_grad_cache(var) for var in node.outputs]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 1279, in access_grad_cache
term = access_term_cache(node)[idx]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 973, in access_term_cache
output_grads = [access_grad_cache(var) for var in node.outputs]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 1279, in access_grad_cache
term = access_term_cache(node)[idx]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 973, in access_term_cache
output_grads = [access_grad_cache(var) for var in node.outputs]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 1279, in access_grad_cache
term = access_term_cache(node)[idx]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 973, in access_term_cache
output_grads = [access_grad_cache(var) for var in node.outputs]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 1279, in access_grad_cache
term = access_term_cache(node)[idx]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 973, in access_term_cache
output_grads = [access_grad_cache(var) for var in node.outputs]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 1279, in access_grad_cache
term = access_term_cache(node)[idx]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 973, in access_term_cache
output_grads = [access_grad_cache(var) for var in node.outputs]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 1279, in access_grad_cache
term = access_term_cache(node)[idx]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 973, in access_term_cache
output_grads = [access_grad_cache(var) for var in node.outputs]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 1279, in access_grad_cache
term = access_term_cache(node)[idx]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 973, in access_term_cache
output_grads = [access_grad_cache(var) for var in node.outputs]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 1279, in access_grad_cache
term = access_term_cache(node)[idx]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 973, in access_term_cache
output_grads = [access_grad_cache(var) for var in node.outputs]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 1279, in access_grad_cache
term = access_term_cache(node)[idx]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 973, in access_term_cache
output_grads = [access_grad_cache(var) for var in node.outputs]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 1279, in access_grad_cache
term = access_term_cache(node)[idx]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 973, in access_term_cache
output_grads = [access_grad_cache(var) for var in node.outputs]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 1279, in access_grad_cache
term = access_term_cache(node)[idx]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 973, in access_term_cache
output_grads = [access_grad_cache(var) for var in node.outputs]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 1279, in access_grad_cache
term = access_term_cache(node)[idx]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 973, in access_term_cache
output_grads = [access_grad_cache(var) for var in node.outputs]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 1279, in access_grad_cache
term = access_term_cache(node)[idx]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 973, in access_term_cache
output_grads = [access_grad_cache(var) for var in node.outputs]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 1279, in access_grad_cache
term = access_term_cache(node)[idx]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 973, in access_term_cache
output_grads = [access_grad_cache(var) for var in node.outputs]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 1279, in access_grad_cache
term = access_term_cache(node)[idx]
File "C:\Anaconda2\lib\site-packages\theano\gradient.py", line 1113, in access_term_cache
input_grads = node.op.grad(inputs, new_output_grads)
File "C:\Anaconda2\lib\site-packages\theano\tensor\nnet\abstract_conv.py", line 828, in grad
d_bottom = bottom.type.filter_variable(d_bottom)
File "C:\Anaconda2\lib\site-packages\theano\tensor\type.py", line 233, in filter_variable
self=self))
TypeError: Cannot convert Type TensorType(float32, 4D) (of Variable AbstractConv2d_gradInputs{border_mode='half', subsample=(1, 1), filter_flip=True, imshp=(None, 128, 4, 4), kshp=(256, 128, 3, 3)}.0) into Type TensorType(float64, 4D). You can try to manually convert AbstractConv2d_gradInputs{border_mode='half', subsample=(1, 1), filter_flip=True, imshp=(None, 128, 4, 4), kshp=(256, 128, 3, 3)}.0 into a TensorType(float64, 4D).
Contributor
jdoerrie commented on 1 Aug 2016
Please make sure that the boxes below are checked before you submit your issue. Thank you!
Check that you are up-to-date with the master branch of Keras. You can update with:
pip install git+git://github.com/fchollet/keras.git --upgrade --no-deps
If running on Theano, check that you are up-to-date with the master branch of Theano. You can update with:
pip install git+git://github.com/Theano/Theano.git --upgrade --no-deps
Provide a link to a GitHub Gist of a Python script that can reproduce your issue (or just copy the script here if it is short).
Currently the TensorBoard callback is able to create histograms and tries to give them meaningful names by appending _W for weights, _b for biases and _out for output layers: https://github.com/fchollet/keras/blob/master/keras/callbacks.py#L473-L479
However, since it passes the raw layer instance to str.format, the resulting histograms have rather cryptic and unintuitive names:
I propose to use the layer.name instead, resulting in histograms like this:
In my opinion this is a better way, especially when you have multiple layers of the same kind. For example, only in the second screenshot you would know where in the model a given activation layer lies.
Now there are (at least) two ways to achieve this. The most straightforward way would be to replace all usages of str.format(layer) with str.format(layer.name) in callbacks.TensorBoard. This will certainly work as expected. However, also other places in the code might benefit from a more human readable version of layers, so I propose adding a
def __repr__(self):
    return self.name
method to keras.engine.Layer. In my opinion this is cleaner and possibly helpful for other parts of the codebase. However it also introduces a global change where a local change has the same effect. I wanted to create this issue to double check whether other people agree with me that the second option of naming histograms is better, and to discuss the two proposed changes. I am happy to create a PR once a decision is made.
3
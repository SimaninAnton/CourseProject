Tangzy7 commented on 19 May 2017
the issue happened when callbacks are called.
logger = CSVLogger('train_log.log')

cp = ModelCheckpoint("voc_best.hdf5")
model.fit_generator(batch_generator(train_df, 32, 'train'),
        1+len(train_df)//32,
        epochs=num_steps,
        validation_data=batch_generator(val_df, 16,'val'),
        validation_steps=1+len(val_df)//16,
        callbacks=[cp, logger])
Traceback (most recent call last):
File "train_overfit.py", line 249, in
_main()
File "train_overfit.py", line 211, in _main
callbacks=[cp, logger])
File "/data1/tangzy/anaconda3/lib/python3.5/site-packages/keras/legacy/interfaces.py", line 88, in wrapper
return func(*args, **kwargs)
File "/data1/tangzy/anaconda3/lib/python3.5/site-packages/keras/engine/training.py", line 1927, in fit_generator
callbacks.on_epoch_end(epoch, epoch_logs)
File "/data1/tangzy/anaconda3/lib/python3.5/site-packages/keras/callbacks.py", line 77, in on_epoch_end
callback.on_epoch_end(epoch, logs)
File "/data1/tangzy/anaconda3/lib/python3.5/site-packages/keras/callbacks.py", line 413, in on_epoch_end
self.model.save(filepath, overwrite=True)
File "/data1/tangzy/anaconda3/lib/python3.5/site-packages/keras/engine/topology.py", line 2472, in save
save_model(self, filepath, overwrite, include_optimizer)
File "/data1/tangzy/anaconda3/lib/python3.5/site-packages/keras/models.py", line 103, in save_model
}, default=get_json_type).encode('utf8')
File "/data1/tangzy/anaconda3/lib/python3.5/json/init.py", line 237, in dumps
**kw).encode(obj)
File "/data1/tangzy/anaconda3/lib/python3.5/json/encoder.py", line 198, in encode
chunks = self.iterencode(o, _one_shot=True)
File "/data1/tangzy/anaconda3/lib/python3.5/json/encoder.py", line 256, in iterencode
return _iterencode(o, 0)
File "/data1/tangzy/anaconda3/lib/python3.5/site-packages/keras/models.py", line 77, in get_json_type
return obj.item()
ValueError: can only convert an array of size 1 to a Python scalar
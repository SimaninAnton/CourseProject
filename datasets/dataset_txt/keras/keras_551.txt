marc88 commented on 8 Dec 2018 â€¢
edited
Hello,
Every bit of my code remains on the CPU until model.fit() is called as below:
with tf.device('/cpu:0'):
    model.fit(ar_train_data,train_label,validation_data=(ar_valid_data,valid_label),epochs=10,batch_size=batch_size)
As seen, am trying to run the code explicitly on CPU but, it doesn't seem to work and the model takes up all of the free GPU. (PID 4469 is my process as suggested)
Even, on trying to run on GPU the Jupyter notebook kernel just crashes when model.fit() is called.
I tried controlling this behaviour such that it uses 50 pc GPU like so, but that didn't work either:
config = tf.ConfigProto(device_count={'GPU':1,'CPU':1})
config.gpu_options.allow_growth = True
config.gpu_options.per_process_gpu_memory_fraction = 0.5
sess = tf.Session(config=config)
k.set_session(sess)
Keras version: 2.2.4
Tensorflow version: 1.5.0
Can anyone help here?
Is there any issue with my versions?
Regards
bobobo1618 commented on 3 Dec 2015
Not sure what's going on but I haven't managed to get a single model running. I'm using the example from the docs but I've tried numerous other variations. It consistently expects the input dimensionality to be 3, regardless of what I tell it. Setting input_dim to 1 or 2 still results in an expectation of 3.
import keras
from keras.models import Sequential  
from keras.layers.core import TimeDistributedDense, Dense, Activation, Dropout
from keras.layers.recurrent import LSTM

batch_size = 30

model = Sequential()
model.add(LSTM(5, return_sequences=True, input_shape=(batch_size, feature_size)))
model.add(TimeDistributedDense(15))
model.add(Activation("linear"))  

model.compile(loss="mean_squared_error", optimizer="rmsprop") 
model.fit(features, labels, batch_size=batch_size, nb_epoch=30, validation_split=0.05) 
TypeError                                 Traceback (most recent call last)
<ipython-input-62-246d4f2feae6> in <module>()
      2 labels = train[[num for num in xrange(feature_size, numcolumns)]].as_matrix().astype('float32')
      3 
----> 4 model.fit(features, labels, batch_size=batch_size, nb_epoch=30, validation_split=0.05)

/Users/user/.virtualenvs/algo2/lib/python2.7/site-packages/keras/models.pyc in fit(self, X, y, batch_size, nb_epoch, verbose, callbacks, validation_split, validation_data, shuffle, show_accuracy, class_weight, sample_weight)
    505                          verbose=verbose, callbacks=callbacks,
    506                          val_f=val_f, val_ins=val_ins,
--> 507                          shuffle=shuffle, metrics=metrics)
    508 
    509     def predict(self, X, batch_size=128, verbose=0):

/Users/user/.virtualenvs/algo2/lib/python2.7/site-packages/keras/models.pyc in _fit(self, f, ins, out_labels, batch_size, nb_epoch, verbose, callbacks, val_f, val_ins, shuffle, metrics)
    224                 batch_logs['size'] = len(batch_ids)
    225                 callbacks.on_batch_begin(batch_index, batch_logs)
--> 226                 outs = f(ins_batch)
    227                 if type(outs) != list:
    228                     outs = [outs]

/Users/user/.virtualenvs/algo2/lib/python2.7/site-packages/keras/backend/theano_backend.pyc in __call__(self, inputs)
    355 
    356     def __call__(self, inputs):
--> 357         return self.function(*inputs)
    358 
    359 

/Users/user/.virtualenvs/algo2/lib/python2.7/site-packages/theano/compile/function_module.pyc in __call__(self, *args, **kwargs)
    511                     try:
    512                         s.storage[0] = s.type.filter(arg, strict=s.strict,
--> 513                                 allow_downcast=s.allow_downcast)
    514 
    515                     except Exception, e:

/Users/user/.virtualenvs/algo2/lib/python2.7/site-packages/theano/tensor/type.pyc in filter(self, data, strict, allow_downcast)
    167             raise TypeError("Wrong number of dimensions: expected %s,"
    168                             " got %s with shape %s." % (self.ndim, data.ndim,
--> 169                                                         data.shape))
    170         if not data.flags.aligned:
    171             try:

TypeError: ('Bad input argument to theano function with name "/Users/user/.virtualenvs/algo2/lib/python2.7/site-packages/keras/backend/theano_backend.py:354"  at index 0(0-based)', 'Wrong number of dimensions: expected 3, got 2 with shape (30, 403).')
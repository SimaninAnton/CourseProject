darugar commented on 19 Apr 2016
Keras 1.0.0 with Theano 8.1.0 on linux, Titan X GPU:
I get different convergence characteristics from fit vs fit_generator - fit converges to a reasonable solution, but fit_generator does not.
Here's the code: https://gist.github.com/darugar/b83c70284acce912542431f6999578ae
I have a model with 5 convolution layers, 3 dense (I see the same issue with other models).
When I load all of the training data into memory and train the network with fit I get a decrease in loss, increase in accuracy.
When I load the same model with the same data, but this time via a data generator and fit_generator, I get increasing loss, poor accuracy.
I've confirmed that the data returned by the data generator is the same as the data in memory by collating the generated data and comparing with the in-memory.
I'm using a thread based model to load data into the generator in the background, but otherwise nothing exotic. I use only a single thread for reader, so hopefully no strange thread interaction issues.
My data is 9x64x64, 70k training samples, 30k validation.
Loss graph for fit (in-memory data). Blue is training loss, green is validation:
Loss graph for fit_generator:
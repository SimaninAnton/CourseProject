PaulDufort commented on 12 Jun 2017
Hi, trying to run the variational_autoencoder.py example with the tensorflow distribution of keras. The first couple of problems can be fixed with minor edits:
Need to change all "from keras.X import Y" import statements to "from tensorflow.contrib.keras.python.keras.X import Y". No problem there.
Need to remove the "output_shape=(latent_dim,)" parameter from line 36 so it becomes "z = Lambda(sampling)([z_mean, z_log_var])". No problem there either.
But then the following output is generated:
C:\Users\paul.dufort\AppData\Local\Continuum\Anaconda3\envs\tensorflow\lib\site-
packages\tensorflow\contrib\keras\python\keras\engine\topology.py:1504: UserWarning: Model inputs must come from a Keras Input layer, they cannot be the output of a previous non-Input layer. Here, a tensor specified as input to "model_1" was not an Input tensor, it was generated by layer custom_variational_layer_1. Note that input tensors are instantiated via tensor = Input(shape).
The tensor that caused the issue was: input_1:0
'The tensor that caused the issue was: ' + str(x.name))
C:\Users\paul.dufort\AppData\Local\Continuum\Anaconda3\envs\tensorflow\lib\site-
packages\tensorflow\contrib\keras\python\keras\engine\training.py:740: UserWarning: Output "custom_variational_layer_1" missing from loss dictionary. We assume this was done on purpose, and we will not be expecting any data to be passed to "custom_variational_layer_1" during training.
'" during training.')
Traceback (most recent call last):
File "variational_autoencoder.py", line 81, in
validation_data=(x_test, x_test))
File "C:\Users\paul.dufort\AppData\Local\Continuum\Anaconda3\envs\tensorflow\l
ib\site-packages\tensorflow\contrib\keras\python\keras\engine\training.py", line
1426, in fit
batch_size=batch_size)
File "C:\Users\paul.dufort\AppData\Local\Continuum\Anaconda3\envs\tensorflow\l
ib\site-packages\tensorflow\contrib\keras\python\keras\engine\training.py", line
1305, in _standardize_user_data
exception_prefix='model target')
File "C:\Users\paul.dufort\AppData\Local\Continuum\Anaconda3\envs\tensorflow\l
ib\site-packages\tensorflow\contrib\keras\python\keras\engine\training.py", line
118, in _standardize_input_data
'Found: array with shape ' + str(data.shape))
ValueError: The model expects 0 input arrays, but only received one array. Found
: array with shape (10000, 784)
This seems to suggest that on line 65 "vae = Model(x, y)", it is taking y to be the input. Any ideas?
Thanks,
Paul
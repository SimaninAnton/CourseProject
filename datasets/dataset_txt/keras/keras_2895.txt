jihopark commented on 22 Mar 2017
Please make sure that the boxes below are checked before you submit your issue. If your issue is an implementation question, please ask your question on StackOverflow or join the Keras Slack channel and ask there instead of filing a GitHub issue.
Thank you!
Check that you are up-to-date with the master branch of Keras. You can update with:
pip install git+git://github.com/fchollet/keras.git --upgrade --no-deps
If running on TensorFlow, check that you are up-to-date with the latest version. The installation instructions can be found here.
If running on Theano, check that you are up-to-date with the master branch of Theano. You can update with:
pip install git+git://github.com/Theano/Theano.git --upgrade --no-deps
Provide a link to a GitHub Gist of a Python script that can reproduce your issue (or just copy the script here if it is short).
Hi, I am using Keras layers for my Tensorflow model following this tutorial (https://blog.keras.io/keras-as-a-simplified-interface-to-tensorflow-tutorial.html)
I am saving my model into a checkpoint file using tf.Saver and loading it back. I have a dropout layer in my model, so I am setting the K.learning_phase:0 for testing. However, it seems like it is not getting the key-value from the feed_dict.
saver = tf.train.import_meta_graph(log_path + file_name + ".meta", clear_devices=True)
graph = tf.get_default_graph()

pred_op = graph.get_operation_by_name("prediction/prediction")
# placerholders
labels = graph.get_tensor_by_name("input/labels:0")
X = graph.get_tensor_by_name("input/X:0")

with tf.Session(config=session_conf) as sess:
    K.set_session(sess)
    saver.restore(sess, log_path + file_name)
    feed_dict = {
        labels: y_test,
        X: x_test,
        K.learning_phase(): 0
    }
    pred = sess.run(pred_op, feed_dict)
I am getting the Error:
tensorflow.python.framework.errors_impl.InvalidArgumentError: You must feed a value for placeholder tensor 'nn-layers/fully-connected-layer-0/dropout_1/keras_learning_phase' with dtype bool
This is quiet strange since setting the learning_phase=0 was working very well when the model was training and evaluating.
I tried to save the checkpoint file after setting K.set_learning_phase(0) but still does not work.
3
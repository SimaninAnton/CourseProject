Kevinpsk commented on 2 Jul 2017
Hi guys,
I am using Keras for a binary classification problem, and very happy with the default functions provided in Keras. Now I want to plot and update a ROC curve obtained from the validation data at the end of each epoch to visualize the Area under the curve (AUC). But my problem is I can indeed generate a plot at the end of the first epoch, but the figure just freezes and shows nothing, and indicates on the top as "Not responding". However, when I manually kill training in spyder ipython, it shows the latest ROC curve obtained from where I stopped training. I really do not understanding why my ROC can not show and be updated properly during training. Please see the attached pics for details of my problem in the ROC curve.

I made a custom callback function for this and my code specially for creating the ROC curve is the following: (Please note that I did not include the part for calculating the false accept per hour (FA_perhour) and false reject rate (FR_rate) and I am confident that they are correct.)
`
import matplotlib.pyplot as plt
class Monitor_AUC(Callback):
def on_epoch_end(self, epoch, logs=None):
    plt.ion()
    if self.genROC:  
        if self.fig == None:
            self.fig = plt.figure()
            self.ax = self.fig.add_subplot(111)
            self.ax.set_title('ROC curve', fontsize=18, fontweight='bold')
            self.ax.set_xlabel('False accept per hour', fontsize=16)
            self.ax.set_ylabel('False reject rate', fontsize=16)
            self.ax.set_xlim(0,70)
            self.ax.set_ylim(0,1)
            for label in (self.ax.get_xticklabels() + self.ax.get_yticklabels()):
                label.set_fontsize(14)
            
        if hasattr(self, 'ROCline'):
            self.ROCline.set_xdata(FA_perhour)
            self.ROCline.set_ydata(FR_rate)
            plt.draw()
        else:
            self.ROCline, = self.ax.plot(FA_perhour, FR_rate, '-sg', linewidth = 2.0, markersize = 4.0)  
            plt.draw()                
`
I am not sure if this is a matplotlib problem or a Keras problem. My current guess is that there is some operation in Keras that stops the figure from showing properly, because I also isolated this ROC part and ran it solely in Matplotlib and it worked. But as I said I am not sure about this and do not know how to solve it. So could anyone offer some help for this? Thanks a lot in advance.
Cheers,
Shuokai
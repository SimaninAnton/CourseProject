Performance issue with multiple loss functions
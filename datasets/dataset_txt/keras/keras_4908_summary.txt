Computing gradients for custom optimization routine (and actor-critic RL methods)
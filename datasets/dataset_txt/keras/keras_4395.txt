Contributor
jmhessel commented on 13 Sep 2016 â€¢
edited
A quick heads up, I think that model saving may have been broken since 1.0.8.
When I save using the most recent version of keras using model.save I get
    model.save(params['output_model'])
  File "/usr/local/lib/python2.7/dist-packages/Keras-1.0.8-py2.7.egg/keras/engine/topology.py", line 2423, in save
    save_model(self, filepath, overwrite)
  File "/usr/local/lib/python2.7/dist-packages/Keras-1.0.8-py2.7.egg/keras/models.py", line 53, in save_model
    }, default=get_json_type).encode('utf8')
  File "/usr/lib/python2.7/json/__init__.py", line 251, in dumps
    sort_keys=sort_keys, **kw).encode(obj)
  File "/usr/lib/python2.7/json/encoder.py", line 207, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/lib/python2.7/json/encoder.py", line 270, in iterencode
    return _iterencode(o, 0)
  File "/usr/local/lib/python2.7/dist-packages/Keras-1.0.8-py2.7.egg/keras/models.py", line 37, in get_json_type
    raise TypeError('Not JSON Serializable:', obj)
TypeError: ('Not JSON Serializable:', <CudaNdarrayType(float32, vector)>)
I am training on a GPU.
However, when I download + install the 1.0.8 release, I am able to save successfully using the same code.
It's a very simple model. In fact, it only has 8 parameters.
Layer (type)                     Output Shape          Param #     Connected to                     
lambda_2 (Lambda)                (None, 8)             0           lambda_input_2[0][0]             
dense_2 (Dense)                  (None, 1)             8           lambda_2[0][0]                   
Total params: 8
Here is the model in zip form, saved successfully from the 1.0.8 release.
example.model.zip
>>> theano.__version__
'0.9.0dev2.dev-c1dfa69ce084fc7be0fc18ccb79f3d44e9129f73'
>>> keras.__version__
'1.0.8'
1
iev6 commented on 5 Dec 2016
Sorry if I haven't followed some/many of the posting rules, first time poster, please excuse me.
I was unable to run my net on keras (with TF backend), a simple extension of the CIFAR 10 example. I have been using Keras for the past two weeks, and everything worked fine until now.
I did try quitting and running it again, but still some python process still seems to take up ~1.2GB of GPU memory, as seen in nvidia-smi screenshot.
gc.collect() also didn't work.
It would be great if someone cold
Check that you are up-to-date with the master branch of Keras. You can update with:
pip install git+git://github.com/fchollet/keras.git --upgrade --no-deps
If running on Theano, check that you are up-to-date with the master branch of Theano. You can update with:
pip install git+git://github.com/Theano/Theano.git --upgrade --no-deps
< Tensorflow backend is being used>
https://gist.github.com/iev6/183615b3cba2b885d2077dca69fb4d55
Useful text and screenshots :
< I use ipython qtconsole, this was in the terminal>
Limit: 1092419584
InUse: 594185472
MaxInUse: 1092419328
NumAllocs: 355
MaxAllocSize: 562073344
W tensorflow/core/common_runtime/bfc_allocator.cc:270] ************************************************____________________________________________
W tensorflow/core/common_runtime/bfc_allocator.cc:271] Ran out of memory trying to allocate 496.12MiB. See logs for memory state.
W tensorflow/core/framework/op_kernel.cc:968] Resource exhausted: OOM when allocating tensor with shape[128,126,126,64]
Contributor
israelg99 commented on 24 Nov 2016 â€¢
edited
Check that you are up-to-date with the master branch of Keras. You can update with:
pip install git+git://github.com/fchollet/keras.git --upgrade --no-deps
Provide a link to a GitHub Gist of a Python script that can reproduce your issue (or just copy the script here if it is short).
Keras crashes whenever you use the TensorBoard callback with histograms over multiple runs, the first run is always successful, but the second run fails right after the first epoch(when callbacks are called).
Code for reproducibility(validation data has to be passed for TensorBoard histograms to be computed):
data = np.random.random((1000, 784))
labels = np.random.randint(2, size=(1000, 1))

val_data = np.random.random((1000, 784))
val_labels = np.random.randint(2, size=(1000, 1))

for _ in range(3):
    model = Sequential()

    model.add(Dense(784, input_dim=784))
    model.add(Activation('relu'))

    model.add(Dense(784))
    model.add(Activation('relu'))
    
    model.add(Dense(784))
    model.add(Activation('relu'))

    model.add(Dense(1))
    model.add(Activation('sigmoid'))

    model.compile(optimizer='sgd', loss='binary_crossentropy')

    model.fit(data, labels, validation_data=(val_data, val_labels),
            nb_epoch=10, batch_size=32, callbacks=[TensorBoard(histogram_freq=1)])
Error(a bunch of these):
W tensorflow/core/framework/op_kernel.cc:968] Invalid argument:
You must feed a value for placeholder tensor 'dense_input_1' with dtype float

[[Node: dense_input_1 = Placeholder[dtype=DT_FLOAT, shape=[], _device="/job:localhost/replica:0/task:0/gpu:0"]()]]
1
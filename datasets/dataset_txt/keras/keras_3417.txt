anguillanneuf commented on 20 Jan 2017 â€¢
edited
I have a model that looks roughly like below. I discovered something odd while preparing a live demo of it running on Windows. The second BatchNormalization() layer in the code couldn't pass muster with Windows, while it ran fine on Mac. All other batch norm layers have no issue. Once the problematic one gets commented out, the model compiles.
Here is the error message: TypeError: Expected binary or unicode string, got 1
def get_model():

    model = Sequential()
    
    model.add(Convolution2D(2, 3, 3, input_shape = (3, 32, 64)))
    model.add(BatchNormalization())
    # some code... 
    model.add(Flatten())
    model.add(BatchNormalization()) # This line throws an error on Windows
    # some code... 
    model.add(Dense(512))
    model.add(BatchNormalization())
    # some code...
    model.add(Dense(1))

    model.compile(optimizer="adam", loss="mse")

    return model
    
model = get_model()
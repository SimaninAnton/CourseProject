yananchen1989 commented on 31 Aug 2018
I want to use my model to predict 10000 rows every time on CPU. I tried this code below to let the prediction only use one CPU every prediction. But I find that in htop, there are 40 cores working.
There are overall 80 cores on my machine.
So how to set the config to limit the cores used when predicting ?
session_conf = tf.ConfigProto(
      intra_op_parallelism_threads=1,
      inter_op_parallelism_threads=1)

sess = tf.Session(config=session_conf)

while 1:
    pred = model.predict(validation_x, verbose=1, steps=1)
My final intention is to use all the 80 cores to predict to speed up the prediction. At this moment, predicting 10000 rows need 375ms. Any good method to speed up to limit the prediction time within 100 ms ? Thanks.